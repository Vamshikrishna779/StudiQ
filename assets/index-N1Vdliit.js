(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function zM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xy={exports:{}},Wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function BM(){if(AT)return Wu;AT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Wu.Fragment=t,Wu.jsx=e,Wu.jsxs=e,Wu}var CT;function HM(){return CT||(CT=1,xy.exports=BM()),xy.exports}var w=HM(),Ty={exports:{}},Mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function qM(){if(RT)return Mt;RT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,N={};function C(U,it,ht){this.props=U,this.context=it,this.refs=N,this.updater=ht||T}C.prototype.isReactComponent={},C.prototype.setState=function(U,it){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,it,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function L(){}L.prototype=C.prototype;function q(U,it,ht){this.props=U,this.context=it,this.refs=N,this.updater=ht||T}var G=q.prototype=new L;G.constructor=q,S(G,C.prototype),G.isPureReactComponent=!0;var J=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},ct=Object.prototype.hasOwnProperty;function M(U,it,ht,ut,yt,It){return ht=It.ref,{$$typeof:n,type:U,key:it,ref:ht!==void 0?ht:null,props:It}}function I(U,it){return M(U.type,it,void 0,void 0,void 0,U.props)}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var it={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ht){return it[ht]})}var V=/\/+/g;function j(U,it){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):it.toString(36)}function D(){}function Bt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(it){U.status==="pending"&&(U.status="fulfilled",U.value=it)},function(it){U.status==="pending"&&(U.status="rejected",U.reason=it)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function bt(U,it,ht,ut,yt){var It=typeof U;(It==="undefined"||It==="boolean")&&(U=null);var st=!1;if(U===null)st=!0;else switch(It){case"bigint":case"string":case"number":st=!0;break;case"object":switch(U.$$typeof){case n:case t:st=!0;break;case p:return st=U._init,bt(st(U._payload),it,ht,ut,yt)}}if(st)return yt=yt(U),st=ut===""?"."+j(U,0):ut,J(yt)?(ht="",st!=null&&(ht=st.replace(V,"$&/")+"/"),bt(yt,it,ht,"",function(Kt){return Kt})):yt!=null&&(k(yt)&&(yt=I(yt,ht+(yt.key==null||U&&U.key===yt.key?"":(""+yt.key).replace(V,"$&/")+"/")+st)),it.push(yt)),1;st=0;var Dt=ut===""?".":ut+":";if(J(U))for(var xt=0;xt<U.length;xt++)ut=U[xt],It=Dt+j(ut,xt),st+=bt(ut,it,ht,It,yt);else if(xt=v(U),typeof xt=="function")for(U=xt.call(U),xt=0;!(ut=U.next()).done;)ut=ut.value,It=Dt+j(ut,xt++),st+=bt(ut,it,ht,It,yt);else if(It==="object"){if(typeof U.then=="function")return bt(Bt(U),it,ht,ut,yt);throw it=String(U),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return st}function Q(U,it,ht){if(U==null)return U;var ut=[],yt=0;return bt(U,ut,"","",function(It){return it.call(ht,It,yt++)}),ut}function ot(U){if(U._status===-1){var it=U._result;it=it(),it.then(function(ht){(U._status===0||U._status===-1)&&(U._status=1,U._result=ht)},function(ht){(U._status===0||U._status===-1)&&(U._status=2,U._result=ht)}),U._status===-1&&(U._status=0,U._result=it)}if(U._status===1)return U._result.default;throw U._result}var lt=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function gt(){}return Mt.Children={map:Q,forEach:function(U,it,ht){Q(U,function(){it.apply(this,arguments)},ht)},count:function(U){var it=0;return Q(U,function(){it++}),it},toArray:function(U){return Q(U,function(it){return it})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Mt.Component=C,Mt.Fragment=e,Mt.Profiler=s,Mt.PureComponent=q,Mt.StrictMode=i,Mt.Suspense=d,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return H.H.useMemoCache(U)}},Mt.cache=function(U){return function(){return U.apply(null,arguments)}},Mt.cloneElement=function(U,it,ht){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ut=S({},U.props),yt=U.key,It=void 0;if(it!=null)for(st in it.ref!==void 0&&(It=void 0),it.key!==void 0&&(yt=""+it.key),it)!ct.call(it,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&it.ref===void 0||(ut[st]=it[st]);var st=arguments.length-2;if(st===1)ut.children=ht;else if(1<st){for(var Dt=Array(st),xt=0;xt<st;xt++)Dt[xt]=arguments[xt+2];ut.children=Dt}return M(U.type,yt,void 0,void 0,It,ut)},Mt.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},Mt.createElement=function(U,it,ht){var ut,yt={},It=null;if(it!=null)for(ut in it.key!==void 0&&(It=""+it.key),it)ct.call(it,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(yt[ut]=it[ut]);var st=arguments.length-2;if(st===1)yt.children=ht;else if(1<st){for(var Dt=Array(st),xt=0;xt<st;xt++)Dt[xt]=arguments[xt+2];yt.children=Dt}if(U&&U.defaultProps)for(ut in st=U.defaultProps,st)yt[ut]===void 0&&(yt[ut]=st[ut]);return M(U,It,void 0,void 0,null,yt)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(U){return{$$typeof:u,render:U}},Mt.isValidElement=k,Mt.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:ot}},Mt.memo=function(U,it){return{$$typeof:f,type:U,compare:it===void 0?null:it}},Mt.startTransition=function(U){var it=H.T,ht={};H.T=ht;try{var ut=U(),yt=H.S;yt!==null&&yt(ht,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(gt,lt)}catch(It){lt(It)}finally{H.T=it}},Mt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Mt.use=function(U){return H.H.use(U)},Mt.useActionState=function(U,it,ht){return H.H.useActionState(U,it,ht)},Mt.useCallback=function(U,it){return H.H.useCallback(U,it)},Mt.useContext=function(U){return H.H.useContext(U)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(U,it){return H.H.useDeferredValue(U,it)},Mt.useEffect=function(U,it,ht){var ut=H.H;if(typeof ht=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ut.useEffect(U,it)},Mt.useId=function(){return H.H.useId()},Mt.useImperativeHandle=function(U,it,ht){return H.H.useImperativeHandle(U,it,ht)},Mt.useInsertionEffect=function(U,it){return H.H.useInsertionEffect(U,it)},Mt.useLayoutEffect=function(U,it){return H.H.useLayoutEffect(U,it)},Mt.useMemo=function(U,it){return H.H.useMemo(U,it)},Mt.useOptimistic=function(U,it){return H.H.useOptimistic(U,it)},Mt.useReducer=function(U,it,ht){return H.H.useReducer(U,it,ht)},Mt.useRef=function(U){return H.H.useRef(U)},Mt.useState=function(U){return H.H.useState(U)},Mt.useSyncExternalStore=function(U,it,ht){return H.H.useSyncExternalStore(U,it,ht)},Mt.useTransition=function(){return H.H.useTransition()},Mt.version="19.1.0",Mt}var IT;function rv(){return IT||(IT=1,Ty.exports=qM()),Ty.exports}var z=rv();const cr=zM(z);var Sy={exports:{}},Gu={},Ay={exports:{}},Cy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function WM(){return NT||(NT=1,function(n){function t(Q,ot){var lt=Q.length;Q.push(ot);t:for(;0<lt;){var gt=lt-1>>>1,U=Q[gt];if(0<s(U,ot))Q[gt]=ot,Q[lt]=U,lt=gt;else break t}}function e(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ot=Q[0],lt=Q.pop();if(lt!==ot){Q[0]=lt;t:for(var gt=0,U=Q.length,it=U>>>1;gt<it;){var ht=2*(gt+1)-1,ut=Q[ht],yt=ht+1,It=Q[yt];if(0>s(ut,lt))yt<U&&0>s(It,ut)?(Q[gt]=It,Q[yt]=lt,gt=yt):(Q[gt]=ut,Q[ht]=lt,gt=ht);else if(yt<U&&0>s(It,lt))Q[gt]=It,Q[yt]=lt,gt=yt;else break t}}return ot}function s(Q,ot){var lt=Q.sortIndex-ot.sortIndex;return lt!==0?lt:Q.id-ot.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,y=null,v=3,T=!1,S=!1,N=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function J(Q){for(var ot=e(f);ot!==null;){if(ot.callback===null)i(f);else if(ot.startTime<=Q)i(f),ot.sortIndex=ot.expirationTime,t(d,ot);else break;ot=e(f)}}function H(Q){if(N=!1,J(Q),!S)if(e(d)!==null)S=!0,ct||(ct=!0,j());else{var ot=e(f);ot!==null&&bt(H,ot.startTime-Q)}}var ct=!1,M=-1,I=5,k=-1;function O(){return C?!0:!(n.unstable_now()-k<I)}function V(){if(C=!1,ct){var Q=n.unstable_now();k=Q;var ot=!0;try{t:{S=!1,N&&(N=!1,q(M),M=-1),T=!0;var lt=v;try{e:{for(J(Q),y=e(d);y!==null&&!(y.expirationTime>Q&&O());){var gt=y.callback;if(typeof gt=="function"){y.callback=null,v=y.priorityLevel;var U=gt(y.expirationTime<=Q);if(Q=n.unstable_now(),typeof U=="function"){y.callback=U,J(Q),ot=!0;break e}y===e(d)&&i(d),J(Q)}else i(d);y=e(d)}if(y!==null)ot=!0;else{var it=e(f);it!==null&&bt(H,it.startTime-Q),ot=!1}}break t}finally{y=null,v=lt,T=!1}ot=void 0}}finally{ot?j():ct=!1}}}var j;if(typeof G=="function")j=function(){G(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Bt=D.port2;D.port1.onmessage=V,j=function(){Bt.postMessage(null)}}else j=function(){L(V,0)};function bt(Q,ot){M=L(function(){Q(n.unstable_now())},ot)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var ot=3;break;default:ot=v}var lt=v;v=ot;try{return Q()}finally{v=lt}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(Q,ot){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var lt=v;v=Q;try{return ot()}finally{v=lt}},n.unstable_scheduleCallback=function(Q,ot,lt){var gt=n.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?gt+lt:gt):lt=gt,Q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=lt+U,Q={id:p++,callback:ot,priorityLevel:Q,startTime:lt,expirationTime:U,sortIndex:-1},lt>gt?(Q.sortIndex=lt,t(f,Q),e(d)===null&&Q===e(f)&&(N?(q(M),M=-1):N=!0,bt(H,lt-gt))):(Q.sortIndex=U,t(d,Q),S||T||(S=!0,ct||(ct=!0,j()))),Q},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Q){var ot=v;return function(){var lt=v;v=ot;try{return Q.apply(this,arguments)}finally{v=lt}}}}(Cy)),Cy}var kT;function GM(){return kT||(kT=1,Ay.exports=WM()),Ay.exports}var Ry={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function YM(){if(MT)return kn;MT=1;var n=rv();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,kn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(d,f,null,p)},kn.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},kn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},kn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},kn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:T}):p==="script"&&i.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},kn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},kn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},kn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},kn.requestFormReset=function(d){i.d.r(d)},kn.unstable_batchedUpdates=function(d,f){return d(f)},kn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},kn.useFormStatus=function(){return l.H.useHostTransitionStatus()},kn.version="19.1.0",kn}var DT;function $M(){if(DT)return Ry.exports;DT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ry.exports=YM(),Ry.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function QM(){if(OT)return Gu;OT=1;var n=GM(),t=rv(),e=$M();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(a(r)!==r)throw Error(i(188))}function d(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var c=r,h=o;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return u(g),r;if(_===h)return u(g),o;_=_.sibling}throw Error(i(188))}if(c.return!==h.return)c=g,h=_;else{for(var x=!1,A=g.child;A;){if(A===c){x=!0,c=g,h=_;break}if(A===h){x=!0,h=g,c=_;break}A=A.sibling}if(!x){for(A=_.child;A;){if(A===c){x=!0,c=_,h=g;break}if(A===h){x=!0,h=_,c=g;break}A=A.sibling}if(!x)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:o}function f(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=f(r),o!==null)return o;r=r.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),G=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function Bt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case H:return"Suspense";case ct:return"SuspenseList";case k:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case G:return(r.displayName||"Context")+".Provider";case q:return(r._context.displayName||"Context")+".Consumer";case J:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return o=r.displayName||null,o!==null?o:Bt(r.type)||"Memo";case I:o=r._payload,r=r._init;try{return Bt(r(o))}catch{}}return null}var bt=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},gt=[],U=-1;function it(r){return{current:r}}function ht(r){0>U||(r.current=gt[U],gt[U]=null,U--)}function ut(r,o){U++,gt[U]=r.current,r.current=o}var yt=it(null),It=it(null),st=it(null),Dt=it(null);function xt(r,o){switch(ut(st,o),ut(It,r),ut(yt,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?tT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=tT(o),r=eT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ht(yt),ut(yt,r)}function Kt(){ht(yt),ht(It),ht(st)}function _e(r){r.memoizedState!==null&&ut(Dt,r);var o=yt.current,c=eT(o,r.type);o!==c&&(ut(It,r),ut(yt,c))}function Ae(r){It.current===r&&(ht(yt),ht(It)),Dt.current===r&&(ht(Dt),Fu._currentValue=lt)}var _n=Object.prototype.hasOwnProperty,Ee=n.unstable_scheduleCallback,Me=n.unstable_cancelCallback,ti=n.unstable_shouldYield,Ad=n.unstable_requestPaint,di=n.unstable_now,xp=n.unstable_getCurrentPriorityLevel,jc=n.unstable_ImmediatePriority,Xo=n.unstable_UserBlockingPriority,Da=n.unstable_NormalPriority,Tp=n.unstable_LowPriority,Zo=n.unstable_IdlePriority,Uc=n.log,Cd=n.unstable_setDisableYieldValue,De=null,se=null;function ei(r){if(typeof Uc=="function"&&Cd(r),se&&typeof se.setStrictMode=="function")try{se.setStrictMode(De,r)}catch{}}var In=Math.clz32?Math.clz32:Oa,Rd=Math.log,Sp=Math.LN2;function Oa(r){return r>>>=0,r===0?32:31-(Rd(r)/Sp|0)|0}var Pa=256,La=4194304;function Di(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Jo(r,o,c){var h=r.pendingLanes;if(h===0)return 0;var g=0,_=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var A=h&134217727;return A!==0?(h=A&~_,h!==0?g=Di(h):(x&=A,x!==0?g=Di(x):c||(c=A&~r,c!==0&&(g=Di(c))))):(A=h&~_,A!==0?g=Di(A):x!==0?g=Di(x):c||(c=h&~r,c!==0&&(g=Di(c)))),g===0?0:o!==0&&o!==g&&(o&_)===0&&(_=g&-g,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:g}function Va(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Fc(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zc(){var r=Pa;return Pa<<=1,(Pa&4194048)===0&&(Pa=256),r}function Bc(){var r=La;return La<<=1,(La&62914560)===0&&(La=4194304),r}function Rs(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Is(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Hc(r,o,c,h,g,_){var x=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,P=r.expirationTimes,$=r.hiddenUpdates;for(c=x&~c;0<c;){var tt=31-In(c),rt=1<<tt;A[tt]=0,P[tt]=-1;var K=$[tt];if(K!==null)for($[tt]=null,tt=0;tt<K.length;tt++){var X=K[tt];X!==null&&(X.lane&=-536870913)}c&=~rt}h!==0&&$i(r,h,0),_!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=_&~(x&~o))}function $i(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var h=31-In(o);r.entangledLanes|=o,r.entanglements[h]=r.entanglements[h]|1073741824|c&4194090}function qc(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var h=31-In(c),g=1<<h;g&o|r[h]&o&&(r[h]|=o),c&=~g}}function Er(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function tl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function xr(){var r=ot.p;return r!==0?r:(r=window.event,r===void 0?32:bT(r.type))}function Id(r,o){var c=ot.p;try{return ot.p=r,o()}finally{ot.p=c}}var Ce=Math.random().toString(36).slice(2),Je="__reactFiber$"+Ce,He="__reactProps$"+Ce,fi="__reactContainer$"+Ce,Wc="__reactEvents$"+Ce,Ap="__reactListeners$"+Ce,Tr="__reactHandles$"+Ce,Nd="__reactResources$"+Ce,ja="__reactMarker$"+Ce;function Sr(r){delete r[Je],delete r[He],delete r[Wc],delete r[Ap],delete r[Tr]}function Ns(r){var o=r[Je];if(o)return o;for(var c=r.parentNode;c;){if(o=c[fi]||c[Je]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=rT(r);r!==null;){if(c=r[Je])return c;r=rT(r)}return o}r=c,c=r.parentNode}return null}function Qi(r){if(r=r[Je]||r[fi]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Ki(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function jn(r){var o=r[Nd];return o||(o=r[Nd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function je(r){r[ja]=!0}var Gc=new Set,el={};function Oi(r,o){ks(r,o),ks(r+"Capture",o)}function ks(r,o){for(el[r]=o,r=0;r<o.length;r++)Gc.add(o[r])}var kd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Md={},Ua={};function Dd(r){return _n.call(Ua,r)?!0:_n.call(Md,r)?!1:kd.test(r)?Ua[r]=!0:(Md[r]=!0,!1)}function Ar(r,o,c){if(Dd(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function Xi(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function yn(r,o,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+h)}}var Fa,Od;function Ms(r){if(Fa===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Fa=o&&o[1]||"",Od=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fa+r+Od}var nl=!1;function il(r,o){if(!r||nl)return"";nl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(X){var K=X}Reflect.construct(r,[],rt)}else{try{rt.call()}catch(X){K=X}r.call(rt.prototype)}}else{try{throw Error()}catch(X){K=X}(rt=r())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),x=_[0],A=_[1];if(x&&A){var P=x.split(`
`),$=A.split(`
`);for(g=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;g<$.length&&!$[g].includes("DetermineComponentFrameRoot");)g++;if(h===P.length||g===$.length)for(h=P.length-1,g=$.length-1;1<=h&&0<=g&&P[h]!==$[g];)g--;for(;1<=h&&0<=g;h--,g--)if(P[h]!==$[g]){if(h!==1||g!==1)do if(h--,g--,0>g||P[h]!==$[g]){var tt=`
`+P[h].replace(" at new "," at ");return r.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",r.displayName)),tt}while(1<=h&&0<=g);break}}}finally{nl=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ms(c):""}function Yc(r){switch(r.tag){case 26:case 27:case 5:return Ms(r.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 15:return il(r.type,!1);case 11:return il(r.type.render,!1);case 1:return il(r.type,!0);case 31:return Ms("Activity");default:return""}}function sl(r){try{var o="";do o+=Yc(r),r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Un(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $c(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Cp(r){var o=$c(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),h=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,_.call(this,x)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function rl(r){r._valueTracker||(r._valueTracker=Cp(r))}function Qc(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return r&&(h=$c(r)?r.checked?"true":"false":r.value),r=h,r!==c?(o.setValue(r),!0):!1}function za(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Rp=/[\n"\\]/g;function qe(r){return r.replace(Rp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ni(r,o,c,h,g,_,x,A){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),o!=null?x==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Un(o)):r.value!==""+Un(o)&&(r.value=""+Un(o)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),o!=null?Cr(r,x,Un(o)):c!=null?Cr(r,x,Un(c)):h!=null&&r.removeAttribute("value"),g==null&&_!=null&&(r.defaultChecked=!!_),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Un(A):r.removeAttribute("name")}function Ba(r,o,c,h,g,_,x,A){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null))return;c=c!=null?""+Un(c):"",o=o!=null?""+Un(o):c,A||o===r.value||(r.value=o),r.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=A?r.checked:!!h,r.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Cr(r,o,c){o==="number"&&za(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Ds(r,o,c,h){if(r=r.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=o.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&h&&(r[c].defaultSelected=!0)}else{for(c=""+Un(c),o=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,h&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function ce(r,o,c){if(o!=null&&(o=""+Un(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+Un(c):""}function Ha(r,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(i(92));if(bt(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=Un(o),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h)}function mi(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var qa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pd(r,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":h?r.setProperty(o,c):typeof c!="number"||c===0||qa.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function Kc(r,o,c){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&c[g]!==h&&Pd(r,g,h)}else for(var _ in o)o.hasOwnProperty(_)&&Pd(r,_,o[_])}function Xc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Np=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(r){return Np.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Os=null;function gi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ps=null,Ls=null;function Zc(r){var o=Qi(r);if(o&&(r=o.stateNode)){var c=r[He]||null;t:switch(r=o.stateNode,o.type){case"input":if(ni(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qe(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==r&&h.form===r.form){var g=h[He]||null;if(!g)throw Error(i(90));ni(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===r.form&&Qc(h)}break t;case"textarea":ce(r,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&Ds(r,!!c.multiple,o,!1)}}}var Zi=!1;function Ld(r,o,c){if(Zi)return r(o,c);Zi=!0;try{var h=r(o);return h}finally{if(Zi=!1,(Ps!==null||Ls!==null)&&(Nf(),Ps&&(o=Ps,r=Ls,Ls=Ps=null,Zc(o),r)))for(o=0;o<r.length;o++)Zc(r[o])}}function Wa(r,o){var c=r.stateNode;if(c===null)return null;var h=c[He]||null;if(h===null)return null;c=h[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break t;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,o,typeof c));return c}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pi=!1;if(Pi)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){pi=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{pi=!1}var Ji=null,Rr=null,Vs=null;function Jc(){if(Vs)return Vs;var r,o=Rr,c=o.length,h,g="value"in Ji?Ji.value:Ji.textContent,_=g.length;for(r=0;r<c&&o[r]===g[r];r++);var x=c-r;for(h=1;h<=x&&o[c-h]===g[_-h];h++);return Vs=g.slice(r,1<h?1-h:void 0)}function ts(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function es(){return!0}function tu(){return!1}function on(r){function o(c,h,g,_,x){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(_):_[A]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?es:tu,this.isPropagationStopped=tu,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),o}var ne={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=on(ne),Ya=p({},ne,{view:0,detail:0}),Vd=on(Ya),ll,cl,ns,$a=p({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ns&&(ns&&r.type==="mousemove"?(ll=r.screenX-ns.screenX,cl=r.screenY-ns.screenY):cl=ll=0,ns=r),ll)},movementY:function(r){return"movementY"in r?r.movementY:cl}}),_i=on($a),jd=p({},$a,{dataTransfer:0}),kp=on(jd),Qa=p({},Ya,{relatedTarget:0}),ul=on(Qa),eu=p({},ne,{animationName:0,elapsedTime:0,pseudoElement:0}),hl=on(eu),Ud=p({},ne,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),dl=on(Ud),Mp=p({},ne,{data:0}),nu=on(Mp),Ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iu(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=zd[r])?!!o[r]:!1}function Xa(){return iu}var Bd=p({},Ya,{key:function(r){if(r.key){var o=Ka[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ts(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Fd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(r){return r.type==="keypress"?ts(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ts(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),fl=on(Bd),Hd=p({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),su=on(Hd),js=p({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),qd=on(js),Wd=p({},ne,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gd=on(Wd),Yd=p({},$a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ml=on(Yd),Fn=p({},ne,{newState:0,oldState:0}),$d=on(Fn),Qd=[9,13,27,32],is=Pi&&"CompositionEvent"in window,m=null;Pi&&"documentMode"in document&&(m=document.documentMode);var b=Pi&&"TextEvent"in window&&!m,E=Pi&&(!is||m&&8<m&&11>=m),R=" ",W=!1;function Z(r,o){switch(r){case"keyup":return Qd.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ft(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Wt=!1;function tn(r,o){switch(r){case"compositionend":return ft(o);case"keypress":return o.which!==32?null:(W=!0,R);case"textInput":return r=o.data,r===R&&W?null:r;default:return null}}function Gt(r,o){if(Wt)return r==="compositionend"||!is&&Z(r,o)?(r=Jc(),Vs=Rr=Ji=null,Wt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return E&&o.locale!=="ko"?null:o.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function en(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!ln[r.type]:o==="textarea"}function Us(r,o,c,h){Ps?Ls?Ls.push(h):Ls=[h]:Ps=h,o=Lf(o,"onChange"),0<o.length&&(c=new ol("onChange","change",null,c,h),r.push({event:c,listeners:o}))}var vn=null,ss=null;function ru(r){Qx(r,0)}function Kd(r){var o=Ki(r);if(Qc(o))return r}function pw(r,o){if(r==="change")return o}var _w=!1;if(Pi){var Dp;if(Pi){var Op="oninput"in document;if(!Op){var yw=document.createElement("div");yw.setAttribute("oninput","return;"),Op=typeof yw.oninput=="function"}Dp=Op}else Dp=!1;_w=Dp&&(!document.documentMode||9<document.documentMode)}function vw(){vn&&(vn.detachEvent("onpropertychange",bw),ss=vn=null)}function bw(r){if(r.propertyName==="value"&&Kd(ss)){var o=[];Us(o,ss,r,gi(r)),Ld(ru,o)}}function _k(r,o,c){r==="focusin"?(vw(),vn=o,ss=c,vn.attachEvent("onpropertychange",bw)):r==="focusout"&&vw()}function yk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Kd(ss)}function vk(r,o){if(r==="click")return Kd(o)}function bk(r,o){if(r==="input"||r==="change")return Kd(o)}function wk(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var ii=typeof Object.is=="function"?Object.is:wk;function au(r,o){if(ii(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!_n.call(o,g)||!ii(r[g],o[g]))return!1}return!0}function ww(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ew(r,o){var c=ww(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=o&&h>=o)return{node:c,offset:o-r};r=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=ww(c)}}function xw(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?xw(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Tw(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=za(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=za(r.document)}return o}function Pp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var Ek=Pi&&"documentMode"in document&&11>=document.documentMode,gl=null,Lp=null,ou=null,Vp=!1;function Sw(r,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Vp||gl==null||gl!==za(h)||(h=gl,"selectionStart"in h&&Pp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ou&&au(ou,h)||(ou=h,h=Lf(Lp,"onSelect"),0<h.length&&(o=new ol("onSelect","select",null,o,c),r.push({event:o,listeners:h}),o.target=gl)))}function Za(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var pl={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},jp={},Aw={};Pi&&(Aw=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Ja(r){if(jp[r])return jp[r];if(!pl[r])return r;var o=pl[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Aw)return jp[r]=o[c];return r}var Cw=Ja("animationend"),Rw=Ja("animationiteration"),Iw=Ja("animationstart"),xk=Ja("transitionrun"),Tk=Ja("transitionstart"),Sk=Ja("transitioncancel"),Nw=Ja("transitionend"),kw=new Map,Up="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Up.push("scrollEnd");function Li(r,o){kw.set(r,o),Oi(o,[r])}var Mw=new WeakMap;function yi(r,o){if(typeof r=="object"&&r!==null){var c=Mw.get(r);return c!==void 0?c:(o={value:r,source:o,stack:sl(o)},Mw.set(r,o),o)}return{value:r,source:o,stack:sl(o)}}var vi=[],_l=0,Fp=0;function Xd(){for(var r=_l,o=Fp=_l=0;o<r;){var c=vi[o];vi[o++]=null;var h=vi[o];vi[o++]=null;var g=vi[o];vi[o++]=null;var _=vi[o];if(vi[o++]=null,h!==null&&g!==null){var x=h.pending;x===null?g.next=g:(g.next=x.next,x.next=g),h.pending=g}_!==0&&Dw(c,g,_)}}function Zd(r,o,c,h){vi[_l++]=r,vi[_l++]=o,vi[_l++]=c,vi[_l++]=h,Fp|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function zp(r,o,c,h){return Zd(r,o,c,h),Jd(r)}function yl(r,o){return Zd(r,null,null,o),Jd(r)}function Dw(r,o,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var g=!1,_=r.return;_!==null;)_.childLanes|=c,h=_.alternate,h!==null&&(h.childLanes|=c),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(g=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,g&&o!==null&&(g=31-In(c),r=_.hiddenUpdates,h=r[g],h===null?r[g]=[o]:h.push(o),o.lane=c|536870912),_):null}function Jd(r){if(50<Mu)throw Mu=0,Y_=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var vl={};function Ak(r,o,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(r,o,c,h){return new Ak(r,o,c,h)}function Bp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Fs(r,o){var c=r.alternate;return c===null?(c=si(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Ow(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function tf(r,o,c,h,g,_){var x=0;if(h=r,typeof r=="function")Bp(r)&&(x=1);else if(typeof r=="string")x=RM(r,c,yt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case k:return r=si(31,c,o,g),r.elementType=k,r.lanes=_,r;case S:return to(c.children,g,_,o);case N:x=8,g|=24;break;case C:return r=si(12,c,o,g|2),r.elementType=C,r.lanes=_,r;case H:return r=si(13,c,o,g),r.elementType=H,r.lanes=_,r;case ct:return r=si(19,c,o,g),r.elementType=ct,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:case G:x=10;break t;case q:x=9;break t;case J:x=11;break t;case M:x=14;break t;case I:x=16,h=null;break t}x=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return o=si(x,c,o,g),o.elementType=r,o.type=h,o.lanes=_,o}function to(r,o,c,h){return r=si(7,r,h,o),r.lanes=c,r}function Hp(r,o,c){return r=si(6,r,null,o),r.lanes=c,r}function qp(r,o,c){return o=si(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var bl=[],wl=0,ef=null,nf=0,bi=[],wi=0,eo=null,zs=1,Bs="";function no(r,o){bl[wl++]=nf,bl[wl++]=ef,ef=r,nf=o}function Pw(r,o,c){bi[wi++]=zs,bi[wi++]=Bs,bi[wi++]=eo,eo=r;var h=zs;r=Bs;var g=32-In(h)-1;h&=~(1<<g),c+=1;var _=32-In(o)+g;if(30<_){var x=g-g%5;_=(h&(1<<x)-1).toString(32),h>>=x,g-=x,zs=1<<32-In(o)+g|c<<g|h,Bs=_+r}else zs=1<<_|c<<g|h,Bs=r}function Wp(r){r.return!==null&&(no(r,1),Pw(r,1,0))}function Gp(r){for(;r===ef;)ef=bl[--wl],bl[wl]=null,nf=bl[--wl],bl[wl]=null;for(;r===eo;)eo=bi[--wi],bi[wi]=null,Bs=bi[--wi],bi[wi]=null,zs=bi[--wi],bi[wi]=null}var zn=null,Oe=null,Jt=!1,io=null,rs=!1,Yp=Error(i(519));function so(r){var o=Error(i(418,""));throw uu(yi(o,r)),Yp}function Lw(r){var o=r.stateNode,c=r.type,h=r.memoizedProps;switch(o[Je]=r,o[He]=h,c){case"dialog":jt("cancel",o),jt("close",o);break;case"iframe":case"object":case"embed":jt("load",o);break;case"video":case"audio":for(c=0;c<Ou.length;c++)jt(Ou[c],o);break;case"source":jt("error",o);break;case"img":case"image":case"link":jt("error",o),jt("load",o);break;case"details":jt("toggle",o);break;case"input":jt("invalid",o),Ba(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),rl(o);break;case"select":jt("invalid",o);break;case"textarea":jt("invalid",o),Ha(o,h.value,h.defaultValue,h.children),rl(o)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||Jx(o.textContent,c)?(h.popover!=null&&(jt("beforetoggle",o),jt("toggle",o)),h.onScroll!=null&&jt("scroll",o),h.onScrollEnd!=null&&jt("scrollend",o),h.onClick!=null&&(o.onclick=Vf),o=!0):o=!1,o||so(r)}function Vw(r){for(zn=r.return;zn;)switch(zn.tag){case 5:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:zn=zn.return}}function lu(r){if(r!==zn)return!1;if(!Jt)return Vw(r),Jt=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||cy(r.type,r.memoizedProps)),c=!c),c&&Oe&&so(r),Vw(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(o===0){Oe=ji(r.nextSibling);break t}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;r=r.nextSibling}Oe=null}}else o===27?(o=Oe,qr(r.type)?(r=fy,fy=null,Oe=r):Oe=o):Oe=zn?ji(r.stateNode.nextSibling):null;return!0}function cu(){Oe=zn=null,Jt=!1}function jw(){var r=io;return r!==null&&(qn===null?qn=r:qn.push.apply(qn,r),io=null),r}function uu(r){io===null?io=[r]:io.push(r)}var $p=it(null),ro=null,Hs=null;function Ir(r,o,c){ut($p,o._currentValue),o._currentValue=c}function qs(r){r._currentValue=$p.current,ht($p)}function Qp(r,o,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),r===c)break;r=r.return}}function Kp(r,o,c,h){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var _=g.dependencies;if(_!==null){var x=g.child;_=_.firstContext;t:for(;_!==null;){var A=_;_=g;for(var P=0;P<o.length;P++)if(A.context===o[P]){_.lanes|=c,A=_.alternate,A!==null&&(A.lanes|=c),Qp(_.return,c,r),h||(x=null);break t}_=A.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(i(341));x.lanes|=c,_=x.alternate,_!==null&&(_.lanes|=c),Qp(x,c,r),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===r){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function hu(r,o,c,h){r=null;for(var g=o,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var A=g.type;ii(g.pendingProps.value,x.value)||(r!==null?r.push(A):r=[A])}}else if(g===Dt.current){if(x=g.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Fu):r=[Fu])}g=g.return}r!==null&&Kp(o,r,c,h),o.flags|=262144}function sf(r){for(r=r.firstContext;r!==null;){if(!ii(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ao(r){ro=r,Hs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Nn(r){return Uw(ro,r)}function rf(r,o){return ro===null&&ao(r),Uw(r,o)}function Uw(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Hs===null){if(r===null)throw Error(i(308));Hs=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Hs=Hs.next=o;return c}var Ck=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},Rk=n.unstable_scheduleCallback,Ik=n.unstable_NormalPriority,nn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xp(){return{controller:new Ck,data:new Map,refCount:0}}function du(r){r.refCount--,r.refCount===0&&Rk(Ik,function(){r.controller.abort()})}var fu=null,Zp=0,El=0,xl=null;function Nk(r,o){if(fu===null){var c=fu=[];Zp=0,El=ty(),xl={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Zp++,o.then(Fw,Fw),o}function Fw(){if(--Zp===0&&fu!==null){xl!==null&&(xl.status="fulfilled");var r=fu;fu=null,El=0,xl=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function kk(r,o){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return r.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var zw=Q.S;Q.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Nk(r,o),zw!==null&&zw(r,o)};var oo=it(null);function Jp(){var r=oo.current;return r!==null?r:ye.pooledCache}function af(r,o){o===null?ut(oo,oo.current):ut(oo,o.pool)}function Bw(){var r=Jp();return r===null?null:{parent:nn._currentValue,pool:r}}var mu=Error(i(460)),Hw=Error(i(474)),of=Error(i(542)),t_={then:function(){}};function qw(r){return r=r.status,r==="fulfilled"||r==="rejected"}function lf(){}function Ww(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(lf,lf),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Yw(r),r;default:if(typeof o.status=="string")o.then(lf,lf);else{if(r=ye,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Yw(r),r}throw gu=o,mu}}var gu=null;function Gw(){if(gu===null)throw Error(i(459));var r=gu;return gu=null,r}function Yw(r){if(r===mu||r===of)throw Error(i(483))}var Nr=!1;function e_(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function n_(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function kr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Mr(r,o,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(re&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=Jd(r),Dw(r,null,c),o}return Zd(r,h,o,c),Jd(r)}function pu(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,qc(r,c)}}function i_(r,o){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?g=_=x:_=_.next=x,c=c.next}while(c!==null);_===null?g=_=o:_=_.next=o}else g=_=o;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var s_=!1;function _u(){if(s_){var r=xl;if(r!==null)throw r}}function yu(r,o,c,h){s_=!1;var g=r.updateQueue;Nr=!1;var _=g.firstBaseUpdate,x=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var P=A,$=P.next;P.next=null,x===null?_=$:x.next=$,x=P;var tt=r.alternate;tt!==null&&(tt=tt.updateQueue,A=tt.lastBaseUpdate,A!==x&&(A===null?tt.firstBaseUpdate=$:A.next=$,tt.lastBaseUpdate=P))}if(_!==null){var rt=g.baseState;x=0,tt=$=P=null,A=_;do{var K=A.lane&-536870913,X=K!==A.lane;if(X?(Yt&K)===K:(h&K)===K){K!==0&&K===El&&(s_=!0),tt!==null&&(tt=tt.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Ct=r,Et=A;K=o;var de=c;switch(Et.tag){case 1:if(Ct=Et.payload,typeof Ct=="function"){rt=Ct.call(de,rt,K);break t}rt=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Et.payload,K=typeof Ct=="function"?Ct.call(de,rt,K):Ct,K==null)break t;rt=p({},rt,K);break t;case 2:Nr=!0}}K=A.callback,K!==null&&(r.flags|=64,X&&(r.flags|=8192),X=g.callbacks,X===null?g.callbacks=[K]:X.push(K))}else X={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},tt===null?($=tt=X,P=rt):tt=tt.next=X,x|=K;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;X=A,A=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);tt===null&&(P=rt),g.baseState=P,g.firstBaseUpdate=$,g.lastBaseUpdate=tt,_===null&&(g.shared.lanes=0),Fr|=x,r.lanes=x,r.memoizedState=rt}}function $w(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Qw(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)$w(c[r],o)}var Tl=it(null),cf=it(0);function Kw(r,o){r=Xs,ut(cf,r),ut(Tl,o),Xs=r|o.baseLanes}function r_(){ut(cf,Xs),ut(Tl,Tl.current)}function a_(){Xs=cf.current,ht(Tl),ht(cf)}var Dr=0,Ot=null,ue=null,We=null,uf=!1,Sl=!1,lo=!1,hf=0,vu=0,Al=null,Mk=0;function Ue(){throw Error(i(321))}function o_(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!ii(r[c],o[c]))return!1;return!0}function l_(r,o,c,h,g,_){return Dr=_,Ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Q.H=r===null||r.memoizedState===null?DE:OE,lo=!1,_=c(h,g),lo=!1,Sl&&(_=Zw(o,c,h,g)),Xw(r),_}function Xw(r){Q.H=_f;var o=ue!==null&&ue.next!==null;if(Dr=0,We=ue=Ot=null,uf=!1,vu=0,Al=null,o)throw Error(i(300));r===null||cn||(r=r.dependencies,r!==null&&sf(r)&&(cn=!0))}function Zw(r,o,c,h){Ot=r;var g=0;do{if(Sl&&(Al=null),vu=0,Sl=!1,25<=g)throw Error(i(301));if(g+=1,We=ue=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Q.H=Uk,_=o(c,h)}while(Sl);return _}function Dk(){var r=Q.H,o=r.useState()[0];return o=typeof o.then=="function"?bu(o):o,r=r.useState()[0],(ue!==null?ue.memoizedState:null)!==r&&(Ot.flags|=1024),o}function c_(){var r=hf!==0;return hf=0,r}function u_(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function h_(r){if(uf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}uf=!1}Dr=0,We=ue=Ot=null,Sl=!1,vu=hf=0,Al=null}function Bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ot.memoizedState=We=r:We=We.next=r,We}function Ge(){if(ue===null){var r=Ot.alternate;r=r!==null?r.memoizedState:null}else r=ue.next;var o=We===null?Ot.memoizedState:We.next;if(o!==null)We=o,ue=r;else{if(r===null)throw Ot.alternate===null?Error(i(467)):Error(i(310));ue=r,r={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},We===null?Ot.memoizedState=We=r:We=We.next=r}return We}function d_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(r){var o=vu;return vu+=1,Al===null&&(Al=[]),r=Ww(Al,r,o),o=Ot,(We===null?o.memoizedState:We.next)===null&&(o=o.alternate,Q.H=o===null||o.memoizedState===null?DE:OE),r}function df(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bu(r);if(r.$$typeof===G)return Nn(r)}throw Error(i(438,String(r)))}function f_(r){var o=null,c=Ot.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=d_(),Ot.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),h=0;h<r;h++)c[h]=O;return o.index++,c}function Ws(r,o){return typeof o=="function"?o(r):o}function ff(r){var o=Ge();return m_(o,ue,r)}function m_(r,o,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var g=r.baseQueue,_=h.pending;if(_!==null){if(g!==null){var x=g.next;g.next=_.next,_.next=x}o.baseQueue=g=_,h.pending=null}if(_=r.baseState,g===null)r.memoizedState=_;else{o=g.next;var A=x=null,P=null,$=o,tt=!1;do{var rt=$.lane&-536870913;if(rt!==$.lane?(Yt&rt)===rt:(Dr&rt)===rt){var K=$.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),rt===El&&(tt=!0);else if((Dr&K)===K){$=$.next,K===El&&(tt=!0);continue}else rt={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(A=P=rt,x=_):P=P.next=rt,Ot.lanes|=K,Fr|=K;rt=$.action,lo&&c(_,rt),_=$.hasEagerState?$.eagerState:c(_,rt)}else K={lane:rt,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(A=P=K,x=_):P=P.next=K,Ot.lanes|=rt,Fr|=rt;$=$.next}while($!==null&&$!==o);if(P===null?x=_:P.next=A,!ii(_,r.memoizedState)&&(cn=!0,tt&&(c=xl,c!==null)))throw c;r.memoizedState=_,r.baseState=x,r.baseQueue=P,h.lastRenderedState=_}return g===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function g_(r){var o=Ge(),c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,g=c.pending,_=o.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do _=r(_,x.action),x=x.next;while(x!==g);ii(_,o.memoizedState)||(cn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,h]}function Jw(r,o,c){var h=Ot,g=Ge(),_=Jt;if(_){if(c===void 0)throw Error(i(407));c=c()}else c=o();var x=!ii((ue||g).memoizedState,c);x&&(g.memoizedState=c,cn=!0),g=g.queue;var A=nE.bind(null,h,g,r);if(wu(2048,8,A,[r]),g.getSnapshot!==o||x||We!==null&&We.memoizedState.tag&1){if(h.flags|=2048,Cl(9,mf(),eE.bind(null,h,g,c,o),null),ye===null)throw Error(i(349));_||(Dr&124)!==0||tE(h,o,c)}return c}function tE(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Ot.updateQueue,o===null?(o=d_(),Ot.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function eE(r,o,c,h){o.value=c,o.getSnapshot=h,iE(o)&&sE(r)}function nE(r,o,c){return c(function(){iE(o)&&sE(r)})}function iE(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!ii(r,c)}catch{return!0}}function sE(r){var o=yl(r,2);o!==null&&ci(o,r,2)}function p_(r){var o=Bn();if(typeof r=="function"){var c=r;if(r=c(),lo){ei(!0);try{c()}finally{ei(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:r},o}function rE(r,o,c,h){return r.baseState=c,m_(r,ue,typeof h=="function"?h:Ws)}function Ok(r,o,c,h,g){if(pf(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};Q.T!==null?c(!0):_.isTransition=!1,h(_),c=o.pending,c===null?(_.next=o.pending=_,aE(o,_)):(_.next=c.next,o.pending=c.next=_)}}function aE(r,o){var c=o.action,h=o.payload,g=r.state;if(o.isTransition){var _=Q.T,x={};Q.T=x;try{var A=c(g,h),P=Q.S;P!==null&&P(x,A),oE(r,o,A)}catch($){__(r,o,$)}finally{Q.T=_}}else try{_=c(g,h),oE(r,o,_)}catch($){__(r,o,$)}}function oE(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){lE(r,o,h)},function(h){return __(r,o,h)}):lE(r,o,c)}function lE(r,o,c){o.status="fulfilled",o.value=c,cE(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,aE(r,c)))}function __(r,o,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,cE(o),o=o.next;while(o!==h)}r.action=null}function cE(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function uE(r,o){return o}function hE(r,o){if(Jt){var c=ye.formState;if(c!==null){t:{var h=Ot;if(Jt){if(Oe){e:{for(var g=Oe,_=rs;g.nodeType!==8;){if(!_){g=null;break e}if(g=ji(g.nextSibling),g===null){g=null;break e}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){Oe=ji(g.nextSibling),h=g.data==="F!";break t}}so(h)}h=!1}h&&(o=c[0])}}return c=Bn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uE,lastRenderedState:o},c.queue=h,c=NE.bind(null,Ot,h),h.dispatch=c,h=p_(!1),_=E_.bind(null,Ot,!1,h.queue),h=Bn(),g={state:o,dispatch:null,action:r,pending:null},h.queue=g,c=Ok.bind(null,Ot,g,_,c),g.dispatch=c,h.memoizedState=r,[o,c,!1]}function dE(r){var o=Ge();return fE(o,ue,r)}function fE(r,o,c){if(o=m_(r,o,uE)[0],r=ff(Ws)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=bu(o)}catch(x){throw x===mu?of:x}else h=o;o=Ge();var g=o.queue,_=g.dispatch;return c!==o.memoizedState&&(Ot.flags|=2048,Cl(9,mf(),Pk.bind(null,g,c),null)),[h,_,r]}function Pk(r,o){r.action=o}function mE(r){var o=Ge(),c=ue;if(c!==null)return fE(o,c,r);Ge(),o=o.memoizedState,c=Ge();var h=c.queue.dispatch;return c.memoizedState=r,[o,h,!1]}function Cl(r,o,c,h){return r={tag:r,create:c,deps:h,inst:o,next:null},o=Ot.updateQueue,o===null&&(o=d_(),Ot.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,o.lastEffect=r),r}function mf(){return{destroy:void 0,resource:void 0}}function gE(){return Ge().memoizedState}function gf(r,o,c,h){var g=Bn();h=h===void 0?null:h,Ot.flags|=r,g.memoizedState=Cl(1|o,mf(),c,h)}function wu(r,o,c,h){var g=Ge();h=h===void 0?null:h;var _=g.memoizedState.inst;ue!==null&&h!==null&&o_(h,ue.memoizedState.deps)?g.memoizedState=Cl(o,_,c,h):(Ot.flags|=r,g.memoizedState=Cl(1|o,_,c,h))}function pE(r,o){gf(8390656,8,r,o)}function _E(r,o){wu(2048,8,r,o)}function yE(r,o){return wu(4,2,r,o)}function vE(r,o){return wu(4,4,r,o)}function bE(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function wE(r,o,c){c=c!=null?c.concat([r]):null,wu(4,4,bE.bind(null,o,r),c)}function y_(){}function EE(r,o){var c=Ge();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&o_(o,h[1])?h[0]:(c.memoizedState=[r,o],r)}function xE(r,o){var c=Ge();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&o_(o,h[1]))return h[0];if(h=r(),lo){ei(!0);try{r()}finally{ei(!1)}}return c.memoizedState=[h,o],h}function v_(r,o,c){return c===void 0||(Dr&1073741824)!==0?r.memoizedState=o:(r.memoizedState=c,r=Ax(),Ot.lanes|=r,Fr|=r,c)}function TE(r,o,c,h){return ii(c,o)?c:Tl.current!==null?(r=v_(r,c,h),ii(r,o)||(cn=!0),r):(Dr&42)===0?(cn=!0,r.memoizedState=c):(r=Ax(),Ot.lanes|=r,Fr|=r,o)}function SE(r,o,c,h,g){var _=ot.p;ot.p=_!==0&&8>_?_:8;var x=Q.T,A={};Q.T=A,E_(r,!1,o,c);try{var P=g(),$=Q.S;if($!==null&&$(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var tt=kk(P,h);Eu(r,o,tt,li(r))}else Eu(r,o,h,li(r))}catch(rt){Eu(r,o,{then:function(){},status:"rejected",reason:rt},li())}finally{ot.p=_,Q.T=x}}function Lk(){}function b_(r,o,c,h){if(r.tag!==5)throw Error(i(476));var g=AE(r).queue;SE(r,g,o,lt,c===null?Lk:function(){return CE(r),c(h)})}function AE(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:lt},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function CE(r){var o=AE(r).next.queue;Eu(r,o,{},li())}function w_(){return Nn(Fu)}function RE(){return Ge().memoizedState}function IE(){return Ge().memoizedState}function Vk(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=li();r=kr(c);var h=Mr(o,r,c);h!==null&&(ci(h,o,c),pu(h,o,c)),o={cache:Xp()},r.payload=o;return}o=o.return}}function jk(r,o,c){var h=li();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},pf(r)?kE(o,c):(c=zp(r,o,c,h),c!==null&&(ci(c,r,h),ME(c,o,h)))}function NE(r,o,c){var h=li();Eu(r,o,c,h)}function Eu(r,o,c,h){var g={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(pf(r))kE(o,g);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var x=o.lastRenderedState,A=_(x,c);if(g.hasEagerState=!0,g.eagerState=A,ii(A,x))return Zd(r,o,g,0),ye===null&&Xd(),!1}catch{}finally{}if(c=zp(r,o,g,h),c!==null)return ci(c,r,h),ME(c,o,h),!0}return!1}function E_(r,o,c,h){if(h={lane:2,revertLane:ty(),action:h,hasEagerState:!1,eagerState:null,next:null},pf(r)){if(o)throw Error(i(479))}else o=zp(r,c,h,2),o!==null&&ci(o,r,2)}function pf(r){var o=r.alternate;return r===Ot||o!==null&&o===Ot}function kE(r,o){Sl=uf=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function ME(r,o,c){if((c&4194048)!==0){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,qc(r,c)}}var _f={readContext:Nn,use:df,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue},DE={readContext:Nn,use:df,useCallback:function(r,o){return Bn().memoizedState=[r,o===void 0?null:o],r},useContext:Nn,useEffect:pE,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,gf(4194308,4,bE.bind(null,o,r),c)},useLayoutEffect:function(r,o){return gf(4194308,4,r,o)},useInsertionEffect:function(r,o){gf(4,2,r,o)},useMemo:function(r,o){var c=Bn();o=o===void 0?null:o;var h=r();if(lo){ei(!0);try{r()}finally{ei(!1)}}return c.memoizedState=[h,o],h},useReducer:function(r,o,c){var h=Bn();if(c!==void 0){var g=c(o);if(lo){ei(!0);try{c(o)}finally{ei(!1)}}}else g=o;return h.memoizedState=h.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},h.queue=r,r=r.dispatch=jk.bind(null,Ot,r),[h.memoizedState,r]},useRef:function(r){var o=Bn();return r={current:r},o.memoizedState=r},useState:function(r){r=p_(r);var o=r.queue,c=NE.bind(null,Ot,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:y_,useDeferredValue:function(r,o){var c=Bn();return v_(c,r,o)},useTransition:function(){var r=p_(!1);return r=SE.bind(null,Ot,r.queue,!0,!1),Bn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var h=Ot,g=Bn();if(Jt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=o(),ye===null)throw Error(i(349));(Yt&124)!==0||tE(h,o,c)}g.memoizedState=c;var _={value:c,getSnapshot:o};return g.queue=_,pE(nE.bind(null,h,_,r),[r]),h.flags|=2048,Cl(9,mf(),eE.bind(null,h,_,c,o),null),c},useId:function(){var r=Bn(),o=ye.identifierPrefix;if(Jt){var c=Bs,h=zs;c=(h&~(1<<32-In(h)-1)).toString(32)+c,o=""+o+"R"+c,c=hf++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=Mk++,o=""+o+"r"+c.toString(32)+"";return r.memoizedState=o},useHostTransitionStatus:w_,useFormState:hE,useActionState:hE,useOptimistic:function(r){var o=Bn();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=E_.bind(null,Ot,!0,c),c.dispatch=o,[r,o]},useMemoCache:f_,useCacheRefresh:function(){return Bn().memoizedState=Vk.bind(null,Ot)}},OE={readContext:Nn,use:df,useCallback:EE,useContext:Nn,useEffect:_E,useImperativeHandle:wE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:xE,useReducer:ff,useRef:gE,useState:function(){return ff(Ws)},useDebugValue:y_,useDeferredValue:function(r,o){var c=Ge();return TE(c,ue.memoizedState,r,o)},useTransition:function(){var r=ff(Ws)[0],o=Ge().memoizedState;return[typeof r=="boolean"?r:bu(r),o]},useSyncExternalStore:Jw,useId:RE,useHostTransitionStatus:w_,useFormState:dE,useActionState:dE,useOptimistic:function(r,o){var c=Ge();return rE(c,ue,r,o)},useMemoCache:f_,useCacheRefresh:IE},Uk={readContext:Nn,use:df,useCallback:EE,useContext:Nn,useEffect:_E,useImperativeHandle:wE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:xE,useReducer:g_,useRef:gE,useState:function(){return g_(Ws)},useDebugValue:y_,useDeferredValue:function(r,o){var c=Ge();return ue===null?v_(c,r,o):TE(c,ue.memoizedState,r,o)},useTransition:function(){var r=g_(Ws)[0],o=Ge().memoizedState;return[typeof r=="boolean"?r:bu(r),o]},useSyncExternalStore:Jw,useId:RE,useHostTransitionStatus:w_,useFormState:mE,useActionState:mE,useOptimistic:function(r,o){var c=Ge();return ue!==null?rE(c,ue,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:f_,useCacheRefresh:IE},Rl=null,xu=0;function yf(r){var o=xu;return xu+=1,Rl===null&&(Rl=[]),Ww(Rl,r,o)}function Tu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function vf(r,o){throw o.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function PE(r){var o=r._init;return o(r._payload)}function LE(r){function o(B,F){if(r){var Y=B.deletions;Y===null?(B.deletions=[F],B.flags|=16):Y.push(F)}}function c(B,F){if(!r)return null;for(;F!==null;)o(B,F),F=F.sibling;return null}function h(B){for(var F=new Map;B!==null;)B.key!==null?F.set(B.key,B):F.set(B.index,B),B=B.sibling;return F}function g(B,F){return B=Fs(B,F),B.index=0,B.sibling=null,B}function _(B,F,Y){return B.index=Y,r?(Y=B.alternate,Y!==null?(Y=Y.index,Y<F?(B.flags|=67108866,F):Y):(B.flags|=67108866,F)):(B.flags|=1048576,F)}function x(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function A(B,F,Y,et){return F===null||F.tag!==6?(F=Hp(Y,B.mode,et),F.return=B,F):(F=g(F,Y),F.return=B,F)}function P(B,F,Y,et){var _t=Y.type;return _t===S?tt(B,F,Y.props.children,et,Y.key):F!==null&&(F.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===I&&PE(_t)===F.type)?(F=g(F,Y.props),Tu(F,Y),F.return=B,F):(F=tf(Y.type,Y.key,Y.props,null,B.mode,et),Tu(F,Y),F.return=B,F)}function $(B,F,Y,et){return F===null||F.tag!==4||F.stateNode.containerInfo!==Y.containerInfo||F.stateNode.implementation!==Y.implementation?(F=qp(Y,B.mode,et),F.return=B,F):(F=g(F,Y.children||[]),F.return=B,F)}function tt(B,F,Y,et,_t){return F===null||F.tag!==7?(F=to(Y,B.mode,et,_t),F.return=B,F):(F=g(F,Y),F.return=B,F)}function rt(B,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Hp(""+F,B.mode,Y),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return Y=tf(F.type,F.key,F.props,null,B.mode,Y),Tu(Y,F),Y.return=B,Y;case T:return F=qp(F,B.mode,Y),F.return=B,F;case I:var et=F._init;return F=et(F._payload),rt(B,F,Y)}if(bt(F)||j(F))return F=to(F,B.mode,Y,null),F.return=B,F;if(typeof F.then=="function")return rt(B,yf(F),Y);if(F.$$typeof===G)return rt(B,rf(B,F),Y);vf(B,F)}return null}function K(B,F,Y,et){var _t=F!==null?F.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return _t!==null?null:A(B,F,""+Y,et);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return Y.key===_t?P(B,F,Y,et):null;case T:return Y.key===_t?$(B,F,Y,et):null;case I:return _t=Y._init,Y=_t(Y._payload),K(B,F,Y,et)}if(bt(Y)||j(Y))return _t!==null?null:tt(B,F,Y,et,null);if(typeof Y.then=="function")return K(B,F,yf(Y),et);if(Y.$$typeof===G)return K(B,F,rf(B,Y),et);vf(B,Y)}return null}function X(B,F,Y,et,_t){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return B=B.get(Y)||null,A(F,B,""+et,_t);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case v:return B=B.get(et.key===null?Y:et.key)||null,P(F,B,et,_t);case T:return B=B.get(et.key===null?Y:et.key)||null,$(F,B,et,_t);case I:var Pt=et._init;return et=Pt(et._payload),X(B,F,Y,et,_t)}if(bt(et)||j(et))return B=B.get(Y)||null,tt(F,B,et,_t,null);if(typeof et.then=="function")return X(B,F,Y,yf(et),_t);if(et.$$typeof===G)return X(B,F,Y,rf(F,et),_t);vf(F,et)}return null}function Ct(B,F,Y,et){for(var _t=null,Pt=null,vt=F,Tt=F=0,hn=null;vt!==null&&Tt<Y.length;Tt++){vt.index>Tt?(hn=vt,vt=null):hn=vt.sibling;var Zt=K(B,vt,Y[Tt],et);if(Zt===null){vt===null&&(vt=hn);break}r&&vt&&Zt.alternate===null&&o(B,vt),F=_(Zt,F,Tt),Pt===null?_t=Zt:Pt.sibling=Zt,Pt=Zt,vt=hn}if(Tt===Y.length)return c(B,vt),Jt&&no(B,Tt),_t;if(vt===null){for(;Tt<Y.length;Tt++)vt=rt(B,Y[Tt],et),vt!==null&&(F=_(vt,F,Tt),Pt===null?_t=vt:Pt.sibling=vt,Pt=vt);return Jt&&no(B,Tt),_t}for(vt=h(vt);Tt<Y.length;Tt++)hn=X(vt,B,Tt,Y[Tt],et),hn!==null&&(r&&hn.alternate!==null&&vt.delete(hn.key===null?Tt:hn.key),F=_(hn,F,Tt),Pt===null?_t=hn:Pt.sibling=hn,Pt=hn);return r&&vt.forEach(function(Qr){return o(B,Qr)}),Jt&&no(B,Tt),_t}function Et(B,F,Y,et){if(Y==null)throw Error(i(151));for(var _t=null,Pt=null,vt=F,Tt=F=0,hn=null,Zt=Y.next();vt!==null&&!Zt.done;Tt++,Zt=Y.next()){vt.index>Tt?(hn=vt,vt=null):hn=vt.sibling;var Qr=K(B,vt,Zt.value,et);if(Qr===null){vt===null&&(vt=hn);break}r&&vt&&Qr.alternate===null&&o(B,vt),F=_(Qr,F,Tt),Pt===null?_t=Qr:Pt.sibling=Qr,Pt=Qr,vt=hn}if(Zt.done)return c(B,vt),Jt&&no(B,Tt),_t;if(vt===null){for(;!Zt.done;Tt++,Zt=Y.next())Zt=rt(B,Zt.value,et),Zt!==null&&(F=_(Zt,F,Tt),Pt===null?_t=Zt:Pt.sibling=Zt,Pt=Zt);return Jt&&no(B,Tt),_t}for(vt=h(vt);!Zt.done;Tt++,Zt=Y.next())Zt=X(vt,B,Tt,Zt.value,et),Zt!==null&&(r&&Zt.alternate!==null&&vt.delete(Zt.key===null?Tt:Zt.key),F=_(Zt,F,Tt),Pt===null?_t=Zt:Pt.sibling=Zt,Pt=Zt);return r&&vt.forEach(function(FM){return o(B,FM)}),Jt&&no(B,Tt),_t}function de(B,F,Y,et){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:t:{for(var _t=Y.key;F!==null;){if(F.key===_t){if(_t=Y.type,_t===S){if(F.tag===7){c(B,F.sibling),et=g(F,Y.props.children),et.return=B,B=et;break t}}else if(F.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===I&&PE(_t)===F.type){c(B,F.sibling),et=g(F,Y.props),Tu(et,Y),et.return=B,B=et;break t}c(B,F);break}else o(B,F);F=F.sibling}Y.type===S?(et=to(Y.props.children,B.mode,et,Y.key),et.return=B,B=et):(et=tf(Y.type,Y.key,Y.props,null,B.mode,et),Tu(et,Y),et.return=B,B=et)}return x(B);case T:t:{for(_t=Y.key;F!==null;){if(F.key===_t)if(F.tag===4&&F.stateNode.containerInfo===Y.containerInfo&&F.stateNode.implementation===Y.implementation){c(B,F.sibling),et=g(F,Y.children||[]),et.return=B,B=et;break t}else{c(B,F);break}else o(B,F);F=F.sibling}et=qp(Y,B.mode,et),et.return=B,B=et}return x(B);case I:return _t=Y._init,Y=_t(Y._payload),de(B,F,Y,et)}if(bt(Y))return Ct(B,F,Y,et);if(j(Y)){if(_t=j(Y),typeof _t!="function")throw Error(i(150));return Y=_t.call(Y),Et(B,F,Y,et)}if(typeof Y.then=="function")return de(B,F,yf(Y),et);if(Y.$$typeof===G)return de(B,F,rf(B,Y),et);vf(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,F!==null&&F.tag===6?(c(B,F.sibling),et=g(F,Y),et.return=B,B=et):(c(B,F),et=Hp(Y,B.mode,et),et.return=B,B=et),x(B)):c(B,F)}return function(B,F,Y,et){try{xu=0;var _t=de(B,F,Y,et);return Rl=null,_t}catch(vt){if(vt===mu||vt===of)throw vt;var Pt=si(29,vt,null,B.mode);return Pt.lanes=et,Pt.return=B,Pt}finally{}}}var Il=LE(!0),VE=LE(!1),Ei=it(null),as=null;function Or(r){var o=r.alternate;ut(sn,sn.current&1),ut(Ei,r),as===null&&(o===null||Tl.current!==null||o.memoizedState!==null)&&(as=r)}function jE(r){if(r.tag===22){if(ut(sn,sn.current),ut(Ei,r),as===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(as=r)}}else Pr()}function Pr(){ut(sn,sn.current),ut(Ei,Ei.current)}function Gs(r){ht(Ei),as===r&&(as=null),ht(sn)}var sn=it(0);function bf(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||dy(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function x_(r,o,c,h){o=r.memoizedState,c=c(h,o),c=c==null?o:p({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var T_={enqueueSetState:function(r,o,c){r=r._reactInternals;var h=li(),g=kr(h);g.payload=o,c!=null&&(g.callback=c),o=Mr(r,g,h),o!==null&&(ci(o,r,h),pu(o,r,h))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var h=li(),g=kr(h);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=Mr(r,g,h),o!==null&&(ci(o,r,h),pu(o,r,h))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=li(),h=kr(c);h.tag=2,o!=null&&(h.callback=o),o=Mr(r,h,c),o!==null&&(ci(o,r,c),pu(o,r,c))}};function UE(r,o,c,h,g,_,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,_,x):o.prototype&&o.prototype.isPureReactComponent?!au(c,h)||!au(g,_):!0}function FE(r,o,c,h){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==r&&T_.enqueueReplaceState(o,o.state,null)}function co(r,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(r=r.defaultProps){c===o&&(c=p({},c));for(var g in r)c[g]===void 0&&(c[g]=r[g])}return c}var wf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function zE(r){wf(r)}function BE(r){console.error(r)}function HE(r){wf(r)}function Ef(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function qE(r,o,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function S_(r,o,c){return c=kr(c),c.tag=3,c.payload={element:null},c.callback=function(){Ef(r,o)},c}function WE(r){return r=kr(r),r.tag=3,r}function GE(r,o,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var _=h.value;r.payload=function(){return g(_)},r.callback=function(){qE(o,c,h)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){qE(o,c,h),typeof g!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function Fk(r,o,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&hu(o,c,g,!0),c=Ei.current,c!==null){switch(c.tag){case 13:return as===null?Q_():c.alternate===null&&Pe===0&&(Pe=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===t_?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),X_(r,h,g)),!1;case 22:return c.flags|=65536,h===t_?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),X_(r,h,g)),!1}throw Error(i(435,c.tag))}return X_(r,h,g),Q_(),!1}if(Jt)return o=Ei.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==Yp&&(r=Error(i(422),{cause:h}),uu(yi(r,c)))):(h!==Yp&&(o=Error(i(423),{cause:h}),uu(yi(o,c))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,h=yi(h,c),g=S_(r.stateNode,h,g),i_(r,g),Pe!==4&&(Pe=2)),!1;var _=Error(i(520),{cause:h});if(_=yi(_,c),ku===null?ku=[_]:ku.push(_),Pe!==4&&(Pe=2),o===null)return!0;h=yi(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=g&-g,c.lanes|=r,r=S_(c.stateNode,h,r),i_(c,r),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(zr===null||!zr.has(_))))return c.flags|=65536,g&=-g,c.lanes|=g,g=WE(g),GE(g,r,c,h),i_(c,g),!1}c=c.return}while(c!==null);return!1}var YE=Error(i(461)),cn=!1;function bn(r,o,c,h){o.child=r===null?VE(o,null,c,h):Il(o,r.child,c,h)}function $E(r,o,c,h,g){c=c.render;var _=o.ref;if("ref"in h){var x={};for(var A in h)A!=="ref"&&(x[A]=h[A])}else x=h;return ao(o),h=l_(r,o,c,x,_,g),A=c_(),r!==null&&!cn?(u_(r,o,g),Ys(r,o,g)):(Jt&&A&&Wp(o),o.flags|=1,bn(r,o,h,g),o.child)}function QE(r,o,c,h,g){if(r===null){var _=c.type;return typeof _=="function"&&!Bp(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,KE(r,o,_,h,g)):(r=tf(c.type,null,h,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!D_(r,g)){var x=_.memoizedProps;if(c=c.compare,c=c!==null?c:au,c(x,h)&&r.ref===o.ref)return Ys(r,o,g)}return o.flags|=1,r=Fs(_,h),r.ref=o.ref,r.return=o,o.child=r}function KE(r,o,c,h,g){if(r!==null){var _=r.memoizedProps;if(au(_,h)&&r.ref===o.ref)if(cn=!1,o.pendingProps=h=_,D_(r,g))(r.flags&131072)!==0&&(cn=!0);else return o.lanes=r.lanes,Ys(r,o,g)}return A_(r,o,c,h,g)}function XE(r,o,c){var h=o.pendingProps,g=h.children,_=r!==null?r.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=_!==null?_.baseLanes|c:c,r!==null){for(g=o.child=r.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;o.childLanes=_&~h}else o.childLanes=0,o.child=null;return ZE(r,o,h,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&af(o,_!==null?_.cachePool:null),_!==null?Kw(o,_):r_(),jE(o);else return o.lanes=o.childLanes=536870912,ZE(r,o,_!==null?_.baseLanes|c:c,c)}else _!==null?(af(o,_.cachePool),Kw(o,_),Pr(),o.memoizedState=null):(r!==null&&af(o,null),r_(),Pr());return bn(r,o,g,c),o.child}function ZE(r,o,c,h){var g=Jp();return g=g===null?null:{parent:nn._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},r!==null&&af(o,null),r_(),jE(o),r!==null&&hu(r,o,h,!0),null}function xf(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function A_(r,o,c,h,g){return ao(o),c=l_(r,o,c,h,void 0,g),h=c_(),r!==null&&!cn?(u_(r,o,g),Ys(r,o,g)):(Jt&&h&&Wp(o),o.flags|=1,bn(r,o,c,g),o.child)}function JE(r,o,c,h,g,_){return ao(o),o.updateQueue=null,c=Zw(o,h,c,g),Xw(r),h=c_(),r!==null&&!cn?(u_(r,o,_),Ys(r,o,_)):(Jt&&h&&Wp(o),o.flags|=1,bn(r,o,c,_),o.child)}function tx(r,o,c,h,g){if(ao(o),o.stateNode===null){var _=vl,x=c.contextType;typeof x=="object"&&x!==null&&(_=Nn(x)),_=new c(h,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=T_,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=h,_.state=o.memoizedState,_.refs={},e_(o),x=c.contextType,_.context=typeof x=="object"&&x!==null?Nn(x):vl,_.state=o.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(x_(o,c,x,h),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&T_.enqueueReplaceState(_,_.state,null),yu(o,h,_,g),_u(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(r===null){_=o.stateNode;var A=o.memoizedProps,P=co(c,A);_.props=P;var $=_.context,tt=c.contextType;x=vl,typeof tt=="object"&&tt!==null&&(x=Nn(tt));var rt=c.getDerivedStateFromProps;tt=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,tt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A||$!==x)&&FE(o,_,h,x),Nr=!1;var K=o.memoizedState;_.state=K,yu(o,h,_,g),_u(),$=o.memoizedState,A||K!==$||Nr?(typeof rt=="function"&&(x_(o,c,rt,h),$=o.memoizedState),(P=Nr||UE(o,c,P,h,K,$,x))?(tt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=$),_.props=h,_.state=$,_.context=x,h=P):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{_=o.stateNode,n_(r,o),x=o.memoizedProps,tt=co(c,x),_.props=tt,rt=o.pendingProps,K=_.context,$=c.contextType,P=vl,typeof $=="object"&&$!==null&&(P=Nn($)),A=c.getDerivedStateFromProps,($=typeof A=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==rt||K!==P)&&FE(o,_,h,P),Nr=!1,K=o.memoizedState,_.state=K,yu(o,h,_,g),_u();var X=o.memoizedState;x!==rt||K!==X||Nr||r!==null&&r.dependencies!==null&&sf(r.dependencies)?(typeof A=="function"&&(x_(o,c,A,h),X=o.memoizedState),(tt=Nr||UE(o,c,tt,h,K,X,P)||r!==null&&r.dependencies!==null&&sf(r.dependencies))?($||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,X,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,X,P)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=X),_.props=h,_.state=X,_.context=P,h=tt):(typeof _.componentDidUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=1024),h=!1)}return _=h,xf(r,o),h=(o.flags&128)!==0,_||h?(_=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&h?(o.child=Il(o,r.child,null,g),o.child=Il(o,null,c,g)):bn(r,o,c,g),o.memoizedState=_.state,r=o.child):r=Ys(r,o,g),r}function ex(r,o,c,h){return cu(),o.flags|=256,bn(r,o,c,h),o.child}var C_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function R_(r){return{baseLanes:r,cachePool:Bw()}}function I_(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=xi),r}function nx(r,o,c){var h=o.pendingProps,g=!1,_=(o.flags&128)!==0,x;if((x=_)||(x=r!==null&&r.memoizedState===null?!1:(sn.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,r===null){if(Jt){if(g?Or(o):Pr(),Jt){var A=Oe,P;if(P=A){t:{for(P=A,A=rs;P.nodeType!==8;){if(!A){A=null;break t}if(P=ji(P.nextSibling),P===null){A=null;break t}}A=P}A!==null?(o.memoizedState={dehydrated:A,treeContext:eo!==null?{id:zs,overflow:Bs}:null,retryLane:536870912,hydrationErrors:null},P=si(18,null,null,0),P.stateNode=A,P.return=o,o.child=P,zn=o,Oe=null,P=!0):P=!1}P||so(o)}if(A=o.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return dy(A)?o.lanes=32:o.lanes=536870912,null;Gs(o)}return A=h.children,h=h.fallback,g?(Pr(),g=o.mode,A=Tf({mode:"hidden",children:A},g),h=to(h,g,c,null),A.return=o,h.return=o,A.sibling=h,o.child=A,g=o.child,g.memoizedState=R_(c),g.childLanes=I_(r,x,c),o.memoizedState=C_,h):(Or(o),N_(o,A))}if(P=r.memoizedState,P!==null&&(A=P.dehydrated,A!==null)){if(_)o.flags&256?(Or(o),o.flags&=-257,o=k_(r,o,c)):o.memoizedState!==null?(Pr(),o.child=r.child,o.flags|=128,o=null):(Pr(),g=h.fallback,A=o.mode,h=Tf({mode:"visible",children:h.children},A),g=to(g,A,c,null),g.flags|=2,h.return=o,g.return=o,h.sibling=g,o.child=h,Il(o,r.child,null,c),h=o.child,h.memoizedState=R_(c),h.childLanes=I_(r,x,c),o.memoizedState=C_,o=g);else if(Or(o),dy(A)){if(x=A.nextSibling&&A.nextSibling.dataset,x)var $=x.dgst;x=$,h=Error(i(419)),h.stack="",h.digest=x,uu({value:h,source:null,stack:null}),o=k_(r,o,c)}else if(cn||hu(r,o,c,!1),x=(c&r.childLanes)!==0,cn||x){if(x=ye,x!==null&&(h=c&-c,h=(h&42)!==0?1:Er(h),h=(h&(x.suspendedLanes|c))!==0?0:h,h!==0&&h!==P.retryLane))throw P.retryLane=h,yl(r,h),ci(x,r,h),YE;A.data==="$?"||Q_(),o=k_(r,o,c)}else A.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=P.treeContext,Oe=ji(A.nextSibling),zn=o,Jt=!0,io=null,rs=!1,r!==null&&(bi[wi++]=zs,bi[wi++]=Bs,bi[wi++]=eo,zs=r.id,Bs=r.overflow,eo=o),o=N_(o,h.children),o.flags|=4096);return o}return g?(Pr(),g=h.fallback,A=o.mode,P=r.child,$=P.sibling,h=Fs(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,$!==null?g=Fs($,g):(g=to(g,A,c,null),g.flags|=2),g.return=o,h.return=o,h.sibling=g,o.child=h,h=g,g=o.child,A=r.child.memoizedState,A===null?A=R_(c):(P=A.cachePool,P!==null?($=nn._currentValue,P=P.parent!==$?{parent:$,pool:$}:P):P=Bw(),A={baseLanes:A.baseLanes|c,cachePool:P}),g.memoizedState=A,g.childLanes=I_(r,x,c),o.memoizedState=C_,h):(Or(o),c=r.child,r=c.sibling,c=Fs(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,r!==null&&(x=o.deletions,x===null?(o.deletions=[r],o.flags|=16):x.push(r)),o.child=c,o.memoizedState=null,c)}function N_(r,o){return o=Tf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Tf(r,o){return r=si(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function k_(r,o,c){return Il(o,r.child,null,c),r=N_(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function ix(r,o,c){r.lanes|=o;var h=r.alternate;h!==null&&(h.lanes|=o),Qp(r.return,o,c)}function M_(r,o,c,h,g){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=c,_.tailMode=g)}function sx(r,o,c){var h=o.pendingProps,g=h.revealOrder,_=h.tail;if(bn(r,o,h.children,c),h=sn.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ix(r,c,o);else if(r.tag===19)ix(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break t;for(;r.sibling===null;){if(r.return===null||r.return===o)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}switch(ut(sn,h),g){case"forwards":for(c=o.child,g=null;c!==null;)r=c.alternate,r!==null&&bf(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),M_(o,!1,g,c,_);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&bf(r)===null){o.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}M_(o,!0,c,null,_);break;case"together":M_(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ys(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),Fr|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(hu(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,c=Fs(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Fs(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function D_(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&sf(r)))}function zk(r,o,c){switch(o.tag){case 3:xt(o,o.stateNode.containerInfo),Ir(o,nn,r.memoizedState.cache),cu();break;case 27:case 5:_e(o);break;case 4:xt(o,o.stateNode.containerInfo);break;case 10:Ir(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Or(o),o.flags|=128,null):(c&o.child.childLanes)!==0?nx(r,o,c):(Or(o),r=Ys(r,o,c),r!==null?r.sibling:null);Or(o);break;case 19:var g=(r.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(hu(r,o,c,!1),h=(c&o.childLanes)!==0),g){if(h)return sx(r,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ut(sn,sn.current),h)break;return null;case 22:case 23:return o.lanes=0,XE(r,o,c);case 24:Ir(o,nn,r.memoizedState.cache)}return Ys(r,o,c)}function rx(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)cn=!0;else{if(!D_(r,c)&&(o.flags&128)===0)return cn=!1,zk(r,o,c);cn=(r.flags&131072)!==0}else cn=!1,Jt&&(o.flags&1048576)!==0&&Pw(o,nf,o.index);switch(o.lanes=0,o.tag){case 16:t:{r=o.pendingProps;var h=o.elementType,g=h._init;if(h=g(h._payload),o.type=h,typeof h=="function")Bp(h)?(r=co(h,r),o.tag=1,o=tx(null,o,h,r,c)):(o.tag=0,o=A_(null,o,h,r,c));else{if(h!=null){if(g=h.$$typeof,g===J){o.tag=11,o=$E(null,o,h,r,c);break t}else if(g===M){o.tag=14,o=QE(null,o,h,r,c);break t}}throw o=Bt(h)||h,Error(i(306,o,""))}}return o;case 0:return A_(r,o,o.type,o.pendingProps,c);case 1:return h=o.type,g=co(h,o.pendingProps),tx(r,o,h,g,c);case 3:t:{if(xt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));h=o.pendingProps;var _=o.memoizedState;g=_.element,n_(r,o),yu(o,h,null,c);var x=o.memoizedState;if(h=x.cache,Ir(o,nn,h),h!==_.cache&&Kp(o,[nn],c,!0),_u(),h=x.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=ex(r,o,h,c);break t}else if(h!==g){g=yi(Error(i(424)),o),uu(g),o=ex(r,o,h,c);break t}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Oe=ji(r.firstChild),zn=o,Jt=!0,io=null,rs=!0,c=VE(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(cu(),h===g){o=Ys(r,o,c);break t}bn(r,o,h,c)}o=o.child}return o;case 26:return xf(r,o),r===null?(c=cT(o.type,null,o.pendingProps,null))?o.memoizedState=c:Jt||(c=o.type,r=o.pendingProps,h=jf(st.current).createElement(c),h[Je]=o,h[He]=r,En(h,c,r),je(h),o.stateNode=h):o.memoizedState=cT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return _e(o),r===null&&Jt&&(h=o.stateNode=aT(o.type,o.pendingProps,st.current),zn=o,rs=!0,g=Oe,qr(o.type)?(fy=g,Oe=ji(h.firstChild)):Oe=g),bn(r,o,o.pendingProps.children,c),xf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Jt&&((g=h=Oe)&&(h=gM(h,o.type,o.pendingProps,rs),h!==null?(o.stateNode=h,zn=o,Oe=ji(h.firstChild),rs=!1,g=!0):g=!1),g||so(o)),_e(o),g=o.type,_=o.pendingProps,x=r!==null?r.memoizedProps:null,h=_.children,cy(g,_)?h=null:x!==null&&cy(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=l_(r,o,Dk,null,null,c),Fu._currentValue=g),xf(r,o),bn(r,o,h,c),o.child;case 6:return r===null&&Jt&&((r=c=Oe)&&(c=pM(c,o.pendingProps,rs),c!==null?(o.stateNode=c,zn=o,Oe=null,r=!0):r=!1),r||so(o)),null;case 13:return nx(r,o,c);case 4:return xt(o,o.stateNode.containerInfo),h=o.pendingProps,r===null?o.child=Il(o,null,h,c):bn(r,o,h,c),o.child;case 11:return $E(r,o,o.type,o.pendingProps,c);case 7:return bn(r,o,o.pendingProps,c),o.child;case 8:return bn(r,o,o.pendingProps.children,c),o.child;case 12:return bn(r,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,Ir(o,o.type,h.value),bn(r,o,h.children,c),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,ao(o),g=Nn(g),h=h(g),o.flags|=1,bn(r,o,h,c),o.child;case 14:return QE(r,o,o.type,o.pendingProps,c);case 15:return KE(r,o,o.type,o.pendingProps,c);case 19:return sx(r,o,c);case 31:return h=o.pendingProps,c=o.mode,h={mode:h.mode,children:h.children},r===null?(c=Tf(h,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Fs(r.child,h),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return XE(r,o,c);case 24:return ao(o),h=Nn(nn),r===null?(g=Jp(),g===null&&(g=ye,_=Xp(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=c),g=_),o.memoizedState={parent:h,cache:g},e_(o),Ir(o,nn,g)):((r.lanes&c)!==0&&(n_(r,o),yu(o,null,null,c),_u()),g=r.memoizedState,_=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Ir(o,nn,h)):(h=_.cache,Ir(o,nn,h),h!==g.cache&&Kp(o,[nn],c,!0))),bn(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function $s(r){r.flags|=4}function ax(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!mT(o)){if(o=Ei.current,o!==null&&((Yt&4194048)===Yt?as!==null:(Yt&62914560)!==Yt&&(Yt&536870912)===0||o!==as))throw gu=t_,Hw;r.flags|=8192}}function Sf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Bc():536870912,r.lanes|=o,Dl|=o)}function Su(r,o){if(!Jt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ie(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(o)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=h,r.childLanes=c,o}function Bk(r,o,c){var h=o.pendingProps;switch(Gp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(o),null;case 1:return Ie(o),null;case 3:return c=o.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),qs(nn),Kt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(lu(o)?$s(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,jw())),Ie(o),null;case 26:return c=o.memoizedState,r===null?($s(o),c!==null?(Ie(o),ax(o,c)):(Ie(o),o.flags&=-16777217)):c?c!==r.memoizedState?($s(o),Ie(o),ax(o,c)):(Ie(o),o.flags&=-16777217):(r.memoizedProps!==h&&$s(o),Ie(o),o.flags&=-16777217),null;case 27:Ae(o),c=st.current;var g=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==h&&$s(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Ie(o),null}r=yt.current,lu(o)?Lw(o):(r=aT(g,h,c),o.stateNode=r,$s(o))}return Ie(o),null;case 5:if(Ae(o),c=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==h&&$s(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Ie(o),null}if(r=yt.current,lu(o))Lw(o);else{switch(g=jf(st.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?r.multiple=!0:h.size&&(r.size=h.size);break;default:r=typeof h.is=="string"?g.createElement(c,{is:h.is}):g.createElement(c)}}r[Je]=o,r[He]=h;t:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break t;for(;g.sibling===null;){if(g.return===null||g.return===o)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=r;t:switch(En(r,c,h),c){case"button":case"input":case"select":case"textarea":r=!!h.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&$s(o)}}return Ie(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==h&&$s(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(r=st.current,lu(o)){if(r=o.stateNode,c=o.memoizedProps,h=null,g=zn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}r[Je]=o,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Jx(r.nodeValue,c)),r||so(o)}else r=jf(r).createTextNode(h),r[Je]=o,o.stateNode=r}return Ie(o),null;case 13:if(h=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=lu(o),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Je]=o}else cu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ie(o),g=!1}else g=jw(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Gs(o),o):(Gs(o),null)}if(Gs(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=h!==null,r=r!==null&&r.memoizedState!==null,c){h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var _=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==g&&(h.flags|=2048)}return c!==r&&c&&(o.child.flags|=8192),Sf(o,o.updateQueue),Ie(o),null;case 4:return Kt(),r===null&&sy(o.stateNode.containerInfo),Ie(o),null;case 10:return qs(o.type),Ie(o),null;case 19:if(ht(sn),g=o.memoizedState,g===null)return Ie(o),null;if(h=(o.flags&128)!==0,_=g.rendering,_===null)if(h)Su(g,!1);else{if(Pe!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=bf(r),_!==null){for(o.flags|=128,Su(g,!1),r=_.updateQueue,o.updateQueue=r,Sf(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)Ow(c,r),c=c.sibling;return ut(sn,sn.current&1|2),o.child}r=r.sibling}g.tail!==null&&di()>Rf&&(o.flags|=128,h=!0,Su(g,!1),o.lanes=4194304)}else{if(!h)if(r=bf(_),r!==null){if(o.flags|=128,h=!0,r=r.updateQueue,o.updateQueue=r,Sf(o,r),Su(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Jt)return Ie(o),null}else 2*di()-g.renderingStartTime>Rf&&c!==536870912&&(o.flags|=128,h=!0,Su(g,!1),o.lanes=4194304);g.isBackwards?(_.sibling=o.child,o.child=_):(r=g.last,r!==null?r.sibling=_:o.child=_,g.last=_)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=di(),o.sibling=null,r=sn.current,ut(sn,h?r&1|2:r&1),o):(Ie(o),null);case 22:case 23:return Gs(o),a_(),h=o.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(Ie(o),o.subtreeFlags&6&&(o.flags|=8192)):Ie(o),c=o.updateQueue,c!==null&&Sf(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),r!==null&&ht(oo),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),qs(nn),Ie(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Hk(r,o){switch(Gp(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return qs(nn),Kt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Ae(o),null;case 13:if(Gs(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));cu()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ht(sn),null;case 4:return Kt(),null;case 10:return qs(o.type),null;case 22:case 23:return Gs(o),a_(),r!==null&&ht(oo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return qs(nn),null;case 25:return null;default:return null}}function ox(r,o){switch(Gp(o),o.tag){case 3:qs(nn),Kt();break;case 26:case 27:case 5:Ae(o);break;case 4:Kt();break;case 13:Gs(o);break;case 19:ht(sn);break;case 10:qs(o.type);break;case 22:case 23:Gs(o),a_(),r!==null&&ht(oo);break;case 24:qs(nn)}}function Au(r,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&r)===r){h=void 0;var _=c.create,x=c.inst;h=_(),x.destroy=h}c=c.next}while(c!==g)}}catch(A){ge(o,o.return,A)}}function Lr(r,o,c){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var _=g.next;h=_;do{if((h.tag&r)===r){var x=h.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,g=o;var P=c,$=A;try{$()}catch(tt){ge(g,P,tt)}}}h=h.next}while(h!==_)}}catch(tt){ge(o,o.return,tt)}}function lx(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{Qw(o,c)}catch(h){ge(r,r.return,h)}}}function cx(r,o,c){c.props=co(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){ge(r,o,h)}}function Cu(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(g){ge(r,o,g)}}function os(r,o){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){ge(r,o,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){ge(r,o,g)}else c.current=null}function ux(r){var o=r.type,c=r.memoizedProps,h=r.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){ge(r,r.return,g)}}function O_(r,o,c){try{var h=r.stateNode;uM(h,r.type,c,o),h[He]=o}catch(g){ge(r,r.return,g)}}function hx(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&qr(r.type)||r.tag===4}function P_(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||hx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&qr(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function L_(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Vf));else if(h!==4&&(h===27&&qr(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(L_(r,o,c),r=r.sibling;r!==null;)L_(r,o,c),r=r.sibling}function Af(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(h!==4&&(h===27&&qr(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Af(r,o,c),r=r.sibling;r!==null;)Af(r,o,c),r=r.sibling}function dx(r){var o=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);En(o,h,c),o[Je]=r,o[He]=c}catch(_){ge(r,r.return,_)}}var Qs=!1,Fe=!1,V_=!1,fx=typeof WeakSet=="function"?WeakSet:Set,un=null;function qk(r,o){if(r=r.containerInfo,oy=qf,r=Tw(r),Pp(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else t:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break t}var x=0,A=-1,P=-1,$=0,tt=0,rt=r,K=null;e:for(;;){for(var X;rt!==c||g!==0&&rt.nodeType!==3||(A=x+g),rt!==_||h!==0&&rt.nodeType!==3||(P=x+h),rt.nodeType===3&&(x+=rt.nodeValue.length),(X=rt.firstChild)!==null;)K=rt,rt=X;for(;;){if(rt===r)break e;if(K===c&&++$===g&&(A=x),K===_&&++tt===h&&(P=x),(X=rt.nextSibling)!==null)break;rt=K,K=rt.parentNode}rt=X}c=A===-1||P===-1?null:{start:A,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(ly={focusedElem:r,selectionRange:c},qf=!1,un=o;un!==null;)if(o=un,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,un=r;else for(;un!==null;){switch(o=un,_=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,c=o,g=_.memoizedProps,_=_.memoizedState,h=c.stateNode;try{var Ct=co(c.type,g,c.elementType===c.type);r=h.getSnapshotBeforeUpdate(Ct,_),h.__reactInternalSnapshotBeforeUpdate=r}catch(Et){ge(c,c.return,Et)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)hy(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":hy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,un=r;break}un=o.return}}function mx(r,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Vr(r,c),h&4&&Au(5,c);break;case 1:if(Vr(r,c),h&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(x){ge(c,c.return,x)}else{var g=co(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(g,o,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ge(c,c.return,x)}}h&64&&lx(c),h&512&&Cu(c,c.return);break;case 3:if(Vr(r,c),h&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Qw(r,o)}catch(x){ge(c,c.return,x)}}break;case 27:o===null&&h&4&&dx(c);case 26:case 5:Vr(r,c),o===null&&h&4&&ux(c),h&512&&Cu(c,c.return);break;case 12:Vr(r,c);break;case 13:Vr(r,c),h&4&&_x(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Jk.bind(null,c),_M(r,c))));break;case 22:if(h=c.memoizedState!==null||Qs,!h){o=o!==null&&o.memoizedState!==null||Fe,g=Qs;var _=Fe;Qs=h,(Fe=o)&&!_?jr(r,c,(c.subtreeFlags&8772)!==0):Vr(r,c),Qs=g,Fe=_}break;case 30:break;default:Vr(r,c)}}function gx(r){var o=r.alternate;o!==null&&(r.alternate=null,gx(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Sr(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Re=null,Hn=!1;function Ks(r,o,c){for(c=c.child;c!==null;)px(r,o,c),c=c.sibling}function px(r,o,c){if(se&&typeof se.onCommitFiberUnmount=="function")try{se.onCommitFiberUnmount(De,c)}catch{}switch(c.tag){case 26:Fe||os(c,o),Ks(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Fe||os(c,o);var h=Re,g=Hn;qr(c.type)&&(Re=c.stateNode,Hn=!1),Ks(r,o,c),Lu(c.stateNode),Re=h,Hn=g;break;case 5:Fe||os(c,o);case 6:if(h=Re,g=Hn,Re=null,Ks(r,o,c),Re=h,Hn=g,Re!==null)if(Hn)try{(Re.nodeType===9?Re.body:Re.nodeName==="HTML"?Re.ownerDocument.body:Re).removeChild(c.stateNode)}catch(_){ge(c,o,_)}else try{Re.removeChild(c.stateNode)}catch(_){ge(c,o,_)}break;case 18:Re!==null&&(Hn?(r=Re,sT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),qu(r)):sT(Re,c.stateNode));break;case 4:h=Re,g=Hn,Re=c.stateNode.containerInfo,Hn=!0,Ks(r,o,c),Re=h,Hn=g;break;case 0:case 11:case 14:case 15:Fe||Lr(2,c,o),Fe||Lr(4,c,o),Ks(r,o,c);break;case 1:Fe||(os(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&cx(c,o,h)),Ks(r,o,c);break;case 21:Ks(r,o,c);break;case 22:Fe=(h=Fe)||c.memoizedState!==null,Ks(r,o,c),Fe=h;break;default:Ks(r,o,c)}}function _x(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{qu(r)}catch(c){ge(o,o.return,c)}}function Wk(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new fx),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new fx),o;default:throw Error(i(435,r.tag))}}function j_(r,o){var c=Wk(r);o.forEach(function(h){var g=tM.bind(null,r,h);c.has(h)||(c.add(h),h.then(g,g))})}function ri(r,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],_=r,x=o,A=x;t:for(;A!==null;){switch(A.tag){case 27:if(qr(A.type)){Re=A.stateNode,Hn=!1;break t}break;case 5:Re=A.stateNode,Hn=!1;break t;case 3:case 4:Re=A.stateNode.containerInfo,Hn=!0;break t}A=A.return}if(Re===null)throw Error(i(160));px(_,x,g),Re=null,Hn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)yx(o,r),o=o.sibling}var Vi=null;function yx(r,o){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ri(o,r),ai(r),h&4&&(Lr(3,r,r.return),Au(3,r),Lr(5,r,r.return));break;case 1:ri(o,r),ai(r),h&512&&(Fe||c===null||os(c,c.return)),h&64&&Qs&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=Vi;if(ri(o,r),ai(r),h&512&&(Fe||c===null||os(c,c.return)),h&4){var _=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){t:{h=r.type,c=r.memoizedProps,g=g.ownerDocument||g;e:switch(h){case"title":_=g.getElementsByTagName("title")[0],(!_||_[ja]||_[Je]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(h),g.head.insertBefore(_,g.querySelector("head > title"))),En(_,h,c),_[Je]=r,je(_),h=_;break t;case"link":var x=dT("link","href",g).get(h+(c.href||""));if(x){for(var A=0;A<x.length;A++)if(_=x[A],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(A,1);break e}}_=g.createElement(h),En(_,h,c),g.head.appendChild(_);break;case"meta":if(x=dT("meta","content",g).get(h+(c.content||""))){for(A=0;A<x.length;A++)if(_=x[A],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(A,1);break e}}_=g.createElement(h),En(_,h,c),g.head.appendChild(_);break;default:throw Error(i(468,h))}_[Je]=r,je(_),h=_}r.stateNode=h}else fT(g,r.type,r.stateNode);else r.stateNode=hT(g,h,r.memoizedProps);else _!==h?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,h===null?fT(g,r.type,r.stateNode):hT(g,h,r.memoizedProps)):h===null&&r.stateNode!==null&&O_(r,r.memoizedProps,c.memoizedProps)}break;case 27:ri(o,r),ai(r),h&512&&(Fe||c===null||os(c,c.return)),c!==null&&h&4&&O_(r,r.memoizedProps,c.memoizedProps);break;case 5:if(ri(o,r),ai(r),h&512&&(Fe||c===null||os(c,c.return)),r.flags&32){g=r.stateNode;try{mi(g,"")}catch(X){ge(r,r.return,X)}}h&4&&r.stateNode!=null&&(g=r.memoizedProps,O_(r,g,c!==null?c.memoizedProps:g)),h&1024&&(V_=!0);break;case 6:if(ri(o,r),ai(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(X){ge(r,r.return,X)}}break;case 3:if(zf=null,g=Vi,Vi=Uf(o.containerInfo),ri(o,r),Vi=g,ai(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{qu(o.containerInfo)}catch(X){ge(r,r.return,X)}V_&&(V_=!1,vx(r));break;case 4:h=Vi,Vi=Uf(r.stateNode.containerInfo),ri(o,r),ai(r),Vi=h;break;case 12:ri(o,r),ai(r);break;case 13:ri(o,r),ai(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(q_=di()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,j_(r,h)));break;case 22:g=r.memoizedState!==null;var P=c!==null&&c.memoizedState!==null,$=Qs,tt=Fe;if(Qs=$||g,Fe=tt||P,ri(o,r),Fe=tt,Qs=$,ai(r),h&8192)t:for(o=r.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||P||Qs||Fe||uo(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){P=c=o;try{if(_=P.stateNode,g)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{A=P.stateNode;var rt=P.memoizedProps.style,K=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(X){ge(P,P.return,X)}}}else if(o.tag===6){if(c===null){P=o;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(X){ge(P,P.return,X)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break t;for(;o.sibling===null;){if(o.return===null||o.return===r)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,j_(r,c))));break;case 19:ri(o,r),ai(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,j_(r,h)));break;case 30:break;case 21:break;default:ri(o,r),ai(r)}}function ai(r){var o=r.flags;if(o&2){try{for(var c,h=r.return;h!==null;){if(hx(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,_=P_(r);Af(r,_,g);break;case 5:var x=c.stateNode;c.flags&32&&(mi(x,""),c.flags&=-33);var A=P_(r);Af(r,A,x);break;case 3:case 4:var P=c.stateNode.containerInfo,$=P_(r);L_(r,$,P);break;default:throw Error(i(161))}}catch(tt){ge(r,r.return,tt)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function vx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;vx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Vr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)mx(r,o.alternate,o),o=o.sibling}function uo(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Lr(4,o,o.return),uo(o);break;case 1:os(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&cx(o,o.return,c),uo(o);break;case 27:Lu(o.stateNode);case 26:case 5:os(o,o.return),uo(o);break;case 22:o.memoizedState===null&&uo(o);break;case 30:uo(o);break;default:uo(o)}r=r.sibling}}function jr(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=r,_=o,x=_.flags;switch(_.tag){case 0:case 11:case 15:jr(g,_,c),Au(4,_);break;case 1:if(jr(g,_,c),h=_,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch($){ge(h,h.return,$)}if(h=_,g=h.updateQueue,g!==null){var A=h.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)$w(P[g],A)}catch($){ge(h,h.return,$)}}c&&x&64&&lx(_),Cu(_,_.return);break;case 27:dx(_);case 26:case 5:jr(g,_,c),c&&h===null&&x&4&&ux(_),Cu(_,_.return);break;case 12:jr(g,_,c);break;case 13:jr(g,_,c),c&&x&4&&_x(g,_);break;case 22:_.memoizedState===null&&jr(g,_,c),Cu(_,_.return);break;case 30:break;default:jr(g,_,c)}o=o.sibling}}function U_(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&du(c))}function F_(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&du(r))}function ls(r,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)bx(r,o,c,h),o=o.sibling}function bx(r,o,c,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ls(r,o,c,h),g&2048&&Au(9,o);break;case 1:ls(r,o,c,h);break;case 3:ls(r,o,c,h),g&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&du(r)));break;case 12:if(g&2048){ls(r,o,c,h),r=o.stateNode;try{var _=o.memoizedProps,x=_.id,A=_.onPostCommit;typeof A=="function"&&A(x,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(P){ge(o,o.return,P)}}else ls(r,o,c,h);break;case 13:ls(r,o,c,h);break;case 23:break;case 22:_=o.stateNode,x=o.alternate,o.memoizedState!==null?_._visibility&2?ls(r,o,c,h):Ru(r,o):_._visibility&2?ls(r,o,c,h):(_._visibility|=2,Nl(r,o,c,h,(o.subtreeFlags&10256)!==0)),g&2048&&U_(x,o);break;case 24:ls(r,o,c,h),g&2048&&F_(o.alternate,o);break;default:ls(r,o,c,h)}}function Nl(r,o,c,h,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var _=r,x=o,A=c,P=h,$=x.flags;switch(x.tag){case 0:case 11:case 15:Nl(_,x,A,P,g),Au(8,x);break;case 23:break;case 22:var tt=x.stateNode;x.memoizedState!==null?tt._visibility&2?Nl(_,x,A,P,g):Ru(_,x):(tt._visibility|=2,Nl(_,x,A,P,g)),g&&$&2048&&U_(x.alternate,x);break;case 24:Nl(_,x,A,P,g),g&&$&2048&&F_(x.alternate,x);break;default:Nl(_,x,A,P,g)}o=o.sibling}}function Ru(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,h=o,g=h.flags;switch(h.tag){case 22:Ru(c,h),g&2048&&U_(h.alternate,h);break;case 24:Ru(c,h),g&2048&&F_(h.alternate,h);break;default:Ru(c,h)}o=o.sibling}}var Iu=8192;function kl(r){if(r.subtreeFlags&Iu)for(r=r.child;r!==null;)wx(r),r=r.sibling}function wx(r){switch(r.tag){case 26:kl(r),r.flags&Iu&&r.memoizedState!==null&&NM(Vi,r.memoizedState,r.memoizedProps);break;case 5:kl(r);break;case 3:case 4:var o=Vi;Vi=Uf(r.stateNode.containerInfo),kl(r),Vi=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=Iu,Iu=16777216,kl(r),Iu=o):kl(r));break;default:kl(r)}}function Ex(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Nu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];un=h,Tx(h,r)}Ex(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)xx(r),r=r.sibling}function xx(r){switch(r.tag){case 0:case 11:case 15:Nu(r),r.flags&2048&&Lr(9,r,r.return);break;case 3:Nu(r);break;case 12:Nu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Cf(r)):Nu(r);break;default:Nu(r)}}function Cf(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];un=h,Tx(h,r)}Ex(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Lr(8,o,o.return),Cf(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Cf(o));break;default:Cf(o)}r=r.sibling}}function Tx(r,o){for(;un!==null;){var c=un;switch(c.tag){case 0:case 11:case 15:Lr(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:du(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,un=h;else t:for(c=r;un!==null;){h=un;var g=h.sibling,_=h.return;if(gx(h),h===c){un=null;break t}if(g!==null){g.return=_,un=g;break t}un=_}}}var Gk={getCacheForType:function(r){var o=Nn(nn),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c}},Yk=typeof WeakMap=="function"?WeakMap:Map,re=0,ye=null,Vt=null,Yt=0,ae=0,oi=null,Ur=!1,Ml=!1,z_=!1,Xs=0,Pe=0,Fr=0,ho=0,B_=0,xi=0,Dl=0,ku=null,qn=null,H_=!1,q_=0,Rf=1/0,If=null,zr=null,wn=0,Br=null,Ol=null,Pl=0,W_=0,G_=null,Sx=null,Mu=0,Y_=null;function li(){if((re&2)!==0&&Yt!==0)return Yt&-Yt;if(Q.T!==null){var r=El;return r!==0?r:ty()}return xr()}function Ax(){xi===0&&(xi=(Yt&536870912)===0||Jt?zc():536870912);var r=Ei.current;return r!==null&&(r.flags|=32),xi}function ci(r,o,c){(r===ye&&(ae===2||ae===9)||r.cancelPendingCommit!==null)&&(Ll(r,0),Hr(r,Yt,xi,!1)),Is(r,c),((re&2)===0||r!==ye)&&(r===ye&&((re&2)===0&&(ho|=c),Pe===4&&Hr(r,Yt,xi,!1)),cs(r))}function Cx(r,o,c){if((re&6)!==0)throw Error(i(327));var h=!c&&(o&124)===0&&(o&r.expiredLanes)===0||Va(r,o),g=h?Kk(r,o):K_(r,o,!0),_=h;do{if(g===0){Ml&&!h&&Hr(r,o,0,!1);break}else{if(c=r.current.alternate,_&&!$k(c)){g=K_(r,o,!1),_=!1;continue}if(g===2){if(_=o,r.errorRecoveryDisabledLanes&_)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;t:{var A=r;g=ku;var P=A.current.memoizedState.isDehydrated;if(P&&(Ll(A,x).flags|=256),x=K_(A,x,!1),x!==2){if(z_&&!P){A.errorRecoveryDisabledLanes|=_,ho|=_,g=4;break t}_=qn,qn=g,_!==null&&(qn===null?qn=_:qn.push.apply(qn,_))}g=x}if(_=!1,g!==2)continue}}if(g===1){Ll(r,0),Hr(r,o,0,!0);break}t:{switch(h=r,_=g,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Hr(h,o,xi,!Ur);break t;case 2:qn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=q_+300-di(),10<g)){if(Hr(h,o,xi,!Ur),Jo(h,0,!0)!==0)break t;h.timeoutHandle=nT(Rx.bind(null,h,c,qn,If,H_,o,xi,ho,Dl,Ur,_,2,-0,0),g);break t}Rx(h,c,qn,If,H_,o,xi,ho,Dl,Ur,_,0,-0,0)}}break}while(!0);cs(r)}function Rx(r,o,c,h,g,_,x,A,P,$,tt,rt,K,X){if(r.timeoutHandle=-1,rt=o.subtreeFlags,(rt&8192||(rt&16785408)===16785408)&&(Uu={stylesheets:null,count:0,unsuspend:IM},wx(o),rt=kM(),rt!==null)){r.cancelPendingCommit=rt(Px.bind(null,r,o,_,c,h,g,x,A,P,tt,1,K,X)),Hr(r,_,x,!$);return}Px(r,o,_,c,h,g,x,A,P)}function $k(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],_=g.getSnapshot;g=g.value;try{if(!ii(_(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Hr(r,o,c,h){o&=~B_,o&=~ho,r.suspendedLanes|=o,r.pingedLanes&=~o,h&&(r.warmLanes|=o),h=r.expirationTimes;for(var g=o;0<g;){var _=31-In(g),x=1<<_;h[_]=-1,g&=~x}c!==0&&$i(r,c,o)}function Nf(){return(re&6)===0?(Du(0),!1):!0}function $_(){if(Vt!==null){if(ae===0)var r=Vt.return;else r=Vt,Hs=ro=null,h_(r),Rl=null,xu=0,r=Vt;for(;r!==null;)ox(r.alternate,r),r=r.return;Vt=null}}function Ll(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,dM(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),$_(),ye=r,Vt=c=Fs(r.current,null),Yt=o,ae=0,oi=null,Ur=!1,Ml=Va(r,o),z_=!1,Dl=xi=B_=ho=Fr=Pe=0,qn=ku=null,H_=!1,(o&8)!==0&&(o|=o&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=o;0<h;){var g=31-In(h),_=1<<g;o|=r[g],h&=~_}return Xs=o,Xd(),c}function Ix(r,o){Ot=null,Q.H=_f,o===mu||o===of?(o=Gw(),ae=3):o===Hw?(o=Gw(),ae=4):ae=o===YE?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,oi=o,Vt===null&&(Pe=1,Ef(r,yi(o,r.current)))}function Nx(){var r=Q.H;return Q.H=_f,r===null?_f:r}function kx(){var r=Q.A;return Q.A=Gk,r}function Q_(){Pe=4,Ur||(Yt&4194048)!==Yt&&Ei.current!==null||(Ml=!0),(Fr&134217727)===0&&(ho&134217727)===0||ye===null||Hr(ye,Yt,xi,!1)}function K_(r,o,c){var h=re;re|=2;var g=Nx(),_=kx();(ye!==r||Yt!==o)&&(If=null,Ll(r,o)),o=!1;var x=Pe;t:do try{if(ae!==0&&Vt!==null){var A=Vt,P=oi;switch(ae){case 8:$_(),x=6;break t;case 3:case 2:case 9:case 6:Ei.current===null&&(o=!0);var $=ae;if(ae=0,oi=null,Vl(r,A,P,$),c&&Ml){x=0;break t}break;default:$=ae,ae=0,oi=null,Vl(r,A,P,$)}}Qk(),x=Pe;break}catch(tt){Ix(r,tt)}while(!0);return o&&r.shellSuspendCounter++,Hs=ro=null,re=h,Q.H=g,Q.A=_,Vt===null&&(ye=null,Yt=0,Xd()),x}function Qk(){for(;Vt!==null;)Mx(Vt)}function Kk(r,o){var c=re;re|=2;var h=Nx(),g=kx();ye!==r||Yt!==o?(If=null,Rf=di()+500,Ll(r,o)):Ml=Va(r,o);t:do try{if(ae!==0&&Vt!==null){o=Vt;var _=oi;e:switch(ae){case 1:ae=0,oi=null,Vl(r,o,_,1);break;case 2:case 9:if(qw(_)){ae=0,oi=null,Dx(o);break}o=function(){ae!==2&&ae!==9||ye!==r||(ae=7),cs(r)},_.then(o,o);break t;case 3:ae=7;break t;case 4:ae=5;break t;case 7:qw(_)?(ae=0,oi=null,Dx(o)):(ae=0,oi=null,Vl(r,o,_,7));break;case 5:var x=null;switch(Vt.tag){case 26:x=Vt.memoizedState;case 5:case 27:var A=Vt;if(!x||mT(x)){ae=0,oi=null;var P=A.sibling;if(P!==null)Vt=P;else{var $=A.return;$!==null?(Vt=$,kf($)):Vt=null}break e}}ae=0,oi=null,Vl(r,o,_,5);break;case 6:ae=0,oi=null,Vl(r,o,_,6);break;case 8:$_(),Pe=6;break t;default:throw Error(i(462))}}Xk();break}catch(tt){Ix(r,tt)}while(!0);return Hs=ro=null,Q.H=h,Q.A=g,re=c,Vt!==null?0:(ye=null,Yt=0,Xd(),Pe)}function Xk(){for(;Vt!==null&&!ti();)Mx(Vt)}function Mx(r){var o=rx(r.alternate,r,Xs);r.memoizedProps=r.pendingProps,o===null?kf(r):Vt=o}function Dx(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=JE(c,o,o.pendingProps,o.type,void 0,Yt);break;case 11:o=JE(c,o,o.pendingProps,o.type.render,o.ref,Yt);break;case 5:h_(o);default:ox(c,o),o=Vt=Ow(o,Xs),o=rx(c,o,Xs)}r.memoizedProps=r.pendingProps,o===null?kf(r):Vt=o}function Vl(r,o,c,h){Hs=ro=null,h_(o),Rl=null,xu=0;var g=o.return;try{if(Fk(r,g,o,c,Yt)){Pe=1,Ef(r,yi(c,r.current)),Vt=null;return}}catch(_){if(g!==null)throw Vt=g,_;Pe=1,Ef(r,yi(c,r.current)),Vt=null;return}o.flags&32768?(Jt||h===1?r=!0:Ml||(Yt&536870912)!==0?r=!1:(Ur=r=!0,(h===2||h===9||h===3||h===6)&&(h=Ei.current,h!==null&&h.tag===13&&(h.flags|=16384))),Ox(o,r)):kf(o)}function kf(r){var o=r;do{if((o.flags&32768)!==0){Ox(o,Ur);return}r=o.return;var c=Bk(o.alternate,o,Xs);if(c!==null){Vt=c;return}if(o=o.sibling,o!==null){Vt=o;return}Vt=o=r}while(o!==null);Pe===0&&(Pe=5)}function Ox(r,o){do{var c=Hk(r.alternate,r);if(c!==null){c.flags&=32767,Vt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Vt=r;return}Vt=r=c}while(r!==null);Pe=6,Vt=null}function Px(r,o,c,h,g,_,x,A,P){r.cancelPendingCommit=null;do Mf();while(wn!==0);if((re&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Fp,Hc(r,c,_,x,A,P),r===ye&&(Vt=ye=null,Yt=0),Ol=o,Br=r,Pl=c,W_=_,G_=g,Sx=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,eM(Da,function(){return Fx(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=Q.T,Q.T=null,g=ot.p,ot.p=2,x=re,re|=4;try{qk(r,o,c)}finally{re=x,ot.p=g,Q.T=h}}wn=1,Lx(),Vx(),jx()}}function Lx(){if(wn===1){wn=0;var r=Br,o=Ol,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null;var h=ot.p;ot.p=2;var g=re;re|=4;try{yx(o,r);var _=ly,x=Tw(r.containerInfo),A=_.focusedElem,P=_.selectionRange;if(x!==A&&A&&A.ownerDocument&&xw(A.ownerDocument.documentElement,A)){if(P!==null&&Pp(A)){var $=P.start,tt=P.end;if(tt===void 0&&(tt=$),"selectionStart"in A)A.selectionStart=$,A.selectionEnd=Math.min(tt,A.value.length);else{var rt=A.ownerDocument||document,K=rt&&rt.defaultView||window;if(K.getSelection){var X=K.getSelection(),Ct=A.textContent.length,Et=Math.min(P.start,Ct),de=P.end===void 0?Et:Math.min(P.end,Ct);!X.extend&&Et>de&&(x=de,de=Et,Et=x);var B=Ew(A,Et),F=Ew(A,de);if(B&&F&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==F.node||X.focusOffset!==F.offset)){var Y=rt.createRange();Y.setStart(B.node,B.offset),X.removeAllRanges(),Et>de?(X.addRange(Y),X.extend(F.node,F.offset)):(Y.setEnd(F.node,F.offset),X.addRange(Y))}}}}for(rt=[],X=A;X=X.parentNode;)X.nodeType===1&&rt.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<rt.length;A++){var et=rt[A];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}qf=!!oy,ly=oy=null}finally{re=g,ot.p=h,Q.T=c}}r.current=o,wn=2}}function Vx(){if(wn===2){wn=0;var r=Br,o=Ol,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=Q.T,Q.T=null;var h=ot.p;ot.p=2;var g=re;re|=4;try{mx(r,o.alternate,o)}finally{re=g,ot.p=h,Q.T=c}}wn=3}}function jx(){if(wn===4||wn===3){wn=0,Ad();var r=Br,o=Ol,c=Pl,h=Sx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?wn=5:(wn=0,Ol=Br=null,Ux(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(zr=null),tl(c),o=o.stateNode,se&&typeof se.onCommitFiberRoot=="function")try{se.onCommitFiberRoot(De,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=Q.T,g=ot.p,ot.p=2,Q.T=null;try{for(var _=r.onRecoverableError,x=0;x<h.length;x++){var A=h[x];_(A.value,{componentStack:A.stack})}}finally{Q.T=o,ot.p=g}}(Pl&3)!==0&&Mf(),cs(r),g=r.pendingLanes,(c&4194090)!==0&&(g&42)!==0?r===Y_?Mu++:(Mu=0,Y_=r):Mu=0,Du(0)}}function Ux(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,du(o)))}function Mf(r){return Lx(),Vx(),jx(),Fx()}function Fx(){if(wn!==5)return!1;var r=Br,o=W_;W_=0;var c=tl(Pl),h=Q.T,g=ot.p;try{ot.p=32>c?32:c,Q.T=null,c=G_,G_=null;var _=Br,x=Pl;if(wn=0,Ol=Br=null,Pl=0,(re&6)!==0)throw Error(i(331));var A=re;if(re|=4,xx(_.current),bx(_,_.current,x,c),re=A,Du(0,!1),se&&typeof se.onPostCommitFiberRoot=="function")try{se.onPostCommitFiberRoot(De,_)}catch{}return!0}finally{ot.p=g,Q.T=h,Ux(r,o)}}function zx(r,o,c){o=yi(c,o),o=S_(r.stateNode,o,2),r=Mr(r,o,2),r!==null&&(Is(r,2),cs(r))}function ge(r,o,c){if(r.tag===3)zx(r,r,c);else for(;o!==null;){if(o.tag===3){zx(o,r,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zr===null||!zr.has(h))){r=yi(c,r),c=WE(2),h=Mr(o,c,2),h!==null&&(GE(c,h,o,r),Is(h,2),cs(h));break}}o=o.return}}function X_(r,o,c){var h=r.pingCache;if(h===null){h=r.pingCache=new Yk;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(c)||(z_=!0,g.add(c),r=Zk.bind(null,r,o,c),o.then(r,r))}function Zk(r,o,c){var h=r.pingCache;h!==null&&h.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ye===r&&(Yt&c)===c&&(Pe===4||Pe===3&&(Yt&62914560)===Yt&&300>di()-q_?(re&2)===0&&Ll(r,0):B_|=c,Dl===Yt&&(Dl=0)),cs(r)}function Bx(r,o){o===0&&(o=Bc()),r=yl(r,o),r!==null&&(Is(r,o),cs(r))}function Jk(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),Bx(r,c)}function tM(r,o){var c=0;switch(r.tag){case 13:var h=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),Bx(r,c)}function eM(r,o){return Ee(r,o)}var Df=null,jl=null,Z_=!1,Of=!1,J_=!1,fo=0;function cs(r){r!==jl&&r.next===null&&(jl===null?Df=jl=r:jl=jl.next=r),Of=!0,Z_||(Z_=!0,iM())}function Du(r,o){if(!J_&&Of){J_=!0;do for(var c=!1,h=Df;h!==null;){if(r!==0){var g=h.pendingLanes;if(g===0)var _=0;else{var x=h.suspendedLanes,A=h.pingedLanes;_=(1<<31-In(42|r)+1)-1,_&=g&~(x&~A),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,Gx(h,_))}else _=Yt,_=Jo(h,h===ye?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Va(h,_)||(c=!0,Gx(h,_));h=h.next}while(c);J_=!1}}function nM(){Hx()}function Hx(){Of=Z_=!1;var r=0;fo!==0&&(hM()&&(r=fo),fo=0);for(var o=di(),c=null,h=Df;h!==null;){var g=h.next,_=qx(h,o);_===0?(h.next=null,c===null?Df=g:c.next=g,g===null&&(jl=c)):(c=h,(r!==0||(_&3)!==0)&&(Of=!0)),h=g}Du(r)}function qx(r,o){for(var c=r.suspendedLanes,h=r.pingedLanes,g=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var x=31-In(_),A=1<<x,P=g[x];P===-1?((A&c)===0||(A&h)!==0)&&(g[x]=Fc(A,o)):P<=o&&(r.expiredLanes|=A),_&=~A}if(o=ye,c=Yt,c=Jo(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===o&&(ae===2||ae===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&Me(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Va(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(h!==null&&Me(h),tl(c)){case 2:case 8:c=Xo;break;case 32:c=Da;break;case 268435456:c=Zo;break;default:c=Da}return h=Wx.bind(null,r),c=Ee(c,h),r.callbackPriority=o,r.callbackNode=c,o}return h!==null&&h!==null&&Me(h),r.callbackPriority=2,r.callbackNode=null,2}function Wx(r,o){if(wn!==0&&wn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Mf()&&r.callbackNode!==c)return null;var h=Yt;return h=Jo(r,r===ye?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Cx(r,h,o),qx(r,di()),r.callbackNode!=null&&r.callbackNode===c?Wx.bind(null,r):null)}function Gx(r,o){if(Mf())return null;Cx(r,o,!0)}function iM(){fM(function(){(re&6)!==0?Ee(jc,nM):Hx()})}function ty(){return fo===0&&(fo=zc()),fo}function Yx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:al(""+r)}function $x(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function sM(r,o,c,h,g){if(o==="submit"&&c&&c.stateNode===g){var _=Yx((g[He]||null).action),x=h.submitter;x&&(o=(o=x[He]||null)?Yx(o.formAction):x.getAttribute("formAction"),o!==null&&(_=o,x=null));var A=new ol("action","action",null,h,g);r.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(fo!==0){var P=x?$x(g,x):new FormData(g);b_(c,{pending:!0,data:P,method:g.method,action:_},null,P)}}else typeof _=="function"&&(A.preventDefault(),P=x?$x(g,x):new FormData(g),b_(c,{pending:!0,data:P,method:g.method,action:_},_,P))},currentTarget:g}]})}}for(var ey=0;ey<Up.length;ey++){var ny=Up[ey],rM=ny.toLowerCase(),aM=ny[0].toUpperCase()+ny.slice(1);Li(rM,"on"+aM)}Li(Cw,"onAnimationEnd"),Li(Rw,"onAnimationIteration"),Li(Iw,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(xk,"onTransitionRun"),Li(Tk,"onTransitionStart"),Li(Sk,"onTransitionCancel"),Li(Nw,"onTransitionEnd"),ks("onMouseEnter",["mouseout","mouseover"]),ks("onMouseLeave",["mouseout","mouseover"]),ks("onPointerEnter",["pointerout","pointerover"]),ks("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Qx(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],g=h.event;h=h.listeners;t:{var _=void 0;if(o)for(var x=h.length-1;0<=x;x--){var A=h[x],P=A.instance,$=A.currentTarget;if(A=A.listener,P!==_&&g.isPropagationStopped())break t;_=A,g.currentTarget=$;try{_(g)}catch(tt){wf(tt)}g.currentTarget=null,_=P}else for(x=0;x<h.length;x++){if(A=h[x],P=A.instance,$=A.currentTarget,A=A.listener,P!==_&&g.isPropagationStopped())break t;_=A,g.currentTarget=$;try{_(g)}catch(tt){wf(tt)}g.currentTarget=null,_=P}}}}function jt(r,o){var c=o[Wc];c===void 0&&(c=o[Wc]=new Set);var h=r+"__bubble";c.has(h)||(Kx(o,r,2,!1),c.add(h))}function iy(r,o,c){var h=0;o&&(h|=4),Kx(c,r,h,o)}var Pf="_reactListening"+Math.random().toString(36).slice(2);function sy(r){if(!r[Pf]){r[Pf]=!0,Gc.forEach(function(c){c!=="selectionchange"&&(oM.has(c)||iy(c,!1,r),iy(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Pf]||(o[Pf]=!0,iy("selectionchange",!1,o))}}function Kx(r,o,c,h){switch(bT(o)){case 2:var g=OM;break;case 8:g=PM;break;default:g=yy}c=g.bind(null,o,c,r),g=void 0,!pi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?r.addEventListener(o,c,{capture:!0,passive:g}):r.addEventListener(o,c,!0):g!==void 0?r.addEventListener(o,c,{passive:g}):r.addEventListener(o,c,!1)}function ry(r,o,c,h,g){var _=h;if((o&1)===0&&(o&2)===0&&h!==null)t:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var A=h.stateNode.containerInfo;if(A===g)break;if(x===4)for(x=h.return;x!==null;){var P=x.tag;if((P===3||P===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;A!==null;){if(x=Ns(A),x===null)return;if(P=x.tag,P===5||P===6||P===26||P===27){h=_=x;continue t}A=A.parentNode}}h=h.return}Ld(function(){var $=_,tt=gi(c),rt=[];t:{var K=kw.get(r);if(K!==void 0){var X=ol,Ct=r;switch(r){case"keypress":if(ts(c)===0)break t;case"keydown":case"keyup":X=fl;break;case"focusin":Ct="focus",X=ul;break;case"focusout":Ct="blur",X=ul;break;case"beforeblur":case"afterblur":X=ul;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=_i;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=kp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=qd;break;case Cw:case Rw:case Iw:X=hl;break;case Nw:X=Gd;break;case"scroll":case"scrollend":X=Vd;break;case"wheel":X=ml;break;case"copy":case"cut":case"paste":X=dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=su;break;case"toggle":case"beforetoggle":X=$d}var Et=(o&4)!==0,de=!Et&&(r==="scroll"||r==="scrollend"),B=Et?K!==null?K+"Capture":null:K;Et=[];for(var F=$,Y;F!==null;){var et=F;if(Y=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||Y===null||B===null||(et=Wa(F,B),et!=null&&Et.push(Pu(F,et,Y))),de)break;F=F.return}0<Et.length&&(K=new X(K,Ct,null,c,tt),rt.push({event:K,listeners:Et}))}}if((o&7)===0){t:{if(K=r==="mouseover"||r==="pointerover",X=r==="mouseout"||r==="pointerout",K&&c!==Os&&(Ct=c.relatedTarget||c.fromElement)&&(Ns(Ct)||Ct[fi]))break t;if((X||K)&&(K=tt.window===tt?tt:(K=tt.ownerDocument)?K.defaultView||K.parentWindow:window,X?(Ct=c.relatedTarget||c.toElement,X=$,Ct=Ct?Ns(Ct):null,Ct!==null&&(de=a(Ct),Et=Ct.tag,Ct!==de||Et!==5&&Et!==27&&Et!==6)&&(Ct=null)):(X=null,Ct=$),X!==Ct)){if(Et=_i,et="onMouseLeave",B="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Et=su,et="onPointerLeave",B="onPointerEnter",F="pointer"),de=X==null?K:Ki(X),Y=Ct==null?K:Ki(Ct),K=new Et(et,F+"leave",X,c,tt),K.target=de,K.relatedTarget=Y,et=null,Ns(tt)===$&&(Et=new Et(B,F+"enter",Ct,c,tt),Et.target=Y,Et.relatedTarget=de,et=Et),de=et,X&&Ct)e:{for(Et=X,B=Ct,F=0,Y=Et;Y;Y=Ul(Y))F++;for(Y=0,et=B;et;et=Ul(et))Y++;for(;0<F-Y;)Et=Ul(Et),F--;for(;0<Y-F;)B=Ul(B),Y--;for(;F--;){if(Et===B||B!==null&&Et===B.alternate)break e;Et=Ul(Et),B=Ul(B)}Et=null}else Et=null;X!==null&&Xx(rt,K,X,Et,!1),Ct!==null&&de!==null&&Xx(rt,de,Ct,Et,!0)}}t:{if(K=$?Ki($):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var _t=pw;else if(en(K))if(_w)_t=bk;else{_t=yk;var Pt=_k}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&Xc($.elementType)&&(_t=pw):_t=vk;if(_t&&(_t=_t(r,$))){Us(rt,_t,c,tt);break t}Pt&&Pt(r,K,$),r==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Cr(K,"number",K.value)}switch(Pt=$?Ki($):window,r){case"focusin":(en(Pt)||Pt.contentEditable==="true")&&(gl=Pt,Lp=$,ou=null);break;case"focusout":ou=Lp=gl=null;break;case"mousedown":Vp=!0;break;case"contextmenu":case"mouseup":case"dragend":Vp=!1,Sw(rt,c,tt);break;case"selectionchange":if(Ek)break;case"keydown":case"keyup":Sw(rt,c,tt)}var vt;if(is)t:{switch(r){case"compositionstart":var Tt="onCompositionStart";break t;case"compositionend":Tt="onCompositionEnd";break t;case"compositionupdate":Tt="onCompositionUpdate";break t}Tt=void 0}else Wt?Z(r,c)&&(Tt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Tt="onCompositionStart");Tt&&(E&&c.locale!=="ko"&&(Wt||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Wt&&(vt=Jc()):(Ji=tt,Rr="value"in Ji?Ji.value:Ji.textContent,Wt=!0)),Pt=Lf($,Tt),0<Pt.length&&(Tt=new nu(Tt,r,null,c,tt),rt.push({event:Tt,listeners:Pt}),vt?Tt.data=vt:(vt=ft(c),vt!==null&&(Tt.data=vt)))),(vt=b?tn(r,c):Gt(r,c))&&(Tt=Lf($,"onBeforeInput"),0<Tt.length&&(Pt=new nu("onBeforeInput","beforeinput",null,c,tt),rt.push({event:Pt,listeners:Tt}),Pt.data=vt)),sM(rt,r,$,c,tt)}Qx(rt,o)})}function Pu(r,o,c){return{instance:r,listener:o,currentTarget:c}}function Lf(r,o){for(var c=o+"Capture",h=[];r!==null;){var g=r,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Wa(r,c),g!=null&&h.unshift(Pu(r,g,_)),g=Wa(r,o),g!=null&&h.push(Pu(r,g,_))),r.tag===3)return h;r=r.return}return[]}function Ul(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Xx(r,o,c,h,g){for(var _=o._reactName,x=[];c!==null&&c!==h;){var A=c,P=A.alternate,$=A.stateNode;if(A=A.tag,P!==null&&P===h)break;A!==5&&A!==26&&A!==27||$===null||(P=$,g?($=Wa(c,_),$!=null&&x.unshift(Pu(c,$,P))):g||($=Wa(c,_),$!=null&&x.push(Pu(c,$,P)))),c=c.return}x.length!==0&&r.push({event:o,listeners:x})}var lM=/\r\n?/g,cM=/\u0000|\uFFFD/g;function Zx(r){return(typeof r=="string"?r:""+r).replace(lM,`
`).replace(cM,"")}function Jx(r,o){return o=Zx(o),Zx(r)===o}function Vf(){}function he(r,o,c,h,g,_){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||mi(r,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&mi(r,""+h);break;case"className":Xi(r,"class",h);break;case"tabIndex":Xi(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Xi(r,c,h);break;case"style":Kc(r,h,_);break;case"data":if(o!=="object"){Xi(r,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=al(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&he(r,o,"name",g.name,g,null),he(r,o,"formEncType",g.formEncType,g,null),he(r,o,"formMethod",g.formMethod,g,null),he(r,o,"formTarget",g.formTarget,g,null)):(he(r,o,"encType",g.encType,g,null),he(r,o,"method",g.method,g,null),he(r,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=al(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Vf);break;case"onScroll":h!=null&&jt("scroll",r);break;case"onScrollEnd":h!=null&&jt("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=al(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":jt("beforetoggle",r),jt("toggle",r),Ar(r,"popover",h);break;case"xlinkActuate":yn(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":yn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":yn(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":yn(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":yn(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":yn(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":yn(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":yn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":yn(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ar(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ip.get(c)||c,Ar(r,c,h))}}function ay(r,o,c,h,g,_){switch(c){case"style":Kc(r,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?mi(r,h):(typeof h=="number"||typeof h=="bigint")&&mi(r,""+h);break;case"onScroll":h!=null&&jt("scroll",r);break;case"onScrollEnd":h!=null&&jt("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!el.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),_=r[He]||null,_=_!=null?_[c]:null,typeof _=="function"&&r.removeEventListener(o,_,g),typeof h=="function")){typeof _!="function"&&_!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,h,g);break t}c in r?r[c]=h:h===!0?r.setAttribute(c,""):Ar(r,c,h)}}}function En(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",r),jt("load",r);var h=!1,g=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var x=c[_];if(x!=null)switch(_){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:he(r,o,_,x,c,null)}}g&&he(r,o,"srcSet",c.srcSet,c,null),h&&he(r,o,"src",c.src,c,null);return;case"input":jt("invalid",r);var A=_=x=g=null,P=null,$=null;for(h in c)if(c.hasOwnProperty(h)){var tt=c[h];if(tt!=null)switch(h){case"name":g=tt;break;case"type":x=tt;break;case"checked":P=tt;break;case"defaultChecked":$=tt;break;case"value":_=tt;break;case"defaultValue":A=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,o));break;default:he(r,o,h,tt,c,null)}}Ba(r,_,A,P,$,x,g,!1),rl(r);return;case"select":jt("invalid",r),h=x=_=null;for(g in c)if(c.hasOwnProperty(g)&&(A=c[g],A!=null))switch(g){case"value":_=A;break;case"defaultValue":x=A;break;case"multiple":h=A;default:he(r,o,g,A,c,null)}o=_,c=x,r.multiple=!!h,o!=null?Ds(r,!!h,o,!1):c!=null&&Ds(r,!!h,c,!0);return;case"textarea":jt("invalid",r),_=g=h=null;for(x in c)if(c.hasOwnProperty(x)&&(A=c[x],A!=null))switch(x){case"value":h=A;break;case"defaultValue":g=A;break;case"children":_=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:he(r,o,x,A,c,null)}Ha(r,h,g,_),rl(r);return;case"option":for(P in c)if(c.hasOwnProperty(P)&&(h=c[P],h!=null))switch(P){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:he(r,o,P,h,c,null)}return;case"dialog":jt("beforetoggle",r),jt("toggle",r),jt("cancel",r),jt("close",r);break;case"iframe":case"object":jt("load",r);break;case"video":case"audio":for(h=0;h<Ou.length;h++)jt(Ou[h],r);break;case"image":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"embed":case"source":case"link":jt("error",r),jt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in c)if(c.hasOwnProperty($)&&(h=c[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:he(r,o,$,h,c,null)}return;default:if(Xc(o)){for(tt in c)c.hasOwnProperty(tt)&&(h=c[tt],h!==void 0&&ay(r,o,tt,h,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(h=c[A],h!=null&&he(r,o,A,h,c,null))}function uM(r,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,x=null,A=null,P=null,$=null,tt=null;for(X in c){var rt=c[X];if(c.hasOwnProperty(X)&&rt!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":P=rt;default:h.hasOwnProperty(X)||he(r,o,X,null,h,rt)}}for(var K in h){var X=h[K];if(rt=c[K],h.hasOwnProperty(K)&&(X!=null||rt!=null))switch(K){case"type":_=X;break;case"name":g=X;break;case"checked":$=X;break;case"defaultChecked":tt=X;break;case"value":x=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,o));break;default:X!==rt&&he(r,o,K,X,h,rt)}}ni(r,x,A,P,$,tt,_,g);return;case"select":X=x=A=K=null;for(_ in c)if(P=c[_],c.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":X=P;default:h.hasOwnProperty(_)||he(r,o,_,null,h,P)}for(g in h)if(_=h[g],P=c[g],h.hasOwnProperty(g)&&(_!=null||P!=null))switch(g){case"value":K=_;break;case"defaultValue":A=_;break;case"multiple":x=_;default:_!==P&&he(r,o,g,_,h,P)}o=A,c=x,h=X,K!=null?Ds(r,!!c,K,!1):!!h!=!!c&&(o!=null?Ds(r,!!c,o,!0):Ds(r,!!c,c?[]:"",!1));return;case"textarea":X=K=null;for(A in c)if(g=c[A],c.hasOwnProperty(A)&&g!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:he(r,o,A,null,h,g)}for(x in h)if(g=h[x],_=c[x],h.hasOwnProperty(x)&&(g!=null||_!=null))switch(x){case"value":K=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==_&&he(r,o,x,g,h,_)}ce(r,K,X);return;case"option":for(var Ct in c)if(K=c[Ct],c.hasOwnProperty(Ct)&&K!=null&&!h.hasOwnProperty(Ct))switch(Ct){case"selected":r.selected=!1;break;default:he(r,o,Ct,null,h,K)}for(P in h)if(K=h[P],X=c[P],h.hasOwnProperty(P)&&K!==X&&(K!=null||X!=null))switch(P){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:he(r,o,P,K,h,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in c)K=c[Et],c.hasOwnProperty(Et)&&K!=null&&!h.hasOwnProperty(Et)&&he(r,o,Et,null,h,K);for($ in h)if(K=h[$],X=c[$],h.hasOwnProperty($)&&K!==X&&(K!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,o));break;default:he(r,o,$,K,h,X)}return;default:if(Xc(o)){for(var de in c)K=c[de],c.hasOwnProperty(de)&&K!==void 0&&!h.hasOwnProperty(de)&&ay(r,o,de,void 0,h,K);for(tt in h)K=h[tt],X=c[tt],!h.hasOwnProperty(tt)||K===X||K===void 0&&X===void 0||ay(r,o,tt,K,h,X);return}}for(var B in c)K=c[B],c.hasOwnProperty(B)&&K!=null&&!h.hasOwnProperty(B)&&he(r,o,B,null,h,K);for(rt in h)K=h[rt],X=c[rt],!h.hasOwnProperty(rt)||K===X||K==null&&X==null||he(r,o,rt,K,h,X)}var oy=null,ly=null;function jf(r){return r.nodeType===9?r:r.ownerDocument}function tT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function cy(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var uy=null;function hM(){var r=window.event;return r&&r.type==="popstate"?r===uy?!1:(uy=r,!0):(uy=null,!1)}var nT=typeof setTimeout=="function"?setTimeout:void 0,dM=typeof clearTimeout=="function"?clearTimeout:void 0,iT=typeof Promise=="function"?Promise:void 0,fM=typeof queueMicrotask=="function"?queueMicrotask:typeof iT<"u"?function(r){return iT.resolve(null).then(r).catch(mM)}:nT;function mM(r){setTimeout(function(){throw r})}function qr(r){return r==="head"}function sT(r,o){var c=o,h=0,g=0;do{var _=c.nextSibling;if(r.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(0<h&&8>h){c=h;var x=r.ownerDocument;if(c&1&&Lu(x.documentElement),c&2&&Lu(x.body),c&4)for(c=x.head,Lu(c),x=c.firstChild;x;){var A=x.nextSibling,P=x.nodeName;x[ja]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=A}}if(g===0){r.removeChild(_),qu(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:h=c.charCodeAt(0)-48;else h=0;c=_}while(c);qu(o)}function hy(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":hy(c),Sr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function gM(r,o,c,h){for(;r.nodeType===1;){var g=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[ja])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=ji(r.nextSibling),r===null)break}return null}function pM(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=ji(r.nextSibling),r===null))return null;return r}function dy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function _M(r,o){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function ji(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var fy=null;function rT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}function aT(r,o,c){switch(o=jf(c),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Lu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Sr(r)}var Ti=new Map,oT=new Set;function Uf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Zs=ot.d;ot.d={f:yM,r:vM,D:bM,C:wM,L:EM,m:xM,X:SM,S:TM,M:AM};function yM(){var r=Zs.f(),o=Nf();return r||o}function vM(r){var o=Qi(r);o!==null&&o.tag===5&&o.type==="form"?CE(o):Zs.r(r)}var Fl=typeof document>"u"?null:document;function lT(r,o,c){var h=Fl;if(h&&typeof o=="string"&&o){var g=qe(o);g='link[rel="'+r+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),oT.has(g)||(oT.add(g),r={rel:r,crossOrigin:c,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),En(o,"link",r),je(o),h.head.appendChild(o)))}}function bM(r){Zs.D(r),lT("dns-prefetch",r,null)}function wM(r,o){Zs.C(r,o),lT("preconnect",r,o)}function EM(r,o,c){Zs.L(r,o,c);var h=Fl;if(h&&r&&o){var g='link[rel="preload"][as="'+qe(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+qe(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+qe(c.imageSizes)+'"]')):g+='[href="'+qe(r)+'"]';var _=g;switch(o){case"style":_=zl(r);break;case"script":_=Bl(r)}Ti.has(_)||(r=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),Ti.set(_,r),h.querySelector(g)!==null||o==="style"&&h.querySelector(Vu(_))||o==="script"&&h.querySelector(ju(_))||(o=h.createElement("link"),En(o,"link",r),je(o),h.head.appendChild(o)))}}function xM(r,o){Zs.m(r,o);var c=Fl;if(c&&r){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+qe(h)+'"][href="'+qe(r)+'"]',_=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Bl(r)}if(!Ti.has(_)&&(r=p({rel:"modulepreload",href:r},o),Ti.set(_,r),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ju(_)))return}h=c.createElement("link"),En(h,"link",r),je(h),c.head.appendChild(h)}}}function TM(r,o,c){Zs.S(r,o,c);var h=Fl;if(h&&r){var g=jn(h).hoistableStyles,_=zl(r);o=o||"default";var x=g.get(_);if(!x){var A={loading:0,preload:null};if(x=h.querySelector(Vu(_)))A.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":o},c),(c=Ti.get(_))&&my(r,c);var P=x=h.createElement("link");je(P),En(P,"link",r),P._p=new Promise(function($,tt){P.onload=$,P.onerror=tt}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ff(x,o,h)}x={type:"stylesheet",instance:x,count:1,state:A},g.set(_,x)}}}function SM(r,o){Zs.X(r,o);var c=Fl;if(c&&r){var h=jn(c).hoistableScripts,g=Bl(r),_=h.get(g);_||(_=c.querySelector(ju(g)),_||(r=p({src:r,async:!0},o),(o=Ti.get(g))&&gy(r,o),_=c.createElement("script"),je(_),En(_,"link",r),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function AM(r,o){Zs.M(r,o);var c=Fl;if(c&&r){var h=jn(c).hoistableScripts,g=Bl(r),_=h.get(g);_||(_=c.querySelector(ju(g)),_||(r=p({src:r,async:!0,type:"module"},o),(o=Ti.get(g))&&gy(r,o),_=c.createElement("script"),je(_),En(_,"link",r),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function cT(r,o,c,h){var g=(g=st.current)?Uf(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=zl(c.href),c=jn(g).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=zl(c.href);var _=jn(g).hoistableStyles,x=_.get(r);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,x),(_=g.querySelector(Vu(r)))&&!_._p&&(x.instance=_,x.state.loading=5),Ti.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ti.set(r,c),_||CM(g,r,c,x.state))),o&&h===null)throw Error(i(528,""));return x}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Bl(c),c=jn(g).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function zl(r){return'href="'+qe(r)+'"'}function Vu(r){return'link[rel="stylesheet"]['+r+"]"}function uT(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function CM(r,o,c,h){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=r.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),En(o,"link",c),je(o),r.head.appendChild(o))}function Bl(r){return'[src="'+qe(r)+'"]'}function ju(r){return"script[async]"+r}function hT(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=r.querySelector('style[data-href~="'+qe(c.href)+'"]');if(h)return o.instance=h,je(h),h;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),je(h),En(h,"style",g),Ff(h,c.precedence,r),o.instance=h;case"stylesheet":g=zl(c.href);var _=r.querySelector(Vu(g));if(_)return o.state.loading|=4,o.instance=_,je(_),_;h=uT(c),(g=Ti.get(g))&&my(h,g),_=(r.ownerDocument||r).createElement("link"),je(_);var x=_;return x._p=new Promise(function(A,P){x.onload=A,x.onerror=P}),En(_,"link",h),o.state.loading|=4,Ff(_,c.precedence,r),o.instance=_;case"script":return _=Bl(c.src),(g=r.querySelector(ju(_)))?(o.instance=g,je(g),g):(h=c,(g=Ti.get(_))&&(h=p({},c),gy(h,g)),r=r.ownerDocument||r,g=r.createElement("script"),je(g),En(g,"link",h),r.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,Ff(h,c.precedence,r));return o.instance}function Ff(r,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,_=g,x=0;x<h.length;x++){var A=h[x];if(A.dataset.precedence===o)_=A;else if(_!==g)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function my(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function gy(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var zf=null;function dT(r,o,c){if(zf===null){var h=new Map,g=zf=new Map;g.set(c,h)}else g=zf,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),g=0;g<c.length;g++){var _=c[g];if(!(_[ja]||_[Je]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(o)||"";x=r+x;var A=h.get(x);A?A.push(_):h.set(x,[_])}}return h}function fT(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function RM(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function mT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Uu=null;function IM(){}function NM(r,o,c){if(Uu===null)throw Error(i(475));var h=Uu;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=zl(c.href),_=r.querySelector(Vu(g));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(h.count++,h=Bf.bind(h),r.then(h,h)),o.state.loading|=4,o.instance=_,je(_);return}_=r.ownerDocument||r,c=uT(c),(g=Ti.get(g))&&my(c,g),_=_.createElement("link"),je(_);var x=_;x._p=new Promise(function(A,P){x.onload=A,x.onerror=P}),En(_,"link",c),o.instance=_}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=Bf.bind(h),r.addEventListener("load",o),r.addEventListener("error",o))}}function kM(){if(Uu===null)throw Error(i(475));var r=Uu;return r.stylesheets&&r.count===0&&py(r,r.stylesheets),0<r.count?function(o){var c=setTimeout(function(){if(r.stylesheets&&py(r,r.stylesheets),r.unsuspend){var h=r.unsuspend;r.unsuspend=null,h()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c)}}:null}function Bf(){if(this.count--,this.count===0){if(this.stylesheets)py(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Hf=null;function py(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Hf=new Map,o.forEach(MM,r),Hf=null,Bf.call(r))}function MM(r,o){if(!(o.state.loading&4)){var c=Hf.get(r);if(c)var h=c.get(null);else{c=new Map,Hf.set(r,c);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var x=g[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),h=x)}h&&c.set(null,h)}g=o.instance,x=g.getAttribute("data-precedence"),_=c.get(x)||h,_===h&&c.set(null,g),c.set(x,g),this.count++,h=Bf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),_?_.parentNode.insertBefore(g,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),o.state.loading|=4}}var Fu={$$typeof:G,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function DM(r,o,c,h,g,_,x,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.hiddenUpdates=Rs(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function gT(r,o,c,h,g,_,x,A,P,$,tt,rt){return r=new DM(r,o,c,x,A,P,$,rt),o=1,_===!0&&(o|=24),_=si(3,null,null,o),r.current=_,_.stateNode=r,o=Xp(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:h,isDehydrated:c,cache:o},e_(_),r}function pT(r){return r?(r=vl,r):vl}function _T(r,o,c,h,g,_){g=pT(g),h.context===null?h.context=g:h.pendingContext=g,h=kr(o),h.payload={element:c},_=_===void 0?null:_,_!==null&&(h.callback=_),c=Mr(r,h,o),c!==null&&(ci(c,r,o),pu(c,r,o))}function yT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function _y(r,o){yT(r,o),(r=r.alternate)&&yT(r,o)}function vT(r){if(r.tag===13){var o=yl(r,67108864);o!==null&&ci(o,r,67108864),_y(r,67108864)}}var qf=!0;function OM(r,o,c,h){var g=Q.T;Q.T=null;var _=ot.p;try{ot.p=2,yy(r,o,c,h)}finally{ot.p=_,Q.T=g}}function PM(r,o,c,h){var g=Q.T;Q.T=null;var _=ot.p;try{ot.p=8,yy(r,o,c,h)}finally{ot.p=_,Q.T=g}}function yy(r,o,c,h){if(qf){var g=vy(h);if(g===null)ry(r,o,h,Wf,c),wT(r,h);else if(VM(g,r,o,c,h))h.stopPropagation();else if(wT(r,h),o&4&&-1<LM.indexOf(r)){for(;g!==null;){var _=Qi(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=Di(_.pendingLanes);if(x!==0){var A=_;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var P=1<<31-In(x);A.entanglements[1]|=P,x&=~P}cs(_),(re&6)===0&&(Rf=di()+500,Du(0))}}break;case 13:A=yl(_,2),A!==null&&ci(A,_,2),Nf(),_y(_,2)}if(_=vy(h),_===null&&ry(r,o,h,Wf,c),_===g)break;g=_}g!==null&&h.stopPropagation()}else ry(r,o,h,null,c)}}function vy(r){return r=gi(r),by(r)}var Wf=null;function by(r){if(Wf=null,r=Ns(r),r!==null){var o=a(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=l(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Wf=r,null}function bT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xp()){case jc:return 2;case Xo:return 8;case Da:case Tp:return 32;case Zo:return 268435456;default:return 32}default:return 32}}var wy=!1,Wr=null,Gr=null,Yr=null,zu=new Map,Bu=new Map,$r=[],LM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wT(r,o){switch(r){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":zu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(o.pointerId)}}function Hu(r,o,c,h,g,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Qi(o),o!==null&&vT(o)),r):(r.eventSystemFlags|=h,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function VM(r,o,c,h,g){switch(o){case"focusin":return Wr=Hu(Wr,r,o,c,h,g),!0;case"dragenter":return Gr=Hu(Gr,r,o,c,h,g),!0;case"mouseover":return Yr=Hu(Yr,r,o,c,h,g),!0;case"pointerover":var _=g.pointerId;return zu.set(_,Hu(zu.get(_)||null,r,o,c,h,g)),!0;case"gotpointercapture":return _=g.pointerId,Bu.set(_,Hu(Bu.get(_)||null,r,o,c,h,g)),!0}return!1}function ET(r){var o=Ns(r.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){r.blockedOn=o,Id(r.priority,function(){if(c.tag===13){var h=li();h=Er(h);var g=yl(c,h);g!==null&&ci(g,c,h),_y(c,h)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gf(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=vy(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);Os=h,c.target.dispatchEvent(h),Os=null}else return o=Qi(c),o!==null&&vT(o),r.blockedOn=c,!1;o.shift()}return!0}function xT(r,o,c){Gf(r)&&c.delete(o)}function jM(){wy=!1,Wr!==null&&Gf(Wr)&&(Wr=null),Gr!==null&&Gf(Gr)&&(Gr=null),Yr!==null&&Gf(Yr)&&(Yr=null),zu.forEach(xT),Bu.forEach(xT)}function Yf(r,o){r.blockedOn===o&&(r.blockedOn=null,wy||(wy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jM)))}var $f=null;function TT(r){$f!==r&&($f=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){$f===r&&($f=null);for(var o=0;o<r.length;o+=3){var c=r[o],h=r[o+1],g=r[o+2];if(typeof h!="function"){if(by(h||c)===null)continue;break}var _=Qi(c);_!==null&&(r.splice(o,3),o-=3,b_(_,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function qu(r){function o(P){return Yf(P,r)}Wr!==null&&Yf(Wr,r),Gr!==null&&Yf(Gr,r),Yr!==null&&Yf(Yr,r),zu.forEach(o),Bu.forEach(o);for(var c=0;c<$r.length;c++){var h=$r[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<$r.length&&(c=$r[0],c.blockedOn===null);)ET(c),c.blockedOn===null&&$r.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],_=c[h+1],x=g[He]||null;if(typeof _=="function")x||TT(c);else if(x){var A=null;if(_&&_.hasAttribute("formAction")){if(g=_,x=_[He]||null)A=x.formAction;else if(by(g)!==null)continue}else A=x.action;typeof A=="function"?c[h+1]=A:(c.splice(h,3),h-=3),TT(c)}}}function Ey(r){this._internalRoot=r}Qf.prototype.render=Ey.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var c=o.current,h=li();_T(c,h,r,o,null,null)},Qf.prototype.unmount=Ey.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;_T(r.current,2,null,r,null,null),Nf(),o[fi]=null}};function Qf(r){this._internalRoot=r}Qf.prototype.unstable_scheduleHydration=function(r){if(r){var o=xr();r={blockedOn:null,target:r,priority:o};for(var c=0;c<$r.length&&o!==0&&o<$r[c].priority;c++);$r.splice(c,0,r),c===0&&ET(r)}};var ST=t.version;if(ST!=="19.1.0")throw Error(i(527,ST,"19.1.0"));ot.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(o),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var UM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{De=Kf.inject(UM),se=Kf}catch{}}return Gu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var c=!1,h="",g=zE,_=BE,x=HE,A=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(A=o.unstable_transitionCallbacks)),o=gT(r,1,!1,null,null,c,h,g,_,x,A,null),r[fi]=o.current,sy(r),new Ey(o)},Gu.hydrateRoot=function(r,o,c){if(!s(r))throw Error(i(299));var h=!1,g="",_=zE,x=BE,A=HE,P=null,$=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(P=c.unstable_transitionCallbacks),c.formState!==void 0&&($=c.formState)),o=gT(r,1,!0,o,c??null,h,g,_,x,A,P,$),o.context=pT(null),c=o.current,h=li(),h=Er(h),g=kr(h),g.callback=null,Mr(c,g,h),c=h,o.current.lanes=c,Is(o,c),cs(o),r[fi]=o.current,sy(r),new Qf(o)},Gu.version="19.1.0",Gu}var PT;function KM(){if(PT)return Sy.exports;PT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Sy.exports=QM(),Sy.exports}var XM=KM();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var LT="popstate";function ZM(n={}){function t(i,s){let{pathname:a,search:l,hash:u}=i.location;return c0("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:kh(s)}return tD(t,e,null,n)}function ke(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Es(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function JM(){return Math.random().toString(36).substring(2,10)}function VT(n,t){return{usr:n.state,key:n.key,idx:t}}function c0(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?xc(t):t,state:e,key:t&&t.key||i||JM()}}function kh({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function xc(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function tD(n,t,e,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function y(){u="POP";let C=p(),L=C==null?null:C-f;f=C,d&&d({action:u,location:N.location,delta:L})}function v(C,L){u="PUSH";let q=c0(N.location,C,L);f=p()+1;let G=VT(q,f),J=N.createHref(q);try{l.pushState(G,"",J)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(J)}a&&d&&d({action:u,location:N.location,delta:1})}function T(C,L){u="REPLACE";let q=c0(N.location,C,L);f=p();let G=VT(q,f),J=N.createHref(q);l.replaceState(G,"",J),a&&d&&d({action:u,location:N.location,delta:0})}function S(C){return eD(C)}let N={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(LT,y),d=C,()=>{s.removeEventListener(LT,y),d=null}},createHref(C){return t(s,C)},createURL:S,encodeLocation(C){let L=S(C);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:T,go(C){return l.go(C)}};return N}function eD(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),ke(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:kh(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function wC(n,t,e="/"){return nD(n,t,e,!1)}function nD(n,t,e,i){let s=typeof t=="string"?xc(t):t,a=fr(s.pathname||"/",e);if(a==null)return null;let l=EC(n);iD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=mD(a);u=dD(l[d],f,i)}return u}function EC(n,t=[],e=[],i=""){let s=(a,l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(ke(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let f=ur([i,d.relativePath]),p=e.concat(d);a.children&&a.children.length>0&&(ke(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),EC(a.children,t,p,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:uD(f,a.index),routesMeta:p})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let u of xC(a.path))s(a,l,u)}),t}function xC(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),a=e.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=xC(i.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function iD(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:hD(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var sD=/^:[\w-]+$/,rD=3,aD=2,oD=1,lD=10,cD=-2,jT=n=>n==="*";function uD(n,t){let e=n.split("/"),i=e.length;return e.some(jT)&&(i+=cD),t&&(i+=aD),e.filter(s=>!jT(s)).reduce((s,a)=>s+(sD.test(a)?rD:a===""?oD:lD),i)}function hD(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function dD(n,t,e=!1){let{routesMeta:i}=n,s={},a="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=a==="/"?t:t.slice(a.length)||"/",y=Vm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!y&&f&&e&&!i[i.length-1].route.index&&(y=Vm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:ur([a,y.pathname]),pathnameBase:yD(ur([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=ur([a,y.pathnameBase]))}return l}function Vm(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=fD(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:y},v)=>{if(p==="*"){let S=u[v]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const T=u[v];return y&&!T?f[p]=void 0:f[p]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function fD(n,t=!1,e=!0){Es(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function mD(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Es(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function fr(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function gD(n,t="/"){let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?xc(n):n;return{pathname:e?e.startsWith("/")?e:pD(e,t):t,search:vD(i),hash:bD(s)}}function pD(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Iy(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _D(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function TC(n){let t=_D(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function SC(n,t,e,i=!1){let s;typeof n=="string"?s=xc(n):(s={...n},ke(!s.pathname||!s.pathname.includes("?"),Iy("?","pathname","search",s)),ke(!s.pathname||!s.pathname.includes("#"),Iy("#","pathname","hash",s)),ke(!s.search||!s.search.includes("#"),Iy("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=e;else{let y=t.length-1;if(!i&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?t[y]:"/"}let d=gD(s,u),f=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var ur=n=>n.join("/").replace(/\/\/+/g,"/"),yD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function wD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var AC=["POST","PUT","PATCH","DELETE"];new Set(AC);var ED=["GET",...AC];new Set(ED);var Tc=z.createContext(null);Tc.displayName="DataRouter";var Lg=z.createContext(null);Lg.displayName="DataRouterState";z.createContext(!1);var CC=z.createContext({isTransitioning:!1});CC.displayName="ViewTransition";var xD=z.createContext(new Map);xD.displayName="Fetchers";var TD=z.createContext(null);TD.displayName="Await";var Ts=z.createContext(null);Ts.displayName="Navigation";var ad=z.createContext(null);ad.displayName="Location";var Ss=z.createContext({outlet:null,matches:[],isDataRoute:!1});Ss.displayName="Route";var av=z.createContext(null);av.displayName="RouteError";function SD(n,{relative:t}={}){ke(od(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=z.useContext(Ts),{hash:s,pathname:a,search:l}=ld(n,{relative:t}),u=a;return e!=="/"&&(u=a==="/"?e:ur([e,a])),i.createHref({pathname:u,search:l,hash:s})}function od(){return z.useContext(ad)!=null}function Ho(){return ke(od(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(ad).location}var RC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function IC(n){z.useContext(Ts).static||z.useLayoutEffect(n)}function qo(){let{isDataRoute:n}=z.useContext(Ss);return n?UD():AD()}function AD(){ke(od(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(Tc),{basename:t,navigator:e}=z.useContext(Ts),{matches:i}=z.useContext(Ss),{pathname:s}=Ho(),a=JSON.stringify(TC(i)),l=z.useRef(!1);return IC(()=>{l.current=!0}),z.useCallback((d,f={})=>{if(Es(l.current,RC),!l.current)return;if(typeof d=="number"){e.go(d);return}let p=SC(d,JSON.parse(a),s,f.relative==="path");n==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ur([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,a,s,n])}z.createContext(null);function CD(){let{matches:n}=z.useContext(Ss),t=n[n.length-1];return t?t.params:{}}function ld(n,{relative:t}={}){let{matches:e}=z.useContext(Ss),{pathname:i}=Ho(),s=JSON.stringify(TC(e));return z.useMemo(()=>SC(n,JSON.parse(s),i,t==="path"),[n,s,i,t])}function RD(n,t){return NC(n,t)}function NC(n,t,e,i){ke(od(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=z.useContext(Ts),{matches:a}=z.useContext(Ss),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let L=p&&p.path||"";kC(d,!p||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let y=Ho(),v;if(t){let L=typeof t=="string"?xc(t):t;ke(f==="/"||L.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${L.pathname}" was given in the \`location\` prop.`),v=L}else v=y;let T=v.pathname||"/",S=T;if(f!=="/"){let L=f.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let N=wC(n,{pathname:S});Es(p||N!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Es(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=DD(N&&N.map(L=>Object.assign({},L,{params:Object.assign({},u,L.params),pathname:ur([f,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:ur([f,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,e,i);return t&&C?z.createElement(ad.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function ID(){let n=jD(),t=wD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:a},"ErrorBoundary")," or"," ",z.createElement("code",{style:a},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},t),e?z.createElement("pre",{style:s},e):null,l)}var ND=z.createElement(ID,null),kD=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?z.createElement(Ss.Provider,{value:this.props.routeContext},z.createElement(av.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function MD({routeContext:n,match:t,children:e}){let i=z.useContext(Tc);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(Ss.Provider,{value:n},e)}function DD(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let s=n,a=e?.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);ke(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(e)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:y}=e,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let y,v=!1,T=null,S=null;e&&(y=a&&f.route.id?a[f.route.id]:void 0,T=f.route.errorElement||ND,l&&(u<0&&p===0?(kC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):u===p&&(v=!0,S=f.route.hydrateFallbackElement||null)));let N=t.concat(s.slice(0,p+1)),C=()=>{let L;return y?L=T:v?L=S:f.route.Component?L=z.createElement(f.route.Component,null):f.route.element?L=f.route.element:L=d,z.createElement(MD,{match:f,routeContext:{outlet:d,matches:N,isDataRoute:e!=null},children:L})};return e&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?z.createElement(kD,{location:e.location,revalidation:e.revalidation,component:T,error:y,children:C(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):C()},null)}function ov(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OD(n){let t=z.useContext(Tc);return ke(t,ov(n)),t}function PD(n){let t=z.useContext(Lg);return ke(t,ov(n)),t}function LD(n){let t=z.useContext(Ss);return ke(t,ov(n)),t}function lv(n){let t=LD(n),e=t.matches[t.matches.length-1];return ke(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function VD(){return lv("useRouteId")}function jD(){let n=z.useContext(av),t=PD("useRouteError"),e=lv("useRouteError");return n!==void 0?n:t.errors?.[e]}function UD(){let{router:n}=OD("useNavigate"),t=lv("useNavigate"),e=z.useRef(!1);return IC(()=>{e.current=!0}),z.useCallback(async(s,a={})=>{Es(e.current,RC),e.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:t,...a}))},[n,t])}var UT={};function kC(n,t,e){!t&&!UT[n]&&(UT[n]=!0,Es(!1,e))}z.memo(FD);function FD({routes:n,future:t,state:e}){return NC(n,void 0,e,t)}function Zr(n){ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zD({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:s,static:a=!1}){ke(!od(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=z.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof e=="string"&&(e=xc(e));let{pathname:d="/",search:f="",hash:p="",state:y=null,key:v="default"}=e,T=z.useMemo(()=>{let S=fr(d,l);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:v},navigationType:i}},[l,d,f,p,y,v,i]);return Es(T!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:z.createElement(Ts.Provider,{value:u},z.createElement(ad.Provider,{children:t,value:T}))}function BD({children:n,location:t}){return RD(u0(n),t)}function u0(n,t=[]){let e=[];return z.Children.forEach(n,(i,s)=>{if(!z.isValidElement(i))return;let a=[...t,s];if(i.type===z.Fragment){e.push.apply(e,u0(i.props.children,a));return}ke(i.type===Zr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ke(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=u0(i.props.children,a)),e.push(l)}),e}var wm="get",Em="application/x-www-form-urlencoded";function Vg(n){return n!=null&&typeof n.tagName=="string"}function HD(n){return Vg(n)&&n.tagName.toLowerCase()==="button"}function qD(n){return Vg(n)&&n.tagName.toLowerCase()==="form"}function WD(n){return Vg(n)&&n.tagName.toLowerCase()==="input"}function GD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function YD(n,t){return n.button===0&&(!t||t==="_self")&&!GD(n)}var Xf=null;function $D(){if(Xf===null)try{new FormData(document.createElement("form"),0),Xf=!1}catch{Xf=!0}return Xf}var QD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ny(n){return n!=null&&!QD.has(n)?(Es(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Em}"`),null):n}function KD(n,t){let e,i,s,a,l;if(qD(n)){let u=n.getAttribute("action");i=u?fr(u,t):null,e=n.getAttribute("method")||wm,s=Ny(n.getAttribute("enctype"))||Em,a=new FormData(n)}else if(HD(n)||WD(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(i=d?fr(d,t):null,e=n.getAttribute("formmethod")||u.getAttribute("method")||wm,s=Ny(n.getAttribute("formenctype"))||Ny(u.getAttribute("enctype"))||Em,a=new FormData(u,n),!$D()){let{name:f,type:p,value:y}=n;if(p==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,y)}}else{if(Vg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=wm,i=null,s=Em,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cv(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function XD(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&fr(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function ZD(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function tO(n,t,e){let i=await Promise.all(n.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await ZD(a,e);return l.links?l.links():[]}return[]}));return sO(i.flat(1).filter(JD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function FT(n,t,e,i,s,a){let l=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return a==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):a==="data"?t.filter((d,f)=>{let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function eO(n,t,{includeHydrateFallback:e}={}){return nO(n.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function nO(n){return[...new Set(n)]}function iO(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function sO(n,t){let e=new Set;return new Set(t),n.reduce((i,s)=>{let a=JSON.stringify(iO(s));return e.has(a)||(e.add(a),i.push({key:a,link:s})),i},[])}function MC(){let n=z.useContext(Tc);return cv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function rO(){let n=z.useContext(Lg);return cv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var uv=z.createContext(void 0);uv.displayName="FrameworkContext";function DC(){let n=z.useContext(uv);return cv(n,"You must render this element inside a <HydratedRouter> element"),n}function aO(n,t){let e=z.useContext(uv),[i,s]=z.useState(!1),[a,l]=z.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=t,v=z.useRef(null);z.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let N=L=>{L.forEach(q=>{l(q.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[n]),z.useEffect(()=>{if(i){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[i]);let T=()=>{s(!0)},S=()=>{s(!1),l(!1)};return e?n!=="intent"?[a,v,{}]:[a,v,{onFocus:Yu(u,T),onBlur:Yu(d,S),onMouseEnter:Yu(f,T),onMouseLeave:Yu(p,S),onTouchStart:Yu(y,T)}]:[!1,v,{}]}function Yu(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function oO({page:n,...t}){let{router:e}=MC(),i=z.useMemo(()=>wC(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?z.createElement(cO,{page:n,matches:i,...t}):null}function lO(n){let{manifest:t,routeModules:e}=DC(),[i,s]=z.useState([]);return z.useEffect(()=>{let a=!1;return tO(n,t,e).then(l=>{a||s(l)}),()=>{a=!0}},[n,t,e]),i}function cO({page:n,matches:t,...e}){let i=Ho(),{manifest:s,routeModules:a}=DC(),{basename:l}=MC(),{loaderData:u,matches:d}=rO(),f=z.useMemo(()=>FT(n,t,d,s,i,"data"),[n,t,d,s,i]),p=z.useMemo(()=>FT(n,t,d,s,i,"assets"),[n,t,d,s,i]),y=z.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,N=!1;if(t.forEach(L=>{let q=s.routes[L.route.id];!q||!q.hasLoader||(!f.some(G=>G.route.id===L.route.id)&&L.route.id in u&&a[L.route.id]?.shouldRevalidate||q.hasClientLoader?N=!0:S.add(L.route.id))}),S.size===0)return[];let C=XD(n,l,"data");return N&&S.size>0&&C.searchParams.set("_routes",t.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[C.pathname+C.search]},[l,u,i,s,f,t,n,a]),v=z.useMemo(()=>eO(p,s),[p,s]),T=lO(p);return z.createElement(z.Fragment,null,y.map(S=>z.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),v.map(S=>z.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),T.map(({key:S,link:N})=>z.createElement("link",{key:S,...N})))}function uO(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var OC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OC&&(window.__reactRouterVersion="7.7.1")}catch{}function hO({basename:n,children:t,window:e}){let i=z.useRef();i.current==null&&(i.current=ZM({window:e,v5Compat:!0}));let s=i.current,[a,l]=z.useState({action:s.action,location:s.location}),u=z.useCallback(d=>{z.startTransition(()=>l(d))},[l]);return z.useLayoutEffect(()=>s.listen(u),[s,u]),z.createElement(zD,{basename:n,children:t,location:a.location,navigationType:a.action,navigator:s})}var PC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=z.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:y,...v},T){let{basename:S}=z.useContext(Ts),N=typeof f=="string"&&PC.test(f),C,L=!1;if(typeof f=="string"&&N&&(C=f,OC))try{let k=new URL(window.location.href),O=f.startsWith("//")?new URL(k.protocol+f):new URL(f),V=fr(O.pathname,S);O.origin===k.origin&&V!=null?f=V+O.search+O.hash:L=!0}catch{Es(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=SD(f,{relative:s}),[G,J,H]=aO(i,v),ct=gO(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:y});function M(k){t&&t(k),k.defaultPrevented||ct(k)}let I=z.createElement("a",{...v,...H,href:C||q,onClick:L||a?t:M,ref:uO(T,J),target:d,"data-discover":!N&&e==="render"?"true":void 0});return G&&!N?z.createElement(z.Fragment,null,I,z.createElement(oO,{page:q})):I});fe.displayName="Link";var dO=z.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...f},p){let y=ld(l,{relative:f.relative}),v=Ho(),T=z.useContext(Lg),{navigator:S,basename:N}=z.useContext(Ts),C=T!=null&&bO(y)&&u===!0,L=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,q=v.pathname,G=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;e||(q=q.toLowerCase(),G=G?G.toLowerCase():null,L=L.toLowerCase()),G&&N&&(G=fr(G,N)||G);const J=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let H=q===L||!s&&q.startsWith(L)&&q.charAt(J)==="/",ct=G!=null&&(G===L||!s&&G.startsWith(L)&&G.charAt(L.length)==="/"),M={isActive:H,isPending:ct,isTransitioning:C},I=H?t:void 0,k;typeof i=="function"?k=i(M):k=[i,H?"active":null,ct?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(M):a;return z.createElement(fe,{...f,"aria-current":I,className:k,ref:p,style:O,to:l,viewTransition:u},typeof d=="function"?d(M):d)});dO.displayName="NavLink";var fO=z.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:s,state:a,method:l=wm,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:y,...v},T)=>{let S=yO(),N=vO(u,{relative:f}),C=l.toLowerCase()==="get"?"get":"post",L=typeof u=="string"&&PC.test(u),q=G=>{if(d&&d(G),G.defaultPrevented)return;G.preventDefault();let J=G.nativeEvent.submitter,H=J?.getAttribute("formmethod")||l;S(J||G.currentTarget,{fetcherKey:t,method:H,navigate:e,replace:s,state:a,relative:f,preventScrollReset:p,viewTransition:y})};return z.createElement("form",{ref:T,method:C,action:N,onSubmit:i?d:q,...v,"data-discover":!L&&n==="render"?"true":void 0})});fO.displayName="Form";function mO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LC(n){let t=z.useContext(Tc);return ke(t,mO(n)),t}function gO(n,{target:t,replace:e,state:i,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=qo(),d=Ho(),f=ld(n,{relative:a});return z.useCallback(p=>{if(YD(p,t)){p.preventDefault();let y=e!==void 0?e:kh(d)===kh(f);u(n,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,f,e,i,t,n,s,a,l])}var pO=0,_O=()=>`__${String(++pO)}__`;function yO(){let{router:n}=LC("useSubmit"),{basename:t}=z.useContext(Ts),e=VD();return z.useCallback(async(i,s={})=>{let{action:a,method:l,encType:u,formData:d,body:f}=KD(i,t);if(s.navigate===!1){let p=s.fetcherKey||_O();await n.fetch(p,e,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,t,e])}function vO(n,{relative:t}={}){let{basename:e}=z.useContext(Ts),i=z.useContext(Ss);ke(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...ld(n||".",{relative:t})},l=Ho();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:ur([e,a.pathname])),kh(a)}function bO(n,{relative:t}={}){let e=z.useContext(CC);ke(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=LC("useViewTransitionState"),s=ld(n,{relative:t});if(!e.isTransitioning)return!1;let a=fr(e.currentLocation.pathname,i)||e.currentLocation.pathname,l=fr(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Vm(s.pathname,l)!=null||Vm(s.pathname,a)!=null}const VC=z.createContext();function jC({children:n}){const[t,e]=z.useState(()=>{const i=localStorage.getItem("darkMode");return i?JSON.parse(i):!1});return z.useEffect(()=>{document.documentElement.classList.toggle("dark",t),localStorage.setItem("darkMode",JSON.stringify(t))},[t]),w.jsx(VC.Provider,{value:{darkMode:t,setDarkMode:e},children:n})}function hv(){return z.useContext(VC)}const wO=()=>{};var zT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=function(n,t){if(!n)throw Sc(t)},Sc=function(n){return new Error("Firebase Database ("+UC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},EO=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[e++];t[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[e++],l=n[e++],u=n[e++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const a=n[e++],l=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return t.join("")},dv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,p=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;d||(T=64,l||(v=64)),i.push(e[p],e[y],e[v],e[T])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(FC(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):EO(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=e[n.charAt(s++)],u=s<n.length?e[n.charAt(s)]:0;++s;const f=s<n.length?e[n.charAt(s)]:64;++s;const y=s<n.length?e[n.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new xO;const v=a<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),y!==64){const S=f<<6&192|y;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zC=function(n){const t=FC(n);return dv.encodeByteArray(t,!0)},jm=function(n){return zC(n).replace(/\./g,"")},Um=function(n){try{return dv.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(n){return BC(void 0,n)}function BC(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!SO(e)||(n[e]=BC(n[e],t[e]));return n}function SO(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=()=>AO().__FIREBASE_DEFAULTS__,RO=()=>{if(typeof process>"u"||typeof zT>"u")return;const n=zT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Um(n[1]);return t&&JSON.parse(t)},jg=()=>{try{return wO()||CO()||RO()||IO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HC=n=>jg()?.emulatorHosts?.[n],qC=n=>{const t=HC(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},WC=()=>jg()?.config,GC=n=>jg()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[jm(JSON.stringify(e)),jm(JSON.stringify(l)),""].join(".")}const ph={};function NO(){const n={prod:[],emulator:[]};for(const t of Object.keys(ph))ph[t]?n.emulator.push(t):n.prod.push(t);return n}function kO(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let BT=!1;function mv(n,t){if(typeof window>"u"||typeof document>"u"||!Ca(window.location.host)||ph[n]===t||ph[n]||BT)return;ph[n]=t;function e(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=NO().prod.length>0;function l(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{BT=!0,l()},v}function p(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=kO(i),T=e("text"),S=document.getElementById(T)||document.createElement("span"),N=e("learnmore"),C=document.getElementById(N)||document.createElement("a"),L=e("preprendIcon"),q=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const G=v.element;u(G),p(C,N);const J=f();d(q,L),G.append(q,S,C,J),document.body.appendChild(G)}a?(S.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function MO(){const n=jg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $C(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PO(){const n=Vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LO(){return UC.NODE_ADMIN===!0}function VO(){return!MO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jO(){try{return typeof indexedDB=="object"}catch{return!1}}function UO(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="FirebaseError";class br extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=FO,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cd.prototype.create)}}class cd{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,a=this.errors[t],l=a?zO(a,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new br(s,u,i)}}function zO(n,t){return n.replace(BO,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const BO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(n){return JSON.parse(n)}function gn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=function(n){let t={},e={},i={},s="";try{const a=n.split(".");t=Mh(Um(a[0])||""),e=Mh(Um(a[1])||""),s=a[2],i=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:i,signature:s}},HO=function(n){const t=QC(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},qO=function(n){const t=QC(n).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function lc(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function h0(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Fm(n,t,e){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=t.call(e,n[s],s,n));return i}function ga(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const a=n[s],l=t[s];if(HT(a)&&HT(l)){if(!ga(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function HT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function rh(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(a)}}),t}function ah(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if(typeof t=="string")for(let y=0;y<16;y++)i[y]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let y=0;y<16;y++)i[y]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let y=16;y<80;y++){const v=i[y-3]^i[y-8]^i[y-14]^i[y-16];i[y]=(v<<1|v>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4],f,p;for(let y=0;y<80;y++){y<40?y<20?(f=u^a&(l^u),p=1518500249):(f=a^l^u,p=1859775393):y<60?(f=a&l|u&(a|l),p=2400959708):(f=a^l^u,p=3395469782);const v=(s<<5|s>>>27)+f+d+p+i[y]&4294967295;d=u,u=l,l=(a<<30|a>>>2)&4294967295,a=s,s=v}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const i=e-this.blockSize;let s=0;const a=this.buf_;let l=this.inbuf_;for(;s<e;){if(l===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(a[l]=t.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}else for(;s<e;)if(a[l]=t[s],++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=e&255,e/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)t[i]=this.chain_[s]>>a&255,++i;return t}}function GO(n,t){const e=new YO(n,t);return e.subscribe.bind(e)}class YO{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");$O(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=ky),s.error===void 0&&(s.error=ky),s.complete===void 0&&(s.complete=ky);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $O(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function ky(){}function pv(n,t){return`${n} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const a=s-55296;i++,dt(i<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(i)-56320;s=65536+(a<<10)+l}s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):s<65536?(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},Fg=function(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,e++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n){return n&&n._delegate?n._delegate:n}class pa{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Ug;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ZO(t))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(t=_o){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=_o){return this.instances.has(t)}getOptions(t=_o){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);i===u&&l.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&t(a,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:XO(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=_o){return this.component?this.component.multipleInstances?t:_o:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XO(n){return n===_o?void 0:n}function ZO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new KO(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ut||(Ut={}));const tP={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},eP=Ut.INFO,nP={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},iP=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=nP[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zg{constructor(t){this.name=t,this._logLevel=eP,this._logHandler=iP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tP[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...t),this._logHandler(this,Ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...t),this._logHandler(this,Ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...t),this._logHandler(this,Ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...t),this._logHandler(this,Ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...t),this._logHandler(this,Ut.ERROR,...t)}}const sP=(n,t)=>t.some(e=>n instanceof e);let qT,WT;function rP(){return qT||(qT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aP(){return WT||(WT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KC=new WeakMap,d0=new WeakMap,XC=new WeakMap,My=new WeakMap,_v=new WeakMap;function oP(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{e(aa(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&KC.set(e,n)}).catch(()=>{}),_v.set(t,n),t}function lP(n){if(d0.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{e(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});d0.set(n,t)}let f0={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return d0.get(n);if(t==="objectStoreNames")return n.objectStoreNames||XC.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return aa(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function cP(n){f0=n(f0)}function uP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Dy(this),t,...e);return XC.set(i,t.sort?t.sort():[t]),aa(i)}:aP().includes(n)?function(...t){return n.apply(Dy(this),t),aa(KC.get(this))}:function(...t){return aa(n.apply(Dy(this),t))}}function hP(n){return typeof n=="function"?uP(n):(n instanceof IDBTransaction&&lP(n),sP(n,rP())?new Proxy(n,f0):n)}function aa(n){if(n instanceof IDBRequest)return oP(n);if(My.has(n))return My.get(n);const t=hP(n);return t!==n&&(My.set(n,t),_v.set(t,n)),t}const Dy=n=>_v.get(n);function dP(n,t,{blocked:e,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,t),u=aa(l);return i&&l.addEventListener("upgradeneeded",d=>{i(aa(l.result),d.oldVersion,d.newVersion,aa(l.transaction),d)}),e&&l.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const fP=["get","getKey","getAll","getAllKeys","count"],mP=["put","add","delete","clear"],Oy=new Map;function GT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Oy.get(t))return Oy.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=mP.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||fP.includes(e)))return;const a=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[e](...u),s&&d.done]))[0]};return Oy.set(t,a),a}cP(n=>({...n,get:(t,e,i)=>GT(t,e)||n.get(t,e,i),has:(t,e)=>!!GT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(pP(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function pP(n){return n.getComponent()?.type==="VERSION"}const m0="@firebase/app",YT="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new zg("@firebase/app"),_P="@firebase/app-compat",yP="@firebase/analytics-compat",vP="@firebase/analytics",bP="@firebase/app-check-compat",wP="@firebase/app-check",EP="@firebase/auth",xP="@firebase/auth-compat",TP="@firebase/database",SP="@firebase/data-connect",AP="@firebase/database-compat",CP="@firebase/functions",RP="@firebase/functions-compat",IP="@firebase/installations",NP="@firebase/installations-compat",kP="@firebase/messaging",MP="@firebase/messaging-compat",DP="@firebase/performance",OP="@firebase/performance-compat",PP="@firebase/remote-config",LP="@firebase/remote-config-compat",VP="@firebase/storage",jP="@firebase/storage-compat",UP="@firebase/firestore",FP="@firebase/ai",zP="@firebase/firestore-compat",BP="firebase",HP="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="[DEFAULT]",qP={[m0]:"fire-core",[_P]:"fire-core-compat",[vP]:"fire-analytics",[yP]:"fire-analytics-compat",[wP]:"fire-app-check",[bP]:"fire-app-check-compat",[EP]:"fire-auth",[xP]:"fire-auth-compat",[TP]:"fire-rtdb",[SP]:"fire-data-connect",[AP]:"fire-rtdb-compat",[CP]:"fire-fn",[RP]:"fire-fn-compat",[IP]:"fire-iid",[NP]:"fire-iid-compat",[kP]:"fire-fcm",[MP]:"fire-fcm-compat",[DP]:"fire-perf",[OP]:"fire-perf-compat",[PP]:"fire-rc",[LP]:"fire-rc-compat",[VP]:"fire-gcs",[jP]:"fire-gcs-compat",[UP]:"fire-fst",[zP]:"fire-fst-compat",[FP]:"fire-vertex","fire-js":"fire-js",[BP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Map,WP=new Map,p0=new Map;function $T(n,t){try{n.container.addComponent(t)}catch(e){mr.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Do(n){const t=n.name;if(p0.has(t))return mr.debug(`There were multiple attempts to register component ${t}.`),!1;p0.set(t,n);for(const e of zm.values())$T(e,n);for(const e of WP.values())$T(e,n);return!0}function Bg(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Yn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oa=new cd("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw oa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=HP;function ZC(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:g0,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw oa.create("bad-app-name",{appName:String(s)});if(e||(e=WC()),!e)throw oa.create("no-options");const a=zm.get(s);if(a){if(ga(e,a.options)&&ga(i,a.config))return a;throw oa.create("duplicate-app",{appName:s})}const l=new JO(s);for(const d of p0.values())l.addComponent(d);const u=new YP(e,i,l);return zm.set(s,u),u}function yv(n=g0){const t=zm.get(n);if(!t&&n===g0&&WC())return ZC();if(!t)throw oa.create("no-app",{appName:n});return t}function gs(n,t,e){let i=qP[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${t}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mr.warn(l.join(" "));return}Do(new pa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="firebase-heartbeat-database",QP=1,Dh="firebase-heartbeat-store";let Py=null;function JC(){return Py||(Py=dP($P,QP,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Dh)}catch(e){console.warn(e)}}}}).catch(n=>{throw oa.create("idb-open",{originalErrorMessage:n.message})})),Py}async function KP(n){try{const e=(await JC()).transaction(Dh),i=await e.objectStore(Dh).get(tR(n));return await e.done,i}catch(t){if(t instanceof br)mr.warn(t.message);else{const e=oa.create("idb-get",{originalErrorMessage:t?.message});mr.warn(e.message)}}}async function QT(n,t){try{const i=(await JC()).transaction(Dh,"readwrite");await i.objectStore(Dh).put(t,tR(n)),await i.done}catch(e){if(e instanceof br)mr.warn(e.message);else{const i=oa.create("idb-set",{originalErrorMessage:e?.message});mr.warn(i.message)}}}function tR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1024,ZP=30;class JP{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new eL(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=KT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>ZP){const s=nL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){mr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=KT(),{heartbeatsToSend:e,unsentEntries:i}=tL(this._heartbeatsCache.heartbeats),s=jm(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return mr.warn(t),""}}}function KT(){return new Date().toISOString().substring(0,10)}function tL(n,t=XP){const e=[];let i=n.slice();for(const s of n){const a=e.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),XT(e)>t){a.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),XT(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class eL{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jO()?UO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await KP(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return QT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return QT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function XT(n){return jm(JSON.stringify({version:2,heartbeats:n})).length}function nL(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(n){Do(new pa("platform-logger",t=>new gP(t),"PRIVATE")),Do(new pa("heartbeat",t=>new JP(t),"PRIVATE")),gs(m0,YT,n),gs(m0,YT,"esm2020"),gs("fire-js","")}iL("");var sL="firebase",rL="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(sL,rL,"app");function eR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aL=eR,nR=new cd("auth","Firebase",eR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new zg("@firebase/auth");function oL(n,...t){Bm.logLevel<=Ut.WARN&&Bm.warn(`Auth (${Wo}): ${n}`,...t)}function xm(n,...t){Bm.logLevel<=Ut.ERROR&&Bm.error(`Auth (${Wo}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(n,...t){throw bv(n,...t)}function qi(n,...t){return bv(n,...t)}function vv(n,t,e){const i={...aL(),[t]:e};return new cd("auth","Firebase",i).create(t,{appName:n.name})}function hr(n){return vv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lL(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&Ni(n,"argument-error"),vv(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bv(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return nR.create(n,...t)}function St(n,t,...e){if(!n)throw bv(t,...e)}function rr(n){const t="INTERNAL ASSERTION FAILED: "+n;throw xm(t),new Error(t)}function gr(n,t){n||rr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){return typeof self<"u"&&self.location?.href||""}function cL(){return ZT()==="http:"||ZT()==="https:"}function ZT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cL()||OO()||"connection"in navigator)?navigator.onLine:!0}function hL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t,e){this.shortDelay=t,this.longDelay=e,gr(e>t,"Short delay should be less than long delay!"),this.isMobile=gv()||$C()}get(){return uL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(n,t){gr(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mL=new ud(3e4,6e4);function wr(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Cs(n,t,e,i,s={}){return sR(n,s,async()=>{let a={},l={};i&&(t==="GET"?l=i:a={body:JSON.stringify(i)});const u=Ac({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:t,headers:d,...a};return DO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ca(n.emulatorConfig.host)&&(f.credentials="include"),iR.fetch()(await rR(n,n.config.apiHost,e,u),f)})}async function sR(n,t,e){n._canInitEmulator=!1;const i={...dL,...t};try{const s=new pL(n),a=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Zf(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Zf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Zf(n,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw vv(n,p,f);Ni(n,p)}}catch(s){if(s instanceof br)throw s;Ni(n,"network-request-failed",{message:String(s)})}}async function hd(n,t,e,i,s={}){const a=await Cs(n,t,e,i,s);return"mfaPendingCredential"in a&&Ni(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function rR(n,t,e,i){const s=`${t}${e}?${i}`,a=n,l=a.config.emulator?wv(n.config,s):`${n.config.apiScheme}://${s}`;return fL.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function gL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(qi(this.auth,"network-request-failed")),mL.get())})}}function Zf(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=qi(n,t,i);return s.customData._tokenResponse=e,s}function JT(n){return n!==void 0&&n.enterprise!==void 0}class _L{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return gL(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yL(n,t){return Cs(n,"GET","/v2/recaptchaConfig",wr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(n,t){return Cs(n,"POST","/v1/accounts:delete",t)}async function Hm(n,t){return Cs(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function bL(n,t=!1){const e=Se(n),i=await e.getIdToken(t),s=Ev(i);St(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:i,authTime:_h(Ly(s.auth_time)),issuedAtTime:_h(Ly(s.iat)),expirationTime:_h(Ly(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Ly(n){return Number(n)*1e3}function Ev(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return xm("JWT malformed, contained fewer than 3 sections"),null;try{const s=Um(e);return s?JSON.parse(s):(xm("Failed to decode base64 JWT payload"),null)}catch(s){return xm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function tS(n){const t=Ev(n);return St(t,"internal-error"),St(typeof t.exp<"u","internal-error"),St(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof br&&wL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function wL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=_h(this.lastLoginAt),this.creationTime=_h(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(n){const t=n.auth,e=await n.getIdToken(),i=await cc(n,Hm(t,{idToken:e}));St(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=s.providerUserInfo?.length?aR(s.providerUserInfo):[],l=TL(n.providerData,a),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new y0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function xL(n){const t=Se(n);await qm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function TL(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function aR(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(n,t){const e=await sR(n,{},async()=>{const i=Ac({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await rR(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:i};return n.emulatorConfig&&Ca(n.emulatorConfig.host)&&(d.credentials="include"),iR.fetch()(l,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function AL(n,t){return Cs(n,"POST","/v2/accounts:revokeToken",wr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){St(t.idToken,"internal-error"),St(typeof t.idToken<"u","internal-error"),St(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):tS(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){St(t.length!==0,"internal-error");const e=tS(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:a}=await SL(t,e);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:a}=e,l=new Zl;return i&&(St(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),s&&(St(typeof s=="string","internal-error",{appName:t}),l.accessToken=s),a&&(St(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zl,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(n,t){St(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Bi{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new EL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new y0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await cc(this,this.stsTokenManager.getToken(this.auth,t));return St(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return bL(this,t)}reload(){return xL(this)}_assign(t){this!==t&&(St(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Bi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await qm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(hr(this.auth));const t=await this.getIdToken();return await cc(this,vL(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,a=e.phoneNumber??void 0,l=e.photoURL??void 0,u=e.tenantId??void 0,d=e._redirectEventId??void 0,f=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:T,providerData:S,stsTokenManager:N}=e;St(y&&N,t,"internal-error");const C=Zl.fromJSON(this.name,N);St(typeof y=="string",t,"internal-error"),Kr(i,t.name),Kr(s,t.name),St(typeof v=="boolean",t,"internal-error"),St(typeof T=="boolean",t,"internal-error"),Kr(a,t.name),Kr(l,t.name),Kr(u,t.name),Kr(d,t.name),Kr(f,t.name),Kr(p,t.name);const L=new Bi({uid:y,auth:t,email:s,emailVerified:v,displayName:i,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:C,createdAt:f,lastLoginAt:p});return S&&Array.isArray(S)&&(L.providerData=S.map(q=>({...q}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(t,e,i=!1){const s=new Zl;s.updateFromServerResponse(e);const a=new Bi({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await qm(a),a}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];St(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?aR(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new Zl;u.updateFromIdToken(i);const d=new Bi({uid:s.localId,auth:t,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new y0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new Map;function ar(n){gr(n instanceof Function,"Expected a class definition");let t=eS.get(n);return t?(gr(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,eS.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}oR.type="NONE";const nS=oR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,t,e){return`firebase:${n}:${t}:${e}`}class Jl{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Tm(this.userKey,s.apiKey,a),this.fullPersistenceKey=Tm("persistence",s.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Hm(this.auth,{idToken:t}).catch(()=>{});return e?Bi._fromGetAccountInfoResponse(this.auth,e,t):null}return Bi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Jl(ar(nS),t,i);const s=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||ar(nS);const l=Tm(i,t.config.apiKey,t.name);let u=null;for(const f of e)try{const p=await f._get(l);if(p){let y;if(typeof p=="string"){const v=await Hm(t,{idToken:p}).catch(()=>{});if(!v)break;y=await Bi._fromGetAccountInfoResponse(t,v,p)}else y=Bi._fromJSON(t,p);f!==a&&(u=y),a=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Jl(a,t,i):(a=d[0],u&&await a._set(l,u.toJSON()),await Promise.all(e.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new Jl(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fR(t))return"Blackberry";if(mR(t))return"Webos";if(cR(t))return"Safari";if((t.includes("chrome/")||uR(t))&&!t.includes("edge/"))return"Chrome";if(dR(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function lR(n=Vn()){return/firefox\//i.test(n)}function cR(n=Vn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function uR(n=Vn()){return/crios\//i.test(n)}function hR(n=Vn()){return/iemobile/i.test(n)}function dR(n=Vn()){return/android/i.test(n)}function fR(n=Vn()){return/blackberry/i.test(n)}function mR(n=Vn()){return/webos/i.test(n)}function xv(n=Vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function CL(n=Vn()){return xv(n)&&!!window.navigator?.standalone}function RL(){return PO()&&document.documentMode===10}function gR(n=Vn()){return xv(n)||dR(n)||mR(n)||fR(n)||/windows phone/i.test(n)||hR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(n,t=[]){let e;switch(n){case"Browser":e=iS(Vn());break;case"Worker":e=`${iS(Vn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=a=>new Promise((l,u)=>{try{const d=t(a);l(d)}catch(d){u(d)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(n,t={}){return Cs(n,"GET","/v2/passwordPolicy",wr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=6;class ML{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??kL,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sS(this),this.idTokenSubscription=new sS(this),this.beforeStateQueue=new IL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ar(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Hm(this,{idToken:t}),i=await Bi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await qm(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=hL()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Yn(this.app))return Promise.reject(hr(this));const e=t?Se(t):null;return e&&St(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&St(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Yn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await NL(this),e=new ML(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cd("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await AL(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ar(t)||this._popupRedirectResolver;St(e,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[ar(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,s);return()=>{l=!0,d()}}else{const d=t.addObserver(e);return()=>{l=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=pR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&oL(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ra(n){return Se(n)}class sS{constructor(t){this.auth=t,this.observer=null,this.addObserver=GO(e=>this.observer=e)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OL(n){Hg=n}function _R(n){return Hg.loadJS(n)}function PL(){return Hg.recaptchaEnterpriseScript}function LL(){return Hg.gapiScript}function VL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class jL{constructor(){this.enterprise=new UL}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class UL{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const FL="recaptcha-enterprise",yR="NO_RECAPTCHA";class zL{constructor(t){this.type=FL,this.auth=Ra(t)}async verify(t="verify",e=!1){async function i(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{yL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new _L(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(a,l,u){const d=window.grecaptcha;JT(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:t}).then(f=>{l(f)}).catch(()=>{l(yR)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jL().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(u=>{if(!e&&JT(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=PL();d.length!==0&&(d+=u),_R(d).then(()=>{s(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function rS(n,t,e,i=!1,s=!1){const a=new zL(n);let l;if(s)l=yR;else try{l=await a.verify(e)}catch{l=await a.verify(e,!0)}const u={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function v0(n,t,e,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await rS(n,t,e,e==="getOobCode");return i(n,a)}else return i(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await rS(n,t,e,e==="getOobCode");return i(n,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(n,t){const e=Bg(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),a=e.getOptions();if(ga(a,t??{}))return s;Ni(s,"already-initialized")}return e.initialize({options:t})}function HL(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(ar);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function qL(n,t,e){const i=Ra(n);St(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,a=vR(t),{host:l,port:u}=WL(t),d=u===null?"":`:${u}`,f={url:`${a}//${l}${d}/`},p=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){St(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),St(ga(f,i.config.emulator)&&ga(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Ca(l)?(fv(`${a}//${l}${d}`),mv("Auth",!0)):GL()}function vR(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function WL(n){const t=vR(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:aS(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:aS(l)}}}function aS(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function GL(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return rr("not implemented")}_getIdTokenResponse(t){return rr("not implemented")}_linkToIdToken(t,e){return rr("not implemented")}_getReauthenticationResolver(t){return rr("not implemented")}}async function YL(n,t){return Cs(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(n,t){return hd(n,"POST","/v1/accounts:signInWithPassword",wr(n,t))}async function QL(n,t){return Cs(n,"POST","/v1/accounts:sendOobCode",wr(n,t))}async function KL(n,t){return QL(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(n,t){return hd(n,"POST","/v1/accounts:signInWithEmailLink",wr(n,t))}async function ZL(n,t){return hd(n,"POST","/v1/accounts:signInWithEmailLink",wr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends Tv{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new Oh(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Oh(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v0(t,e,"signInWithPassword",$L);case"emailLink":return XL(t,{email:this._email,oobCode:this._password});default:Ni(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v0(t,i,"signUpPassword",YL);case"emailLink":return ZL(t,{idToken:e,email:this._email,oobCode:this._password});default:Ni(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(n,t){return hd(n,"POST","/v1/accounts:signInWithIdp",wr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="http://localhost";class Oo extends Tv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Oo(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ni("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...a}=e;if(!i||!s)return null;const l=new Oo(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const e=this.buildRequest();return tc(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,tc(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,tc(t,e)}buildRequest(){const t={requestUri:JL,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ac(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e4(n){const t=rh(ah(n)).link,e=t?rh(ah(t)).deep_link_id:null,i=rh(ah(n)).deep_link_id;return(i?rh(ah(i)).link:null)||i||e||t||n}class Sv{constructor(t){const e=rh(ah(t)),i=e.apiKey??null,s=e.oobCode??null,a=t4(e.mode??null);St(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=e4(t);try{return new Sv(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.providerId=Cc.PROVIDER_ID}static credential(t,e){return Oh._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Sv.parseLink(e);return St(i,"argument-error"),Oh._fromEmailAndCode(t,i.code,i.tenantId)}}Cc.PROVIDER_ID="password";Cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends Av{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends dd{constructor(){super("facebook.com")}static credential(t){return Oo._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Jr.credentialFromTaggedObject(t)}static credentialFromError(t){return Jr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Jr.credential(t.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Oo._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return sr.credentialFromTaggedObject(t)}static credentialFromError(t){return sr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return sr.credential(e,i)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends dd{constructor(){super("github.com")}static credential(t){return Oo._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ta.credentialFromTaggedObject(t)}static credentialFromError(t){return ta.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ta.credential(t.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends dd{constructor(){super("twitter.com")}static credential(t,e){return Oo._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ea.credentialFromTaggedObject(t)}static credentialFromError(t){return ea.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return ea.credential(e,i)}catch{return null}}}ea.TWITTER_SIGN_IN_METHOD="twitter.com";ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(n,t){return hd(n,"POST","/v1/accounts:signUp",wr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const a=await Bi._fromIdTokenResponse(t,i,s),l=oS(i);return new Po({user:a,providerId:l,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=oS(i);return new Po({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function oS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends br{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Wm.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Wm(t,e,i,s)}}function bR(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Wm._fromErrorAndOperation(n,a,t,i):a})}async function i4(n,t,e=!1){const i=await cc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Po._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(n,t,e=!1){const{auth:i}=n;if(Yn(i.app))return Promise.reject(hr(i));const s="reauthenticate";try{const a=await cc(n,bR(i,s,t,n),e);St(a.idToken,i,"internal-error");const l=Ev(a.idToken);St(l,i,"internal-error");const{sub:u}=l;return St(n.uid===u,i,"user-mismatch"),Po._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ni(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,t,e=!1){if(Yn(n.app))return Promise.reject(hr(n));const i="signIn",s=await bR(n,i,t),a=await Po._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(a.user),a}async function r4(n,t){return wR(Ra(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(n){const t=Ra(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function a4(n,t,e){if(Yn(n.app))return Promise.reject(hr(n));const i=Ra(n),l=await v0(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",n4).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&ER(n),d}),u=await Po._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function o4(n,t,e){return Yn(n.app)?Promise.reject(hr(n)):r4(Se(n),Cc.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ER(n),i})}async function l4(n,t){const e=Se(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await KL(e.auth,s);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(n,t){return Cs(n,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(n,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const i=Se(n),a={idToken:await i.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},l=await cc(i,c4(i.auth,a));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const u=i.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function h4(n,t,e,i){return Se(n).onIdTokenChanged(t,e,i)}function d4(n,t,e){return Se(n).beforeAuthStateChanged(t,e)}function xR(n,t,e,i){return Se(n).onAuthStateChanged(t,e,i)}function f4(n){return Se(n).signOut()}const Gm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Gm,"1"),this.storage.removeItem(Gm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=1e3,g4=10;class SR extends TR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!e&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);RL()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,g4):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},m4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}SR.type="LOCAL";const p4=SR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR extends TR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}AR.type="SESSION";const CR=AR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new qg(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:a}=e.data,l=this.handlersMap[s];if(!l?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(e.origin,a)),d=await _4(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,d)=>{const f=Cv("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(p),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(){return window}function v4(n){ps().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){return typeof ps().WorkerGlobalScope<"u"&&typeof ps().importScripts=="function"}async function b4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w4(){return navigator?.serviceWorker?.controller||null}function E4(){return RR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="firebaseLocalStorageDb",x4=1,Ym="firebaseLocalStorage",NR="fbase_key";class fd{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Wg(n,t){return n.transaction([Ym],t?"readwrite":"readonly").objectStore(Ym)}function T4(){const n=indexedDB.deleteDatabase(IR);return new fd(n).toPromise()}function b0(){const n=indexedDB.open(IR,x4);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ym,{keyPath:NR})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ym)?t(i):(i.close(),await T4(),t(await b0()))})})}async function lS(n,t,e){const i=Wg(n,!0).put({[NR]:t,value:e});return new fd(i).toPromise()}async function S4(n,t){const e=Wg(n,!1).get(t),i=await new fd(e).toPromise();return i===void 0?null:i.value}function cS(n,t){const e=Wg(n,!0).delete(t);return new fd(e).toPromise()}const A4=800,C4=3;class kR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b0(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>C4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qg._getInstance(E4()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await b4(),!this.activeServiceWorker)return;this.sender=new y4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||w4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await b0();return await lS(t,Gm,"1"),await cS(t,Gm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>lS(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>S4(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>cS(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=Wg(s,!1).getAll();return new fd(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kR.type="LOCAL";const R4=kR;new ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(n,t){return t?ar(t):(St(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv extends Tv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tc(t,this._buildIdpRequest())}_linkToIdToken(t,e){return tc(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return tc(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function I4(n){return wR(n.auth,new Rv(n),n.bypassAuthState)}function N4(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),s4(e,new Rv(n),n.bypassAuthState)}async function k4(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),i4(e,new Rv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(t,e,i,s,a=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:a,error:l,type:u}=t;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return I4;case"linkViaPopup":case"linkViaRedirect":return k4;case"reauthViaPopup":case"reauthViaRedirect":return N4;default:Ni(this.auth,"internal-error")}}resolve(t){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new ud(2e3,1e4);async function OR(n,t,e){if(Yn(n.app))return Promise.reject(qi(n,"operation-not-supported-in-this-environment"));const i=Ra(n);lL(n,t,Av);const s=MR(i,e);return new xo(i,"signInViaPopup",t,s).executeNotNull()}class xo extends DR{constructor(t,e,i,s,a){super(t,e,s,a),this.provider=i,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return St(t,this.auth,"internal-error"),t}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const t=Cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,M4.get())};t()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="pendingRedirect",Sm=new Map;class O4 extends DR{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Sm.get(this.auth._key());if(!t){try{const i=await P4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Sm.set(this.auth._key(),t)}return this.bypassAuthState||Sm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P4(n,t){const e=j4(t),i=V4(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function L4(n,t){Sm.set(n._key(),t)}function V4(n){return ar(n._redirectPersistence)}function j4(n){return Tm(D4,n.config.apiKey,n.name)}async function U4(n,t,e=!1){if(Yn(n.app))return Promise.reject(hr(n));const i=Ra(n),s=MR(i,t),l=await new O4(i,s,e).execute();return l&&!e&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=600*1e3;class z4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!B4(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!PR(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(qi(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=F4&&this.cachedEventUids.clear(),this.cachedEventUids.has(uS(t))}saveEventToCache(t){this.cachedEventUids.add(uS(t)),this.lastProcessedEventTime=Date.now()}}function uS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function PR({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function B4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H4(n,t={}){return Cs(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W4=/^https?/;async function G4(n){if(n.config.emulator)return;const{authorizedDomains:t}=await H4(n);for(const e of t)try{if(Y4(e))return}catch{}Ni(n,"unauthorized-domain")}function Y4(n){const t=_0(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&l.hostname===i}if(!W4.test(e))return!1;if(q4.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new ud(3e4,6e4);function hS(){const n=ps().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function Q4(n){return new Promise((t,e)=>{function i(){hS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hS(),e(qi(n,"network-request-failed"))},timeout:$4.get()})}if(ps().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ps().gapi?.load)i();else{const s=VL("iframefcb");return ps()[s]=()=>{gapi.load?i():e(qi(n,"network-request-failed"))},_R(`${LL()}?onload=${s}`).catch(a=>e(a))}}).catch(t=>{throw Am=null,t})}let Am=null;function K4(n){return Am=Am||Q4(n),Am}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new ud(5e3,15e3),Z4="__/auth/iframe",J4="emulator/auth/iframe",tV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nV(n){const t=n.config;St(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?wv(t,J4):`https://${n.config.authDomain}/${Z4}`,i={apiKey:t.apiKey,appName:n.name,v:Wo},s=eV.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${e}?${Ac(i).slice(1)}`}async function iV(n){const t=await K4(n),e=ps().gapi;return St(e,n,"internal-error"),t.open({where:document.body,url:nV(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tV,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=qi(n,"network-request-failed"),u=ps().setTimeout(()=>{a(l)},X4.get());function d(){ps().clearTimeout(u),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rV=500,aV=600,oV="_blank",lV="http://localhost";class dS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cV(n,t,e,i=rV,s=aV){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d={...sV,width:i.toString(),height:s.toString(),top:a,left:l},f=Vn().toLowerCase();e&&(u=uR(f)?oV:e),lR(f)&&(t=t||lV,d.scrollbars="yes");const p=Object.entries(d).reduce((v,[T,S])=>`${v}${T}=${S},`,"");if(CL(f)&&u!=="_self")return uV(t||"",u),new dS(null);const y=window.open(t||"",u,p);St(y,n,"popup-blocked");try{y.focus()}catch{}return new dS(y)}function uV(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="__/auth/handler",dV="emulator/auth/handler",fV=encodeURIComponent("fac");async function fS(n,t,e,i,s,a){St(n.config.authDomain,n,"auth-domain-config-required"),St(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Wo,eventId:s};if(t instanceof Av){t.setDefaultLanguage(n.languageCode),l.providerId=t.providerId||"",h0(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,y]of Object.entries({}))l[p]=y}if(t instanceof dd){const p=t.getScopes().filter(y=>y!=="");p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const d=await n._getAppCheckToken(),f=d?`#${fV}=${encodeURIComponent(d)}`:"";return`${mV(n)}?${Ac(u).slice(1)}${f}`}function mV({config:n}){return n.emulator?wv(n,dV):`https://${n.authDomain}/${hV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="webStorageSupport";class gV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CR,this._completeRedirectFn=U4,this._overrideRedirectResult=L4}async _openPopup(t,e,i,s){gr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await fS(t,e,i,_0(),s);return cV(t,a,Cv())}async _openRedirect(t,e,i,s){await this._originValidation(t);const a=await fS(t,e,i,_0(),s);return v4(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:a}=this.eventManagers[e];return s?Promise.resolve(s):(gr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await iV(t),i=new z4(t);return e.register("authEvent",s=>(St(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Vy,{type:Vy},s=>{const a=s?.[0]?.[Vy];a!==void 0&&e(!!a),Ni(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=G4(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return gR()||cR()||xv()}}const pV=gV;var mS="@firebase/auth",gS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vV(n){Do(new pa("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;St(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pR(n)},f=new DL(i,s,a,d);return HL(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Do(new pa("auth-internal",t=>{const e=Ra(t.getProvider("auth").getImmediate());return(i=>new _V(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(mS,gS,yV(n)),gs(mS,gS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=300,wV=GC("authIdTokenMaxAge")||bV;let pS=null;const EV=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>wV)return;const s=e?.token;pS!==s&&(pS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xV(n=yv()){const t=Bg(n,"auth");if(t.isInitialized())return t.getImmediate();const e=BL(n,{popupRedirectResolver:pV,persistence:[R4,p4,CR]}),i=GC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=EV(a.toString());d4(e,l,()=>l(e.currentUser)),h4(e,u=>l(u))}}const s=HC("auth");return s&&qL(e,`http://${s}`),e}function TV(){return document.getElementsByTagName("head")?.[0]??document}OL({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const a=qi("internal-error");a.customData=s,e(a)},i.type="text/javascript",i.charset="UTF-8",TV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vV("Browser");var _S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var la,LR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,I){function k(){}k.prototype=I.prototype,M.D=I.prototype,M.prototype=new k,M.prototype.constructor=M,M.C=function(O,V,j){for(var D=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)D[Bt-2]=arguments[Bt];return I.prototype[V].apply(O,D)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,I,k){k||(k=0);var O=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)O[V]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(V=0;16>V;++V)O[V]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=M.g[0],k=M.g[1],V=M.g[2];var j=M.g[3],D=I+(j^k&(V^j))+O[0]+3614090360&4294967295;I=k+(D<<7&4294967295|D>>>25),D=j+(V^I&(k^V))+O[1]+3905402710&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(k^j&(I^k))+O[2]+606105819&4294967295,V=j+(D<<17&4294967295|D>>>15),D=k+(I^V&(j^I))+O[3]+3250441966&4294967295,k=V+(D<<22&4294967295|D>>>10),D=I+(j^k&(V^j))+O[4]+4118548399&4294967295,I=k+(D<<7&4294967295|D>>>25),D=j+(V^I&(k^V))+O[5]+1200080426&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(k^j&(I^k))+O[6]+2821735955&4294967295,V=j+(D<<17&4294967295|D>>>15),D=k+(I^V&(j^I))+O[7]+4249261313&4294967295,k=V+(D<<22&4294967295|D>>>10),D=I+(j^k&(V^j))+O[8]+1770035416&4294967295,I=k+(D<<7&4294967295|D>>>25),D=j+(V^I&(k^V))+O[9]+2336552879&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(k^j&(I^k))+O[10]+4294925233&4294967295,V=j+(D<<17&4294967295|D>>>15),D=k+(I^V&(j^I))+O[11]+2304563134&4294967295,k=V+(D<<22&4294967295|D>>>10),D=I+(j^k&(V^j))+O[12]+1804603682&4294967295,I=k+(D<<7&4294967295|D>>>25),D=j+(V^I&(k^V))+O[13]+4254626195&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(k^j&(I^k))+O[14]+2792965006&4294967295,V=j+(D<<17&4294967295|D>>>15),D=k+(I^V&(j^I))+O[15]+1236535329&4294967295,k=V+(D<<22&4294967295|D>>>10),D=I+(V^j&(k^V))+O[1]+4129170786&4294967295,I=k+(D<<5&4294967295|D>>>27),D=j+(k^V&(I^k))+O[6]+3225465664&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^k&(j^I))+O[11]+643717713&4294967295,V=j+(D<<14&4294967295|D>>>18),D=k+(j^I&(V^j))+O[0]+3921069994&4294967295,k=V+(D<<20&4294967295|D>>>12),D=I+(V^j&(k^V))+O[5]+3593408605&4294967295,I=k+(D<<5&4294967295|D>>>27),D=j+(k^V&(I^k))+O[10]+38016083&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^k&(j^I))+O[15]+3634488961&4294967295,V=j+(D<<14&4294967295|D>>>18),D=k+(j^I&(V^j))+O[4]+3889429448&4294967295,k=V+(D<<20&4294967295|D>>>12),D=I+(V^j&(k^V))+O[9]+568446438&4294967295,I=k+(D<<5&4294967295|D>>>27),D=j+(k^V&(I^k))+O[14]+3275163606&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^k&(j^I))+O[3]+4107603335&4294967295,V=j+(D<<14&4294967295|D>>>18),D=k+(j^I&(V^j))+O[8]+1163531501&4294967295,k=V+(D<<20&4294967295|D>>>12),D=I+(V^j&(k^V))+O[13]+2850285829&4294967295,I=k+(D<<5&4294967295|D>>>27),D=j+(k^V&(I^k))+O[2]+4243563512&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^k&(j^I))+O[7]+1735328473&4294967295,V=j+(D<<14&4294967295|D>>>18),D=k+(j^I&(V^j))+O[12]+2368359562&4294967295,k=V+(D<<20&4294967295|D>>>12),D=I+(k^V^j)+O[5]+4294588738&4294967295,I=k+(D<<4&4294967295|D>>>28),D=j+(I^k^V)+O[8]+2272392833&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^k)+O[11]+1839030562&4294967295,V=j+(D<<16&4294967295|D>>>16),D=k+(V^j^I)+O[14]+4259657740&4294967295,k=V+(D<<23&4294967295|D>>>9),D=I+(k^V^j)+O[1]+2763975236&4294967295,I=k+(D<<4&4294967295|D>>>28),D=j+(I^k^V)+O[4]+1272893353&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^k)+O[7]+4139469664&4294967295,V=j+(D<<16&4294967295|D>>>16),D=k+(V^j^I)+O[10]+3200236656&4294967295,k=V+(D<<23&4294967295|D>>>9),D=I+(k^V^j)+O[13]+681279174&4294967295,I=k+(D<<4&4294967295|D>>>28),D=j+(I^k^V)+O[0]+3936430074&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^k)+O[3]+3572445317&4294967295,V=j+(D<<16&4294967295|D>>>16),D=k+(V^j^I)+O[6]+76029189&4294967295,k=V+(D<<23&4294967295|D>>>9),D=I+(k^V^j)+O[9]+3654602809&4294967295,I=k+(D<<4&4294967295|D>>>28),D=j+(I^k^V)+O[12]+3873151461&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^k)+O[15]+530742520&4294967295,V=j+(D<<16&4294967295|D>>>16),D=k+(V^j^I)+O[2]+3299628645&4294967295,k=V+(D<<23&4294967295|D>>>9),D=I+(V^(k|~j))+O[0]+4096336452&4294967295,I=k+(D<<6&4294967295|D>>>26),D=j+(k^(I|~V))+O[7]+1126891415&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~k))+O[14]+2878612391&4294967295,V=j+(D<<15&4294967295|D>>>17),D=k+(j^(V|~I))+O[5]+4237533241&4294967295,k=V+(D<<21&4294967295|D>>>11),D=I+(V^(k|~j))+O[12]+1700485571&4294967295,I=k+(D<<6&4294967295|D>>>26),D=j+(k^(I|~V))+O[3]+2399980690&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~k))+O[10]+4293915773&4294967295,V=j+(D<<15&4294967295|D>>>17),D=k+(j^(V|~I))+O[1]+2240044497&4294967295,k=V+(D<<21&4294967295|D>>>11),D=I+(V^(k|~j))+O[8]+1873313359&4294967295,I=k+(D<<6&4294967295|D>>>26),D=j+(k^(I|~V))+O[15]+4264355552&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~k))+O[6]+2734768916&4294967295,V=j+(D<<15&4294967295|D>>>17),D=k+(j^(V|~I))+O[13]+1309151649&4294967295,k=V+(D<<21&4294967295|D>>>11),D=I+(V^(k|~j))+O[4]+4149444226&4294967295,I=k+(D<<6&4294967295|D>>>26),D=j+(k^(I|~V))+O[11]+3174756917&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~k))+O[2]+718787259&4294967295,V=j+(D<<15&4294967295|D>>>17),D=k+(j^(V|~I))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+I&4294967295,M.g[1]=M.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+j&4294967295}i.prototype.u=function(M,I){I===void 0&&(I=M.length);for(var k=I-this.blockSize,O=this.B,V=this.h,j=0;j<I;){if(V==0)for(;j<=k;)s(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<I;)if(O[V++]=M.charCodeAt(j++),V==this.blockSize){s(this,O),V=0;break}}else for(;j<I;)if(O[V++]=M[j++],V==this.blockSize){s(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var I=1;I<M.length-8;++I)M[I]=0;var k=8*this.o;for(I=M.length-8;I<M.length;++I)M[I]=k&255,k/=256;for(this.u(M),M=Array(16),I=k=0;4>I;++I)for(var O=0;32>O;O+=8)M[k++]=this.g[I]>>>O&255;return M};function a(M,I){var k=u;return Object.prototype.hasOwnProperty.call(k,M)?k[M]:k[M]=I(M)}function l(M,I){this.h=I;for(var k=[],O=!0,V=M.length-1;0<=V;V--){var j=M[V]|0;O&&j==I||(k[V]=j,O=!1)}this.g=k}var u={};function d(M){return-128<=M&&128>M?a(M,function(I){return new l([I|0],0>I?-1:0)}):new l([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(0>M)return C(f(-M));for(var I=[],k=1,O=0;M>=k;O++)I[O]=M/k|0,k*=4294967296;return new l(I,0)}function p(M,I){if(M.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(M.charAt(0)=="-")return C(p(M.substring(1),I));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(I,8)),O=y,V=0;V<M.length;V+=8){var j=Math.min(8,M.length-V),D=parseInt(M.substring(V,V+j),I);8>j?(j=f(Math.pow(I,j)),O=O.j(j).add(f(D))):(O=O.j(k),O=O.add(f(D)))}return O}var y=d(0),v=d(1),T=d(16777216);n=l.prototype,n.m=function(){if(N(this))return-C(this).m();for(var M=0,I=1,k=0;k<this.g.length;k++){var O=this.i(k);M+=(0<=O?O:4294967296+O)*I,I*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(S(this))return"0";if(N(this))return"-"+C(this).toString(M);for(var I=f(Math.pow(M,6)),k=this,O="";;){var V=J(k,I).g;k=L(k,V.j(I));var j=((0<k.g.length?k.g[0]:k.h)>>>0).toString(M);if(k=V,S(k))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function S(M){if(M.h!=0)return!1;for(var I=0;I<M.g.length;I++)if(M.g[I]!=0)return!1;return!0}function N(M){return M.h==-1}n.l=function(M){return M=L(this,M),N(M)?-1:S(M)?0:1};function C(M){for(var I=M.g.length,k=[],O=0;O<I;O++)k[O]=~M.g[O];return new l(k,~M.h).add(v)}n.abs=function(){return N(this)?C(this):this},n.add=function(M){for(var I=Math.max(this.g.length,M.g.length),k=[],O=0,V=0;V<=I;V++){var j=O+(this.i(V)&65535)+(M.i(V)&65535),D=(j>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=D>>>16,j&=65535,D&=65535,k[V]=D<<16|j}return new l(k,k[k.length-1]&-2147483648?-1:0)};function L(M,I){return M.add(C(I))}n.j=function(M){if(S(this)||S(M))return y;if(N(this))return N(M)?C(this).j(C(M)):C(C(this).j(M));if(N(M))return C(this.j(C(M)));if(0>this.l(T)&&0>M.l(T))return f(this.m()*M.m());for(var I=this.g.length+M.g.length,k=[],O=0;O<2*I;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var j=this.i(O)>>>16,D=this.i(O)&65535,Bt=M.i(V)>>>16,bt=M.i(V)&65535;k[2*O+2*V]+=D*bt,q(k,2*O+2*V),k[2*O+2*V+1]+=j*bt,q(k,2*O+2*V+1),k[2*O+2*V+1]+=D*Bt,q(k,2*O+2*V+1),k[2*O+2*V+2]+=j*Bt,q(k,2*O+2*V+2)}for(O=0;O<I;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=I;O<2*I;O++)k[O]=0;return new l(k,0)};function q(M,I){for(;(M[I]&65535)!=M[I];)M[I+1]+=M[I]>>>16,M[I]&=65535,I++}function G(M,I){this.g=M,this.h=I}function J(M,I){if(S(I))throw Error("division by zero");if(S(M))return new G(y,y);if(N(M))return I=J(C(M),I),new G(C(I.g),C(I.h));if(N(I))return I=J(M,C(I)),new G(C(I.g),I.h);if(30<M.g.length){if(N(M)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var k=v,O=I;0>=O.l(M);)k=H(k),O=H(O);var V=ct(k,1),j=ct(O,1);for(O=ct(O,2),k=ct(k,2);!S(O);){var D=j.add(O);0>=D.l(M)&&(V=V.add(k),j=D),O=ct(O,1),k=ct(k,1)}return I=L(M,V.j(I)),new G(V,I)}for(V=y;0<=M.l(I);){for(k=Math.max(1,Math.floor(M.m()/I.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=f(k),D=j.j(I);N(D)||0<D.l(M);)k-=O,j=f(k),D=j.j(I);S(j)&&(j=v),V=V.add(j),M=L(M,D)}return new G(V,M)}n.A=function(M){return J(this,M).h},n.and=function(M){for(var I=Math.max(this.g.length,M.g.length),k=[],O=0;O<I;O++)k[O]=this.i(O)&M.i(O);return new l(k,this.h&M.h)},n.or=function(M){for(var I=Math.max(this.g.length,M.g.length),k=[],O=0;O<I;O++)k[O]=this.i(O)|M.i(O);return new l(k,this.h|M.h)},n.xor=function(M){for(var I=Math.max(this.g.length,M.g.length),k=[],O=0;O<I;O++)k[O]=this.i(O)^M.i(O);return new l(k,this.h^M.h)};function H(M){for(var I=M.g.length+1,k=[],O=0;O<I;O++)k[O]=M.i(O)<<1|M.i(O-1)>>>31;return new l(k,M.h)}function ct(M,I){var k=I>>5;I%=32;for(var O=M.g.length-k,V=[],j=0;j<O;j++)V[j]=0<I?M.i(j+k)>>>I|M.i(j+k+1)<<32-I:M.i(j+k);return new l(V,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,LR=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,la=l}).apply(typeof _S<"u"?_S:typeof self<"u"?self:typeof window<"u"?window:{});var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VR,oh,jR,Cm,w0,UR,FR,zR;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,E){return m==Array.prototype||m==Object.prototype||(m[b]=E.value),m};function e(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jf=="object"&&Jf];for(var b=0;b<m.length;++b){var E=m[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function s(m,b){if(b)t:{var E=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var W=m[R];if(!(W in E))break t;E=E[W]}m=m[m.length-1],R=E[m],b=b(R),b!=R&&b!=null&&t(E,m,{configurable:!0,writable:!0,value:b})}}function a(m,b){m instanceof String&&(m+="");var E=0,R=!1,W={next:function(){if(!R&&E<m.length){var Z=E++;return{value:b(Z,m[Z]),done:!1}}return R=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(m){return m||function(){return a(this,function(b,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function f(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function p(m,b,E){return m.call.apply(m.bind,arguments)}function y(m,b,E){if(!m)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,R),m.apply(b,W)}}return function(){return m.apply(b,arguments)}}function v(m,b,E){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,v.apply(null,arguments)}function T(m,b){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function S(m,b){function E(){}E.prototype=b.prototype,m.aa=b.prototype,m.prototype=new E,m.prototype.constructor=m,m.Qb=function(R,W,Z){for(var ft=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)ft[Wt-2]=arguments[Wt];return b.prototype[W].apply(R,ft)}}function N(m){const b=m.length;if(0<b){const E=Array(b);for(let R=0;R<b;R++)E[R]=m[R];return E}return[]}function C(m,b){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(d(R)){const W=m.length||0,Z=R.length||0;m.length=W+Z;for(let ft=0;ft<Z;ft++)m[W+ft]=R[ft]}else m.push(R)}}class L{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function q(m){return/^[\s\xa0]*$/.test(m)}function G(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function J(m){return J[" "](m),m}J[" "]=function(){};var H=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ct(m,b,E){for(const R in m)b.call(E,m[R],R,m)}function M(m,b){for(const E in m)b.call(void 0,m[E],E,m)}function I(m){const b={};for(const E in m)b[E]=m[E];return b}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(m,b){let E,R;for(let W=1;W<arguments.length;W++){R=arguments[W];for(E in R)m[E]=R[E];for(let Z=0;Z<k.length;Z++)E=k[Z],Object.prototype.hasOwnProperty.call(R,E)&&(m[E]=R[E])}}function V(m){var b=1;m=m.split(":");const E=[];for(;0<b&&m.length;)E.push(m.shift()),b--;return m.length&&E.push(m.join(":")),E}function j(m){u.setTimeout(()=>{throw m},0)}function D(){var m=gt;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class Bt{constructor(){this.h=this.g=null}add(b,E){const R=bt.get();R.set(b,E),this.h?this.h.next=R:this.g=R,this.h=R}}var bt=new L(()=>new Q,m=>m.reset());class Q{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,lt=!1,gt=new Bt,U=()=>{const m=u.Promise.resolve(void 0);ot=()=>{m.then(it)}};var it=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(E){j(E)}var b=bt;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}lt=!1};function ht(){this.s=this.s,this.C=this.C}ht.prototype.s=!1,ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const E=()=>{};u.addEventListener("test",E,b),u.removeEventListener("test",E,b)}catch{}return m}();function It(m,b){if(ut.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var E=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(H){t:{try{J(b.nodeName);var W=!0;break t}catch{}W=!1}W||(b=null)}}else E=="mouseover"?b=m.fromElement:E=="mouseout"&&(b=m.toElement);this.relatedTarget=b,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:st[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&It.aa.h.call(this)}}S(It,ut);var st={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),xt=0;function Kt(m,b,E,R,W){this.listener=m,this.proxy=null,this.src=b,this.type=E,this.capture=!!R,this.ha=W,this.key=++xt,this.da=this.fa=!1}function _e(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ae(m){this.src=m,this.g={},this.h=0}Ae.prototype.add=function(m,b,E,R,W){var Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);var ft=Ee(m,b,R,W);return-1<ft?(b=m[ft],E||(b.fa=!1)):(b=new Kt(b,this.src,Z,!!R,W),b.fa=E,m.push(b)),b};function _n(m,b){var E=b.type;if(E in m.g){var R=m.g[E],W=Array.prototype.indexOf.call(R,b,void 0),Z;(Z=0<=W)&&Array.prototype.splice.call(R,W,1),Z&&(_e(b),m.g[E].length==0&&(delete m.g[E],m.h--))}}function Ee(m,b,E,R){for(var W=0;W<m.length;++W){var Z=m[W];if(!Z.da&&Z.listener==b&&Z.capture==!!E&&Z.ha==R)return W}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),ti={};function Ad(m,b,E,R,W){if(Array.isArray(b)){for(var Z=0;Z<b.length;Z++)Ad(m,b[Z],E,R,W);return null}return E=Cd(E),m&&m[Dt]?m.K(b,E,f(R)?!!R.capture:!1,W):di(m,b,E,!1,R,W)}function di(m,b,E,R,W,Z){if(!b)throw Error("Invalid event type");var ft=f(W)?!!W.capture:!!W,Wt=Zo(m);if(Wt||(m[Me]=Wt=new Ae(m)),E=Wt.add(b,E,R,ft,Z),E.proxy)return E;if(R=xp(),E.proxy=R,R.src=m,R.listener=E,m.addEventListener)yt||(W=ft),W===void 0&&(W=!1),m.addEventListener(b.toString(),R,W);else if(m.attachEvent)m.attachEvent(Da(b.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function xp(){function m(E){return b.call(m.src,m.listener,E)}const b=Tp;return m}function jc(m,b,E,R,W){if(Array.isArray(b))for(var Z=0;Z<b.length;Z++)jc(m,b[Z],E,R,W);else R=f(R)?!!R.capture:!!R,E=Cd(E),m&&m[Dt]?(m=m.i,b=String(b).toString(),b in m.g&&(Z=m.g[b],E=Ee(Z,E,R,W),-1<E&&(_e(Z[E]),Array.prototype.splice.call(Z,E,1),Z.length==0&&(delete m.g[b],m.h--)))):m&&(m=Zo(m))&&(b=m.g[b.toString()],m=-1,b&&(m=Ee(b,E,R,W)),(E=-1<m?b[m]:null)&&Xo(E))}function Xo(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[Dt])_n(b.i,m);else{var E=m.type,R=m.proxy;b.removeEventListener?b.removeEventListener(E,R,m.capture):b.detachEvent?b.detachEvent(Da(E),R):b.addListener&&b.removeListener&&b.removeListener(R),(E=Zo(b))?(_n(E,m),E.h==0&&(E.src=null,b[Me]=null)):_e(m)}}}function Da(m){return m in ti?ti[m]:ti[m]="on"+m}function Tp(m,b){if(m.da)m=!0;else{b=new It(b,this);var E=m.listener,R=m.ha||m.src;m.fa&&Xo(m),m=E.call(R,b)}return m}function Zo(m){return m=m[Me],m instanceof Ae?m:null}var Uc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cd(m){return typeof m=="function"?m:(m[Uc]||(m[Uc]=function(b){return m.handleEvent(b)}),m[Uc])}function De(){ht.call(this),this.i=new Ae(this),this.M=this,this.F=null}S(De,ht),De.prototype[Dt]=!0,De.prototype.removeEventListener=function(m,b,E,R){jc(this,m,b,E,R)};function se(m,b){var E,R=m.F;if(R)for(E=[];R;R=R.F)E.push(R);if(m=m.M,R=b.type||b,typeof b=="string")b=new ut(b,m);else if(b instanceof ut)b.target=b.target||m;else{var W=b;b=new ut(R,m),O(b,W)}if(W=!0,E)for(var Z=E.length-1;0<=Z;Z--){var ft=b.g=E[Z];W=ei(ft,R,!0,b)&&W}if(ft=b.g=m,W=ei(ft,R,!0,b)&&W,W=ei(ft,R,!1,b)&&W,E)for(Z=0;Z<E.length;Z++)ft=b.g=E[Z],W=ei(ft,R,!1,b)&&W}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var E=m.g[b],R=0;R<E.length;R++)_e(E[R]);delete m.g[b],m.h--}}this.F=null},De.prototype.K=function(m,b,E,R){return this.i.add(String(m),b,!1,E,R)},De.prototype.L=function(m,b,E,R){return this.i.add(String(m),b,!0,E,R)};function ei(m,b,E,R){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var W=!0,Z=0;Z<b.length;++Z){var ft=b[Z];if(ft&&!ft.da&&ft.capture==E){var Wt=ft.listener,tn=ft.ha||ft.src;ft.fa&&_n(m.i,ft),W=Wt.call(tn,R)!==!1&&W}}return W&&!R.defaultPrevented}function In(m,b,E){if(typeof m=="function")E&&(m=v(m,E));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(m,b||0)}function Rd(m){m.g=In(()=>{m.g=null,m.i&&(m.i=!1,Rd(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class Sp extends ht{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Rd(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oa(m){ht.call(this),this.h=m,this.g={}}S(Oa,ht);var Pa=[];function La(m){ct(m.g,function(b,E){this.g.hasOwnProperty(E)&&Xo(b)},m),m.g={}}Oa.prototype.N=function(){Oa.aa.N.call(this),La(this)},Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=u.JSON.stringify,Jo=u.JSON.parse,Va=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Fc(){}Fc.prototype.h=null;function zc(m){return m.h||(m.h=m.i())}function Bc(){}var Rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Is(){ut.call(this,"d")}S(Is,ut);function Hc(){ut.call(this,"c")}S(Hc,ut);var $i={},qc=null;function Er(){return qc=qc||new De}$i.La="serverreachability";function tl(m){ut.call(this,$i.La,m)}S(tl,ut);function xr(m){const b=Er();se(b,new tl(b))}$i.STAT_EVENT="statevent";function Id(m,b){ut.call(this,$i.STAT_EVENT,m),this.stat=b}S(Id,ut);function Ce(m){const b=Er();se(b,new Id(b,m))}$i.Ma="timingevent";function Je(m,b){ut.call(this,$i.Ma,m),this.size=b}S(Je,ut);function He(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},b)}function fi(){this.g=!0}fi.prototype.xa=function(){this.g=!1};function Wc(m,b,E,R,W,Z){m.info(function(){if(m.g)if(Z)for(var ft="",Wt=Z.split("&"),tn=0;tn<Wt.length;tn++){var Gt=Wt[tn].split("=");if(1<Gt.length){var ln=Gt[0];Gt=Gt[1];var en=ln.split("_");ft=2<=en.length&&en[1]=="type"?ft+(ln+"="+Gt+"&"):ft+(ln+"=redacted&")}}else ft=null;else ft=Z;return"XMLHTTP REQ ("+R+") [attempt "+W+"]: "+b+`
`+E+`
`+ft})}function Ap(m,b,E,R,W,Z,ft){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+W+"]: "+b+`
`+E+`
`+Z+" "+ft})}function Tr(m,b,E,R){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+ja(m,E)+(R?" "+R:"")})}function Nd(m,b){m.info(function(){return"TIMEOUT: "+b})}fi.prototype.info=function(){};function ja(m,b){if(!m.g)return b;if(!b)return null;try{var E=JSON.parse(b);if(E){for(m=0;m<E.length;m++)if(Array.isArray(E[m])){var R=E[m];if(!(2>R.length)){var W=R[1];if(Array.isArray(W)&&!(1>W.length)){var Z=W[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ft=1;ft<W.length;ft++)W[ft]=""}}}}return Di(E)}catch{return b}}var Sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ns={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qi;function Ki(){}S(Ki,Fc),Ki.prototype.g=function(){return new XMLHttpRequest},Ki.prototype.i=function(){return{}},Qi=new Ki;function jn(m,b,E,R){this.j=m,this.i=b,this.l=E,this.R=R||1,this.U=new Oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}var Gc={},el={};function Oi(m,b,E){m.L=1,m.v=Ha(ni(b)),m.m=E,m.P=!0,ks(m,null)}function ks(m,b){m.F=Date.now(),Ua(m),m.A=ni(m.v);var E=m.A,R=m.R;Array.isArray(R)||(R=[String(R)]),Zc(E.i,"t",R),m.C=0,E=m.j.J,m.h=new je,m.g=Gd(m.j,E?b:null,!m.m),0<m.O&&(m.M=new Sp(v(m.Y,m,m.g),m.O)),b=m.U,E=m.g,R=m.ca;var W="readystatechange";Array.isArray(W)||(W&&(Pa[0]=W.toString()),W=Pa);for(var Z=0;Z<W.length;Z++){var ft=Ad(E,W[Z],R||b.handleEvent,!1,b.h||b);if(!ft)break;b.g[ft.key]=ft}b=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),xr(),Wc(m.i,m.u,m.A,m.l,m.R,m.m)}jn.prototype.ca=function(m){m=m.target;const b=this.M;b&&_i(m)==3?b.j():this.Y(m)},jn.prototype.Y=function(m){try{if(m==this.g)t:{const en=_i(this.g);var b=this.g.Ba();const Us=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||jd(this.g)))){this.J||en!=4||b==7||(b==8||0>=Us?xr(3):xr(2)),Ar(this);var E=this.g.Z();this.X=E;e:if(kd(this)){var R=jd(this.g);m="";var W=R.length,Z=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Xi(this);var ft="";break e}this.h.i=new u.TextDecoder}for(b=0;b<W;b++)this.h.h=!0,m+=this.h.i.decode(R[b],{stream:!(Z&&b==W-1)});R.length=0,this.h.g+=m,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=E==200,Ap(this.i,this.u,this.A,this.l,this.R,en,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Wt,tn=this.g;if((Wt=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Wt)){var Gt=Wt;break e}}Gt=null}if(E=Gt)Tr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fa(this,E);else{this.o=!1,this.s=3,Ce(12),yn(this),Xi(this);break t}}if(this.P){E=!0;let vn;for(;!this.J&&this.C<ft.length;)if(vn=Md(this,ft),vn==el){en==4&&(this.s=4,Ce(14),E=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==Gc){this.s=4,Ce(15),Tr(this.i,this.l,ft,"[Invalid Chunk]"),E=!1;break}else Tr(this.i,this.l,vn,null),Fa(this,vn);if(kd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||ft.length!=0||this.h.h||(this.s=1,Ce(16),E=!1),this.o=this.o&&E,!E)Tr(this.i,this.l,ft,"[Invalid Chunked Response]"),yn(this),Xi(this);else if(0<ft.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),Xa(ln),ln.M=!0,Ce(11))}}else Tr(this.i,this.l,ft,null),Fa(this,ft);en==4&&yn(this),this.o&&!this.J&&(en==4?Hd(this.j,this):(this.o=!1,Ua(this)))}else kp(this.g),E==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),yn(this),Xi(this)}}}catch{}finally{}};function kd(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Md(m,b){var E=m.C,R=b.indexOf(`
`,E);return R==-1?el:(E=Number(b.substring(E,R)),isNaN(E)?Gc:(R+=1,R+E>b.length?el:(b=b.slice(R,R+E),m.C=R+E,b)))}jn.prototype.cancel=function(){this.J=!0,yn(this)};function Ua(m){m.S=Date.now()+m.I,Dd(m,m.I)}function Dd(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=He(v(m.ba,m),b)}function Ar(m){m.B&&(u.clearTimeout(m.B),m.B=null)}jn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Nd(this.i,this.A),this.L!=2&&(xr(),Ce(17)),yn(this),this.s=2,Xi(this)):Dd(this,this.S-m)};function Xi(m){m.j.G==0||m.J||Hd(m.j,m)}function yn(m){Ar(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,La(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function Fa(m,b){try{var E=m.j;if(E.G!=0&&(E.g==m||Yc(E.h,m))){if(!m.K&&Yc(E.h,m)&&E.G==3){try{var R=E.Da.g.parse(b)}catch{R=null}if(Array.isArray(R)&&R.length==3){var W=R;if(W[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<m.F)fl(E),hl(E);else break t;iu(E),Ce(18)}}else E.za=W[1],0<E.za-E.T&&37500>W[2]&&E.F&&E.v==0&&!E.C&&(E.C=He(v(E.Za,E),6e3));if(1>=il(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else js(E,11)}else if((m.K||E.g==m)&&fl(E),!q(b))for(W=E.Da.g.parse(b),b=0;b<W.length;b++){let Gt=W[b];if(E.T=Gt[0],Gt=Gt[1],E.G==2)if(Gt[0]=="c"){E.K=Gt[1],E.ia=Gt[2];const ln=Gt[3];ln!=null&&(E.la=ln,E.j.info("VER="+E.la));const en=Gt[4];en!=null&&(E.Aa=en,E.j.info("SVER="+E.Aa));const Us=Gt[5];Us!=null&&typeof Us=="number"&&0<Us&&(R=1.5*Us,E.L=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const vn=m.g;if(vn){const ss=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ss){var Z=R.h;Z.g||ss.indexOf("spdy")==-1&&ss.indexOf("quic")==-1&&ss.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(sl(Z,Z.h),Z.h=null))}if(R.D){const ru=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;ru&&(R.ya=ru,ce(R.I,R.D,ru))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-m.F,E.j.info("Handshake RTT: "+E.R+"ms")),R=E;var ft=m;if(R.qa=Wd(R,R.J?R.ia:null,R.W),ft.K){Un(R.h,ft);var Wt=ft,tn=R.L;tn&&(Wt.I=tn),Wt.B&&(Ar(Wt),Ua(Wt)),R.g=ft}else zd(R);0<E.i.length&&dl(E)}else Gt[0]!="stop"&&Gt[0]!="close"||js(E,7);else E.G==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?js(E,7):eu(E):Gt[0]!="noop"&&E.l&&E.l.ta(Gt),E.v=0)}}xr(4)}catch{}}var Od=class{constructor(m,b){this.g=m,this.map=b}};function Ms(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function il(m){return m.h?1:m.g?m.g.size:0}function Yc(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function sl(m,b){m.g?m.g.add(b):m.h=b}function Un(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Ms.prototype.cancel=function(){if(this.i=$c(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function $c(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const E of m.g.values())b=b.concat(E.D);return b}return N(m.i)}function Cp(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var b=[],E=m.length,R=0;R<E;R++)b.push(m[R]);return b}b=[],E=0;for(R in m)b[E++]=m[R];return b}function rl(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var b=[];m=m.length;for(var E=0;E<m;E++)b.push(E);return b}b=[],E=0;for(const R in m)b[E++]=R;return b}}}function Qc(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var E=rl(m),R=Cp(m),W=R.length,Z=0;Z<W;Z++)b.call(void 0,R[Z],E&&E[Z],m)}var za=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rp(m,b){if(m){m=m.split("&");for(var E=0;E<m.length;E++){var R=m[E].indexOf("="),W=null;if(0<=R){var Z=m[E].substring(0,R);W=m[E].substring(R+1)}else Z=m[E];b(Z,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function qe(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof qe){this.h=m.h,Ba(this,m.j),this.o=m.o,this.g=m.g,Cr(this,m.s),this.l=m.l;var b=m.i,E=new Os;E.i=b.i,b.g&&(E.g=new Map(b.g),E.h=b.h),Ds(this,E),this.m=m.m}else m&&(b=String(m).match(za))?(this.h=!1,Ba(this,b[1]||"",!0),this.o=mi(b[2]||""),this.g=mi(b[3]||"",!0),Cr(this,b[4]),this.l=mi(b[5]||"",!0),Ds(this,b[6]||"",!0),this.m=mi(b[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}qe.prototype.toString=function(){var m=[],b=this.j;b&&m.push(qa(b,Kc,!0),":");var E=this.g;return(E||b=="file")&&(m.push("//"),(b=this.o)&&m.push(qa(b,Kc,!0),"@"),m.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&m.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&m.push("/"),m.push(qa(E,E.charAt(0)=="/"?Ip:Xc,!0))),(E=this.i.toString())&&m.push("?",E),(E=this.m)&&m.push("#",qa(E,al)),m.join("")};function ni(m){return new qe(m)}function Ba(m,b,E){m.j=E?mi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function Cr(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function Ds(m,b,E){b instanceof Os?(m.i=b,Ld(m.i,m.h)):(E||(b=qa(b,Np)),m.i=new Os(b,m.h))}function ce(m,b,E){m.i.set(b,E)}function Ha(m){return ce(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function mi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function qa(m,b,E){return typeof m=="string"?(m=encodeURI(m).replace(b,Pd),E&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Pd(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Kc=/[#\/\?@]/g,Xc=/[#\?:]/g,Ip=/[#\?]/g,Np=/[#\?@]/g,al=/#/g;function Os(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function gi(m){m.g||(m.g=new Map,m.h=0,m.i&&Rp(m.i,function(b,E){m.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}n=Os.prototype,n.add=function(m,b){gi(this),this.i=null,m=Zi(this,m);var E=this.g.get(m);return E||this.g.set(m,E=[]),E.push(b),this.h+=1,this};function Ps(m,b){gi(m),b=Zi(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Ls(m,b){return gi(m),b=Zi(m,b),m.g.has(b)}n.forEach=function(m,b){gi(this),this.g.forEach(function(E,R){E.forEach(function(W){m.call(b,W,R,this)},this)},this)},n.na=function(){gi(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),E=[];for(let R=0;R<b.length;R++){const W=m[R];for(let Z=0;Z<W.length;Z++)E.push(b[R])}return E},n.V=function(m){gi(this);let b=[];if(typeof m=="string")Ls(this,m)&&(b=b.concat(this.g.get(Zi(this,m))));else{m=Array.from(this.g.values());for(let E=0;E<m.length;E++)b=b.concat(m[E])}return b},n.set=function(m,b){return gi(this),this.i=null,m=Zi(this,m),Ls(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function Zc(m,b,E){Ps(m,b),0<E.length&&(m.i=null,m.g.set(Zi(m,b),N(E)),m.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var E=0;E<b.length;E++){var R=b[E];const Z=encodeURIComponent(String(R)),ft=this.V(R);for(R=0;R<ft.length;R++){var W=Z;ft[R]!==""&&(W+="="+encodeURIComponent(String(ft[R]))),m.push(W)}}return this.i=m.join("&")};function Zi(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Ld(m,b){b&&!m.j&&(gi(m),m.i=null,m.g.forEach(function(E,R){var W=R.toLowerCase();R!=W&&(Ps(this,R),Zc(this,W,E))},m)),m.j=b}function Wa(m,b){const E=new fi;if(u.Image){const R=new Image;R.onload=T(pi,E,"TestLoadImage: loaded",!0,b,R),R.onerror=T(pi,E,"TestLoadImage: error",!1,b,R),R.onabort=T(pi,E,"TestLoadImage: abort",!1,b,R),R.ontimeout=T(pi,E,"TestLoadImage: timeout",!1,b,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else b(!1)}function Pi(m,b){const E=new fi,R=new AbortController,W=setTimeout(()=>{R.abort(),pi(E,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:R.signal}).then(Z=>{clearTimeout(W),Z.ok?pi(E,"TestPingServer: ok",!0,b):pi(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(W),pi(E,"TestPingServer: error",!1,b)})}function pi(m,b,E,R,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),R(E)}catch{}}function Ga(){this.g=new Va}function Ji(m,b,E){const R=E||"";try{Qc(m,function(W,Z){let ft=W;f(W)&&(ft=Di(W)),b.push(R+Z+"="+encodeURIComponent(ft))})}catch(W){throw b.push(R+"type="+encodeURIComponent("_badmap")),W}}function Rr(m){this.l=m.Ub||null,this.j=m.eb||!1}S(Rr,Fc),Rr.prototype.g=function(){return new Vs(this.l,this.j)},Rr.prototype.i=function(m){return function(){return m}}({});function Vs(m,b){De.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Vs,De),n=Vs.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,es(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jc(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jc(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?ts(this):es(this),this.readyState==3&&Jc(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,ts(this))},n.Qa=function(m){this.g&&(this.response=m,ts(this))},n.ga=function(){this.g&&ts(this)};function ts(m){m.readyState=4,m.l=null,m.j=null,m.v=null,es(m)}n.setRequestHeader=function(m,b){this.u.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,m.push(E[0]+": "+E[1]),E=b.next();return m.join(`\r
`)};function es(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function tu(m){let b="";return ct(m,function(E,R){b+=R,b+=":",b+=E,b+=`\r
`}),b}function on(m,b,E){t:{for(R in E){var R=!1;break t}R=!0}R||(E=tu(E),typeof m=="string"?E!=null&&encodeURIComponent(String(E)):ce(m,b,E))}function ne(m){De.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ne,De);var ol=/^https?$/i,Ya=["POST","PUT"];n=ne.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,b,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qi.g(),this.v=this.o?zc(this.o):zc(Qi),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(Z){Vd(this,Z);return}if(m=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var W in R)E.set(W,R[W]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Z of R.keys())E.set(Z,R.get(Z));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(Z=>Z.toLowerCase()=="content-type"),W=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ya,b,void 0))||R||W||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ft]of E)this.g.setRequestHeader(Z,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$a(this),this.u=!0,this.g.send(m),this.u=!1}catch(Z){Vd(this,Z)}};function Vd(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,ll(m),ns(m)}function ll(m){m.A||(m.A=!0,se(m,"complete"),se(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,se(this,"complete"),se(this,"abort"),ns(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ns(this,!0)),ne.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cl(this):this.bb())},n.bb=function(){cl(this)};function cl(m){if(m.h&&typeof l<"u"&&(!m.v[1]||_i(m)!=4||m.Z()!=2)){if(m.u&&_i(m)==4)In(m.Ea,0,m);else if(se(m,"readystatechange"),_i(m)==4){m.h=!1;try{const ft=m.Z();t:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var E;if(!(E=b)){var R;if(R=ft===0){var W=String(m.D).match(za)[1]||null;!W&&u.self&&u.self.location&&(W=u.self.location.protocol.slice(0,-1)),R=!ol.test(W?W.toLowerCase():"")}E=R}if(E)se(m,"complete"),se(m,"success");else{m.m=6;try{var Z=2<_i(m)?m.g.statusText:""}catch{Z=""}m.l=Z+" ["+m.Z()+"]",ll(m)}}finally{ns(m)}}}}function ns(m,b){if(m.g){$a(m);const E=m.g,R=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||se(m,"ready");try{E.onreadystatechange=R}catch{}}}function $a(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function _i(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Jo(b)}};function jd(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function kp(m){const b={};m=(m.g&&2<=_i(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(q(m[R]))continue;var E=V(m[R]);const W=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Z=b[W]||[];b[W]=Z,Z.push(E)}M(b,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qa(m,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[m]||b}function ul(m){this.Aa=0,this.i=[],this.j=new fi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qa("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qa("baseRetryDelayMs",5e3,m),this.cb=Qa("retryDelaySeedMs",1e4,m),this.Wa=Qa("forwardChannelMaxRetries",2,m),this.wa=Qa("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ms(m&&m.concurrentRequestLimit),this.Da=new Ga,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ul.prototype,n.la=8,n.G=1,n.connect=function(m,b,E,R){Ce(0),this.W=m,this.H=b||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=Wd(this,null,this.W),dl(this)};function eu(m){if(Ud(m),m.G==3){var b=m.U++,E=ni(m.I);if(ce(E,"SID",m.K),ce(E,"RID",b),ce(E,"TYPE","terminate"),Ka(m,E),b=new jn(m,m.j,b),b.L=2,b.v=Ha(ni(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=b.v,E=!0),E||(b.g=Gd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Ua(b)}qd(m)}function hl(m){m.g&&(Xa(m),m.g.cancel(),m.g=null)}function Ud(m){hl(m),m.u&&(u.clearTimeout(m.u),m.u=null),fl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function dl(m){if(!nl(m.h)&&!m.s){m.s=!0;var b=m.Ga;ot||U(),lt||(ot(),lt=!0),gt.add(b,m),m.B=0}}function Mp(m,b){return il(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=He(v(m.Ga,m,b),su(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const W=new jn(this,this.j,m);let Z=this.o;if(this.S&&(Z?(Z=I(Z),O(Z,this.S)):Z=this.S),this.m!==null||this.O||(W.H=Z,Z=null),this.P)t:{for(var b=0,E=0;E<this.i.length;E++){e:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break e}R=void 0}if(R===void 0)break;if(b+=R,4096<b){b=E;break t}if(b===4096||E===this.i.length-1){b=E+1;break t}}b=1e3}else b=1e3;b=Fd(this,W,b),E=ni(this.I),ce(E,"RID",m),ce(E,"CVER",22),this.D&&ce(E,"X-HTTP-Session-Id",this.D),Ka(this,E),Z&&(this.O?b="headers="+encodeURIComponent(String(tu(Z)))+"&"+b:this.m&&on(E,this.m,Z)),sl(this.h,W),this.Ua&&ce(E,"TYPE","init"),this.P?(ce(E,"$req",b),ce(E,"SID","null"),W.T=!0,Oi(W,E,null)):Oi(W,E,b),this.G=2}}else this.G==3&&(m?nu(this,m):this.i.length==0||nl(this.h)||nu(this))};function nu(m,b){var E;b?E=b.l:E=m.U++;const R=ni(m.I);ce(R,"SID",m.K),ce(R,"RID",E),ce(R,"AID",m.T),Ka(m,R),m.m&&m.o&&on(R,m.m,m.o),E=new jn(m,m.j,E,m.B+1),m.m===null&&(E.H=m.o),b&&(m.i=b.D.concat(m.i)),b=Fd(m,E,1e3),E.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),sl(m.h,E),Oi(E,R,b)}function Ka(m,b){m.H&&ct(m.H,function(E,R){ce(b,R,E)}),m.l&&Qc({},function(E,R){ce(b,R,E)})}function Fd(m,b,E){E=Math.min(m.i.length,E);var R=m.l?v(m.l.Na,m.l,m):null;t:{var W=m.i;let Z=-1;for(;;){const ft=["count="+E];Z==-1?0<E?(Z=W[0].g,ft.push("ofs="+Z)):Z=0:ft.push("ofs="+Z);let Wt=!0;for(let tn=0;tn<E;tn++){let Gt=W[tn].g;const ln=W[tn].map;if(Gt-=Z,0>Gt)Z=Math.max(0,W[tn].g-100),Wt=!1;else try{Ji(ln,ft,"req"+Gt+"_")}catch{R&&R(ln)}}if(Wt){R=ft.join("&");break t}}}return m=m.i.splice(0,E),b.D=m,R}function zd(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;ot||U(),lt||(ot(),lt=!0),gt.add(b,m),m.v=0}}function iu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=He(v(m.Fa,m),su(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Bd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=He(v(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),hl(this),Bd(this))};function Xa(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Bd(m){m.g=new jn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=ni(m.qa);ce(b,"RID","rpc"),ce(b,"SID",m.K),ce(b,"AID",m.T),ce(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&ce(b,"TO",m.ja),ce(b,"TYPE","xmlhttp"),Ka(m,b),m.m&&m.o&&on(b,m.m,m.o),m.L&&(m.g.I=m.L);var E=m.g;m=m.ia,E.L=1,E.v=Ha(ni(b)),E.m=null,E.P=!0,ks(E,m)}n.Za=function(){this.C!=null&&(this.C=null,hl(this),iu(this),Ce(19))};function fl(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Hd(m,b){var E=null;if(m.g==b){fl(m),Xa(m),m.g=null;var R=2}else if(Yc(m.h,b))E=b.D,Un(m.h,b),R=1;else return;if(m.G!=0){if(b.o)if(R==1){E=b.m?b.m.length:0,b=Date.now()-b.F;var W=m.B;R=Er(),se(R,new Je(R,E)),dl(m)}else zd(m);else if(W=b.s,W==3||W==0&&0<b.X||!(R==1&&Mp(m,b)||R==2&&iu(m)))switch(E&&0<E.length&&(b=m.h,b.i=b.i.concat(E)),W){case 1:js(m,5);break;case 4:js(m,10);break;case 3:js(m,6);break;default:js(m,2)}}}function su(m,b){let E=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(E*=2),E*b}function js(m,b){if(m.j.info("Error code "+b),b==2){var E=v(m.fb,m),R=m.Xa;const W=!R;R=new qe(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ba(R,"https"),Ha(R),W?Wa(R.toString(),E):Pi(R.toString(),E)}else Ce(2);m.G=0,m.l&&m.l.sa(b),qd(m),Ud(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function qd(m){if(m.G=0,m.ka=[],m.l){const b=$c(m.h);(b.length!=0||m.i.length!=0)&&(C(m.ka,b),C(m.ka,m.i),m.h.i.length=0,N(m.i),m.i.length=0),m.l.ra()}}function Wd(m,b,E){var R=E instanceof qe?ni(E):new qe(E);if(R.g!="")b&&(R.g=b+"."+R.g),Cr(R,R.s);else{var W=u.location;R=W.protocol,b=b?b+"."+W.hostname:W.hostname,W=+W.port;var Z=new qe(null);R&&Ba(Z,R),b&&(Z.g=b),W&&Cr(Z,W),E&&(Z.l=E),R=Z}return E=m.D,b=m.ya,E&&b&&ce(R,E,b),ce(R,"VER",m.la),Ka(m,R),R}function Gd(m,b,E){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new ne(new Rr({eb:E})):new ne(m.pa),b.Ha(m.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yd(){}n=Yd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ml(){}ml.prototype.g=function(m,b){return new Fn(m,b)};function Fn(m,b){De.call(this),this.g=new ul(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!q(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!q(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new is(this)}S(Fn,De),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){eu(this.g)},Fn.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var E={};E.__data__=m,m=E}else this.u&&(E={},E.__data__=Di(m),m=E);b.i.push(new Od(b.Ya++,m)),b.G==3&&dl(b)},Fn.prototype.N=function(){this.g.l=null,delete this.j,eu(this.g),delete this.g,Fn.aa.N.call(this)};function $d(m){Is.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){t:{for(const E in b){m=E;break t}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}S($d,Is);function Qd(){Hc.call(this),this.status=1}S(Qd,Hc);function is(m){this.g=m}S(is,Yd),is.prototype.ua=function(){se(this.g,"a")},is.prototype.ta=function(m){se(this.g,new $d(m))},is.prototype.sa=function(m){se(this.g,new Qd)},is.prototype.ra=function(){se(this.g,"b")},ml.prototype.createWebChannel=ml.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,zR=function(){return new ml},FR=function(){return Er()},UR=$i,w0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Cm=Sr,Ns.COMPLETE="complete",jR=Ns,Bc.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",De.prototype.listen=De.prototype.K,oh=Bc,ne.prototype.listenOnce=ne.prototype.L,ne.prototype.getLastError=ne.prototype.Ka,ne.prototype.getLastErrorCode=ne.prototype.Ba,ne.prototype.getStatus=ne.prototype.Z,ne.prototype.getResponseJson=ne.prototype.Oa,ne.prototype.getResponseText=ne.prototype.oa,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Ha,VR=ne}).apply(typeof Jf<"u"?Jf:typeof self<"u"?self:typeof window<"u"?window:{});const yS="@firebase/firestore",vS="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new zg("@firebase/firestore");function Yl(){return Lo.logLevel}function pt(n,...t){if(Lo.logLevel<=Ut.DEBUG){const e=t.map(Iv);Lo.debug(`Firestore (${Rc}): ${n}`,...e)}}function pr(n,...t){if(Lo.logLevel<=Ut.ERROR){const e=t.map(Iv);Lo.error(`Firestore (${Rc}): ${n}`,...e)}}function uc(n,...t){if(Lo.logLevel<=Ut.WARN){const e=t.map(Iv);Lo.warn(`Firestore (${Rc}): ${n}`,...e)}}function Iv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,BR(n,i,e)}function BR(n,t,e){let i=`FIRESTORE (${Rc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw pr(i),new Error(i)}function ee(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||BR(t,s,i)}function Nt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends br{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class SV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(On.UNAUTHENTICATED))}shutdown(){}}class AV{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class CV{constructor(t){this.t=t,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ee(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let a=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ca,t.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=a;t.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},u=d=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ca)}},0),l()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ee(typeof i.accessToken=="string",31837,{l:i}),new HR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ee(t===null||typeof t=="string",2055,{h:t}),new On(t)}}class RV{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IV{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new RV(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bS{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NV{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ee(this.o===void 0,3512);const i=a=>{a.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,pt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>i(a))};const s=a=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bS(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ee(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new bS(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=kV(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<e&&(i+=t.charAt(s[a]%62))}return i}}function Ht(n,t){return n<t?-1:n>t?1:0}function E0(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),a=t.charAt(i);if(s!==a)return jy(s)===jy(a)?Ht(s,a):jy(s)?1:-1}return Ht(n.length,t.length)}const MV=55296,DV=57343;function jy(n){const t=n.charCodeAt(0);return t>=MV&&t<=DV}function hc(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="__name__";class fs{constructor(t,e,i){e===void 0?e=0:e>t.length&&At(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&At(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return fs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fs?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const a=fs.compareSegments(t.get(s),e.get(s));if(a!==0)return a}return Ht(t.length,e.length)}static compareSegments(t,e){const i=fs.isNumericId(t),s=fs.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?fs.extractNumericId(t).compare(fs.extractNumericId(e)):E0(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return la.fromString(t.substring(4,t.length-2))}}class we extends fs{construct(t,e,i){return new we(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new mt(nt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new we(e)}static emptyPath(){return new we([])}}const OV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends fs{construct(t,e,i){return new An(t,e,i)}static isValidIdentifier(t){return OV.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wS}static keyField(){return new An([wS])}static fromServerFormat(t){const e=[];let i="",s=0;const a=()=>{if(i.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;s<t.length;){const u=t[s];if(u==="\\"){if(s+1===t.length)throw new mt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new mt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(a(),s++)}if(a(),l)throw new mt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new An(e)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.path=t}static fromPath(t){return new wt(we.fromString(t))}static fromName(t){return new wt(we.fromString(t).popFirst(5))}static empty(){return new wt(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&we.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return we.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wt(new we(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,t,e){if(!e)throw new mt(nt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function PV(n,t,e,i){if(t===!0&&i===!0)throw new mt(nt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function ES(n){if(!wt.isDocumentKey(n))throw new mt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xS(n){if(wt.isDocumentKey(n))throw new mt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":At(12329,{type:typeof n})}function ua(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new mt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Gg(n);throw new mt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function LV(n,t){if(t<=0)throw new mt(nt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n,t){const e={typeString:n};return t&&(e.value=t),e}function md(n,t){if(!WR(n))throw new mt(nt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){e=`Expected '${i}' field to equal '${a.value}'`;break}}if(e)throw new mt(nt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=-62135596800,SS=1e6;class Te{static now(){return Te.fromMillis(Date.now())}static fromDate(t){return Te.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*SS);return new Te(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<TS)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SS}_compareTo(t){return this.seconds===t.seconds?Ht(this.nanoseconds,t.nanoseconds):Ht(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(md(t,Te._jsonSchema))return new Te(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-TS;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:Qe("string",Te._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(t){return new kt(t)}static min(){return new kt(new Te(0,0))}static max(){return new kt(new Te(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=-1;function VV(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=kt.fromTimestamp(i===1e9?new Te(e+1,0):new Te(e,i));return new _a(s,wt.empty(),t)}function jV(n){return new _a(n.readTime,n.key,Ph)}class _a{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new _a(kt.min(),wt.empty(),Ph)}static max(){return new _a(kt.max(),wt.empty(),Ph)}}function UV(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=wt.comparator(n.documentKey,t.documentKey),e!==0?e:Ht(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(n){if(n.code!==nt.FAILED_PRECONDITION||n.message!==FV)throw n;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&At(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new at((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(e,a).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof at?e:at.resolve(e)}catch(e){return at.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):at.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):at.reject(e)}static resolve(t){return new at((e,i)=>{e(t)})}static reject(t){return new at((e,i)=>{i(t)})}static waitFor(t){return new at((e,i)=>{let s=0,a=0,l=!1;t.forEach(u=>{++s,u.next(()=>{++a,l&&a===s&&e()},d=>i(d))}),l=!0,a===s&&e()})}static or(t){let e=at.resolve(!1);for(const i of t)e=e.next(s=>s?at.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,a)=>{i.push(e.call(this,s,a))}),this.waitFor(i)}static mapArray(t,e){return new at((i,s)=>{const a=t.length,l=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;e(t[f]).next(p=>{l[f]=p,++u,u===a&&i(l)},p=>s(p))}})}static doWhile(t,e){return new at((i,s)=>{const a=()=>{t()===!0?e().next(()=>{a()},s):i()};a()})}}function BV(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Nc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Yg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=-1;function $g(n){return n==null}function $m(n){return n===0&&1/n==-1/0}function HV(n){return typeof n=="number"&&Number.isInteger(n)&&!$m(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="";function qV(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=AS(t)),t=WV(n.get(e),t);return AS(t)}function WV(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":e+="";break;case GR:e+="";break;default:e+=a}}return e}function AS(n){return n+GR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Ia(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function GV(n,t){const e=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.push(t(n[i],i,n));return e}function YR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ze=class x0{constructor(t,e){this.comparator=t,this.root=e||ha.EMPTY}insert(t,e){return new x0(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ha.BLACK,null,null))}remove(t){return new x0(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ha.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tm(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tm(this.root,t,this.comparator,!1)}getReverseIterator(){return new tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tm(this.root,t,this.comparator,!0)}},tm=class{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?i(t.key,e):1,e&&s&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ha=class tr{constructor(t,e,i,s,a){this.key=t,this.value=e,this.color=i??tr.RED,this.left=s??tr.EMPTY,this.right=a??tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,a){return new tr(t??this.key,e??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const a=i(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,e,i),null):a===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return tr.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw At(43730,{key:this.key,value:this.value});if(this.right.isRed())throw At(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw At(27949);return t+(this.isRed()?0:1)}};ha.EMPTY=null,ha.RED=!0,ha.BLACK=!1;ha.EMPTY=new class{constructor(){this.size=0}get key(){throw At(57766)}get value(){throw At(16141)}get color(){throw At(16727)}get left(){throw At(29726)}get right(){throw At(36894)}copy(t,e,i,s,a){return this}insert(t,e,i){return new ha(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.comparator=t,this.data=new Ze(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new RS(this.data.getIterator())}getIteratorFrom(t){return new RS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof an)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new an(this.comparator);return e.data=t,e}}class RS{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t){this.fields=t,t.sort(An.comparator)}static empty(){return new ui([])}unionWith(t){let e=new an(An.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ui(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return hc(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new $R("Invalid base64 string: "+a):a}}(t);return new Cn(e)}static fromUint8Array(t){const e=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(t);return new Cn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ht(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const YV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(n){if(ee(!!n,39018),typeof n=="string"){let t=0;const e=YV.exec(n);if(ee(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ze(n.seconds),nanos:ze(n.nanos)}}function ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function va(n){return typeof n=="string"?Cn.fromBase64String(n):Cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="server_timestamp",KR="__type__",XR="__previous_value__",ZR="__local_write_time__";function Mv(n){return(n?.mapValue?.fields||{})[KR]?.stringValue===QR}function Qg(n){const t=n.mapValue.fields[XR];return Mv(t)?Qg(t):t}function Lh(n){const t=ya(n.mapValue.fields[ZR].timestampValue);return new Te(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(t,e,i,s,a,l,u,d,f,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const Qm="(default)";class Vh{constructor(t,e){this.projectId=t,this.database=e||Qm}static empty(){return new Vh("","")}get isDefaultDatabase(){return this.database===Qm}isEqual(t){return t instanceof Vh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="__type__",QV="__max__",em={mapValue:{}},tI="__vector__",Km="value";function ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mv(n)?4:XV(n)?9007199254740991:KV(n)?10:11:At(28295,{value:n})}function xs(n,t){if(n===t)return!0;const e=ba(n);if(e!==ba(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Lh(n).isEqual(Lh(t));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ya(s.timestampValue),u=ya(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,a){return va(s.bytesValue).isEqual(va(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,a){return ze(s.geoPointValue.latitude)===ze(a.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(a.geoPointValue.longitude)}(n,t);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ze(s.integerValue)===ze(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=ze(s.doubleValue),u=ze(a.doubleValue);return l===u?$m(l)===$m(u):isNaN(l)&&isNaN(u)}return!1}(n,t);case 9:return hc(n.arrayValue.values||[],t.arrayValue.values||[],xs);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(CS(l)!==CS(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!xs(l[d],u[d])))return!1;return!0}(n,t);default:return At(52216,{left:n})}}function jh(n,t){return(n.values||[]).find(e=>xs(e,t))!==void 0}function dc(n,t){if(n===t)return 0;const e=ba(n),i=ba(t);if(e!==i)return Ht(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,t.booleanValue);case 2:return function(a,l){const u=ze(a.integerValue||a.doubleValue),d=ze(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,t);case 3:return IS(n.timestampValue,t.timestampValue);case 4:return IS(Lh(n),Lh(t));case 5:return E0(n.stringValue,t.stringValue);case 6:return function(a,l){const u=va(a),d=va(l);return u.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(a,l){const u=a.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=Ht(u[f],d[f]);if(p!==0)return p}return Ht(u.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,l){const u=Ht(ze(a.latitude),ze(l.latitude));return u!==0?u:Ht(ze(a.longitude),ze(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return NS(n.arrayValue,t.arrayValue);case 10:return function(a,l){const u=a.fields||{},d=l.fields||{},f=u[Km]?.arrayValue,p=d[Km]?.arrayValue,y=Ht(f?.values?.length||0,p?.values?.length||0);return y!==0?y:NS(f,p)}(n.mapValue,t.mapValue);case 11:return function(a,l){if(a===em.mapValue&&l===em.mapValue)return 0;if(a===em.mapValue)return 1;if(l===em.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let y=0;y<d.length&&y<p.length;++y){const v=E0(d[y],p[y]);if(v!==0)return v;const T=dc(u[d[y]],f[p[y]]);if(T!==0)return T}return Ht(d.length,p.length)}(n.mapValue,t.mapValue);default:throw At(23264,{he:e})}}function IS(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ht(n,t);const e=ya(n),i=ya(t),s=Ht(e.seconds,i.seconds);return s!==0?s:Ht(e.nanos,i.nanos)}function NS(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const a=dc(e[s],i[s]);if(a)return a}return Ht(e.length,i.length)}function fc(n){return T0(n)}function T0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=ya(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return va(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return wt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const a of e.values||[])s?s=!1:i+=",",i+=T0(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${T0(e.fields[l])}`;return s+"}"}(n.mapValue):At(61005,{value:n})}function Rm(n){switch(ba(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qg(n);return t?16+Rm(t):16;case 5:return 2*n.stringValue.length;case 6:return va(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Rm(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Ia(i.fields,(a,l)=>{s+=a.length+Rm(l)}),s}(n.mapValue);default:throw At(13486,{value:n})}}function kS(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function S0(n){return!!n&&"integerValue"in n}function Dv(n){return!!n&&"arrayValue"in n}function MS(n){return!!n&&"nullValue"in n}function DS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Im(n){return!!n&&"mapValue"in n}function KV(n){return(n?.mapValue?.fields||{})[JR]?.stringValue===tI}function yh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Ia(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=yh(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=yh(n.arrayValue.values[e]);return t}return{...n}}function XV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===QV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this.value=t}static empty(){return new $n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Im(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=yh(e)}setAll(t){let e=An.emptyPath(),i={},s=[];t.forEach((l,u)=>{if(!e.isImmediateParentOf(u)){const d=this.getFieldsMap(e);this.applyChanges(d,i,s),i={},s=[],e=u.popLast()}l?i[u.lastSegment()]=yh(l):s.push(u.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,i,s)}delete(t){const e=this.field(t.popLast());Im(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return xs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Im(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Ia(e,(s,a)=>t[s]=a);for(const s of i)delete t[s]}clone(){return new $n(yh(this.value))}}function eI(n){const t=[];return Ia(n.fields,(e,i)=>{const s=new An([e]);if(Im(i)){const a=eI(i.mapValue).fields;if(a.length===0)t.push(s);else for(const l of a)t.push(s.child(l))}else t.push(s)}),new ui(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,e,i,s,a,l,u){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(t){return new Pn(t,0,kt.min(),kt.min(),kt.min(),$n.empty(),0)}static newFoundDocument(t,e,i,s){return new Pn(t,1,e,kt.min(),i,s,0)}static newNoDocument(t,e){return new Pn(t,2,e,kt.min(),kt.min(),$n.empty(),0)}static newUnknownDocument(t,e){return new Pn(t,3,e,kt.min(),kt.min(),$n.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Pn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t,e){this.position=t,this.inclusive=e}}function OS(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const a=t[s],l=n.position[s];if(a.field.isKeyField()?i=wt.comparator(wt.fromName(l.referenceValue),e.key):i=dc(l,e.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function PS(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!xs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t,e="asc"){this.field=t,this.dir=e}}function ZV(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{}class $e extends nI{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new t6(t,e,i):e==="array-contains"?new i6(t,i):e==="in"?new s6(t,i):e==="not-in"?new r6(t,i):e==="array-contains-any"?new a6(t,i):new $e(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new e6(t,i):new n6(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(dc(e,this.value)):e!==null&&ba(this.value)===ba(e)&&this.matchesComparison(dc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gi extends nI{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Gi(t,e)}matches(t){return iI(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iI(n){return n.op==="and"}function sI(n){return JV(n)&&iI(n)}function JV(n){for(const t of n.filters)if(t instanceof Gi)return!1;return!0}function A0(n){if(n instanceof $e)return n.field.canonicalString()+n.op.toString()+fc(n.value);if(sI(n))return n.filters.map(t=>A0(t)).join(",");{const t=n.filters.map(e=>A0(e)).join(",");return`${n.op}(${t})`}}function rI(n,t){return n instanceof $e?function(i,s){return s instanceof $e&&i.op===s.op&&i.field.isEqual(s.field)&&xs(i.value,s.value)}(n,t):n instanceof Gi?function(i,s){return s instanceof Gi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,l,u)=>a&&rI(l,s.filters[u]),!0):!1}(n,t):void At(19439)}function aI(n){return n instanceof $e?function(e){return`${e.field.canonicalString()} ${e.op} ${fc(e.value)}`}(n):n instanceof Gi?function(e){return e.op.toString()+" {"+e.getFilters().map(aI).join(" ,")+"}"}(n):"Filter"}class t6 extends $e{constructor(t,e,i){super(t,e,i),this.key=wt.fromName(i.referenceValue)}matches(t){const e=wt.comparator(t.key,this.key);return this.matchesComparison(e)}}class e6 extends $e{constructor(t,e){super(t,"in",e),this.keys=oI("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class n6 extends $e{constructor(t,e){super(t,"not-in",e),this.keys=oI("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function oI(n,t){return(t.arrayValue?.values||[]).map(e=>wt.fromName(e.referenceValue))}class i6 extends $e{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Dv(e)&&jh(e.arrayValue,this.value)}}class s6 extends $e{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&jh(this.value.arrayValue,e)}}class r6 extends $e{constructor(t,e){super(t,"not-in",e)}matches(t){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!jh(this.value.arrayValue,e)}}class a6 extends $e{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Dv(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>jh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(t,e=null,i=[],s=[],a=null,l=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function LS(n,t=null,e=[],i=[],s=null,a=null,l=null){return new o6(n,t,e,i,s,a,l)}function Ov(n){const t=Nt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>A0(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),$g(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>fc(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>fc(i)).join(",")),t.Te=e}return t.Te}function Pv(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!ZV(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!rI(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!PS(n.startAt,t.startAt)&&PS(n.endAt,t.endAt)}function C0(n){return wt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t,e=null,i=[],s=[],a=null,l="F",u=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function l6(n,t,e,i,s,a,l,u){return new kc(n,t,e,i,s,a,l,u)}function Lv(n){return new kc(n)}function VS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lI(n){return n.collectionGroup!==null}function vh(n){const t=Nt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),e.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new an(An.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new Uh(a,i))}),e.has(An.keyField().canonicalString())||t.Ie.push(new Uh(An.keyField(),i))}return t.Ie}function _s(n){const t=Nt(n);return t.Ee||(t.Ee=cI(t,vh(n))),t.Ee}function c6(n){const t=Nt(n);return t.de||(t.de=cI(t,n.explicitOrderBy)),t.de}function cI(n,t){if(n.limitType==="F")return LS(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Uh(s.field,a)});const e=n.endAt?new Xm(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Xm(n.startAt.position,n.startAt.inclusive):null;return LS(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function R0(n,t){const e=n.filters.concat([t]);return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Zm(n,t,e){return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Kg(n,t){return Pv(_s(n),_s(t))&&n.limitType===t.limitType}function uI(n){return`${Ov(_s(n))}|lt:${n.limitType}`}function $l(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>aI(s)).join(", ")}]`),$g(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>fc(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>fc(s)).join(",")),`Target(${i})`}(_s(n))}; limitType=${n.limitType})`}function Xg(n,t){return t.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):wt.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,t)&&function(i,s){for(const a of vh(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(l,u,d){const f=OS(l,u,d);return l.inclusive?f<=0:f<0}(i.startAt,vh(i),s)||i.endAt&&!function(l,u,d){const f=OS(l,u,d);return l.inclusive?f>=0:f>0}(i.endAt,vh(i),s))}(n,t)}function u6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hI(n){return(t,e)=>{let i=!1;for(const s of vh(n)){const a=h6(s,t,e);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function h6(n,t,e){const i=n.field.isKeyField()?wt.comparator(t.key,e.key):function(a,l,u){const d=l.data.field(a),f=u.data.field(a);return d!==null&&f!==null?dc(d,f):At(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return At(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return void(s[a]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ia(this.inner,(e,i)=>{for(const[s,a]of i)t(s,a)})}isEmpty(){return YR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=new Ze(wt.comparator);function _r(){return d6}const dI=new Ze(wt.comparator);function lh(...n){let t=dI;for(const e of n)t=t.insert(e.key,e);return t}function fI(n){let t=dI;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function To(){return bh()}function mI(){return bh()}function bh(){return new Go(n=>n.toString(),(n,t)=>n.isEqual(t))}const f6=new Ze(wt.comparator),m6=new an(wt.comparator);function qt(...n){let t=m6;for(const e of n)t=t.add(e);return t}const g6=new an(Ht);function p6(){return g6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$m(t)?"-0":t}}function gI(n){return{integerValue:""+n}}function pI(n,t){return HV(t)?gI(t):Vv(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this._=void 0}}function _6(n,t,e){return n instanceof Fh?function(s,a){const l={fields:{[KR]:{stringValue:QR},[ZR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Mv(a)&&(a=Qg(a)),a&&(l.fields[XR]=a),{mapValue:l}}(e,t):n instanceof zh?yI(n,t):n instanceof Bh?vI(n,t):function(s,a){const l=_I(s,a),u=jS(l)+jS(s.Ae);return S0(l)&&S0(s.Ae)?gI(u):Vv(s.serializer,u)}(n,t)}function y6(n,t,e){return n instanceof zh?yI(n,t):n instanceof Bh?vI(n,t):e}function _I(n,t){return n instanceof Hh?function(i){return S0(i)||function(a){return!!a&&"doubleValue"in a}(i)}(t)?t:{integerValue:0}:null}class Fh extends Zg{}class zh extends Zg{constructor(t){super(),this.elements=t}}function yI(n,t){const e=bI(t);for(const i of n.elements)e.some(s=>xs(s,i))||e.push(i);return{arrayValue:{values:e}}}class Bh extends Zg{constructor(t){super(),this.elements=t}}function vI(n,t){let e=bI(t);for(const i of n.elements)e=e.filter(s=>!xs(s,i));return{arrayValue:{values:e}}}class Hh extends Zg{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function jS(n){return ze(n.integerValue||n.doubleValue)}function bI(n){return Dv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,e){this.field=t,this.transform=e}}function v6(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof zh&&s instanceof zh||i instanceof Bh&&s instanceof Bh?hc(i.elements,s.elements,xs):i instanceof Hh&&s instanceof Hh?xs(i.Ae,s.Ae):i instanceof Fh&&s instanceof Fh}(n.transform,t.transform)}class b6{constructor(t,e){this.version=t,this.transformResults=e}}class ys{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ys}static exists(t){return new ys(void 0,t)}static updateTime(t){return new ys(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Nm(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Jg{}function EI(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new TI(n.key,ys.none()):new gd(n.key,n.data,ys.none());{const e=n.data,i=$n.empty();let s=new an(An.comparator);for(let a of t.fields)if(!s.has(a)){let l=e.field(a);l===null&&a.length>1&&(a=a.popLast(),l=e.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Na(n.key,i,new ui(s.toArray()),ys.none())}}function w6(n,t,e){n instanceof gd?function(s,a,l){const u=s.value.clone(),d=FS(s.fieldTransforms,a,l.transformResults);u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,t,e):n instanceof Na?function(s,a,l){if(!Nm(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=FS(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(xI(s)),d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,e)}function wh(n,t,e,i){return n instanceof gd?function(a,l,u,d){if(!Nm(a.precondition,l))return u;const f=a.value.clone(),p=zS(a.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof Na?function(a,l,u,d){if(!Nm(a.precondition,l))return u;const f=zS(a.fieldTransforms,d,l),p=l.data;return p.setAll(xI(a)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(n,t,e,i):function(a,l,u){return Nm(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,t,e)}function E6(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),a=_I(i.transform,s||null);a!=null&&(e===null&&(e=$n.empty()),e.set(i.field,a))}return e||null}function US(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&hc(i,s,(a,l)=>v6(a,l))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class gd extends Jg{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Na extends Jg{constructor(t,e,i,s,a=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xI(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function FS(n,t,e){const i=new Map;ee(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let s=0;s<e.length;s++){const a=n[s],l=a.transform,u=t.data.field(a.field);i.set(a.field,y6(l,u,e[s]))}return i}function zS(n,t,e){const i=new Map;for(const s of n){const a=s.transform,l=e.data.field(s.field);i.set(s.field,_6(a,l,t))}return i}class TI extends Jg{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x6 extends Jg{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(t.key)&&w6(a,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=wh(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=wh(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=mI();return this.mutations.forEach(s=>{const a=t.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=e.has(s.key)?null:u;const d=EI(l,u);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(kt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),qt())}isEqual(t){return this.batchId===t.batchId&&hc(this.mutations,t.mutations,(e,i)=>US(e,i))&&hc(this.baseMutations,t.baseMutations,(e,i)=>US(e,i))}}class jv{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){ee(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return f6}();const a=t.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new jv(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(t,e,i){this.alias=t,this.aggregateType=e,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,$t;function R6(n){switch(n){case nt.OK:return At(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return At(15467,{code:n})}}function SI(n){if(n===void 0)return pr("GRPC error has no .code"),nt.UNKNOWN;switch(n){case Ye.OK:return nt.OK;case Ye.CANCELLED:return nt.CANCELLED;case Ye.UNKNOWN:return nt.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return nt.INTERNAL;case Ye.UNAVAILABLE:return nt.UNAVAILABLE;case Ye.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Ye.NOT_FOUND:return nt.NOT_FOUND;case Ye.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Ye.ABORTED:return nt.ABORTED;case Ye.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Ye.DATA_LOSS:return nt.DATA_LOSS;default:return At(39323,{code:n})}}($t=Ye||(Ye={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=new la([4294967295,4294967295],0);function BS(n){const t=I6().encode(n),e=new LR;return e.update(t),new Uint8Array(e.digest())}function HS(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new la([e,i],0),new la([s,a],0)]}class Uv{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ch(`Invalid padding: ${e}`);if(i<0)throw new ch(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ch(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ch(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=la.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(la.fromNumber(i)));return s.compare(N6)===1&&(s=new la([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=BS(t),[i,s]=HS(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new Uv(a,s,e);return i.forEach(u=>l.insert(u)),l}insert(t){if(this.ge===0)return;const e=BS(t),[i,s]=HS(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.Se(l)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(t,e,i,s,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,pd.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new tp(kt.min(),s,new Ze(Ht),_r(),qt())}}class pd{constructor(t,e,i,s,a){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new pd(i,e,qt(),qt(),qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,e,i,s){this.be=t,this.removedTargetIds=e,this.key=i,this.De=s}}class AI{constructor(t,e){this.targetId=t,this.Ce=e}}class CI{constructor(t,e,i=Cn.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class qS{constructor(){this.ve=0,this.Fe=WS(),this.Me=Cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=qt(),e=qt(),i=qt();return this.Fe.forEach((s,a)=>{switch(a){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:At(38017,{changeType:a})}}),new pd(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=WS()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class k6{constructor(t){this.Ge=t,this.ze=new Map,this.je=_r(),this.Je=nm(),this.He=nm(),this.Ye=new Ze(Ht)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:At(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((i,s)=>{this.rt(s)&&e(s)})}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const a=s.target;if(C0(a))if(i===0){const l=new wt(a.path);this.et(e,l,Pn.newNoDocument(l,kt.min()))}else ee(i===1,20013,{expectedCount:i});else{const l=this._t(e);if(l!==i){const u=this.ut(t),d=u?this.ct(u,t,l):1;if(d!==0){this.it(e);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,f)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=e;let l,u;try{l=va(i).toUint8Array()}catch(d){if(d instanceof $R)return uc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Uv(l,s,a)}catch(d){return uc(d instanceof ch?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach(a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(u)||(this.et(e,a,null),s++)}),s}Tt(t){const e=new Map;this.ze.forEach((a,l)=>{const u=this.ot(l);if(u){if(a.current&&C0(u.target)){const d=new wt(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Pn.newNoDocument(d,t))}a.Be&&(e.set(l,a.ke()),a.qe())}});let i=qt();this.He.forEach((a,l)=>{let u=!0;l.forEachWhile(d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(a))}),this.je.forEach((a,l)=>l.setReadTime(t));const s=new tp(t,e,this.Ye,this.je,i);return this.je=_r(),this.Je=nm(),this.He=nm(),this.Ye=new Ze(Ht),s}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new qS,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new an(Ht),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new an(Ht),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||pt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new qS),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function nm(){return new Ze(wt.comparator)}function WS(){return new Ze(wt.comparator)}const M6={asc:"ASCENDING",desc:"DESCENDING"},D6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O6={and:"AND",or:"OR"};class P6{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function I0(n,t){return n.useProto3Json||$g(t)?t:{value:t}}function Jm(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function RI(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function L6(n,t){return Jm(n,t.toTimestamp())}function vs(n){return ee(!!n,49232),kt.fromTimestamp(function(e){const i=ya(e);return new Te(i.seconds,i.nanos)}(n))}function Fv(n,t){return N0(n,t).canonicalString()}function N0(n,t){const e=function(s){return new we(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function II(n){const t=we.fromString(n);return ee(PI(t),10190,{key:t.toString()}),t}function k0(n,t){return Fv(n.databaseId,t.path)}function Uy(n,t){const e=II(t);if(e.get(1)!==n.databaseId.projectId)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new wt(kI(e))}function NI(n,t){return Fv(n.databaseId,t)}function V6(n){const t=II(n);return t.length===4?we.emptyPath():kI(t)}function M0(n){return new we(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kI(n){return ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function GS(n,t,e){return{name:k0(n,t),fields:e.value.mapValue.fields}}function j6(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:At(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(f,p){return f.useProto3Json?(ee(p===void 0||typeof p=="string",58123),Cn.fromBase64String(p||"")):(ee(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Cn.fromUint8Array(p||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,u=l&&function(f){const p=f.code===void 0?nt.UNKNOWN:SI(f.code);return new mt(p,f.message||"")}(l);e=new CI(i,s,a,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Uy(n,i.document.name),a=vs(i.document.updateTime),l=i.document.createTime?vs(i.document.createTime):kt.min(),u=new $n({mapValue:{fields:i.document.fields}}),d=Pn.newFoundDocument(s,a,l,u),f=i.targetIds||[],p=i.removedTargetIds||[];e=new km(f,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Uy(n,i.document),a=i.readTime?vs(i.readTime):kt.min(),l=Pn.newNoDocument(s,a),u=i.removedTargetIds||[];e=new km([],u,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Uy(n,i.document),a=i.removedTargetIds||[];e=new km([],a,s,null)}else{if(!("filter"in t))return At(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new C6(s,a),u=i.targetId;e=new AI(u,l)}}return e}function U6(n,t){let e;if(t instanceof gd)e={update:GS(n,t.key,t.value)};else if(t instanceof TI)e={delete:k0(n,t.key)};else if(t instanceof Na)e={update:GS(n,t.key,t.data),updateMask:$6(t.fieldMask)};else{if(!(t instanceof x6))return At(16599,{Vt:t.type});e={verify:k0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(a,l){const u=l.transform;if(u instanceof Fh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof zh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Bh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hh)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw At(20930,{transform:l.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:L6(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:At(27497)}(n,t.precondition)),e}function F6(n,t){return n&&n.length>0?(ee(t!==void 0,14353),n.map(e=>function(s,a){let l=s.updateTime?vs(s.updateTime):vs(a);return l.isEqual(kt.min())&&(l=vs(a)),new b6(l,s.transformResults||[])}(e,t))):[]}function z6(n,t){return{documents:[NI(n,t.path)]}}function MI(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=NI(n,s);const a=function(f){if(f.length!==0)return OI(Gi.create(f,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const l=function(f){if(f.length!==0)return f.map(p=>function(v){return{field:na(v.field),direction:W6(v.dir)}}(p))}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=I0(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ft:e,parent:s}}function B6(n,t,e,i){const{ft:s,parent:a}=MI(n,t),l={},u=[];let d=0;return e.forEach(f=>{const p="aggregate_"+d++;l[p]=f.alias,f.aggregateType==="count"?u.push({alias:p,count:{}}):f.aggregateType==="avg"?u.push({alias:p,avg:{field:na(f.fieldPath)}}):f.aggregateType==="sum"&&u.push({alias:p,sum:{field:na(f.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:s.structuredQuery},parent:s.parent},gt:l,parent:a}}function H6(n){let t=V6(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){ee(i===1,65062);const p=e.from[0];p.allDescendants?s=p.collectionId:t=t.child(p.collectionId)}let a=[];e.where&&(a=function(y){const v=DI(y);return v instanceof Gi&&sI(v)?v.getFilters():[v]}(e.where));let l=[];e.orderBy&&(l=function(y){return y.map(v=>function(S){return new Uh(Ql(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(e.orderBy));let u=null;e.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,$g(v)?null:v}(e.limit));let d=null;e.startAt&&(d=function(y){const v=!!y.before,T=y.values||[];return new Xm(T,v)}(e.startAt));let f=null;return e.endAt&&(f=function(y){const v=!y.before,T=y.values||[];return new Xm(T,v)}(e.endAt)),l6(t,s,l,a,u,"F",d,f)}function q6(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function DI(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ql(e.unaryFilter.field);return $e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ql(e.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ql(e.unaryFilter.field);return $e.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ql(e.unaryFilter.field);return $e.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return At(61313);default:return At(60726)}}(n):n.fieldFilter!==void 0?function(e){return $e.create(Ql(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return At(58110);default:return At(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Gi.create(e.compositeFilter.filters.map(i=>DI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return At(1026)}}(e.compositeFilter.op))}(n):At(30097,{filter:n})}function W6(n){return M6[n]}function G6(n){return D6[n]}function Y6(n){return O6[n]}function na(n){return{fieldPath:n.canonicalString()}}function Ql(n){return An.fromServerFormat(n.fieldPath)}function OI(n){return n instanceof $e?function(e){if(e.op==="=="){if(DS(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NAN"}};if(MS(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(DS(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NOT_NAN"}};if(MS(e.value))return{unaryFilter:{field:na(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(e.field),op:G6(e.op),value:e.value}}}(n):n instanceof Gi?function(e){const i=e.getFilters().map(s=>OI(s));return i.length===1?i[0]:{compositeFilter:{op:Y6(e.op),filters:i}}}(n):At(54877,{filter:n})}function $6(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function PI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,e,i,s,a=kt.min(),l=kt.min(),u=Cn.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(t){return new ia(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(t){this.yt=t}}function K6(n){const t=H6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.Cn=new Z6}addToCollectionParentIndex(t,e){return this.Cn.add(e),at.resolve()}getCollectionParents(t,e){return at.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return at.resolve()}deleteFieldIndex(t,e){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,e){return at.resolve()}getDocumentsMatchingTarget(t,e){return at.resolve(null)}getIndexType(t,e){return at.resolve(0)}getFieldIndexes(t,e){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,e){return at.resolve(_a.min())}getMinOffsetFromCollectionGroup(t,e){return at.resolve(_a.min())}updateCollectionGroup(t,e,i){return at.resolve()}updateIndexEntries(t,e){return at.resolve()}}class Z6{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new an(we.comparator),a=!s.has(i);return this.index[e]=s.add(i),a}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new an(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LI=41943040;class Gn{static withCacheSize(t){return new Gn(t,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(LI,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new mc(0)}static cr(){return new mc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="LruGarbageCollector",J6=1048576;function QS([n,t],[e,i]){const s=Ht(n,e);return s===0?Ht(t,i):s}class tj{constructor(t){this.Ir=t,this.buffer=new an(QS),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();QS(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class ej{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){pt($S,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Nc(e)?pt($S,"Ignoring IndexedDB error during garbage collection: ",e):await Ic(e)}await this.Vr(3e5)})}}class nj{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return at.resolve(Yg.ce);const i=new tj(e);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(YS)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YS):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,s,a,l,u,d,f;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(t,s))).next(y=>(i=y,u=Date.now(),this.removeTargets(t,i,e))).next(y=>(a=y,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(y=>(f=Date.now(),Yl()<=Ut.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function ij(n,t){return new nj(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.changes=new Go(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Pn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?at.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&wh(i.mutation,s,ui.empty(),Te.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,qt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=qt()){const s=To();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(a=>{let l=lh();return a.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=To();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,qt()))}populateOverlays(t,e,i){const s=[];return i.forEach(a=>{e.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(t,s).next(a=>{a.forEach((l,u)=>{e.set(l,u)})})}computeViews(t,e,i,s){let a=_r();const l=bh(),u=function(){return bh()}();return e.forEach((d,f)=>{const p=i.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Na)?a=a.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),wh(p.mutation,f,p.mutation.getFieldMask(),Te.now())):l.set(f.key,ui.empty())}),this.recalculateAndSaveOverlays(t,a).next(d=>(d.forEach((f,p)=>l.set(f,p)),e.forEach((f,p)=>u.set(f,new rj(p,l.get(f)??null))),u))}recalculateAndSaveOverlays(t,e){const i=bh();let s=new Ze((l,u)=>l-u),a=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const u of l)u.keys().forEach(d=>{const f=e.get(d);if(f===null)return;let p=i.get(d)||ui.empty();p=u.applyToLocalView(f,p),i.set(d,p);const y=(s.get(u.batchId)||qt()).add(d);s=s.insert(u.batchId,y)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,p=d.value,y=mI();p.forEach(v=>{if(!a.has(v)){const T=EI(e.get(v),i.get(v));T!==null&&y.set(v,T),a=a.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(t,f,y))}return at.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(l){return wt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):lI(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-a.size):at.resolve(To());let u=Ph,d=a;return l.next(f=>at.forEach(f,(p,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(p)?at.resolve():this.remoteDocumentCache.getEntry(t,p).next(v=>{d=d.insert(p,v)}))).next(()=>this.populateOverlays(t,f,a)).next(()=>this.computeViews(t,d,f,qt())).next(p=>({batchId:u,changes:fI(p)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new wt(e)).next(i=>{let s=lh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const a=e.collectionGroup;let l=lh();return this.indexManager.getCollectionParents(t,a).next(u=>at.forEach(u,d=>{const f=function(y,v){return new kc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(e,d.child(a));return this.getDocumentsMatchingCollectionQuery(t,f,i,s).next(p=>{p.forEach((y,v)=>{l=l.insert(y,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,e,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,a,s))).next(l=>{a.forEach((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,Pn.newInvalidDocument(p)))});let u=lh();return l.forEach((d,f)=>{const p=a.get(d);p!==void 0&&wh(p.mutation,f,ui.empty(),Te.now()),Xg(e,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return at.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:vs(s.createTime)}}(e)),at.resolve()}getNamedQuery(t,e){return at.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(s){return{name:s.name,query:K6(s.bundledQuery),readTime:vs(s.readTime)}}(e)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.overlays=new Ze(wt.comparator),this.qr=new Map}getOverlay(t,e){return at.resolve(this.overlays.get(e))}getOverlays(t,e){const i=To();return at.forEach(e,s=>this.getOverlay(t,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,a)=>{this.St(t,e,a)}),at.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(i)),at.resolve()}getOverlaysForCollection(t,e,i){const s=To(),a=e.length+1,l=new wt(e.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return at.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let a=new Ze((f,p)=>f-p);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>i){let p=a.get(f.largestBatchId);p===null&&(p=To(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=To(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=s)););return at.resolve(u)}St(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new S6(e,i));let a=this.qr.get(e);a===void 0&&(a=qt(),this.qr.set(e,a)),this.qr.set(e,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.Qr=new an(fn.$r),this.Ur=new an(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new fn(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Gr(new fn(t,e))}zr(t,e){t.forEach(i=>this.removeReference(i,e))}jr(t){const e=new wt(new we([])),i=new fn(e,t),s=new fn(e,t+1),a=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),a.push(l.key)}),a}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new wt(new we([])),i=new fn(e,t),s=new fn(e,t+1);let a=qt();return this.Ur.forEachInRange([i,s],l=>{a=a.add(l.key)}),a}containsKey(t){const e=new fn(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class fn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return wt.comparator(t.key,e.key)||Ht(t.Yr,e.Yr)}static Kr(t,e){return Ht(t.Yr,e.Yr)||wt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new an(fn.$r)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new T6(a,e,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new fn(u.key,a)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return at.resolve(l)}lookupMutationBatch(t,e){return at.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.ei(i),a=s<0?0:s;return at.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?kv:this.tr-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new fn(e,0),s=new fn(e,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],l=>{const u=this.Xr(l.Yr);a.push(u)}),at.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new an(Ht);return e.forEach(s=>{const a=new fn(s,0),l=new fn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],u=>{i=i.add(u.Yr)})}),at.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let a=i;wt.isDocumentKey(a)||(a=a.child(""));const l=new fn(new wt(a),0);let u=new an(Ht);return this.Zr.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)},l),at.resolve(this.ti(u))}ti(t){const e=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){ee(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return at.forEach(e.mutations,s=>{const a=new fn(s.key,e.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,e){const i=new fn(e,0),s=this.Zr.firstAfterOrEqual(i);return at.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(t){this.ri=t,this.docs=function(){return new Ze(wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),a=s?s.size:0,l=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return at.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(e))}getEntries(t,e){let i=_r();return e.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Pn.newInvalidDocument(s))}),at.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let a=_r();const l=e.path,u=new wt(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||UV(jV(p),i)<=0||(s.has(p.key)||Xg(e,p))&&(a=a.insert(p.key,p.mutableCopy()))}return at.resolve(a)}getAllFromCollectionGroup(t,e,i,s){At(9500)}ii(t,e){return at.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new dj(this)}getSize(t){return at.resolve(this.size)}}class dj extends sj{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),at.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(t){this.persistence=t,this.si=new Go(e=>Ov(e),Pv),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.oi=0,this._i=new zv,this.targetCount=0,this.ai=mc.ur()}forEachTarget(t,e){return this.si.forEach((i,s)=>e(s)),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),at.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new mc(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,at.resolve()}updateTargetData(t,e){return this.Pr(e),at.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,e,i){let s=0;const a=[];return this.si.forEach((l,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(t,u.targetId)),s++)}),at.waitFor(a).next(()=>s)}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return at.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),at.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const s=this.persistence.referenceDelegate,a=[];return s&&e.forEach(l=>{a.push(s.markPotentiallyOrphaned(t,l))}),at.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),at.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return at.resolve(i)}containsKey(t,e){return at.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t,e){this.ui={},this.overlays={},this.ci=new Yg(0),this.li=!1,this.li=!0,this.hi=new cj,this.referenceDelegate=t(this),this.Pi=new fj(this),this.indexManager=new X6,this.remoteDocumentCache=function(s){return new hj(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new Q6(e),this.Ii=new oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new lj,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new uj(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){pt("MemoryPersistence","Starting transaction:",t);const s=new mj(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(t,e){return at.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,e)))}}class mj extends zV{constructor(t){super(),this.currentSequenceNumber=t}}class Bv{constructor(t){this.persistence=t,this.Ri=new zv,this.Vi=null}static mi(t){return new Bv(t)}get fi(){if(this.Vi)return this.Vi;throw At(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),at.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),at.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),at.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>i.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.fi,i=>{const s=wt.fromPath(i);return this.gi(t,s).next(a=>{a||e.removeEntry(s,kt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return at.or([()=>at.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class tg{constructor(t,e){this.persistence=t,this.pi=new Go(i=>qV(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=ij(this,e)}static mi(t,e){return new tg(t,e)}Ei(){}di(t){return at.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}pr(t,e){return at.forEach(this.pi,(i,s)=>this.br(t,i,s).next(a=>a?at.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(t,l=>this.br(t,l,e).next(u=>{u||(i++,a.removeEntry(l,kt.min()))})).next(()=>a.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),at.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),at.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),at.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Rm(t.data.value)),e}br(t,e,i){return at.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return at.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=s}static As(t,e){let i=qt(),s=qt();for(const a of e.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Hv(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return VO()?8:BV(Vn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const a={result:null};return this.ys(t,e).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ws(t,e,s,i).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new gj;return this.Ss(t,e,l).next(u=>{if(a.result=u,this.Vs)return this.bs(t,e,l,u.size)})}).next(()=>a.result)}bs(t,e,i,s){return i.documentReadCount<this.fs?(Yl()<=Ut.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",$l(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),at.resolve()):(Yl()<=Ut.DEBUG&&pt("QueryEngine","Query:",$l(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Yl()<=Ut.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",$l(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_s(e))):at.resolve())}ys(t,e){if(VS(e))return at.resolve(null);let i=_s(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=Zm(e,null,"F"),i=_s(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(a=>{const l=qt(...a);return this.ps.getDocuments(t,l).next(u=>this.indexManager.getMinOffset(t,i).next(d=>{const f=this.Ds(e,u);return this.Cs(e,f,l,d.readTime)?this.ys(t,Zm(e,null,"F")):this.vs(t,f,e,d)}))})))}ws(t,e,i,s){return VS(e)||s.isEqual(kt.min())?at.resolve(null):this.ps.getDocuments(t,i).next(a=>{const l=this.Ds(e,a);return this.Cs(e,l,i,s)?at.resolve(null):(Yl()<=Ut.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$l(e)),this.vs(t,l,e,VV(s,Ph)).next(u=>u))})}Ds(t,e){let i=new an(hI(t));return e.forEach((s,a)=>{Xg(t,a)&&(i=i.add(a))}),i}Cs(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(t,e,i){return Yl()<=Ut.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",$l(e)),this.ps.getDocumentsMatchingQuery(t,e,_a.min(),i)}vs(t,e,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(a=>(e.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="LocalStore",_j=3e8;class yj{constructor(t,e,i,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new Ze(Ht),this.xs=new Go(a=>Ov(a),Pv),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new aj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function vj(n,t,e,i){return new yj(n,t,e,i)}async function jI(n,t){const e=Nt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(a=>{const l=[],u=[];let d=qt();for(const f of s){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return e.localDocuments.getDocuments(i,d).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:u}))})})}function bj(n,t){const e=Nt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),a=e.Ns.newChangeBuffer({trackRemovals:!0});return function(u,d,f,p){const y=f.batch,v=y.keys();let T=at.resolve();return v.forEach(S=>{T=T.next(()=>p.getEntry(d,S)).next(N=>{const C=f.docVersions.get(S);ee(C!==null,48541),N.version.compareTo(C)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),p.addEntry(N)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(e,i,t,a).next(()=>a.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=qt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function UI(n){const t=Nt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function wj(n,t){const e=Nt(n),i=t.snapshotVersion;let s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;const u=[];t.targetChanges.forEach((p,y)=>{const v=s.get(y);if(!v)return;u.push(e.Pi.removeMatchingKeys(a,p.removedDocuments,y).next(()=>e.Pi.addMatchingKeys(a,p.addedDocuments,y)));let T=v.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(y)!==null?T=T.withResumeToken(Cn.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,i)),s=s.insert(y,T),function(N,C,L){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=_j?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(v,T,p)&&u.push(e.Pi.updateTargetData(a,T))});let d=_r(),f=qt();if(t.documentUpdates.forEach(p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(Ej(a,l,t.documentUpdates).next(p=>{d=p.ks,f=p.qs})),!i.isEqual(kt.min())){const p=e.Pi.getLastRemoteSnapshotVersion(a).next(y=>e.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i));u.push(p)}return at.waitFor(u).next(()=>l.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,d,f)).next(()=>d)}).then(a=>(e.Ms=s,a))}function Ej(n,t,e){let i=qt(),s=qt();return e.forEach(a=>i=i.add(a)),t.getEntries(n,i).next(a=>{let l=_r();return e.forEach((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(kt.min())?(t.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(d),l=l.insert(u,d)):pt(qv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{ks:l,qs:s}})}function xj(n,t){const e=Nt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=kv),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Tj(n,t){const e=Nt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.Pi.getTargetData(i,t).next(a=>a?(s=a,at.resolve(s)):e.Pi.allocateTargetId(i).next(l=>(s=new ia(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i})}async function D0(n,t,e){const i=Nt(n),s=i.Ms.get(t),a=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",a,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Nc(l))throw l;pt(qv,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function KS(n,t,e){const i=Nt(n);let s=kt.min(),a=qt();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,p){const y=Nt(d),v=y.xs.get(p);return v!==void 0?at.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,p)}(i,l,_s(t)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next(d=>{a=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,t,e?s:kt.min(),e?a:qt())).next(u=>(Sj(i,u6(t),u),{documents:u,Qs:a})))}function Sj(n,t,e){let i=n.Os.get(t)||kt.min();e.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Os.set(t,i)}class XS{constructor(){this.activeTargetIds=p6()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Aj{constructor(){this.Mo=new XS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new XS,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="ConnectivityMonitor";class JS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pt(ZS,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){pt(ZS,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im=null;function O0(){return im===null?im=function(){return 268435456+Math.round(2147483648*Math.random())}():im++,"0x"+im.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="RestConnection",Rj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ij{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Qm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,e,i,s,a){const l=O0(),u=this.zo(t,e.toUriEncodedString());pt(Fy,`Sending RPC '${t}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,a);const{host:f}=new URL(u),p=Ca(f);return this.Jo(t,u,d,i,p).then(y=>(pt(Fy,`Received RPC '${t}' ${l}: `,y),y),y=>{throw uc(Fy,`RPC '${t}' ${l} failed with error: `,y,"url: ",u,"request:",i),y})}Ho(t,e,i,s,a,l){return this.Go(t,e,i,s,a)}jo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}zo(t,e){const i=Rj[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class kj extends Ij{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,s,a){const l=O0();return new Promise((u,d)=>{const f=new VR;f.setWithCredentials(!0),f.listenOnce(jR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Cm.NO_ERROR:const y=f.getResponseJson();pt(Mn,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(y)),u(y);break;case Cm.TIMEOUT:pt(Mn,`RPC '${t}' ${l} timed out`),d(new mt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Cm.HTTP_ERROR:const v=f.getStatus();if(pt(Mn,`RPC '${t}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const N=function(L){const q=L.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(q)>=0?q:nt.UNKNOWN}(S.status);d(new mt(N,S.message))}else d(new mt(nt.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new mt(nt.UNAVAILABLE,"Connection failed."));break;default:At(9055,{l_:t,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{pt(Mn,`RPC '${t}' ${l} completed.`)}});const p=JSON.stringify(s);pt(Mn,`RPC '${t}' ${l} sending request:`,s),f.send(e,"POST",p,i,15)})}T_(t,e,i){const s=O0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=zR(),u=FR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const p=a.join("");pt(Mn,`Creating RPC '${t}' stream ${s}: ${p}`,d);const y=l.createWebChannel(p,d);this.I_(y);let v=!1,T=!1;const S=new Nj({Yo:C=>{T?pt(Mn,`Not sending because RPC '${t}' stream ${s} is closed:`,C):(v||(pt(Mn,`Opening RPC '${t}' stream ${s} transport.`),y.open(),v=!0),pt(Mn,`RPC '${t}' stream ${s} sending:`,C),y.send(C))},Zo:()=>y.close()}),N=(C,L,q)=>{C.listen(L,G=>{try{q(G)}catch(J){setTimeout(()=>{throw J},0)}})};return N(y,oh.EventType.OPEN,()=>{T||(pt(Mn,`RPC '${t}' stream ${s} transport opened.`),S.o_())}),N(y,oh.EventType.CLOSE,()=>{T||(T=!0,pt(Mn,`RPC '${t}' stream ${s} transport closed`),S.a_(),this.E_(y))}),N(y,oh.EventType.ERROR,C=>{T||(T=!0,uc(Mn,`RPC '${t}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),S.a_(new mt(nt.UNAVAILABLE,"The operation could not be completed")))}),N(y,oh.EventType.MESSAGE,C=>{if(!T){const L=C.data[0];ee(!!L,16349);const q=L,G=q?.error||q[0]?.error;if(G){pt(Mn,`RPC '${t}' stream ${s} received error:`,G);const J=G.status;let H=function(I){const k=Ye[I];if(k!==void 0)return SI(k)}(J),ct=G.message;H===void 0&&(H=nt.INTERNAL,ct="Unknown error status: "+J+" with message "+G.message),T=!0,S.a_(new mt(H,ct)),y.close()}else pt(Mn,`RPC '${t}' stream ${s} received:`,L),S.u_(L)}}),N(u,UR.STAT_EVENT,C=>{C.stat===w0.PROXY?pt(Mn,`RPC '${t}' stream ${s} detected buffering proxy`):C.stat===w0.NOPROXY&&pt(Mn,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function zy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n){return new P6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,e,i=1e3,s=1.5,a=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&pt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="PersistentStream";class zI{constructor(t,e,i,s,a,l,u,d){this.Mi=t,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FI(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===nt.RESOURCE_EXHAUSTED?(pr(e.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===e&&this.G_(i,s)},i=>{t(()=>{const s=new mt(nt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return pt(t1,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(pt(t1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mj extends zI{constructor(t,e,i,s,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,l),this.serializer=a}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=j6(this.serializer,t),i=function(a){if(!("targetChange"in a))return kt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?kt.min():l.readTime?vs(l.readTime):kt.min()}(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=M0(this.serializer),e.addTarget=function(a,l){let u;const d=l.target;if(u=C0(d)?{documents:z6(a,d)}:{query:MI(a,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=RI(a,l.resumeToken);const f=I0(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(kt.min())>0){u.readTime=Jm(a,l.snapshotVersion.toTimestamp());const f=I0(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,t);const i=q6(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=M0(this.serializer),e.removeTarget=t,this.q_(e)}}class Dj extends zI{constructor(t,e,i,s,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return ee(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ee(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ee(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=F6(t.writeResults,t.commitTime),i=vs(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=M0(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>U6(this.serializer,i))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{}class Pj extends Oj{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Go(t,N0(e,i),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new mt(nt.UNKNOWN,a.toString())})}Ho(t,e,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Ho(t,N0(e,i),s,l,u,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new mt(nt.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Lj{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pr(e),this.aa=!1):pt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="RemoteStore";class Vj{constructor(t,e,i,s,a){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Yo(this)&&(pt(Vo,"Restarting streams for network reachability change."),await async function(d){const f=Nt(d);f.Ea.add(4),await _d(f),f.Ra.set("Unknown"),f.Ea.delete(4),await np(f)}(this))})}),this.Ra=new Lj(i,s)}}async function np(n){if(Yo(n))for(const t of n.da)await t(!0)}async function _d(n){for(const t of n.da)await t(!1)}function BI(n,t){const e=Nt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),$v(e)?Yv(e):Mc(e).O_()&&Gv(e,t))}function Wv(n,t){const e=Nt(n),i=Mc(e);e.Ia.delete(t),i.O_()&&HI(e,t),e.Ia.size===0&&(i.O_()?i.L_():Yo(e)&&e.Ra.set("Unknown"))}function Gv(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(kt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Mc(n).Y_(t)}function HI(n,t){n.Va.Ue(t),Mc(n).Z_(t)}function Yv(n){n.Va=new k6({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Mc(n).start(),n.Ra.ua()}function $v(n){return Yo(n)&&!Mc(n).x_()&&n.Ia.size>0}function Yo(n){return Nt(n).Ea.size===0}function qI(n){n.Va=void 0}async function jj(n){n.Ra.set("Online")}async function Uj(n){n.Ia.forEach((t,e)=>{Gv(n,t)})}async function Fj(n,t){qI(n),$v(n)?(n.Ra.ha(t),Yv(n)):n.Ra.set("Unknown")}async function zj(n,t,e){if(n.Ra.set("Online"),t instanceof CI&&t.state===2&&t.cause)try{await async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))}(n,t)}catch(i){pt(Vo,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await eg(n,i)}else if(t instanceof km?n.Va.Ze(t):t instanceof AI?n.Va.st(t):n.Va.tt(t),!e.isEqual(kt.min()))try{const i=await UI(n.localStore);e.compareTo(i)>=0&&await function(a,l){const u=a.Va.Tt(l);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,f)=>{const p=a.Ia.get(d);if(!p)return;a.Ia.set(d,p.withResumeToken(Cn.EMPTY_BYTE_STRING,p.snapshotVersion)),HI(a,d);const y=new ia(p.target,d,f,p.sequenceNumber);Gv(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(n,e)}catch(i){pt(Vo,"Failed to raise snapshot:",i),await eg(n,i)}}async function eg(n,t,e){if(!Nc(t))throw t;n.Ea.add(1),await _d(n),n.Ra.set("Offline"),e||(e=()=>UI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pt(Vo,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await np(n)})}function WI(n,t){return t().catch(e=>eg(n,e,t))}async function ip(n){const t=Nt(n),e=wa(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:kv;for(;Bj(t);)try{const s=await xj(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,Hj(t,s)}catch(s){await eg(t,s)}GI(t)&&YI(t)}function Bj(n){return Yo(n)&&n.Ta.length<10}function Hj(n,t){n.Ta.push(t);const e=wa(n);e.O_()&&e.X_&&e.ea(t.mutations)}function GI(n){return Yo(n)&&!wa(n).x_()&&n.Ta.length>0}function YI(n){wa(n).start()}async function qj(n){wa(n).ra()}async function Wj(n){const t=wa(n);for(const e of n.Ta)t.ea(e.mutations)}async function Gj(n,t,e){const i=n.Ta.shift(),s=jv.from(i,t,e);await WI(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await ip(n)}async function Yj(n,t){t&&wa(n).X_&&await async function(i,s){if(function(l){return R6(l)&&l!==nt.ABORTED}(s.code)){const a=i.Ta.shift();wa(i).B_(),await WI(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await ip(i)}}(n,t),GI(n)&&YI(n)}async function e1(n,t){const e=Nt(n);e.asyncQueue.verifyOperationInProgress(),pt(Vo,"RemoteStore received new credentials");const i=Yo(e);e.Ea.add(3),await _d(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await np(e)}async function $j(n,t){const e=Nt(n);t?(e.Ea.delete(2),await np(e)):t||(e.Ea.add(2),await _d(e),e.Ra.set("Unknown"))}function Mc(n){return n.ma||(n.ma=function(e,i,s){const a=Nt(e);return a.sa(),new Mj(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:jj.bind(null,n),t_:Uj.bind(null,n),r_:Fj.bind(null,n),H_:zj.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),$v(n)?Yv(n):n.Ra.set("Unknown")):(await n.ma.stop(),qI(n))})),n.ma}function wa(n){return n.fa||(n.fa=function(e,i,s){const a=Nt(e);return a.sa(),new Dj(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:qj.bind(null,n),r_:Yj.bind(null,n),ta:Wj.bind(null,n),na:Gj.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await ip(n)):(await n.fa.stop(),n.Ta.length>0&&(pt(Vo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(t,e,i,s,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,a){const l=Date.now()+i,u=new Qv(t,e,l,s,a);return u.start(i),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kv(n,t){if(pr("AsyncQueue",`${t}: ${n}`),Nc(n))return new mt(nt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{static emptySet(t){return new ec(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||wt.comparator(e.key,i.key):(e,i)=>wt.comparator(e.key,i.key),this.keyedMap=lh(),this.sortedSet=new Ze(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ec)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new ec;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.ga=new Ze(wt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):At(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,i)=>{t.push(i)}),t}}class gc{constructor(t,e,i,s,a,l,u,d,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(t,e,i,s,a){const l=[];return e.forEach(u=>{l.push({type:0,doc:u})}),new gc(t,e,ec.emptySet(e),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Kg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Kj{constructor(){this.queries=i1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=Nt(e),a=s.queries;s.queries=i1(),a.forEach((l,u)=>{for(const d of u.Sa)d.onError(i)})})(this,new mt(nt.ABORTED,"Firestore shutting down"))}}function i1(){return new Go(n=>uI(n),Kg)}async function Xj(n,t){const e=Nt(n);let i=3;const s=t.query;let a=e.queries.get(s);a?!a.ba()&&t.Da()&&(i=2):(a=new Qj,i=t.Da()?0:1);try{switch(i){case 0:a.wa=await e.onListen(s,!0);break;case 1:a.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(l){const u=Kv(l,`Initialization of query '${$l(t.query)}' failed`);return void t.onError(u)}e.queries.set(s,a),a.Sa.push(t),t.va(e.onlineState),a.wa&&t.Fa(a.wa)&&Xv(e)}async function Zj(n,t){const e=Nt(n),i=t.query;let s=3;const a=e.queries.get(i);if(a){const l=a.Sa.indexOf(t);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=t.Da()?0:1:!a.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function Jj(n,t){const e=Nt(n);let i=!1;for(const s of t){const a=s.query,l=e.queries.get(a);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&Xv(e)}function t3(n,t,e){const i=Nt(n),s=i.queries.get(t);if(s)for(const a of s.Sa)a.onError(e);i.queries.delete(t)}function Xv(n){n.Ca.forEach(t=>{t.next()})}var P0,s1;(s1=P0||(P0={})).Ma="default",s1.Cache="cache";class e3{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new gc(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=gc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==P0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t){this.key=t}}class QI{constructor(t){this.key=t}}class n3{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qt(),this.mutatedKeys=qt(),this.eu=hI(t),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new n1,s=e?e.tu:this.tu;let a=e?e.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((p,y)=>{const v=s.get(p),T=Xg(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;v&&T?v.data.isEqual(T.data)?S!==N&&(i.track({type:3,doc:T}),C=!0):this.su(v,T)||(i.track({type:2,doc:T}),C=!0,(d&&this.eu(T,d)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),C=!0):v&&!T&&(i.track({type:1,doc:v}),C=!0,(d||f)&&(u=!0)),C&&(T?(l=l.add(T),a=N?a.add(p):a.delete(p)):(l=l.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),a=a.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:u,mutatedKeys:a}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort((p,y)=>function(T,S){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At(20277,{Rt:C})}};return N(T)-N(S)}(p.type,y.type)||this.eu(p.doc,y.doc)),this.ou(i),s=s??!1;const u=e&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new gc(this.query,t.tu,a,l,t.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=qt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const e=[];return t.forEach(i=>{this.Xa.has(i)||e.push(new QI(i))}),this.Xa.forEach(i=>{t.has(i)||e.push(new $I(i))}),e}cu(t){this.Ya=t.Qs,this.Xa=qt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zv="SyncEngine";class i3{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class s3{constructor(t){this.key=t,this.hu=!1}}class r3{constructor(t,e,i,s,a,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Go(u=>uI(u),Kg),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(wt.comparator),this.Au=new Map,this.Ru=new zv,this.Vu={},this.mu=new Map,this.fu=mc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a3(n,t,e=!0){const i=e2(n);let s;const a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await KI(i,t,e,!0),s}async function o3(n,t){const e=e2(n);await KI(e,t,!0,!1)}async function KI(n,t,e,i){const s=await Tj(n.localStore,_s(t)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,e);let u;return i&&(u=await l3(n,t,a,l==="current",s.resumeToken)),n.isPrimaryClient&&e&&BI(n.remoteStore,s),u}async function l3(n,t,e,i,s){n.pu=(y,v,T)=>async function(N,C,L,q){let G=C.view.ru(L);G.Cs&&(G=await KS(N.localStore,C.query,!1).then(({documents:M})=>C.view.ru(M,G)));const J=q&&q.targetChanges.get(C.targetId),H=q&&q.targetMismatches.get(C.targetId)!=null,ct=C.view.applyChanges(G,N.isPrimaryClient,J,H);return a1(N,C.targetId,ct.au),ct.snapshot}(n,y,v,T);const a=await KS(n.localStore,t,!0),l=new n3(t,a.Qs),u=l.ru(a.documents),d=pd.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,d);a1(n,e,f.au);const p=new i3(t,e,l);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),f.snapshot}async function c3(n,t,e){const i=Nt(n),s=i.Tu.get(t),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter(l=>!Kg(l,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await D0(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&Wv(i.remoteStore,s.targetId),L0(i,s.targetId)}).catch(Ic)):(L0(i,s.targetId),await D0(i.localStore,s.targetId,!0))}async function u3(n,t){const e=Nt(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Wv(e.remoteStore,i.targetId))}async function h3(n,t,e){const i=y3(n);try{const s=await function(l,u){const d=Nt(l),f=Te.now(),p=u.reduce((T,S)=>T.add(S.key),qt());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=_r(),N=qt();return d.Ns.getEntries(T,p).next(C=>{S=C,S.forEach((L,q)=>{q.isValidDocument()||(N=N.add(L))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,S)).next(C=>{y=C;const L=[];for(const q of u){const G=E6(q,y.get(q.key).overlayedDocument);G!=null&&L.push(new Na(q.key,G,eI(G.value.mapValue),ys.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,L,u)}).next(C=>{v=C;const L=C.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(T,C.batchId,L)})}).then(()=>({batchId:v.batchId,changes:fI(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new Ze(Ht)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f}(i,s.batchId,e),await yd(i,s.changes),await ip(i.remoteStore)}catch(s){const a=Kv(s,"Failed to persist write");e.reject(a)}}async function XI(n,t){const e=Nt(n);try{const i=await wj(e.localStore,t);t.targetChanges.forEach((s,a)=>{const l=e.Au.get(a);l&&(ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ee(l.hu,14607):s.removedDocuments.size>0&&(ee(l.hu,42227),l.hu=!1))}),await yd(e,i,t)}catch(i){await Ic(i)}}function r1(n,t,e){const i=Nt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach((a,l)=>{const u=l.view.va(t);u.snapshot&&s.push(u.snapshot)}),function(l,u){const d=Nt(l);d.onlineState=u;let f=!1;d.queries.forEach((p,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)}),f&&Xv(d)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function d3(n,t,e){const i=Nt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),a=s&&s.key;if(a){let l=new Ze(wt.comparator);l=l.insert(a,Pn.newNoDocument(a,kt.min()));const u=qt().add(a),d=new tp(kt.min(),new Map,new Ze(Ht),l,u);await XI(i,d),i.du=i.du.remove(a),i.Au.delete(t),Jv(i)}else await D0(i.localStore,t,!1).then(()=>L0(i,t,e)).catch(Ic)}async function f3(n,t){const e=Nt(n),i=t.batch.batchId;try{const s=await bj(e.localStore,t);JI(e,i,null),ZI(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await yd(e,s)}catch(s){await Ic(s)}}async function m3(n,t,e){const i=Nt(n);try{const s=await function(l,u){const d=Nt(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(ee(y!==null,37113),p=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(i.localStore,t);JI(i,t,e),ZI(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await yd(i,s)}catch(s){await Ic(s)}}function ZI(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function JI(n,t,e){const i=Nt(n);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(t);a&&(e?a.reject(e):a.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function L0(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(i=>{n.Ru.containsKey(i)||t2(n,i)})}function t2(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Wv(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),Jv(n))}function a1(n,t,e){for(const i of e)i instanceof $I?(n.Ru.addReference(i.key,t),g3(n,i)):i instanceof QI?(pt(Zv,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||t2(n,i.key)):At(19791,{wu:i})}function g3(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(pt(Zv,"New document in limbo: "+e),n.Eu.add(i),Jv(n))}function Jv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new wt(we.fromString(t)),i=n.fu.next();n.Au.set(i,new s3(e)),n.du=n.du.insert(e,i),BI(n.remoteStore,new ia(_s(Lv(e.path)),i,"TargetPurposeLimboResolution",Yg.ce))}}async function yd(n,t,e){const i=Nt(n),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((u,d)=>{l.push(i.pu(d,t,e).then(f=>{if((f||e)&&i.isPrimaryClient){const p=f?!f.fromCache:e?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){s.push(f);const p=Hv.As(d.targetId,f);a.push(p)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(d,f){const p=Nt(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>at.forEach(f,v=>at.forEach(v.Es,T=>p.persistence.referenceDelegate.addReference(y,v.targetId,T)).next(()=>at.forEach(v.ds,T=>p.persistence.referenceDelegate.removeReference(y,v.targetId,T)))))}catch(y){if(!Nc(y))throw y;pt(qv,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const T=p.Ms.get(v),S=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(S);p.Ms=p.Ms.insert(v,N)}}}(i.localStore,a))}async function p3(n,t){const e=Nt(n);if(!e.currentUser.isEqual(t)){pt(Zv,"User change. New user:",t.toKey());const i=await jI(e.localStore,t);e.currentUser=t,function(a,l){a.mu.forEach(u=>{u.forEach(d=>{d.reject(new mt(nt.CANCELLED,l))})}),a.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await yd(e,i.Ls)}}function _3(n,t){const e=Nt(n),i=e.Au.get(t);if(i&&i.hu)return qt().add(i.key);{let s=qt();const a=e.Iu.get(t);if(!a)return s;for(const l of a){const u=e.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function e2(n){const t=Nt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=XI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=d3.bind(null,t),t.Pu.H_=Jj.bind(null,t.eventManager),t.Pu.yu=t3.bind(null,t.eventManager),t}function y3(n){const t=Nt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=f3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=m3.bind(null,t),t}class ng{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ep(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return vj(this.persistence,new pj,t.initialUser,this.serializer)}Cu(t){return new VI(Bv.mi,this.serializer)}Du(t){return new Aj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ng.provider={build:()=>new ng};class v3 extends ng{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){ee(this.persistence.referenceDelegate instanceof tg,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ej(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new VI(i=>tg.mi(i,e),this.serializer)}}class V0{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>r1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=p3.bind(null,this.syncEngine),await $j(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Kj}()}createDatastore(t){const e=ep(t.databaseInfo.databaseId),i=function(a){return new kj(a)}(t.databaseInfo);return function(a,l,u,d){return new Pj(a,l,u,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,a,l,u){return new Vj(i,s,a,l,u)}(this.localStore,this.datastore,t.asyncQueue,e=>r1(this.syncEngine,e,0),function(){return JS.v()?new JS:new Cj}())}createSyncEngine(t,e){return function(s,a,l,u,d,f,p){const y=new r3(s,a,l,u,d,f);return p&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await async function(e){const i=Nt(e);pt(Vo,"RemoteStore shutting down."),i.Ea.add(5),await _d(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}V0.provider={build:()=>new V0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):pr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="FirestoreClient";class w3{constructor(t,e,i,s,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=On.UNAUTHENTICATED,this.clientId=Nv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async l=>{pt(Ea,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(pt(Ea,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Kv(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function By(n,t){n.asyncQueue.verifyOperationInProgress(),pt(Ea,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await jI(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function o1(n,t){n.asyncQueue.verifyOperationInProgress();const e=await E3(n);pt(Ea,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>e1(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>e1(t.remoteStore,s)),n._onlineComponents=t}async function E3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pt(Ea,"Using user provided OfflineComponentProvider");try{await By(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===nt.FAILED_PRECONDITION||s.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;uc("Error using user provided cache. Falling back to memory cache: "+e),await By(n,new ng)}}else pt(Ea,"Using default OfflineComponentProvider"),await By(n,new v3(void 0));return n._offlineComponents}async function tb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pt(Ea,"Using user provided OnlineComponentProvider"),await o1(n,n._uninitializedComponentsProvider._online)):(pt(Ea,"Using default OnlineComponentProvider"),await o1(n,new V0))),n._onlineComponents}function x3(n){return tb(n).then(t=>t.syncEngine)}function T3(n){return tb(n).then(t=>t.datastore)}async function l1(n){const t=await tb(n),e=t.eventManager;return e.onListen=a3.bind(null,t.syncEngine),e.onUnlisten=c3.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=o3.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=u3.bind(null,t.syncEngine),e}function S3(n,t,e){const i=new ca;return n.asyncQueue.enqueueAndForget(async()=>{try{const s=await T3(n);i.resolve(async function(l,u,d){const f=Nt(l),{request:p,gt:y,parent:v}=B6(f.serializer,c6(u),d);f.connection.$o||delete p.parent;const T=(await f.Ho("RunAggregationQuery",f.serializer.databaseId,v,p,1)).filter(N=>!!N.result);ee(T.length===1,64727);const S=T[0].result?.aggregateFields;return Object.keys(S).reduce((N,C)=>(N[y[C]]=S[C],N),{})}(s,t,e))}catch(s){i.reject(s)}}),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firestore.googleapis.com",u1=!0;class h1{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new mt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i2,this.ssl=u1}else this.host=t.host,this.ssl=t.ssl??u1;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=LI;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<J6)throw new mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}PV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n2(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class sp{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h1(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new SV;switch(i.type){case"firstParty":return new IV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new mt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=c1.get(e);i&&(pt("ComponentProvider","Removing Datastore"),c1.delete(e),i.terminate())}(this),Promise.resolve()}}function A3(n,t,e,i={}){n=ua(n,sp);const s=Ca(t),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},u=`${t}:${e}`;s&&(fv(`https://${u}`),mv("Firestore",!0)),a.host!==i2&&a.host!==u&&uc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:u,ssl:s,emulatorOptions:i};if(!ga(d,l)&&(n._setSettings(d),i.mockUserToken)){let f,p;if(typeof i.mockUserToken=="string")f=i.mockUserToken,p=On.MOCK_USER;else{f=YC(i.mockUserToken,n._app?.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new mt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new On(y)}n._authCredentials=new AV(new HR(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ka(this.firestore,t,this._query)}}class Ke{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new da(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ke(this.firestore,t,this._key)}toJSON(){return{type:Ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(md(e,Ke._jsonSchema))return new Ke(t,i||null,new wt(we.fromString(e.referencePath)))}}Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:Qe("string",Ke._jsonSchemaVersion),referencePath:Qe("string")};class da extends ka{constructor(t,e,i){super(t,e,Lv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ke(this.firestore,null,new wt(t))}withConverter(t){return new da(this.firestore,t,this._path)}}function Ai(n,t,...e){if(n=Se(n),qR("collection","path",t),n instanceof sp){const i=we.fromString(t,...e);return xS(i),new da(n,null,i)}{if(!(n instanceof Ke||n instanceof da))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(we.fromString(t,...e));return xS(i),new da(n.firestore,null,i)}}function qh(n,t,...e){if(n=Se(n),arguments.length===1&&(t=Nv.newId()),qR("doc","path",t),n instanceof sp){const i=we.fromString(t,...e);return ES(i),new Ke(n,null,new wt(i))}{if(!(n instanceof Ke||n instanceof da))throw new mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(we.fromString(t,...e));return ES(i),new Ke(n.firestore,n instanceof da?n.converter:null,new wt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="AsyncQueue";class f1{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FI(this,"async_queue_retry"),this._c=()=>{const i=zy();i&&pt(d1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=zy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=zy();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new ca;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Nc(t))throw t;pt(d1,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,pr("INTERNAL UNHANDLED ERROR: ",m1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=Qv.createAndSchedule(this,t,e,i,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&At(47125,{Pc:m1(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function m1(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class pc extends sp{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new f1,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new f1(t),this._firestoreClient=void 0,await t}}}function C3(n,t){const e=typeof n=="object"?n:yv(),i=typeof n=="string"?n:Qm,s=Bg(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=qC("firestore");a&&A3(s,...a)}return s}function eb(n){if(n._terminated)throw new mt(nt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||R3(n),n._firestoreClient}function R3(n){const t=n._freezeSettings(),e=function(s,a,l,u){return new $V(s,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,n2(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new w3(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(t="count",e){this._internalFieldPath=e,this.type="AggregateField",this.aggregateType=t}}class N3{constructor(t,e,i){this._userDataWriter=e,this._data=i,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ci(Cn.fromBase64String(t))}catch(e){throw new mt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ci(Cn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(md(t,Ci._jsonSchema))return Ci.fromBase64String(t.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:Qe("string",Ci._jsonSchemaVersion),bytes:Qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new mt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new mt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ht(this._lat,t._lat)||Ht(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(t){if(md(t,bs._jsonSchema))return new bs(t.latitude,t.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:Qe("string",bs._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,t._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(md(t,ws._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new ws(t.vectorValues);throw new mt(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:Qe("string",ws._jsonSchemaVersion),vectorValues:Qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=/^__.*__$/;class M3{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Na(t,this.data,this.fieldMask,e,this.fieldTransforms):new gd(t,this.data,e,this.fieldTransforms)}}class s2{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Na(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function r2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At(40011,{Ac:n})}}class nb{constructor(t,e,i,s,a,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new nb({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ig(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(r2(this.Ac)&&k3.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class D3{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ep(t)}Cc(t,e,i,s=!1){return new nb({Ac:t,methodName:e,Dc:i,path:An.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ib(n){const t=n._freezeSettings(),e=ep(n._databaseId);return new D3(n._databaseId,!!t.ignoreUndefinedProperties,e)}function O3(n,t,e,i,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,t,e,s);ab("Data must be an object, but it was:",l,i);const u=a2(i,l);let d,f;if(a.merge)d=new ui(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const p=[];for(const y of a.mergeFields){const v=j0(t,y,e);if(!l.contains(v))throw new mt(nt.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);l2(p,v)||p.push(v)}d=new ui(p),f=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=l.fieldTransforms;return new M3(new $n(u),d,f)}class ap extends vd{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ap}}class sb extends vd{_toFieldTransform(t){return new wI(t.path,new Fh)}isEqual(t){return t instanceof sb}}class rb extends vd{constructor(t,e){super(t),this.Fc=e}_toFieldTransform(t){const e=new Hh(t.serializer,pI(t.serializer,this.Fc));return new wI(t.path,e)}isEqual(t){return t instanceof rb&&this.Fc===t.Fc}}function P3(n,t,e,i){const s=n.Cc(1,t,e);ab("Data must be an object, but it was:",s,i);const a=[],l=$n.empty();Ia(i,(d,f)=>{const p=ob(t,d,e);f=Se(f);const y=s.yc(p);if(f instanceof ap)a.push(p);else{const v=bd(f,y);v!=null&&(a.push(p),l.set(p,v))}});const u=new ui(a);return new s2(l,u,s.fieldTransforms)}function L3(n,t,e,i,s,a){const l=n.Cc(1,t,e),u=[j0(t,i,e)],d=[s];if(a.length%2!=0)throw new mt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(j0(t,a[v])),d.push(a[v+1]);const f=[],p=$n.empty();for(let v=u.length-1;v>=0;--v)if(!l2(f,u[v])){const T=u[v];let S=d[v];S=Se(S);const N=l.yc(T);if(S instanceof ap)f.push(T);else{const C=bd(S,N);C!=null&&(f.push(T),p.set(T,C))}}const y=new ui(f);return new s2(p,y,l.fieldTransforms)}function V3(n,t,e,i=!1){return bd(e,n.Cc(i?4:3,t))}function bd(n,t){if(o2(n=Se(n)))return ab("Unsupported field value:",t,n),a2(n,t);if(n instanceof vd)return function(i,s){if(!r2(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const a=[];let l=0;for(const u of i){let d=bd(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}}(n,t)}return function(i,s){if((i=Se(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pI(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Te.fromDate(i);return{timestampValue:Jm(s.serializer,a)}}if(i instanceof Te){const a=new Te(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Jm(s.serializer,a)}}if(i instanceof bs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ci)return{bytesValue:RI(s.serializer,i._byteString)};if(i instanceof Ke){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Fv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ws)return function(l,u){return{mapValue:{fields:{[JR]:{stringValue:tI},[Km]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Vv(u.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Gg(i)}`)}(n,t)}function a2(n,t){const e={};return YR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ia(n,(i,s)=>{const a=bd(s,t.mc(i));a!=null&&(e[i]=a)}),{mapValue:{fields:e}}}function o2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Te||n instanceof bs||n instanceof Ci||n instanceof Ke||n instanceof vd||n instanceof ws)}function ab(n,t,e){if(!o2(e)||!WR(e)){const i=Gg(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function j0(n,t,e){if((t=Se(t))instanceof rp)return t._internalPath;if(typeof t=="string")return ob(n,t);throw ig("Field path arguments must be of type string or ",n,!1,void 0,e)}const j3=new RegExp("[~\\*/\\[\\]]");function ob(n,t,e){if(t.search(j3)>=0)throw ig(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new rp(...t.split("."))._internalPath}catch{throw ig(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ig(n,t,e,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new mt(nt.INVALID_ARGUMENT,u+n+d)}function l2(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t,e,i,s,a){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new U3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(op("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class U3 extends c2{data(){return super.data()}}function op(n,t){return typeof t=="string"?ob(n,t):t instanceof rp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new mt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lb{}class cb extends lb{}function So(n,t,...e){let i=[];t instanceof lb&&i.push(t),i=i.concat(e),function(a){const l=a.filter(d=>d instanceof ub).length,u=a.filter(d=>d instanceof lp).length;if(l>1||l>0&&u>0)throw new mt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class lp extends cb{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new lp(t,e,i)}_apply(t){const e=this._parse(t);return u2(t._query,e),new ka(t.firestore,t.converter,R0(t._query,e))}_parse(t){const e=ib(t.firestore);return function(a,l,u,d,f,p,y){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){y1(y,p);const S=[];for(const N of y)S.push(_1(d,a,N));v={arrayValue:{values:S}}}else v=_1(d,a,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||y1(y,p),v=V3(u,l,y,p==="in"||p==="not-in");return $e.create(f,p,v)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function Wh(n,t,e){const i=t,s=op("where",n);return lp._create(s,i,e)}class ub extends lb{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ub(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Gi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(s,a){let l=s;const u=a.getFlattenedFilters();for(const d of u)u2(l,d),l=R0(l,d)}(t._query,e),new ka(t.firestore,t.converter,R0(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hb extends cb{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new hb(t,e)}_apply(t){const e=function(s,a,l){if(s.startAt!==null)throw new mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uh(a,l)}(t._query,this._field,this._direction);return new ka(t.firestore,t.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new kc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,e))}}function U0(n,t="asc"){const e=t,i=op("orderBy",n);return hb._create(i,e)}class db extends cb{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new db(t,e,i)}_apply(t){return new ka(t.firestore,t.converter,Zm(t._query,this._limit,this._limitType))}}function p1(n){return LV("limit",n),db._create("limit",n,"F")}function _1(n,t,e){if(typeof(e=Se(e))=="string"){if(e==="")throw new mt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lI(t)&&e.indexOf("/")!==-1)throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(we.fromString(e));if(!wt.isDocumentKey(i))throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return kS(n,new wt(i))}if(e instanceof Ke)return kS(n,e._key);throw new mt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gg(e)}.`)}function y1(n,t){if(!Array.isArray(n)||n.length===0)throw new mt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function u2(n,t){const e=function(s,a){for(const l of s)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class z3{convertValue(t,e="none"){switch(ba(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ze(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(va(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw At(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Ia(t,(s,a)=>{i[s]=this.convertValue(a,e)}),i}convertVectorValue(t){const e=t.fields?.[Km].arrayValue?.values?.map(i=>ze(i.doubleValue));return new ws(e)}convertGeoPoint(t){return new bs(ze(t.latitude),ze(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Qg(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Lh(t));default:return null}}convertTimestamp(t){const e=ya(t);return new Te(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=we.fromString(t);ee(PI(i),9688,{name:t});const s=new Vh(i.get(1),i.get(3)),a=new wt(i.popFirst(5));return s.isEqual(e)||pr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(n,t,e){let i;return i=n?n.toFirestore(t):t,i}function H3(){return new I3("count")}class uh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ko extends c2{constructor(t,e,i,s,a,l){super(t,e,i,s,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(op("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ko._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",ko._jsonSchema={type:Qe("string",ko._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class Mm extends ko{data(t={}){return super.data(t)}}class nc{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new uh(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Mm(this._firestore,this._userDataWriter,i.key,i,new uh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const d=new Mm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new uh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const d=new Mm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new uh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:q3(u.type),doc:d,oldIndex:f,newIndex:p}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=nc._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Nv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(e.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function q3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At(61501,{type:n})}}nc._jsonSchemaVersion="firestore/querySnapshot/1.0",nc._jsonSchema={type:Qe("string",nc._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class fb extends z3{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ke(this.firestore,null,e)}}function sg(n,t,e,...i){n=ua(n,Ke);const s=ua(n.firestore,pc),a=ib(s);let l;return l=typeof(t=Se(t))=="string"||t instanceof rp?L3(a,"updateDoc",n._key,t,e,i):P3(a,"updateDoc",n._key,t),h2(s,[l.toMutation(n._key,ys.exists(!0))])}function Hy(n,t){const e=ua(n.firestore,pc),i=qh(n),s=B3(n.converter,t);return h2(e,[O3(ib(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,ys.exists(!1))]).then(()=>i)}function Ao(n,...t){n=Se(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||g1(t[i])||(e=t[i++]);const s={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(g1(t[i])){const d=t[i];t[i]=d.next?.bind(d),t[i+1]=d.error?.bind(d),t[i+2]=d.complete?.bind(d)}let a,l,u;if(n instanceof Ke)l=ua(n.firestore,pc),u=Lv(n._key.path),a={next:d=>{t[i]&&t[i](W3(l,n,d))},error:t[i+1],complete:t[i+2]};else{const d=ua(n,ka);l=ua(d.firestore,pc),u=d._query;const f=new fb(l);a={next:p=>{t[i]&&t[i](new nc(l,f,d,p))},error:t[i+1],complete:t[i+2]},F3(n._query)}return function(f,p,y,v){const T=new b3(v),S=new e3(p,T,y);return f.asyncQueue.enqueueAndForget(async()=>Xj(await l1(f),S)),()=>{T.Nu(),f.asyncQueue.enqueueAndForget(async()=>Zj(await l1(f),S))}}(eb(l),u,s,a)}function h2(n,t){return function(i,s){const a=new ca;return i.asyncQueue.enqueueAndForget(async()=>h3(await x3(i),s,a)),a.promise}(eb(n),t)}function W3(n,t,e){const i=e.docs.get(t._key),s=new fb(n);return new ko(n,s,t._key,i,new uh(e.hasPendingWrites,e.fromCache),t.converter)}function v1(n){return G3(n,{count:H3()})}function G3(n,t){const e=ua(n.firestore,pc),i=eb(e),s=GV(t,(a,l)=>new A6(l,a.aggregateType,a._internalFieldPath));return S3(i,n._query,s).then(a=>function(u,d,f){const p=new fb(u);return new N3(d,p,f)}(e,n,a))}function hh(){return new sb("serverTimestamp")}function wo(n){return new rb("increment",n)}(function(t,e=!0){(function(s){Rc=s})(Wo),Do(new pa("firestore",(i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),u=new pc(new CV(i.getProvider("auth-internal")),new NV(l,i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new mt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vh(f.options.projectId,p)}(l,s),l);return a={useFetchStreams:e,...a},u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),gs(yS,vS,t),gs(yS,vS,"esm2020")})();var b1={};const w1="@firebase/database",E1="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d2="";function Y3(n){d2=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),gn(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Mh(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return As(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new $3(t)}}catch{}return new Q3},Co=f2("localStorage"),K3=f2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new zg("@firebase/database"),X3=function(){let n=1;return function(){return n++}}(),m2=function(n){const t=QO(n),e=new WO;e.update(t);const i=e.digest();return dv.encodeByteArray(i)},wd=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=wd.apply(null,i):typeof i=="object"?t+=gn(i):t+=i,t+=" "}return t};let Eh=null,x1=!0;const Z3=function(n,t){dt(!0,"Can't turn on custom loggers persistently."),ic.logLevel=Ut.VERBOSE,Eh=ic.log.bind(ic)},Tn=function(...n){if(x1===!0&&(x1=!1,Eh===null&&K3.get("logging_enabled")===!0&&Z3()),Eh){const t=wd.apply(null,n);Eh(t)}},Ed=function(n){return function(...t){Tn(n,...t)}},F0=function(...n){const t="FIREBASE INTERNAL ERROR: "+wd(...n);ic.error(t)},yr=function(...n){const t=`FIREBASE FATAL ERROR: ${wd(...n)}`;throw ic.error(t),new Error(t)},Jn=function(...n){const t="FIREBASE WARNING: "+wd(...n);ic.warn(t)},J3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mb=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},t5=function(n){if(document.readyState==="complete")n();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},_c="[MIN_NAME]",jo="[MAX_NAME]",$o=function(n,t){if(n===t)return 0;if(n===_c||t===jo)return-1;if(t===_c||n===jo)return 1;{const e=T1(n),i=T1(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},e5=function(n,t){return n===t?0:n<t?-1:1},$u=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+gn(t))},gb=function(n){if(typeof n!="object"||n===null)return gn(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=gn(t[i]),e+=":",e+=gb(n[t[i]]);return e+="}",e},g2=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let s=0;s<e;s+=t)s+t>e?i.push(n.substring(s,e)):i.push(n.substring(s,s+t));return i};function Rn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const p2=function(n){dt(!mb(n),"Invalid JSON number");const t=11,e=52,i=(1<<t-1)-1;let s,a,l,u,d;n===0?(a=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=u+i,l=Math.round(n*Math.pow(2,e-u)-Math.pow(2,e))):(a=0,l=Math.round(n/Math.pow(2,1-i-e))));const f=[];for(d=e;d;d-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(d=t;d;d-=1)f.push(a%2?1:0),a=Math.floor(a/2);f.push(s?1:0),f.reverse();const p=f.join("");let y="";for(d=0;d<64;d+=8){let v=parseInt(p.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},n5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},i5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function s5(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}const r5=new RegExp("^-?(0*)\\d{1,10}$"),a5=-2147483648,o5=2147483647,T1=function(n){if(r5.test(n)){const t=Number(n);if(t>=a5&&t<=o5)return t}return null},Dc=function(n){try{n()}catch(t){setTimeout(()=>{const e=t.stack||"";throw Jn("Exception was thrown by user callback.",e),t},Math.floor(0))}},l5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xh=function(n,t){const e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,Yn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){Jn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jn(t)}}class Dm{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Dm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="5",_2="v",y2="s",v2="r",b2="f",w2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,E2="ls",x2="p",z0="ac",T2="websocket",S2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t,e,i,s,a=!1,l="",u=!1,d=!1,f=null){this.secure=e,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this.emulatorOptions=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Co.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Co.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function h5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function C2(n,t,e){dt(typeof t=="string","typeof type must == string"),dt(typeof e=="object","typeof params must == object");let i;if(t===T2)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===S2)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);h5(n)&&(e.ns=n.namespace);const s=[];return Rn(e,(a,l)=>{s.push(a+"="+l)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.counters_={}}incrementCounter(t,e=1){As(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return TO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy={},Wy={};function _b(n){const t=n.toString();return qy[t]||(qy[t]=new d5),qy[t]}function f5(n,t){const e=n.toString();return Wy[e]||(Wy[e]=t()),Wy[e]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Dc(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="start",g5="close",p5="pLPCommand",_5="pRTLPCB",R2="id",I2="pw",N2="ser",y5="cb",v5="seg",b5="ts",w5="d",E5="dframe",k2=1870,M2=30,x5=k2-M2,T5=25e3,S5=3e4;class Kl{constructor(t,e,i,s,a,l,u){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ed(t),this.stats_=_b(e),this.urlFn=d=>(this.appCheckToken&&(d[z0]=this.appCheckToken),C2(e,S2,d))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new m5(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(S5)),t5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yb((...a)=>{const[l,u,d,f,p]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===S1)this.id=u,this.password=d;else if(l===g5)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[S1]="t",i[N2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[y5]=this.scriptTagHolder.uniqueCallbackIdentifier),i[_2]=pb,this.transportSessionId&&(i[y2]=this.transportSessionId),this.lastSessionId&&(i[E2]=this.lastSessionId),this.applicationId&&(i[x2]=this.applicationId),this.appCheckToken&&(i[z0]=this.appCheckToken),typeof location<"u"&&location.hostname&&w2.test(location.hostname)&&(i[v2]=b2);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kl.forceAllow_=!0}static forceDisallow(){Kl.forceDisallow_=!0}static isAvailable(){return Kl.forceAllow_?!0:!Kl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!n5()&&!i5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=gn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=zC(e),s=g2(i,x5);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const i={};i[E5]="t",i[R2]=t,i[I2]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=gn(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class yb{constructor(t,e,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=X3(),window[p5+this.uniqueCallbackIdentifier]=t,window[_5+this.uniqueCallbackIdentifier]=e,this.myIFrame=yb.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){Tn("frame writing exception"),u.stack&&Tn(u.stack),Tn(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Tn("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[R2]=this.myID,t[I2]=this.myPW,t[N2]=this.currentSerial;let e=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+M2+i.length<=k2;){const l=this.pendingSegs.shift();i=i+"&"+v5+s+"="+l.seg+"&"+b5+s+"="+l.ts+"&"+w5+s+"="+l.d,s++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(i,Math.floor(T5)),a=()=>{clearTimeout(s),i()};this.addTag(t,a)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Tn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=16384,C5=45e3;let rg=null;typeof MozWebSocket<"u"?rg=MozWebSocket:typeof WebSocket<"u"&&(rg=WebSocket);class zi{constructor(t,e,i,s,a,l,u){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ed(this.connId),this.stats_=_b(e),this.connURL=zi.connectionURL_(e,l,u,s,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,i,s,a){const l={};return l[_2]=pb,typeof location<"u"&&location.hostname&&w2.test(location.hostname)&&(l[v2]=b2),e&&(l[y2]=e),i&&(l[E2]=i),s&&(l[z0]=s),a&&(l[x2]=a),C2(t,T2,l)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Co.set("previous_websocket_failure",!0);try{let i;LO(),this.mySock=new rg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){zi.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(e);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&rg!==null&&!zi.forceDisallow_}static previouslyFailed(){return Co.isInMemoryStorage||Co.get("previous_websocket_failure")===!0}markConnectionHealthy(){Co.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const i=Mh(e);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(dt(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const i=this.extractFrameCount_(e);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const e=gn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=g2(e,A5);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(C5))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}zi.responsesRequiredToBeHealthy=2;zi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{static get ALL_TRANSPORTS(){return[Kl,zi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=zi&&zi.isAvailable();let i=e&&!zi.previouslyFailed();if(t.webSocketOnly&&(e||Jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zi];else{const s=this.transports_=[];for(const a of Gh.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);Gh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Gh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=6e4,I5=5e3,N5=10*1024,k5=100*1024,Gy="t",A1="d",M5="s",C1="r",D5="e",R1="o",I1="a",N1="n",k1="p",O5="h";class P5{constructor(t,e,i,s,a,l,u,d,f,p){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=d,this.onKill_=f,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ed("c:"+this.id+":"),this.transportManager_=new Gh(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=xh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>N5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Gy in t){const e=t[Gy];e===I1?this.upgradeIfSecondaryHealthy_():e===C1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===R1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=$u("t",t),i=$u("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:k1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:I1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:N1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=$u("t",t),i=$u("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=$u(Gy,t);if(A1 in t){const i=t[A1];if(e===O5){const s={...i};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(e===N1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===M5?this.onConnectionShutdown_(i):e===C1?this.onReset_(i):e===D5?F0("Server Error: "+i):e===R1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):F0("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),pb!==i&&Jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),xh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(R5))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(I5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:k1,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Co.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{put(t,e,i,s){}merge(t,e,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(t){this.allowedEvents_=t,this.listeners_={},dt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const s=this.getInitialEvent(t);s&&e.apply(i,s)}off(t,e,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let a=0;a<s.length;a++)if(s[a].callback===e&&(!i||i===s[a].context)){s.splice(a,1);return}}validateEventType_(t){dt(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends O2{static getInstance(){return new ag}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!gv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return dt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=32,D1=768;class me{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}}function te(){return new me("")}function Ft(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function xa(n){return n.pieces_.length-n.pieceNum_}function be(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new me(n.pieces_,t)}function vb(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function L5(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function Yh(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function P2(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new me(t,0)}function Le(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof me)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&e.push(i[s])}return new me(e,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function Kn(n,t){const e=Ft(n),i=Ft(t);if(e===null)return t;if(e===i)return Kn(be(n),be(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function V5(n,t){const e=Yh(n,0),i=Yh(t,0);for(let s=0;s<e.length&&s<i.length;s++){const a=$o(e[s],i[s]);if(a!==0)return a}return e.length===i.length?0:e.length<i.length?-1:1}function bb(n,t){if(xa(n)!==xa(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ri(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(xa(n)>xa(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class j5{constructor(t,e){this.errorPrefix_=e,this.parts_=Yh(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Fg(this.parts_[i]);L2(this)}}function U5(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=Fg(t),L2(n)}function F5(n){const t=n.parts_.pop();n.byteLength_-=Fg(t),n.parts_.length>0&&(n.byteLength_-=1)}function L2(n){if(n.byteLength_>D1)throw new Error(n.errorPrefix_+"has a key path longer than "+D1+" bytes ("+n.byteLength_+").");if(n.parts_.length>M1)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+M1+") or object contains a cycle "+yo(n))}function yo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb extends O2{static getInstance(){return new wb}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return dt(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=1e3,z5=300*1e3,O1=30*1e3,B5=1.3,H5=3e4,q5="server_kill",P1=3;class dr extends D2{constructor(t,e,i,s,a,l,u,d){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=d,this.id=dr.nextPersistentConnectionId_++,this.log_=Ed("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qu,this.maxReconnectDelay_=z5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wb.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ag.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,i){const s=++this.requestNumber_,a={r:s,a:t,b:e};this.log_(gn(a)),dt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const e=new Ug,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?e.resolve(u):e.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),e.promise}listen(t,e,i,s){this.initConnection_();const a=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),dt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),dt(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:e,query:t,tag:i};this.listens.get(l).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(i)})}sendListen_(t){const e=t.query,i=e._path.toString(),s=e._queryIdentifier;this.log_("Listen on "+i+" for "+s);const a={p:i},l="q";t.tag&&(a.q=e._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(l,a,u=>{const d=u.d,f=u.s;dr.warnOnListenWarnings_(d,e),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(f,d))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&As(t,"w")){const i=lc(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+e._queryParams.getIndex().toString()+'"',a=e._path.toString();Jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||qO(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=O1)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=HO(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(e,i,s=>{const a=s.s,l=s.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,i=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,i)})}unlisten(t,e){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),dt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,e)}sendUnlisten_(t,e,i,s){this.log_("Unlisten on "+t+" for "+e);const a={p:t},l="n";s&&(a.q=i,a.t=s),this.sendRequest(l,a)}onDisconnectPut(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:i})}onDisconnectMerge(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:i})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,i,s){const a={p:e,d:i};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(t,e,i,s){this.putInternal("p",t,e,i,s)}merge(t,e,i,s){this.putInternal("m",t,e,i,s)}putInternal(t,e,i,s,a){this.initConnection_();const l={p:e,d:i};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:t,request:l,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,i,a=>{this.log_(e+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+gn(t));const e=t.r,i=this.requestCBHash_[e];i&&(delete this.requestCBHash_[e],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):F0("Unrecognized action received from server: "+gn(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){dt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>H5&&(this.reconnectDelay_=Qu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*B5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+dr.nextConnectionId_++,a=this.lastSessionId;let l=!1,u=null;const d=function(){u?u.close():(l=!0,i())},f=function(y){dt(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)};this.realtime_={close:d,sendRequest:f};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?Tn("getToken() completed but was canceled"):(Tn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,u=new P5(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,i,T=>{Jn(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(q5)},a))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&Jn(y),d())}}}interrupt(t){Tn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Tn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],h0(this.interruptReasons_)&&(this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let i;e?i=e.map(a=>gb(a)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,e){const i=new me(t).toString();let s;if(this.listens.has(i)){const a=this.listens.get(i);s=a.get(e),a.delete(e),a.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,e){Tn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=P1&&(this.reconnectDelay_=O1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){Tn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=P1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+d2.replace(/\./g,"-")]=1,gv()?t["framework.cordova"]=1:$C()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ag.getInstance().currentlyOnline();return h0(this.interruptReasons_)&&t}}dr.nextPersistentConnectionId_=0;dr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Lt(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Lt(_c,t),s=new Lt(_c,e);return this.compare(i,s)!==0}minPost(){return Lt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sm;class V2 extends cp{static get __EMPTY_NODE(){return sm}static set __EMPTY_NODE(t){sm=t}compare(t,e){return $o(t.name,e.name)}isDefinedOn(t){throw Sc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Lt.MIN}maxPost(){return new Lt(jo,sm)}makePost(t,e){return dt(typeof t=="string","KeyIndex indexValue must always be a string."),new Lt(t,sm)}toString(){return".key"}}const sc=new V2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(t,e,i,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(t=t,l=e?i(t.key,e):1,s&&(l*=-1),l<0)this.isReverse_?t=t.left:t=t.right;else if(l===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class mn{constructor(t,e,i,s,a){this.key=t,this.value=e,this.color=i??mn.RED,this.left=s??Xn.EMPTY_NODE,this.right=a??Xn.EMPTY_NODE}copy(t,e,i,s,a){return new mn(t??this.key,e??this.value,i??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const a=i(t,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(t,e,i),null):a===0?s=s.copy(null,e,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let i,s;if(i=this,e(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),e(t,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}mn.RED=!0;mn.BLACK=!1;class W5{copy(t,e,i,s,a){return this}insert(t,e,i){return new mn(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xn{constructor(t,e=Xn.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Xn(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,mn.BLACK,null,null))}remove(t){return new Xn(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,mn.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,s=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new rm(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new rm(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new rm(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new rm(this.root_,null,this.comparator_,!0,t)}}Xn.EMPTY_NODE=new W5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(n,t){return $o(n.name,t.name)}function Eb(n,t){return $o(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B0;function Y5(n){B0=n}const j2=function(n){return typeof n=="number"?"number:"+p2(n):"string:"+n},U2=function(n){if(n.isLeafNode()){const t=n.val();dt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&As(t,".sv"),"Priority must be a string or number.")}else dt(n===B0||n.isEmpty(),"priority of unexpected type.");dt(n===B0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L1;class dn{static set __childrenNodeConstructor(t){L1=t}static get __childrenNodeConstructor(){return L1}constructor(t,e=dn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,dt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),U2(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new dn(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zt(t)?this:Ft(t)===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:dn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const i=Ft(t);return i===null?e:e.isEmpty()&&i!==".priority"?this:(dt(i!==".priority"||xa(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,dn.__childrenNodeConstructor.EMPTY_NODE.updateChild(be(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+j2(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=p2(this.value_):t+=this.value_,this.lazyHash_=m2(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===dn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof dn.__childrenNodeConstructor?-1:(dt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,i=typeof this.value_,s=dn.VALUE_TYPE_ORDER.indexOf(e),a=dn.VALUE_TYPE_ORDER.indexOf(i);return dt(s>=0,"Unknown leaf type: "+e),dt(a>=0,"Unknown leaf type: "+i),s===a?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}dn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F2,z2;function $5(n){F2=n}function Q5(n){z2=n}class K5 extends cp{compare(t,e){const i=t.node.getPriority(),s=e.node.getPriority(),a=i.compareTo(s);return a===0?$o(t.name,e.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Lt.MIN}maxPost(){return new Lt(jo,new dn("[PRIORITY-POST]",z2))}makePost(t,e){const i=F2(t);return new Lt(e,new dn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ve=new K5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=Math.log(2);class Z5{constructor(t){const e=a=>parseInt(Math.log(a)/X5,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const og=function(n,t,e,i){n.sort(t);const s=function(d,f){const p=f-d;let y,v;if(p===0)return null;if(p===1)return y=n[d],v=e?e(y):y,new mn(v,y.node,mn.BLACK,null,null);{const T=parseInt(p/2,10)+d,S=s(d,T),N=s(T+1,f);return y=n[T],v=e?e(y):y,new mn(v,y.node,mn.BLACK,S,N)}},a=function(d){let f=null,p=null,y=n.length;const v=function(S,N){const C=y-S,L=y;y-=S;const q=s(C+1,L),G=n[C],J=e?e(G):G;T(new mn(J,G.node,N,null,q))},T=function(S){f?(f.left=S,f=S):(p=S,f=S)};for(let S=0;S<d.count;++S){const N=d.nextBitIsOne(),C=Math.pow(2,d.count-(S+1));N?v(C,mn.BLACK):(v(C,mn.BLACK),v(C,mn.RED))}return p},l=new Z5(n.length),u=a(l);return new Xn(i||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yy;const Hl={};class or{static get Default(){return dt(Hl&&Ve,"ChildrenNode.ts has not been loaded"),Yy=Yy||new or({".priority":Hl},{".priority":Ve}),Yy}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=lc(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Xn?e:null}hasIndex(t){return As(this.indexSet_,t.toString())}addIndex(t,e){dt(t!==sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const a=e.getIterator(Lt.Wrap);let l=a.getNext();for(;l;)s=s||t.isDefinedOn(l.node),i.push(l),l=a.getNext();let u;s?u=og(i,t.getCompare()):u=Hl;const d=t.toString(),f={...this.indexSet_};f[d]=t;const p={...this.indexes_};return p[d]=u,new or(p,f)}addToIndexes(t,e){const i=Fm(this.indexes_,(s,a)=>{const l=lc(this.indexSet_,a);if(dt(l,"Missing index implementation for "+a),s===Hl)if(l.isDefinedOn(t.node)){const u=[],d=e.getIterator(Lt.Wrap);let f=d.getNext();for(;f;)f.name!==t.name&&u.push(f),f=d.getNext();return u.push(t),og(u,l.getCompare())}else return Hl;else{const u=e.get(t.name);let d=s;return u&&(d=d.remove(new Lt(t.name,u))),d.insert(t,t.node)}});return new or(i,this.indexSet_)}removeFromIndexes(t,e){const i=Fm(this.indexes_,s=>{if(s===Hl)return s;{const a=e.get(t.name);return a?s.remove(new Lt(t.name,a)):s}});return new or(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku;class Rt{static get EMPTY_NODE(){return Ku||(Ku=new Rt(new Xn(Eb),null,or.Default))}constructor(t,e,i){this.children_=t,this.priorityNode_=e,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&U2(this.priorityNode_),this.children_.isEmpty()&&dt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ku}updatePriority(t){return this.children_.isEmpty()?this:new Rt(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?Ku:e}}getChild(t){const e=Ft(t);return e===null?this:this.getImmediateChild(e).getChild(be(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(dt(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const i=new Lt(t,e);let s,a;e.isEmpty()?(s=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,e),a=this.indexMap_.addToIndexes(i,this.children_));const l=s.isEmpty()?Ku:this.priorityNode_;return new Rt(s,l,a)}}updateChild(t,e){const i=Ft(t);if(i===null)return e;{dt(Ft(t)!==".priority"||xa(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(be(t),e);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let i=0,s=0,a=!0;if(this.forEachChild(Ve,(l,u)=>{e[l]=u.val(t),i++,a&&Rt.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):a=!1}),!t&&a&&s<2*i){const l=[];for(const u in e)l[u]=e[u];return l}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+j2(this.getPriority().val())+":"),this.forEachChild(Ve,(e,i)=>{const s=i.hash();s!==""&&(t+=":"+e+":"+s)}),this.lazyHash_=t===""?"":m2(t)}return this.lazyHash_}getPredecessorChildName(t,e,i){const s=this.resolveIndex_(i);if(s){const a=s.getPredecessorKey(new Lt(t,e));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Lt(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Lt(e,this.children_.get(e)):null}forEachChild(t,e){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>e(s.name,s.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Lt.Wrap);let a=s.peek();for(;a!=null&&e.compare(a,t)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Lt.Wrap);let a=s.peek();for(;a!=null&&e.compare(a,t)>0;)s.getNext(),a=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===xd?-1:0}withIndex(t){if(t===sc||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new Rt(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===sc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const i=this.getIterator(Ve),s=e.getIterator(Ve);let a=i.getNext(),l=s.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=i.getNext(),l=s.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(t){return t===sc?null:this.indexMap_.get(t.toString())}}Rt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class J5 extends Rt{constructor(){super(new Xn(Eb),Rt.EMPTY_NODE,or.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Rt.EMPTY_NODE}isEmpty(){return!1}}const xd=new J5;Object.defineProperties(Lt,{MIN:{value:new Lt(_c,Rt.EMPTY_NODE)},MAX:{value:new Lt(jo,xd)}});V2.__EMPTY_NODE=Rt.EMPTY_NODE;dn.__childrenNodeConstructor=Rt;Y5(xd);Q5(xd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=!0;function Sn(n,t=null){if(n===null)return Rt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),dt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const e=n;return new dn(e,Sn(t))}if(!(n instanceof Array)&&tU){const e=[];let i=!1;if(Rn(n,(l,u)=>{if(l.substring(0,1)!=="."){const d=Sn(u);d.isEmpty()||(i=i||!d.getPriority().isEmpty(),e.push(new Lt(l,d)))}}),e.length===0)return Rt.EMPTY_NODE;const a=og(e,G5,l=>l.name,Eb);if(i){const l=og(e,Ve.getCompare());return new Rt(a,Sn(t),new or({".priority":l},{".priority":Ve}))}else return new Rt(a,Sn(t),or.Default)}else{let e=Rt.EMPTY_NODE;return Rn(n,(i,s)=>{if(As(n,i)&&i.substring(0,1)!=="."){const a=Sn(s);(a.isLeafNode()||!a.isEmpty())&&(e=e.updateImmediateChild(i,a))}}),e.updatePriority(Sn(t))}}$5(Sn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU extends cp{constructor(t){super(),this.indexPath_=t,dt(!zt(t)&&Ft(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),s=this.extractChild(e.node),a=i.compareTo(s);return a===0?$o(t.name,e.name):a}makePost(t,e){const i=Sn(t),s=Rt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Lt(e,s)}maxPost(){const t=Rt.EMPTY_NODE.updateChild(this.indexPath_,xd);return new Lt(jo,t)}toString(){return Yh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU extends cp{compare(t,e){const i=t.node.compareTo(e.node);return i===0?$o(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Lt.MIN}maxPost(){return Lt.MAX}makePost(t,e){const i=Sn(t);return new Lt(e,i)}toString(){return".value"}}const iU=new nU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){return{type:"value",snapshotNode:n}}function yc(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function $h(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Qh(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function sU(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t){this.index_=t}updateChild(t,e,i,s,a,l){dt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(e);return u.getChild(s).equals(i.getChild(s))&&u.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange($h(e,u)):dt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?l.trackChildChange(yc(e,i)):l.trackChildChange(Qh(e,i,u))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(Ve,(s,a)=>{e.hasChild(s)||i.trackChildChange($h(s,a))}),e.isLeafNode()||e.forEachChild(Ve,(s,a)=>{if(t.hasChild(s)){const l=t.getImmediateChild(s);l.equals(a)||i.trackChildChange(Qh(s,a,l))}else i.trackChildChange(yc(s,a))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Rt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(t){this.indexedFilter_=new xb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Kh.getStartPost_(t),this.endPost_=Kh.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,s,a,l){return this.matches(new Lt(e,i))||(i=Rt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,s,a,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Rt.EMPTY_NODE);let s=e.withIndex(this.index_);s=s.updatePriority(Rt.EMPTY_NODE);const a=this;return e.forEachChild(Ve,(l,u)=>{a.matches(new Lt(l,u))||(s=s.updateImmediateChild(l,Rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Kh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,s,a,l){return this.rangedFilter_.matches(new Lt(e,i))||(i=Rt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,s,a,l):this.fullLimitUpdateChild_(t,e,i,a,l)}updateFullNode(t,e,i){let s;if(e.isLeafNode()||e.isEmpty())s=Rt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){s=Rt.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const u=a.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))s=s.updateImmediateChild(u.name,u.node),l++;else break;else continue}}else{s=e.withIndex(this.index_),s=s.updatePriority(Rt.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let l=0;for(;a.hasNext();){const u=a.getNext();l<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?l++:s=s.updateImmediateChild(u.name,Rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,s,a){let l;if(this.reverse_){const y=this.index_.getCompare();l=(v,T)=>y(T,v)}else l=this.index_.getCompare();const u=t;dt(u.numChildren()===this.limit_,"");const d=new Lt(e,i),f=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(d);if(u.hasChild(e)){const y=u.getImmediateChild(e);let v=s.getChildAfterChild(this.index_,f,this.reverse_);for(;v!=null&&(v.name===e||u.hasChild(v.name));)v=s.getChildAfterChild(this.index_,v,this.reverse_);const T=v==null?1:l(v,d);if(p&&!i.isEmpty()&&T>=0)return a?.trackChildChange(Qh(e,i,y)),u.updateImmediateChild(e,i);{a?.trackChildChange($h(e,y));const N=u.updateImmediateChild(e,Rt.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a?.trackChildChange(yc(v.name,v.node)),N.updateImmediateChild(v.name,v.node)):N}}else return i.isEmpty()?t:p&&l(f,d)>=0?(a!=null&&(a.trackChildChange($h(f.name,f.node)),a.trackChildChange(yc(e,i))),u.updateImmediateChild(e,i).updateImmediateChild(f.name,Rt.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ve}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return dt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return dt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_c}hasEnd(){return this.endSet_}getIndexEndValue(){return dt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return dt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return dt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ve}copy(){const t=new Tb;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function aU(n){return n.loadsAllData()?new xb(n.getIndex()):n.hasLimit()?new rU(n):new Kh(n)}function V1(n){const t={};if(n.isDefault())return t;let e;if(n.index_===Ve?e="$priority":n.index_===iU?e="$value":n.index_===sc?e="$key":(dt(n.index_ instanceof eU,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=gn(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=gn(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+gn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=gn(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+gn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function j1(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==Ve&&(t.i=n.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends D2{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(dt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Ed("p:rest:"),this.listens_={}}listen(t,e,i,s){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const l=lg.getListenId_(t,i),u={};this.listens_[l]=u;const d=V1(t._queryParams);this.restRequest_(a+".json",d,(f,p)=>{let y=p;if(f===404&&(y=null,f=null),f===null&&this.onDataUpdate_(a,y,!1,i),lc(this.listens_,l)===u){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",s(v,null)}})}unlisten(t,e){const i=lg.getListenId_(t,e);delete this.listens_[i]}get(t){const e=V1(t._queryParams),i=t._path.toString(),s=new Ug;return this.restRequest_(i+".json",e,(a,l)=>{let u=l;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(i,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(e.auth=s.accessToken),a&&a.token&&(e.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ac(e);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=Mh(u.responseText)}catch{Jn("Failed to parse JSON response for "+l+": "+u.responseText)}i(null,d)}else u.status!==401&&u.status!==404&&Jn("Got unsuccessful REST response for "+l+" Status: "+u.status),i(u.status);i=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.rootNode_=Rt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){return{value:null,children:new Map}}function H2(n,t,e){if(zt(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{const i=Ft(t);n.children.has(i)||n.children.set(i,cg());const s=n.children.get(i);t=be(t),H2(s,t,e)}}function H0(n,t,e){n.value!==null?e(t,n.value):lU(n,(i,s)=>{const a=new me(t.toString()+"/"+i);H0(s,a,e)})}function lU(n,t){n.children.forEach((e,i)=>{t(i,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e={...t};return this.last_&&Rn(this.last_,(i,s)=>{e[i]=e[i]-s}),this.last_=t,e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=10*1e3,uU=30*1e3,hU=300*1e3;class dU{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new cU(t);const i=U1+(uU-U1)*Math.random();xh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Rn(t,(s,a)=>{a>0&&As(this.statsToReport_,s)&&(e[s]=a,i=!0)}),i&&this.server_.reportStats(e),xh(this.reportStats_.bind(this),Math.floor(Math.random()*2*hU))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Hi||(Hi={}));function Sb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ab(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Cb(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Hi.ACK_USER_WRITE,this.source=Sb()}operationForChild(t){if(zt(this.path)){if(this.affectedTree.value!=null)return dt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new me(t));return new ug(te(),e,this.revert)}}else return dt(Ft(this.path)===t,"operationForChild called for unrelated child."),new ug(be(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,e){this.source=t,this.path=e,this.type=Hi.LISTEN_COMPLETE}operationForChild(t){return zt(this.path)?new Xh(this.source,te()):new Xh(this.source,be(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Hi.OVERWRITE}operationForChild(t){return zt(this.path)?new Uo(this.source,te(),this.snap.getImmediateChild(t)):new Uo(this.source,be(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Hi.MERGE}operationForChild(t){if(zt(this.path)){const e=this.children.subtree(new me(t));return e.isEmpty()?null:e.value?new Uo(this.source,te(),e.value):new vc(this.source,te(),e)}else return dt(Ft(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new vc(this.source,be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(zt(t))return this.isFullyInitialized()&&!this.filtered_;const e=Ft(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function mU(n,t,e,i){const s=[],a=[];return t.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(sU(l.childName,l.snapshotNode))}),Xu(n,s,"child_removed",t,i,e),Xu(n,s,"child_added",t,i,e),Xu(n,s,"child_moved",a,i,e),Xu(n,s,"child_changed",t,i,e),Xu(n,s,"value",t,i,e),s}function Xu(n,t,e,i,s,a){const l=i.filter(u=>u.type===e);l.sort((u,d)=>pU(n,u,d)),l.forEach(u=>{const d=gU(n,u,a);s.forEach(f=>{f.respondsTo(u.type)&&t.push(f.createEvent(d,n.query_))})})}function gU(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function pU(n,t,e){if(t.childName==null||e.childName==null)throw Sc("Should only compare child_ events.");const i=new Lt(t.childName,t.snapshotNode),s=new Lt(e.childName,e.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,t){return{eventCache:n,serverCache:t}}function Th(n,t,e,i){return up(new Fo(t,e,i),n.serverCache)}function q2(n,t,e,i){return up(n.eventCache,new Fo(t,e,i))}function q0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $y;const _U=()=>($y||($y=new Xn(e5)),$y);class ve{static fromObject(t){let e=new ve(null);return Rn(t,(i,s)=>{e=e.set(new me(i),s)}),e}constructor(t,e=_U()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:te(),value:this.value};if(zt(t))return null;{const i=Ft(t),s=this.children.get(i);if(s!==null){const a=s.findRootMostMatchingPathAndValue(be(t),e);return a!=null?{path:Le(new me(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(zt(t))return this;{const e=Ft(t),i=this.children.get(e);return i!==null?i.subtree(be(t)):new ve(null)}}set(t,e){if(zt(t))return new ve(e,this.children);{const i=Ft(t),a=(this.children.get(i)||new ve(null)).set(be(t),e),l=this.children.insert(i,a);return new ve(this.value,l)}}remove(t){if(zt(t))return this.children.isEmpty()?new ve(null):new ve(null,this.children);{const e=Ft(t),i=this.children.get(e);if(i){const s=i.remove(be(t));let a;return s.isEmpty()?a=this.children.remove(e):a=this.children.insert(e,s),this.value===null&&a.isEmpty()?new ve(null):new ve(this.value,a)}else return this}}get(t){if(zt(t))return this.value;{const e=Ft(t),i=this.children.get(e);return i?i.get(be(t)):null}}setTree(t,e){if(zt(t))return e;{const i=Ft(t),a=(this.children.get(i)||new ve(null)).setTree(be(t),e);let l;return a.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,a),new ve(this.value,l)}}fold(t){return this.fold_(te(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((s,a)=>{i[s]=a.fold_(Le(t,s),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,te(),e)}findOnPath_(t,e,i){const s=this.value?i(e,this.value):!1;if(s)return s;if(zt(t))return null;{const a=Ft(t),l=this.children.get(a);return l?l.findOnPath_(be(t),Le(e,a),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,te(),e)}foreachOnPath_(t,e,i){if(zt(t))return this;{this.value&&i(e,this.value);const s=Ft(t),a=this.children.get(s);return a?a.foreachOnPath_(be(t),Le(e,s),i):new ve(null)}}foreach(t){this.foreach_(te(),t)}foreach_(t,e){this.children.inorderTraversal((i,s)=>{s.foreach_(Le(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t){this.writeTree_=t}static empty(){return new Wi(new ve(null))}}function Sh(n,t,e){if(zt(t))return new Wi(new ve(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let a=i.value;const l=Kn(s,t);return a=a.updateChild(l,e),new Wi(n.writeTree_.set(s,a))}else{const s=new ve(e),a=n.writeTree_.setTree(t,s);return new Wi(a)}}}function W0(n,t,e){let i=n;return Rn(e,(s,a)=>{i=Sh(i,Le(t,s),a)}),i}function F1(n,t){if(zt(t))return Wi.empty();{const e=n.writeTree_.setTree(t,new ve(null));return new Wi(e)}}function G0(n,t){return Qo(n,t)!=null}function Qo(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(Kn(e.path,t)):null}function z1(n){const t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Ve,(i,s)=>{t.push(new Lt(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new Lt(i,s.value))}),t}function fa(n,t){if(zt(t))return n;{const e=Qo(n,t);return e!=null?new Wi(new ve(e)):new Wi(n.writeTree_.subtree(t))}}function Y0(n){return n.writeTree_.isEmpty()}function bc(n,t){return W2(te(),n.writeTree_,t)}function W2(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((s,a)=>{s===".priority"?(dt(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):e=W2(Le(n,s),a,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(Le(n,".priority"),i)),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(n,t){return Q2(t,n)}function yU(n,t,e,i,s){dt(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:s}),s&&(n.visibleWrites=Sh(n.visibleWrites,t,e)),n.lastWriteId=i}function vU(n,t,e,i){dt(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=W0(n.visibleWrites,t,e),n.lastWriteId=i}function bU(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}function wU(n,t){const e=n.allWrites.findIndex(u=>u.writeId===t);dt(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let s=i.visible,a=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=e&&EU(u,i.path)?s=!1:Ri(i.path,u.path)&&(a=!0)),l--}if(s){if(a)return xU(n),!0;if(i.snap)n.visibleWrites=F1(n.visibleWrites,i.path);else{const u=i.children;Rn(u,d=>{n.visibleWrites=F1(n.visibleWrites,Le(i.path,d))})}return!0}else return!1}function EU(n,t){if(n.snap)return Ri(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ri(Le(n.path,e),t))return!0;return!1}function xU(n){n.visibleWrites=G2(n.allWrites,TU,te()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function TU(n){return n.visible}function G2(n,t,e){let i=Wi.empty();for(let s=0;s<n.length;++s){const a=n[s];if(t(a)){const l=a.path;let u;if(a.snap)Ri(e,l)?(u=Kn(e,l),i=Sh(i,u,a.snap)):Ri(l,e)&&(u=Kn(l,e),i=Sh(i,te(),a.snap.getChild(u)));else if(a.children){if(Ri(e,l))u=Kn(e,l),i=W0(i,u,a.children);else if(Ri(l,e))if(u=Kn(l,e),zt(u))i=W0(i,te(),a.children);else{const d=lc(a.children,Ft(u));if(d){const f=d.getChild(be(u));i=Sh(i,te(),f)}}}else throw Sc("WriteRecord should have .snap or .children")}}return i}function Y2(n,t,e,i,s){if(!i&&!s){const a=Qo(n.visibleWrites,t);if(a!=null)return a;{const l=fa(n.visibleWrites,t);if(Y0(l))return e;if(e==null&&!G0(l,te()))return null;{const u=e||Rt.EMPTY_NODE;return bc(l,u)}}}else{const a=fa(n.visibleWrites,t);if(!s&&Y0(a))return e;if(!s&&e==null&&!G0(a,te()))return null;{const l=function(f){return(f.visible||s)&&(!i||!~i.indexOf(f.writeId))&&(Ri(f.path,t)||Ri(t,f.path))},u=G2(n.allWrites,l,t),d=e||Rt.EMPTY_NODE;return bc(u,d)}}}function SU(n,t,e){let i=Rt.EMPTY_NODE;const s=Qo(n.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Ve,(a,l)=>{i=i.updateImmediateChild(a,l)}),i;if(e){const a=fa(n.visibleWrites,t);return e.forEachChild(Ve,(l,u)=>{const d=bc(fa(a,new me(l)),u);i=i.updateImmediateChild(l,d)}),z1(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const a=fa(n.visibleWrites,t);return z1(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function AU(n,t,e,i,s){dt(i||s,"Either existingEventSnap or existingServerSnap must exist");const a=Le(t,e);if(G0(n.visibleWrites,a))return null;{const l=fa(n.visibleWrites,a);return Y0(l)?s.getChild(e):bc(l,s.getChild(e))}}function CU(n,t,e,i){const s=Le(t,e),a=Qo(n.visibleWrites,s);if(a!=null)return a;if(i.isCompleteForChild(e)){const l=fa(n.visibleWrites,s);return bc(l,i.getNode().getImmediateChild(e))}else return null}function RU(n,t){return Qo(n.visibleWrites,t)}function IU(n,t,e,i,s,a,l){let u;const d=fa(n.visibleWrites,t),f=Qo(d,te());if(f!=null)u=f;else if(e!=null)u=bc(d,e);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const p=[],y=l.getCompare(),v=a?u.getReverseIteratorFrom(i,l):u.getIteratorFrom(i,l);let T=v.getNext();for(;T&&p.length<s;)y(T,i)!==0&&p.push(T),T=v.getNext();return p}else return[]}function NU(){return{visibleWrites:Wi.empty(),allWrites:[],lastWriteId:-1}}function hg(n,t,e,i){return Y2(n.writeTree,n.treePath,t,e,i)}function Ib(n,t){return SU(n.writeTree,n.treePath,t)}function B1(n,t,e,i){return AU(n.writeTree,n.treePath,t,e,i)}function dg(n,t){return RU(n.writeTree,Le(n.treePath,t))}function kU(n,t,e,i,s,a){return IU(n.writeTree,n.treePath,t,e,i,s,a)}function Nb(n,t,e){return CU(n.writeTree,n.treePath,t,e)}function $2(n,t){return Q2(Le(n.treePath,t),n.writeTree)}function Q2(n,t){return{treePath:n,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;dt(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),dt(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const a=s.type;if(e==="child_added"&&a==="child_removed")this.changeMap.set(i,Qh(i,t.snapshotNode,s.snapshotNode));else if(e==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&a==="child_changed")this.changeMap.set(i,$h(i,s.oldSnap));else if(e==="child_changed"&&a==="child_added")this.changeMap.set(i,yc(i,t.snapshotNode));else if(e==="child_changed"&&a==="child_changed")this.changeMap.set(i,Qh(i,t.snapshotNode,s.oldSnap));else throw Sc("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}}const K2=new DU;class kb{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new Fo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nb(this.writes_,t,i)}}getChildAfterChild(t,e,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zo(this.viewCache_),a=kU(this.writes_,s,e,1,i,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(n){return{filter:n}}function PU(n,t){dt(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),dt(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function LU(n,t,e,i,s){const a=new MU;let l,u;if(e.type===Hi.OVERWRITE){const f=e;f.source.fromUser?l=$0(n,t,f.path,f.snap,i,s,a):(dt(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered()&&!zt(f.path),l=fg(n,t,f.path,f.snap,i,s,u,a))}else if(e.type===Hi.MERGE){const f=e;f.source.fromUser?l=jU(n,t,f.path,f.children,i,s,a):(dt(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered(),l=Q0(n,t,f.path,f.children,i,s,u,a))}else if(e.type===Hi.ACK_USER_WRITE){const f=e;f.revert?l=zU(n,t,f.path,i,s,a):l=UU(n,t,f.path,f.affectedTree,i,s,a)}else if(e.type===Hi.LISTEN_COMPLETE)l=FU(n,t,e.path,i,a);else throw Sc("Unknown operation type: "+e.type);const d=a.getChanges();return VU(t,l,d),{viewCache:l,changes:d}}function VU(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=q0(n);(e.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&e.push(B2(q0(t)))}}function X2(n,t,e,i,s,a){const l=t.eventCache;if(dg(i,e)!=null)return t;{let u,d;if(zt(e))if(dt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const f=zo(t),p=f instanceof Rt?f:Rt.EMPTY_NODE,y=Ib(i,p);u=n.filter.updateFullNode(t.eventCache.getNode(),y,a)}else{const f=hg(i,zo(t));u=n.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{const f=Ft(e);if(f===".priority"){dt(xa(e)===1,"Can't have a priority with additional path components");const p=l.getNode();d=t.serverCache.getNode();const y=B1(i,e,p,d);y!=null?u=n.filter.updatePriority(p,y):u=l.getNode()}else{const p=be(e);let y;if(l.isCompleteForChild(f)){d=t.serverCache.getNode();const v=B1(i,e,l.getNode(),d);v!=null?y=l.getNode().getImmediateChild(f).updateChild(p,v):y=l.getNode().getImmediateChild(f)}else y=Nb(i,f,t.serverCache);y!=null?u=n.filter.updateChild(l.getNode(),f,y,p,s,a):u=l.getNode()}}return Th(t,u,l.isFullyInitialized()||zt(e),n.filter.filtersNodes())}}function fg(n,t,e,i,s,a,l,u){const d=t.serverCache;let f;const p=l?n.filter:n.filter.getIndexedFilter();if(zt(e))f=p.updateFullNode(d.getNode(),i,null);else if(p.filtersNodes()&&!d.isFiltered()){const T=d.getNode().updateChild(e,i);f=p.updateFullNode(d.getNode(),T,null)}else{const T=Ft(e);if(!d.isCompleteForPath(e)&&xa(e)>1)return t;const S=be(e),C=d.getNode().getImmediateChild(T).updateChild(S,i);T===".priority"?f=p.updatePriority(d.getNode(),C):f=p.updateChild(d.getNode(),T,C,S,K2,null)}const y=q2(t,f,d.isFullyInitialized()||zt(e),p.filtersNodes()),v=new kb(s,y,a);return X2(n,y,e,s,v,u)}function $0(n,t,e,i,s,a,l){const u=t.eventCache;let d,f;const p=new kb(s,t,a);if(zt(e))f=n.filter.updateFullNode(t.eventCache.getNode(),i,l),d=Th(t,f,!0,n.filter.filtersNodes());else{const y=Ft(e);if(y===".priority")f=n.filter.updatePriority(t.eventCache.getNode(),i),d=Th(t,f,u.isFullyInitialized(),u.isFiltered());else{const v=be(e),T=u.getNode().getImmediateChild(y);let S;if(zt(v))S=i;else{const N=p.getCompleteChild(y);N!=null?vb(v)===".priority"&&N.getChild(P2(v)).isEmpty()?S=N:S=N.updateChild(v,i):S=Rt.EMPTY_NODE}if(T.equals(S))d=t;else{const N=n.filter.updateChild(u.getNode(),y,S,v,p,l);d=Th(t,N,u.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function H1(n,t){return n.eventCache.isCompleteForChild(t)}function jU(n,t,e,i,s,a,l){let u=t;return i.foreach((d,f)=>{const p=Le(e,d);H1(t,Ft(p))&&(u=$0(n,u,p,f,s,a,l))}),i.foreach((d,f)=>{const p=Le(e,d);H1(t,Ft(p))||(u=$0(n,u,p,f,s,a,l))}),u}function q1(n,t,e){return e.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function Q0(n,t,e,i,s,a,l,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d=t,f;zt(e)?f=i:f=new ve(null).setTree(e,i);const p=t.serverCache.getNode();return f.children.inorderTraversal((y,v)=>{if(p.hasChild(y)){const T=t.serverCache.getNode().getImmediateChild(y),S=q1(n,T,v);d=fg(n,d,new me(y),S,s,a,l,u)}}),f.children.inorderTraversal((y,v)=>{const T=!t.serverCache.isCompleteForChild(y)&&v.value===null;if(!p.hasChild(y)&&!T){const S=t.serverCache.getNode().getImmediateChild(y),N=q1(n,S,v);d=fg(n,d,new me(y),N,s,a,l,u)}}),d}function UU(n,t,e,i,s,a,l){if(dg(s,e)!=null)return t;const u=t.serverCache.isFiltered(),d=t.serverCache;if(i.value!=null){if(zt(e)&&d.isFullyInitialized()||d.isCompleteForPath(e))return fg(n,t,e,d.getNode().getChild(e),s,a,u,l);if(zt(e)){let f=new ve(null);return d.getNode().forEachChild(sc,(p,y)=>{f=f.set(new me(p),y)}),Q0(n,t,e,f,s,a,u,l)}else return t}else{let f=new ve(null);return i.foreach((p,y)=>{const v=Le(e,p);d.isCompleteForPath(v)&&(f=f.set(p,d.getNode().getChild(v)))}),Q0(n,t,e,f,s,a,u,l)}}function FU(n,t,e,i,s){const a=t.serverCache,l=q2(t,a.getNode(),a.isFullyInitialized()||zt(e),a.isFiltered());return X2(n,l,e,i,K2,s)}function zU(n,t,e,i,s,a){let l;if(dg(i,e)!=null)return t;{const u=new kb(i,t,s),d=t.eventCache.getNode();let f;if(zt(e)||Ft(e)===".priority"){let p;if(t.serverCache.isFullyInitialized())p=hg(i,zo(t));else{const y=t.serverCache.getNode();dt(y instanceof Rt,"serverChildren would be complete if leaf node"),p=Ib(i,y)}p=p,f=n.filter.updateFullNode(d,p,a)}else{const p=Ft(e);let y=Nb(i,p,t.serverCache);y==null&&t.serverCache.isCompleteForChild(p)&&(y=d.getImmediateChild(p)),y!=null?f=n.filter.updateChild(d,p,y,be(e),u,a):t.eventCache.getNode().hasChild(p)?f=n.filter.updateChild(d,p,Rt.EMPTY_NODE,be(e),u,a):f=d,f.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=hg(i,zo(t)),l.isLeafNode()&&(f=n.filter.updateFullNode(f,l,a)))}return l=t.serverCache.isFullyInitialized()||dg(i,te())!=null,Th(t,f,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new xb(i.getIndex()),a=aU(i);this.processor_=OU(a);const l=e.serverCache,u=e.eventCache,d=s.updateFullNode(Rt.EMPTY_NODE,l.getNode(),null),f=a.updateFullNode(Rt.EMPTY_NODE,u.getNode(),null),p=new Fo(d,l.isFullyInitialized(),s.filtersNodes()),y=new Fo(f,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=up(y,p),this.eventGenerator_=new fU(this.query_)}get query(){return this.query_}}function HU(n){return n.viewCache_.serverCache.getNode()}function qU(n,t){const e=zo(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!zt(t)&&!e.getImmediateChild(Ft(t)).isEmpty())?e.getChild(t):null}function W1(n){return n.eventRegistrations_.length===0}function WU(n,t){n.eventRegistrations_.push(t)}function G1(n,t,e){const i=[];if(e){dt(t==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(e,s);l&&i.push(l)})}if(t){let s=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(!l.matches(t))s.push(l);else if(t.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function Y1(n,t,e,i){t.type===Hi.MERGE&&t.source.queryId!==null&&(dt(zo(n.viewCache_),"We should always have a full cache before handling merges"),dt(q0(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,a=LU(n.processor_,s,t,e,i);return PU(n.processor_,a.viewCache),dt(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Z2(n,a.changes,a.viewCache.eventCache.getNode(),null)}function GU(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ve,(a,l)=>{i.push(yc(a,l))}),e.isFullyInitialized()&&i.push(B2(e.getNode())),Z2(n,i,e.getNode(),t)}function Z2(n,t,e,i){const s=i?[i]:n.eventRegistrations_;return mU(n.eventGenerator_,t,e,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mg;class YU{constructor(){this.views=new Map}}function $U(n){dt(!mg,"__referenceConstructor has already been defined"),mg=n}function QU(){return dt(mg,"Reference.ts has not been loaded"),mg}function KU(n){return n.views.size===0}function Mb(n,t,e,i){const s=t.source.queryId;if(s!==null){const a=n.views.get(s);return dt(a!=null,"SyncTree gave us an op for an invalid query."),Y1(a,t,e,i)}else{let a=[];for(const l of n.views.values())a=a.concat(Y1(l,t,e,i));return a}}function XU(n,t,e,i,s){const a=t._queryIdentifier,l=n.views.get(a);if(!l){let u=hg(e,s?i:null),d=!1;u?d=!0:i instanceof Rt?(u=Ib(e,i),d=!1):(u=Rt.EMPTY_NODE,d=!1);const f=up(new Fo(u,d,!1),new Fo(i,s,!1));return new BU(t,f)}return l}function ZU(n,t,e,i,s,a){const l=XU(n,t,i,s,a);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),WU(l,e),GU(l,e)}function JU(n,t,e,i){const s=t._queryIdentifier,a=[];let l=[];const u=Ta(n);if(s==="default")for(const[d,f]of n.views.entries())l=l.concat(G1(f,e,i)),W1(f)&&(n.views.delete(d),f.query._queryParams.loadsAllData()||a.push(f.query));else{const d=n.views.get(s);d&&(l=l.concat(G1(d,e,i)),W1(d)&&(n.views.delete(s),d.query._queryParams.loadsAllData()||a.push(d.query)))}return u&&!Ta(n)&&a.push(new(QU())(t._repo,t._path)),{removed:a,events:l}}function J2(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function rc(n,t){let e=null;for(const i of n.views.values())e=e||qU(i,t);return e}function tN(n,t){if(t._queryParams.loadsAllData())return hp(n);{const i=t._queryIdentifier;return n.views.get(i)}}function eN(n,t){return tN(n,t)!=null}function Ta(n){return hp(n)!=null}function hp(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg;function t9(n){dt(!gg,"__referenceConstructor has already been defined"),gg=n}function e9(){return dt(gg,"Reference.ts has not been loaded"),gg}let n9=1;class $1{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ve(null),this.pendingWriteTree_=NU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function i9(n,t,e,i,s){return yU(n.pendingWriteTree_,t,e,i,s),s?Oc(n,new Uo(Sb(),t,e)):[]}function s9(n,t,e,i){vU(n.pendingWriteTree_,t,e,i);const s=ve.fromObject(e);return Oc(n,new vc(Sb(),t,s))}function Ro(n,t,e=!1){const i=bU(n.pendingWriteTree_,t);if(wU(n.pendingWriteTree_,t)){let a=new ve(null);return i.snap!=null?a=a.set(te(),!0):Rn(i.children,l=>{a=a.set(new me(l),!0)}),Oc(n,new ug(i.path,a,e))}else return[]}function dp(n,t,e){return Oc(n,new Uo(Ab(),t,e))}function r9(n,t,e){const i=ve.fromObject(e);return Oc(n,new vc(Ab(),t,i))}function a9(n,t){return Oc(n,new Xh(Ab(),t))}function o9(n,t,e){const i=Db(n,e);if(i){const s=Ob(i),a=s.path,l=s.queryId,u=Kn(a,t),d=new Xh(Cb(l),u);return Pb(n,a,d)}else return[]}function K0(n,t,e,i,s=!1){const a=t._path,l=n.syncPointTree_.get(a);let u=[];if(l&&(t._queryIdentifier==="default"||eN(l,t))){const d=JU(l,t,e,i);KU(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const f=d.removed;if(u=d.events,!s){const p=f.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=n.syncPointTree_.findOnPath(a,(v,T)=>Ta(T));if(p&&!y){const v=n.syncPointTree_.subtree(a);if(!v.isEmpty()){const T=u9(v);for(let S=0;S<T.length;++S){const N=T[S],C=N.query,L=rN(n,N);n.listenProvider_.startListening(Ah(C),pg(n,C),L.hashFn,L.onComplete)}}}!y&&f.length>0&&!i&&(p?n.listenProvider_.stopListening(Ah(t),null):f.forEach(v=>{const T=n.queryToTagMap.get(fp(v));n.listenProvider_.stopListening(Ah(v),T)}))}h9(n,f)}return u}function l9(n,t,e,i){const s=Db(n,i);if(s!=null){const a=Ob(s),l=a.path,u=a.queryId,d=Kn(l,t),f=new Uo(Cb(u),d,e);return Pb(n,l,f)}else return[]}function c9(n,t,e,i){const s=Db(n,i);if(s){const a=Ob(s),l=a.path,u=a.queryId,d=Kn(l,t),f=ve.fromObject(e),p=new vc(Cb(u),d,f);return Pb(n,l,p)}else return[]}function Q1(n,t,e,i=!1){const s=t._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(s,(v,T)=>{const S=Kn(v,s);a=a||rc(T,S),l=l||Ta(T)});let u=n.syncPointTree_.get(s);u?(l=l||Ta(u),a=a||rc(u,te())):(u=new YU,n.syncPointTree_=n.syncPointTree_.set(s,u));let d;a!=null?d=!0:(d=!1,a=Rt.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((T,S)=>{const N=rc(S,te());N&&(a=a.updateImmediateChild(T,N))}));const f=eN(u,t);if(!f&&!t._queryParams.loadsAllData()){const v=fp(t);dt(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const T=d9();n.queryToTagMap.set(v,T),n.tagToQueryMap.set(T,v)}const p=Rb(n.pendingWriteTree_,s);let y=ZU(u,t,e,p,a,d);if(!f&&!l&&!i){const v=tN(u,t);y=y.concat(f9(n,t,v))}return y}function nN(n,t,e){const s=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(t,(l,u)=>{const d=Kn(l,t),f=rc(u,d);if(f)return f});return Y2(s,t,a,e,!0)}function Oc(n,t){return iN(t,n.syncPointTree_,null,Rb(n.pendingWriteTree_,te()))}function iN(n,t,e,i){if(zt(n.path))return sN(n,t,e,i);{const s=t.get(te());e==null&&s!=null&&(e=rc(s,te()));let a=[];const l=Ft(n.path),u=n.operationForChild(l),d=t.children.get(l);if(d&&u){const f=e?e.getImmediateChild(l):null,p=$2(i,l);a=a.concat(iN(u,d,f,p))}return s&&(a=a.concat(Mb(s,n,i,e))),a}}function sN(n,t,e,i){const s=t.get(te());e==null&&s!=null&&(e=rc(s,te()));let a=[];return t.children.inorderTraversal((l,u)=>{const d=e?e.getImmediateChild(l):null,f=$2(i,l),p=n.operationForChild(l);p&&(a=a.concat(sN(p,u,d,f)))}),s&&(a=a.concat(Mb(s,n,i,e))),a}function rN(n,t){const e=t.query,i=pg(n,e);return{hashFn:()=>(HU(t)||Rt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?o9(n,e._path,i):a9(n,e._path);{const a=s5(s,e);return K0(n,e,null,a)}}}}function pg(n,t){const e=fp(t);return n.queryToTagMap.get(e)}function fp(n){return n._path.toString()+"$"+n._queryIdentifier}function Db(n,t){return n.tagToQueryMap.get(t)}function Ob(n){const t=n.indexOf("$");return dt(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new me(n.substr(0,t))}}function Pb(n,t,e){const i=n.syncPointTree_.get(t);dt(i,"Missing sync point for query tag that we're tracking");const s=Rb(n.pendingWriteTree_,t);return Mb(i,e,s,null)}function u9(n){return n.fold((t,e,i)=>{if(e&&Ta(e))return[hp(e)];{let s=[];return e&&(s=J2(e)),Rn(i,(a,l)=>{s=s.concat(l)}),s}})}function Ah(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(e9())(n._repo,n._path):n}function h9(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const s=fp(i),a=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(a)}}}function d9(){return n9++}function f9(n,t,e){const i=t._path,s=pg(n,t),a=rN(n,e),l=n.listenProvider_.startListening(Ah(t),s,a.hashFn,a.onComplete),u=n.syncPointTree_.subtree(i);if(s)dt(!Ta(u.value),"If we're adding a query, it shouldn't be shadowed");else{const d=u.fold((f,p,y)=>{if(!zt(f)&&p&&Ta(p))return[hp(p).query];{let v=[];return p&&(v=v.concat(J2(p).map(T=>T.query))),Rn(y,(T,S)=>{v=v.concat(S)}),v}});for(let f=0;f<d.length;++f){const p=d[f];n.listenProvider_.stopListening(Ah(p),pg(n,p))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Lb(e)}node(){return this.node_}}class Vb{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Le(this.path_,t);return new Vb(this.syncTree_,e)}node(){return nN(this.syncTree_,this.path_)}}const m9=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},K1=function(n,t,e){if(!n||typeof n!="object")return n;if(dt(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return g9(n[".sv"],t,e);if(typeof n[".sv"]=="object")return p9(n[".sv"],t);dt(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},g9=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:dt(!1,"Unexpected server value: "+n)}},p9=function(n,t,e){n.hasOwnProperty("increment")||dt(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&dt(!1,"Unexpected increment value: "+i);const s=t.node();if(dt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const l=s.getValue();return typeof l!="number"?i:l+i},aN=function(n,t,e,i){return jb(t,new Vb(e,n),i)},_9=function(n,t,e){return jb(n,new Lb(t),e)};function jb(n,t,e){const i=n.getPriority().val(),s=K1(i,t.getImmediateChild(".priority"),e);let a;if(n.isLeafNode()){const l=n,u=K1(l.getValue(),t,e);return u!==l.getValue()||s!==l.getPriority().val()?new dn(u,Sn(s)):n}else{const l=n;return a=l,s!==l.getPriority().val()&&(a=a.updatePriority(new dn(s))),l.forEachChild(Ve,(u,d)=>{const f=jb(d,t.getImmediateChild(u),e);f!==d&&(a=a.updateImmediateChild(u,f))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Fb(n,t){let e=t instanceof me?t:new me(t),i=n,s=Ft(e);for(;s!==null;){const a=lc(i.node.children,s)||{children:{},childCount:0};i=new Ub(s,i,a),e=be(e),s=Ft(e)}return i}function Pc(n){return n.node.value}function oN(n,t){n.node.value=t,X0(n)}function lN(n){return n.node.childCount>0}function y9(n){return Pc(n)===void 0&&!lN(n)}function mp(n,t){Rn(n.node.children,(e,i)=>{t(new Ub(e,n,i))})}function cN(n,t,e,i){e&&t(n),mp(n,s=>{cN(s,t,!0)})}function v9(n,t,e){let i=n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Td(n){return new me(n.parent===null?n.name:Td(n.parent)+"/"+n.name)}function X0(n){n.parent!==null&&b9(n.parent,n.name,n)}function b9(n,t,e){const i=y9(e),s=As(n.node.children,t);i&&s?(delete n.node.children[t],n.node.childCount--,X0(n)):!i&&!s&&(n.node.children[t]=e.node,n.node.childCount++,X0(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=/[\[\].#$\/\u0000-\u001F\u007F]/,E9=/[\[\].#$\u0000-\u001F\u007F]/,Qy=10*1024*1024,zb=function(n){return typeof n=="string"&&n.length!==0&&!w9.test(n)},uN=function(n){return typeof n=="string"&&n.length!==0&&!E9.test(n)},x9=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),uN(n)},T9=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!mb(n)||n&&typeof n=="object"&&As(n,".sv")},Bb=function(n,t,e){const i=e instanceof me?new j5(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+yo(i));if(typeof t=="function")throw new Error(n+"contains a function "+yo(i)+" with contents = "+t.toString());if(mb(t))throw new Error(n+"contains "+t.toString()+" "+yo(i));if(typeof t=="string"&&t.length>Qy/3&&Fg(t)>Qy)throw new Error(n+"contains a string greater than "+Qy+" utf8 bytes "+yo(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,a=!1;if(Rn(t,(l,u)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!zb(l)))throw new Error(n+" contains an invalid key ("+l+") "+yo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);U5(i,l),Bb(n,u,i),F5(i)}),s&&a)throw new Error(n+' contains ".value" child '+yo(i)+" in addition to actual children.")}},S9=function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const a=Yh(i);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!zb(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(V5);let s=null;for(e=0;e<t.length;e++){if(i=t[e],s!==null&&Ri(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},A9=function(n,t,e,i){const s=pv(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const a=[];Rn(t,(l,u)=>{const d=new me(l);if(Bb(s,u,Le(e,d)),vb(d)===".priority"&&!T9(u))throw new Error(s+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(d)}),S9(s,a)},hN=function(n,t,e,i){if(!uN(e))throw new Error(pv(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},C9=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),hN(n,t,e)},R9=function(n,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!zb(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!x9(e))throw new Error(pv(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hb(n,t){let e=null;for(let i=0;i<t.length;i++){const s=t[i],a=s.getPath();e!==null&&!bb(a,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:a}),e.events.push(s)}e&&n.eventLists_.push(e)}function dN(n,t,e){Hb(n,e),fN(n,i=>bb(i,t))}function vr(n,t,e){Hb(n,e),fN(n,i=>Ri(i,t)||Ri(t,i))}function fN(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const a=s.path;t(a)?(N9(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function N9(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(e!==null){n.events[t]=null;const i=e.getEventRunner();Eh&&Tn("event: "+e.toString()),Dc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9="repo_interrupt",M9=25;class D9{constructor(t,e,i,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new I9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cg(),this.transactionQueueTree_=new Ub,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function O9(n,t,e){if(n.stats_=_b(n.repoInfo_),n.forceRestClient_||l5())n.server_=new lg(n.repoInfo_,(i,s,a,l)=>{X1(n,i,s,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Z1(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gn(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new dr(n.repoInfo_,t,(i,s,a,l)=>{X1(n,i,s,a,l)},i=>{Z1(n,i)},i=>{L9(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=f5(n.repoInfo_,()=>new dU(n.stats_,n.server_)),n.infoData_=new oU,n.infoSyncTree_=new $1({startListening:(i,s,a,l)=>{let u=[];const d=n.infoData_.getNode(i._path);return d.isEmpty()||(u=dp(n.infoSyncTree_,i._path,d),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),Wb(n,"connected",!1),n.serverSyncTree_=new $1({startListening:(i,s,a,l)=>(n.server_.listen(i,a,s,(u,d)=>{const f=l(u,d);vr(n.eventQueue_,i._path,f)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function P9(n){const e=n.infoData_.getNode(new me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function qb(n){return m9({timestamp:P9(n)})}function X1(n,t,e,i,s){n.dataUpdateCount++;const a=new me(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(s)if(i){const d=Fm(e,f=>Sn(f));l=c9(n.serverSyncTree_,a,d,s)}else{const d=Sn(e);l=l9(n.serverSyncTree_,a,d,s)}else if(i){const d=Fm(e,f=>Sn(f));l=r9(n.serverSyncTree_,a,d)}else{const d=Sn(e);l=dp(n.serverSyncTree_,a,d)}let u=a;l.length>0&&(u=Zh(n,a)),vr(n.eventQueue_,u,l)}function Z1(n,t){Wb(n,"connected",t),t===!1&&j9(n)}function L9(n,t){Rn(t,(e,i)=>{Wb(n,e,i)})}function Wb(n,t,e){const i=new me("/.info/"+t),s=Sn(e);n.infoData_.updateSnapshot(i,s);const a=dp(n.infoSyncTree_,i,s);vr(n.eventQueue_,i,a)}function mN(n){return n.nextWriteId_++}function V9(n,t,e,i){Gb(n,"update",{path:t.toString(),value:e});let s=!0;const a=qb(n),l={};if(Rn(e,(u,d)=>{s=!1,l[u]=aN(Le(t,u),Sn(d),n.serverSyncTree_,a)}),s)Tn("update() called with empty data.  Don't do anything."),J1(n,i,"ok",void 0);else{const u=mN(n),d=s9(n.serverSyncTree_,t,l,u);Hb(n.eventQueue_,d),n.server_.merge(t.toString(),e,(f,p)=>{const y=f==="ok";y||Jn("update at "+t+" failed: "+f);const v=Ro(n.serverSyncTree_,u,!y),T=v.length>0?Zh(n,t):t;vr(n.eventQueue_,T,v),J1(n,i,f,p)}),Rn(e,f=>{const p=vN(n,Le(t,f));Zh(n,p)}),vr(n.eventQueue_,t,[])}}function j9(n){Gb(n,"onDisconnectEvents");const t=qb(n),e=cg();H0(n.onDisconnect_,te(),(s,a)=>{const l=aN(s,a,n.serverSyncTree_,t);H2(e,s,l)});let i=[];H0(e,te(),(s,a)=>{i=i.concat(dp(n.serverSyncTree_,s,a));const l=vN(n,s);Zh(n,l)}),n.onDisconnect_=cg(),vr(n.eventQueue_,te(),i)}function U9(n,t,e){let i;Ft(t._path)===".info"?i=Q1(n.infoSyncTree_,t,e):i=Q1(n.serverSyncTree_,t,e),dN(n.eventQueue_,t._path,i)}function F9(n,t,e){let i;Ft(t._path)===".info"?i=K0(n.infoSyncTree_,t,e):i=K0(n.serverSyncTree_,t,e),dN(n.eventQueue_,t._path,i)}function z9(n){n.persistentConnection_&&n.persistentConnection_.interrupt(k9)}function Gb(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Tn(e,...t)}function J1(n,t,e,i){t&&Dc(()=>{if(e==="ok")t(null);else{const s=(e||"error").toUpperCase();let a=s;i&&(a+=": "+i);const l=new Error(a);l.code=s,t(l)}})}function gN(n,t,e){return nN(n.serverSyncTree_,t,e)||Rt.EMPTY_NODE}function Yb(n,t=n.transactionQueueTree_){if(t||gp(n,t),Pc(t)){const e=_N(n,t);dt(e.length>0,"Sending zero length transaction queue"),e.every(s=>s.status===0)&&B9(n,Td(t),e)}else lN(t)&&mp(t,e=>{Yb(n,e)})}function B9(n,t,e){const i=e.map(f=>f.currentWriteId),s=gN(n,t,i);let a=s;const l=s.hash();for(let f=0;f<e.length;f++){const p=e[f];dt(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const y=Kn(t,p.path);a=a.updateChild(y,p.currentOutputSnapshotRaw)}const u=a.val(!0),d=t;n.server_.put(d.toString(),u,f=>{Gb(n,"transaction put response",{path:d.toString(),status:f});let p=[];if(f==="ok"){const y=[];for(let v=0;v<e.length;v++)e[v].status=2,p=p.concat(Ro(n.serverSyncTree_,e[v].currentWriteId)),e[v].onComplete&&y.push(()=>e[v].onComplete(null,!0,e[v].currentOutputSnapshotResolved)),e[v].unwatcher();gp(n,Fb(n.transactionQueueTree_,t)),Yb(n,n.transactionQueueTree_),vr(n.eventQueue_,t,p);for(let v=0;v<y.length;v++)Dc(y[v])}else{if(f==="datastale")for(let y=0;y<e.length;y++)e[y].status===3?e[y].status=4:e[y].status=0;else{Jn("transaction at "+d.toString()+" failed: "+f);for(let y=0;y<e.length;y++)e[y].status=4,e[y].abortReason=f}Zh(n,t)}},l)}function Zh(n,t){const e=pN(n,t),i=Td(e),s=_N(n,e);return H9(n,s,i),i}function H9(n,t,e){if(t.length===0)return;const i=[];let s=[];const l=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const d=t[u],f=Kn(e,d.path);let p=!1,y;if(dt(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)p=!0,y=d.abortReason,s=s.concat(Ro(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=M9)p=!0,y="maxretry",s=s.concat(Ro(n.serverSyncTree_,d.currentWriteId,!0));else{const v=gN(n,d.path,l);d.currentInputSnapshot=v;const T=t[u].update(v.val());if(T!==void 0){Bb("transaction failed: Data returned ",T,d.path);let S=Sn(T);typeof T=="object"&&T!=null&&As(T,".priority")||(S=S.updatePriority(v.getPriority()));const C=d.currentWriteId,L=qb(n),q=_9(S,v,L);d.currentOutputSnapshotRaw=S,d.currentOutputSnapshotResolved=q,d.currentWriteId=mN(n),l.splice(l.indexOf(C),1),s=s.concat(i9(n.serverSyncTree_,d.path,q,d.currentWriteId,d.applyLocally)),s=s.concat(Ro(n.serverSyncTree_,C,!0))}else p=!0,y="nodata",s=s.concat(Ro(n.serverSyncTree_,d.currentWriteId,!0))}vr(n.eventQueue_,e,s),s=[],p&&(t[u].status=2,function(v){setTimeout(v,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(y==="nodata"?i.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):i.push(()=>t[u].onComplete(new Error(y),!1,null))))}gp(n,n.transactionQueueTree_);for(let u=0;u<i.length;u++)Dc(i[u]);Yb(n,n.transactionQueueTree_)}function pN(n,t){let e,i=n.transactionQueueTree_;for(e=Ft(t);e!==null&&Pc(i)===void 0;)i=Fb(i,e),t=be(t),e=Ft(t);return i}function _N(n,t){const e=[];return yN(n,t,e),e.sort((i,s)=>i.order-s.order),e}function yN(n,t,e){const i=Pc(t);if(i)for(let s=0;s<i.length;s++)e.push(i[s]);mp(t,s=>{yN(n,s,e)})}function gp(n,t){const e=Pc(t);if(e){let i=0;for(let s=0;s<e.length;s++)e[s].status!==2&&(e[i]=e[s],i++);e.length=i,oN(t,e.length>0?e:void 0)}mp(t,i=>{gp(n,i)})}function vN(n,t){const e=Td(pN(n,t)),i=Fb(n.transactionQueueTree_,t);return v9(i,s=>{Ky(n,s)}),Ky(n,i),cN(i,s=>{Ky(n,s)}),e}function Ky(n,t){const e=Pc(t);if(e){const i=[];let s=[],a=-1;for(let l=0;l<e.length;l++)e[l].status===3||(e[l].status===1?(dt(a===l-1,"All SENT items should be at beginning of queue."),a=l,e[l].status=3,e[l].abortReason="set"):(dt(e[l].status===0,"Unexpected transaction status in abort"),e[l].unwatcher(),s=s.concat(Ro(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?oN(t,void 0):e.length=a+1,vr(n.eventQueue_,Td(t),s);for(let l=0;l<i.length;l++)Dc(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let s=e[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function W9(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const e of n.split("&")){if(e.length===0)continue;const i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Jn(`Invalid query segment '${e}' in query '${n}'`)}return t}const tA=function(n,t){const e=G9(n),i=e.namespace;e.domain==="firebase.com"&&yr(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||J3();const s=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new A2(e.host,e.secure,i,s,t,"",i!==e.subdomain),path:new me(e.pathString)}},G9=function(n){let t="",e="",i="",s="",a="",l=!0,u="https",d=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(u=n.substring(0,f-1),n=n.substring(f+2));let p=n.indexOf("/");p===-1&&(p=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),t=n.substring(0,Math.min(p,y)),p<y&&(s=q9(n.substring(p,y)));const v=W9(n.substring(Math.min(n.length,y)));f=t.indexOf(":"),f>=0?(l=u==="https"||u==="wss",d=parseInt(t.substring(f+1),10)):f=t.length;const T=t.slice(0,f);if(T.toLowerCase()==="localhost")e="localhost";else if(T.split(".").length<=2)e=T;else{const S=t.indexOf(".");i=t.substring(0,S).toLowerCase(),e=t.substring(S+1),a=i}"ns"in v&&(a=v.ns)}return{host:t,port:d,domain:e,subdomain:i,secure:l,scheme:u,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(t,e,i,s){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+gn(this.snapshot.exportVal())}}class $9{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return dt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t,e,i,s){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=s}get key(){return zt(this._path)?null:vb(this._path)}get ref(){return new Ma(this._repo,this._path)}get _queryIdentifier(){const t=j1(this._queryParams),e=gb(t);return e==="{}"?"default":e}get _queryObject(){return j1(this._queryParams)}isEqual(t){if(t=Se(t),!(t instanceof $b))return!1;const e=this._repo===t._repo,i=bb(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return e&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+L5(this._path)}}class Ma extends $b{constructor(t,e){super(t,e,new Tb,!1)}get parent(){const t=P2(this._path);return t===null?null:new Ma(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class _g{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new me(t),i=Z0(this.ref,t);return new _g(this._node.getChild(e),i,Ve)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>t(new _g(s,Z0(this.ref,i),Ve)))}hasChild(t){const e=new me(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ui(n,t){return n=Se(n),n._checkNotDeleted("ref"),t!==void 0?Z0(n._root,t):n._root}function Z0(n,t){return n=Se(n),Ft(n._path)===null?C9("child","path",t):hN("child","path",t),new Ma(n._repo,Le(n._path,t))}function yg(n,t){A9("update",t,n._path);const e=new Ug;return V9(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}class Qb{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const i=e._queryParams.getIndex();return new Y9("value",this,new _g(t.snapshotNode,new Ma(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new $9(this,t,e):null}matches(t){return t instanceof Qb?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function K9(n,t,e,i,s){const a=new Q9(e,void 0),l=new Qb(a);return U9(n._repo,n,l),()=>F9(n._repo,n,l)}function Eo(n,t,e,i){return K9(n,"value",t)}$U(Ma);t9(Ma);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="FIREBASE_DATABASE_EMULATOR_HOST",J0={};let Z9=!1;function J9(n,t,e,i){const s=t.lastIndexOf(":"),a=t.substring(0,s),l=Ca(a);n.repoInfo_=new A2(t,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,e),i&&(n.authTokenProvider_=i)}function tF(n,t,e,i,s){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=tA(a,s),u=l.repoInfo,d;typeof process<"u"&&b1&&(d=b1[X9]),d?(a=`http://${d}?ns=${u.namespace}`,l=tA(a,s),u=l.repoInfo):l.repoInfo.secure;const f=new u5(n.name,n.options,t);R9("Invalid Firebase Database URL",l),zt(l.path)||yr("Database URL must point to the root of a Firebase Database (not including a child path).");const p=nF(u,n,f,new c5(n,e));return new iF(p,n)}function eF(n,t){const e=J0[t];(!e||e[n.key]!==n)&&yr(`Database ${t}(${n.repoInfo_}) has already been deleted.`),z9(n),delete e[n.key]}function nF(n,t,e,i){let s=J0[t.name];s||(s={},J0[t.name]=s);let a=s[n.toURLString()];return a&&yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new D9(n,Z9,e,i),s[n.toURLString()]=a,a}class iF{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(O9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ma(this._repo,te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&yr("Cannot call "+t+" on a deleted database.")}}function sF(n=yv(),t){const e=Bg(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=qC("database");i&&rF(e,...i)}return e}function rF(n,t,e,i={}){n=Se(n),n._checkNotDeleted("useEmulator");const s=`${t}:${e}`,a=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ga(i,a.repoInfo_.emulatorOptions))return;yr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Dm(Dm.OWNER);else if(i.mockUserToken){const u=typeof i.mockUserToken=="string"?i.mockUserToken:YC(i.mockUserToken,n.app.options.projectId);l=new Dm(u)}Ca(t)&&(fv(t),mv("Database",!0)),J9(a,s,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(n){Y3(Wo),Do(new pa("database",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return tF(i,s,a,e)},"PUBLIC").setMultipleInstances(!0)),gs(w1,E1,n),gs(w1,E1,"esm2020")}dr.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};dr.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};aF();const oF={apiKey:"AIzaSyArw4hta6dNfJRp48bY5Z2b47ag_R5G-mI",authDomain:"studi-2e08c.firebaseapp.com",projectId:"studi-2e08c",storageBucket:"studi-2e08c.firebasestorage.app",messagingSenderId:"414723164531",appId:"1:414723164531:web:9c553047baef7d1b681d06",measurementId:"G-FNRLSJDHG8",databaseURL:"https://studi-2e08c-default-rtdb.firebaseio.com"},Kb=ZC(oF),hi=xV(Kb),bN=new sr,xn=C3(Kb),Fi=sF(Kb),lF=z.createContext();function cF({children:n}){const[t,e]=z.useState(null),[i,s]=z.useState(!0);z.useEffect(()=>xR(hi,u=>{e(u),s(!1)}),[]);const a={currentUser:t,loading:i};return w.jsx(lF.Provider,{value:a,children:!i&&n})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function uF(n,t,e,i){function s(a){return a instanceof e?a:new e(function(l){l(a)})}return new(e||(e=Promise))(function(a,l){function u(p){try{f(i.next(p))}catch(y){l(y)}}function d(p){try{f(i.throw(p))}catch(y){l(y)}}function f(p){p.done?a(p.value):s(p.value).then(u,d)}f((i=i.apply(n,[])).next())})}function hF(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(p){return d([f,p])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(a=f[0]&2?s.return:f[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,f[1])).done)return a;switch(s=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,s=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){e.label=f[1];break}if(f[0]===6&&e.label<a[1]){e.label=a[1],a=f;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(f);break}a[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(n,e)}catch(p){f=[6,p],s=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xl=function(){return Xl=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Xl.apply(this,arguments)},wN=function(n){return{loading:n==null,value:n}},dF=function(){return function(n,t){switch(t.type){case"error":return Xl(Xl({},n),{error:t.error,loading:!1,value:void 0});case"reset":return wN(t.defaultValue);case"value":return Xl(Xl({},n),{error:void 0,loading:!1,value:t.value});default:return n}}},fF=function(n){var t=n?n():void 0,e=z.useReducer(dF(),wN(t)),i=e[0],s=e[1],a=z.useCallback(function(){var d=n?n():void 0;s({type:"reset",defaultValue:d})},[n]),l=z.useCallback(function(d){s({type:"error",error:d})},[]),u=z.useCallback(function(d){s({type:"value",value:d})},[]);return z.useMemo(function(){return{error:i.error,loading:i.loading,reset:a,setError:l,setValue:u,value:i.value}},[i.error,i.loading,a,l,u,i.value])},pp=function(n,t){var e=fF(function(){return n.currentUser}),i=e.error,s=e.loading,a=e.setError,l=e.setValue,u=e.value;return z.useEffect(function(){var d=xR(n,function(f){return uF(void 0,void 0,void 0,function(){var p;return hF(this,function(y){switch(y.label){case 0:return[3,4];case 1:return y.trys.push([1,3,,4]),[4,t.onUserChanged(f)];case 2:return y.sent(),[3,4];case 3:return p=y.sent(),a(p),[3,4];case 4:return l(f),[2]}})})},a);return function(){d()}},[n]),[u,s,i]};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Sd(n){return n+.5|0}const sa=(n,t,e)=>Math.max(Math.min(n,e),t);function dh(n){return sa(Sd(n*2.55),0,255)}function ma(n){return sa(Sd(n*255),0,255)}function ir(n){return sa(Sd(n/2.55)/100,0,1)}function eA(n){return sa(Sd(n*100),0,100)}const Si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},tv=[..."0123456789ABCDEF"],mF=n=>tv[n&15],gF=n=>tv[(n&240)>>4]+tv[n&15],am=n=>(n&240)>>4===(n&15),pF=n=>am(n.r)&&am(n.g)&&am(n.b)&&am(n.a);function _F(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Si[n[1]]*17,g:255&Si[n[2]]*17,b:255&Si[n[3]]*17,a:t===5?Si[n[4]]*17:255}:(t===7||t===9)&&(e={r:Si[n[1]]<<4|Si[n[2]],g:Si[n[3]]<<4|Si[n[4]],b:Si[n[5]]<<4|Si[n[6]],a:t===9?Si[n[7]]<<4|Si[n[8]]:255})),e}const yF=(n,t)=>n<255?t(n):"";function vF(n){var t=pF(n)?mF:gF;return n?"#"+t(n.r)+t(n.g)+t(n.b)+yF(n.a,t):void 0}const bF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function EN(n,t,e){const i=t*Math.min(e,1-e),s=(a,l=(a+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function wF(n,t,e){const i=(s,a=(s+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function EF(n,t,e){const i=EN(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function xF(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Xb(n){const e=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(e,i,s),l=Math.min(e,i,s),u=(a+l)/2;let d,f,p;return a!==l&&(p=a-l,f=u>.5?p/(2-a-l):p/(a+l),d=xF(e,i,s,p,a),d=d*60+.5),[d|0,f||0,u]}function Zb(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ma)}function Jb(n,t,e){return Zb(EN,n,t,e)}function TF(n,t,e){return Zb(EF,n,t,e)}function SF(n,t,e){return Zb(wF,n,t,e)}function xN(n){return(n%360+360)%360}function AF(n){const t=bF.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?dh(+t[5]):ma(+t[5]));const s=xN(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=TF(s,a,l):t[1]==="hsv"?i=SF(s,a,l):i=Jb(s,a,l),{r:i[0],g:i[1],b:i[2],a:e}}function CF(n,t){var e=Xb(n);e[0]=xN(e[0]+t),e=Jb(e),n.r=e[0],n.g=e[1],n.b=e[2]}function RF(n){if(!n)return;const t=Xb(n),e=t[0],i=eA(t[1]),s=eA(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${ir(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const nA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},iA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function IF(){const n={},t=Object.keys(iA),e=Object.keys(nA);let i,s,a,l,u;for(i=0;i<t.length;i++){for(l=u=t[i],s=0;s<e.length;s++)a=e[s],u=u.replace(a,nA[a]);a=parseInt(iA[l],16),n[u]=[a>>16&255,a>>8&255,a&255]}return n}let om;function NF(n){om||(om=IF(),om.transparent=[0,0,0,0]);const t=om[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const kF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function MF(n){const t=kF.exec(n);let e=255,i,s,a;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?dh(l):sa(l*255,0,255)}return i=+t[1],s=+t[3],a=+t[5],i=255&(t[2]?dh(i):sa(i,0,255)),s=255&(t[4]?dh(s):sa(s,0,255)),a=255&(t[6]?dh(a):sa(a,0,255)),{r:i,g:s,b:a,a:e}}}function DF(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ir(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Xy=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ql=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function OF(n,t,e){const i=ql(ir(n.r)),s=ql(ir(n.g)),a=ql(ir(n.b));return{r:ma(Xy(i+e*(ql(ir(t.r))-i))),g:ma(Xy(s+e*(ql(ir(t.g))-s))),b:ma(Xy(a+e*(ql(ir(t.b))-a))),a:n.a+e*(t.a-n.a)}}function lm(n,t,e){if(n){let i=Xb(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Jb(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function TN(n,t){return n&&Object.assign(t||{},n)}function sA(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ma(n[3]))):(t=TN(n,{r:0,g:0,b:0,a:1}),t.a=ma(t.a)),t}function PF(n){return n.charAt(0)==="r"?MF(n):AF(n)}class Jh{constructor(t){if(t instanceof Jh)return t;const e=typeof t;let i;e==="object"?i=sA(t):e==="string"&&(i=_F(t)||NF(t)||PF(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=TN(this._rgb);return t&&(t.a=ir(t.a)),t}set rgb(t){this._rgb=sA(t)}rgbString(){return this._valid?DF(this._rgb):void 0}hexString(){return this._valid?vF(this._rgb):void 0}hslString(){return this._valid?RF(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let a;const l=e===a?.5:e,u=2*l-1,d=i.a-s.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;a=1-f,i.r=255&f*i.r+a*s.r+.5,i.g=255&f*i.g+a*s.g+.5,i.b=255&f*i.b+a*s.b+.5,i.a=l*i.a+(1-l)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=OF(this._rgb,t._rgb,e)),this}clone(){return new Jh(this.rgb)}alpha(t){return this._rgb.a=ma(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Sd(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return lm(this._rgb,2,t),this}darken(t){return lm(this._rgb,2,-t),this}saturate(t){return lm(this._rgb,1,t),this}desaturate(t){return lm(this._rgb,1,-t),this}rotate(t){return CF(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Js(){}const LF=(()=>{let n=0;return()=>n++})();function Ne(n){return n==null}function pn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Xt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ki(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function us(n,t){return ki(n)?n:t}function ie(n,t){return typeof n>"u"?t:n}const VF=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,SN=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function xe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function le(n,t,e,i){let s,a,l;if(pn(n))for(a=n.length,s=0;s<a;s++)t.call(e,n[s],s);else if(Xt(n))for(l=Object.keys(n),a=l.length,s=0;s<a;s++)t.call(e,n[l[s]],l[s])}function vg(n,t){let e,i,s,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],a=t[e],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function bg(n){if(pn(n))return n.map(bg);if(Xt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=bg(n[e[s]]);return t}return n}function AN(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function jF(n,t,e,i){if(!AN(n))return;const s=t[n],a=e[n];Xt(s)&&Xt(a)?td(s,a,i):t[n]=bg(a)}function td(n,t,e){const i=pn(t)?t:[t],s=i.length;if(!Xt(n))return n;e=e||{};const a=e.merger||jF;let l;for(let u=0;u<s;++u){if(l=i[u],!Xt(l))continue;const d=Object.keys(l);for(let f=0,p=d.length;f<p;++f)a(d[f],n,l,e)}return n}function Ch(n,t){return td(n,t,{merger:UF})}function UF(n,t,e){if(!AN(n))return;const i=t[n],s=e[n];Xt(i)&&Xt(s)?Ch(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=bg(s))}const rA={"":n=>n,x:n=>n.x,y:n=>n.y};function FF(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function zF(n){const t=FF(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function ed(n,t){return(rA[t]||(rA[t]=zF(t)))(n)}function tw(n){return n.charAt(0).toUpperCase()+n.slice(1)}const wg=n=>typeof n<"u",Sa=n=>typeof n=="function",aA=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function BF(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const pe=Math.PI,Xe=2*pe,Eg=Number.POSITIVE_INFINITY,HF=pe/180,rn=pe/2,mo=pe/4,oA=pe*2/3,CN=Math.log10,xg=Math.sign;function Om(n,t,e){return Math.abs(n-t)<e}function lA(n){const t=Math.round(n);n=Om(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(CN(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function qF(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,a)=>s-a).pop(),t}function WF(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Tg(n){return!WF(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function GF(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function YF(n,t,e){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][e],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function lr(n){return n*(pe/180)}function $F(n){return n*(180/pe)}function cA(n){if(!ki(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function RN(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let a=Math.atan2(i,e);return a<-.5*pe&&(a+=Xe),{angle:a,distance:s}}function QF(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ms(n){return(n%Xe+Xe)%Xe}function Sg(n,t,e,i){const s=ms(n),a=ms(t),l=ms(e),u=ms(a-s),d=ms(l-s),f=ms(s-a),p=ms(s-l);return s===a||s===l||i&&a===l||u>d&&f<p}function Zn(n,t,e){return Math.max(t,Math.min(e,n))}function KF(n){return Zn(n,-32768,32767)}function Io(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ew(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,e(a)?s=a:i=a;return{lo:s,hi:i}}const ev=(n,t,e,i)=>ew(n,e,i?s=>{const a=n[s][t];return a<e||a===e&&n[s+1][t]===e}:s=>n[s][t]<e),XF=(n,t,e)=>ew(n,e,i=>n[i][t]>=e);function ZF(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const IN=["push","pop","shift","splice","unshift"];function JF(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),IN.forEach(e=>{const i="_onData"+tw(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const l=s.apply(this,a);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...a)}),l}})})}function uA(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(IN.forEach(a=>{delete n[a]}),delete n._chartjs)}function tz(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const NN=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function kN(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,NN.call(window,()=>{i=!1,n.apply(t,e)}))}}function ez(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const nw=n=>n==="start"?"left":n==="end"?"right":"center",Dn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,nz=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,cm=n=>n===0||n===1,hA=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Xe/e)),dA=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Xe/e)+1,Rh={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*rn)+1,easeOutSine:n=>Math.sin(n*rn),easeInOutSine:n=>-.5*(Math.cos(pe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>cm(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>cm(n)?n:hA(n,.075,.3),easeOutElastic:n=>cm(n)?n:dA(n,.075,.3),easeInOutElastic(n){return cm(n)?n:n<.5?.5*hA(n*2,.1125,.45):.5+.5*dA(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Rh.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Rh.easeInBounce(n*2)*.5:Rh.easeOutBounce(n*2-1)*.5+.5};function MN(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function fA(n){return MN(n)?n:new Jh(n)}function Zy(n){return MN(n)?n:new Jh(n).saturate(.5).darken(.1).hexString()}const iz=["x","y","borderWidth","radius","tension"],sz=["color","borderColor","backgroundColor"];function rz(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:sz},numbers:{type:"number",properties:iz}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function az(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const mA=new Map;function oz(n,t){t=t||{};const e=n+JSON.stringify(t);let i=mA.get(e);return i||(i=new Intl.NumberFormat(n,t),mA.set(e,i)),i}function iw(n,t,e){return oz(t,e).format(n)}const lz={values(n){return pn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(e.length>1){const f=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),a=cz(n,e)}const l=CN(Math.abs(a)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),iw(n,i,d)}};function cz(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var DN={formatters:lz};function uz(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:DN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Bo=Object.create(null),nv=Object.create(null);function Ih(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function Jy(n,t,e){return typeof t=="string"?td(Ih(n,t),e):td(Ih(n,""),t)}class hz{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Zy(s.backgroundColor),this.hoverBorderColor=(i,s)=>Zy(s.borderColor),this.hoverColor=(i,s)=>Zy(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Jy(this,t,e)}get(t){return Ih(this,t)}describe(t,e){return Jy(nv,t,e)}override(t,e){return Jy(Bo,t,e)}route(t,e,i,s){const a=Ih(this,t),l=Ih(this,i),u="_"+e;Object.defineProperties(a,{[u]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[u],f=l[s];return Xt(d)?Object.assign({},f,d):ie(d,f)},set(d){this[u]=d}}})}apply(t){t.forEach(e=>e(this))}}var Be=new hz({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rz,az,uz]);function dz(n){return!n||Ne(n.size)||Ne(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function gA(n,t,e,i,s){let a=t[s];return a||(a=t[s]=n.measureText(s).width,e.push(s)),a>i&&(i=a),i}function go(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function pA(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function _A(n,t,e,i){ON(n,t,e,i,null)}function ON(n,t,e,i,s){let a,l,u,d,f,p,y,v;const T=t.pointStyle,S=t.rotation,N=t.radius;let C=(S||0)*HF;if(T&&typeof T=="object"&&(a=T.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(C),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(N)||N<=0)){switch(n.beginPath(),T){default:s?n.ellipse(e,i,s/2,N,0,0,Xe):n.arc(e,i,N,0,Xe),n.closePath();break;case"triangle":p=s?s/2:N,n.moveTo(e+Math.sin(C)*p,i-Math.cos(C)*N),C+=oA,n.lineTo(e+Math.sin(C)*p,i-Math.cos(C)*N),C+=oA,n.lineTo(e+Math.sin(C)*p,i-Math.cos(C)*N),n.closePath();break;case"rectRounded":f=N*.516,d=N-f,l=Math.cos(C+mo)*d,y=Math.cos(C+mo)*(s?s/2-f:d),u=Math.sin(C+mo)*d,v=Math.sin(C+mo)*(s?s/2-f:d),n.arc(e-y,i-u,f,C-pe,C-rn),n.arc(e+v,i-l,f,C-rn,C),n.arc(e+y,i+u,f,C,C+rn),n.arc(e-v,i+l,f,C+rn,C+pe),n.closePath();break;case"rect":if(!S){d=Math.SQRT1_2*N,p=s?s/2:d,n.rect(e-p,i-d,2*p,2*d);break}C+=mo;case"rectRot":y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+v,i-l),n.lineTo(e+y,i+u),n.lineTo(e-v,i+l),n.closePath();break;case"crossRot":C+=mo;case"cross":y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l);break;case"star":y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l),C+=mo,y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l);break;case"line":l=s?s/2:Math.cos(C)*N,u=Math.sin(C)*N,n.moveTo(e-l,i-u),n.lineTo(e+l,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(C)*(s?s/2:N),i+Math.sin(C)*N);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function PN(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function sw(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function rw(n){n.restore()}function fz(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ne(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function mz(n,t,e,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),l=t-a.actualBoundingBoxLeft,u=t+a.actualBoundingBoxRight,d=e-a.actualBoundingBoxAscent,f=e+a.actualBoundingBoxDescent,p=s.strikethrough?(d+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,p),n.lineTo(u,p),n.stroke()}}function gz(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function nd(n,t,e,i,s,a={}){const l=pn(t)?t:[t],u=a.strokeWidth>0&&a.strokeColor!=="";let d,f;for(n.save(),n.font=s.string,fz(n,a),d=0;d<l.length;++d)f=l[d],a.backdrop&&gz(n,a.backdrop),u&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),Ne(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(f,e,i,a.maxWidth)),n.fillText(f,e,i,a.maxWidth),mz(n,e,i,f,a),i+=Number(s.lineHeight);n.restore()}function Ag(n,t){const{x:e,y:i,w:s,h:a,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*pe,pe,!0),n.lineTo(e,i+a-l.bottomLeft),n.arc(e+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,pe,rn,!0),n.lineTo(e+s-l.bottomRight,i+a),n.arc(e+s-l.bottomRight,i+a-l.bottomRight,l.bottomRight,rn,0,!0),n.lineTo(e+s,i+l.topRight),n.arc(e+s-l.topRight,i+l.topRight,l.topRight,0,-rn,!0),n.lineTo(e+l.topLeft,i)}const pz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_z=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yz(n,t){const e=(""+n).match(pz);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const vz=n=>+n||0;function aw(n,t){const e={},i=Xt(t),s=i?Object.keys(t):t,a=Xt(n)?i?l=>ie(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of s)e[l]=vz(a(l));return e}function LN(n){return aw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ac(n){return aw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Mi(n){const t=LN(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ln(n,t){n=n||{},t=t||Be.font;let e=ie(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=ie(n.style,t.style);i&&!(""+i).match(_z)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ie(n.family,t.family),lineHeight:yz(ie(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:ie(n.weight,t.weight),string:""};return s.string=dz(s),s}function um(n,t,e,i){let s,a,l;for(s=0,a=n.length;s<a;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function bz(n,t,e){const{min:i,max:s}=n,a=SN(t,(s-i)/2),l=(u,d)=>e&&u===0?0:u+d;return{min:l(i,-Math.abs(a)),max:l(s,a)}}function Lc(n,t){return Object.assign(Object.create(n),t)}function ow(n,t=[""],e,i,s=()=>n[0]){const a=e||n;typeof i>"u"&&(i=FN("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:u=>ow([u,...n],t,a,i)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete n[0][d],!0},get(u,d){return jN(u,d,()=>Rz(d,t,n,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,d){return vA(u).includes(d)},ownKeys(u){return vA(u)},set(u,d,f){const p=u._storage||(u._storage=s());return u[d]=p[d]=f,delete u._keys,!0}})}function wc(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:VN(n,i),setContext:a=>wc(n,a,e,i),override:a=>wc(n.override(a),t,e,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,u){return jN(a,l,()=>Ez(a,l,u))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,u){return n[l]=u,delete a[l],!0}})}function VN(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Sa(e)?e:()=>e,isIndexable:Sa(i)?i:()=>i}}const wz=(n,t)=>n?n+tw(t):t,lw=(n,t)=>Xt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function jN(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Ez(n,t,e){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;let u=i[t];return Sa(u)&&l.isScriptable(t)&&(u=xz(t,u,n,e)),pn(u)&&u.length&&(u=Tz(t,u,n,l.isIndexable)),lw(t,u)&&(u=wc(u,s,a&&a[t],l)),u}function xz(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let d=t(a,l||i);return u.delete(n),lw(n,d)&&(d=cw(s._scopes,s,n,d)),d}function Tz(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_descriptors:u}=e;if(typeof a.index<"u"&&i(n))return t[a.index%t.length];if(Xt(t[0])){const d=t,f=s._scopes.filter(p=>p!==d);t=[];for(const p of d){const y=cw(f,s,n,p);t.push(wc(y,a,l&&l[n],u))}}return t}function UN(n,t,e){return Sa(n)?n(t,e):n}const Sz=(n,t)=>n===!0?t:typeof n=="string"?ed(t,n):void 0;function Az(n,t,e,i,s){for(const a of t){const l=Sz(e,a);if(l){n.add(l);const u=UN(l._fallback,e,s);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function cw(n,t,e,i){const s=t._rootScopes,a=UN(t._fallback,e,i),l=[...n,...s],u=new Set;u.add(i);let d=yA(u,l,e,a||e,i);return d===null||typeof a<"u"&&a!==e&&(d=yA(u,l,a,d,i),d===null)?!1:ow(Array.from(u),[""],s,a,()=>Cz(t,e,i))}function yA(n,t,e,i,s){for(;e;)e=Az(n,t,e,i,s);return e}function Cz(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return pn(s)&&Xt(e)?e:s||{}}function Rz(n,t,e,i){let s;for(const a of t)if(s=FN(wz(a,n),e),typeof s<"u")return lw(n,s)?cw(e,i,n,s):s}function FN(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function vA(n){let t=n._keys;return t||(t=n._keys=Iz(n._scopes)),t}function Iz(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function uw(){return typeof window<"u"&&typeof document<"u"}function hw(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Cg(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const _p=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Nz(n,t){return _p(n).getPropertyValue(t)}const kz=["top","right","bottom","left"];function Mo(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const a=kz[s];i[a]=parseFloat(n[t+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Mz=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Dz(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:a}=i;let l=!1,u,d;if(Mz(s,a,n.target))u=s,d=a;else{const f=t.getBoundingClientRect();u=i.clientX-f.left,d=i.clientY-f.top,l=!0}return{x:u,y:d,box:l}}function vo(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=_p(e),a=s.boxSizing==="border-box",l=Mo(s,"padding"),u=Mo(s,"border","width"),{x:d,y:f,box:p}=Dz(n,e),y=l.left+(p&&u.left),v=l.top+(p&&u.top);let{width:T,height:S}=t;return a&&(T-=l.width+u.width,S-=l.height+u.height),{x:Math.round((d-y)/T*e.width/i),y:Math.round((f-v)/S*e.height/i)}}function Oz(n,t,e){let i,s;if(t===void 0||e===void 0){const a=n&&hw(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{const l=a.getBoundingClientRect(),u=_p(a),d=Mo(u,"border","width"),f=Mo(u,"padding");t=l.width-f.width-d.width,e=l.height-f.height-d.height,i=Cg(u.maxWidth,a,"clientWidth"),s=Cg(u.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:i||Eg,maxHeight:s||Eg}}const hm=n=>Math.round(n*10)/10;function Pz(n,t,e,i){const s=_p(n),a=Mo(s,"margin"),l=Cg(s.maxWidth,n,"clientWidth")||Eg,u=Cg(s.maxHeight,n,"clientHeight")||Eg,d=Oz(n,t,e);let{width:f,height:p}=d;if(s.boxSizing==="content-box"){const v=Mo(s,"border","width"),T=Mo(s,"padding");f-=T.width+v.width,p-=T.height+v.height}return f=Math.max(0,f-a.width),p=Math.max(0,i?f/i:p-a.height),f=hm(Math.min(f,l,d.maxWidth)),p=hm(Math.min(p,u,d.maxHeight)),f&&!p&&(p=hm(f/2)),(t!==void 0||e!==void 0)&&i&&d.height&&p>d.height&&(p=d.height,f=hm(Math.floor(p*i))),{width:f,height:p}}function bA(n,t,e){const i=t||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==s||l.width!==a?(n.currentDevicePixelRatio=i,l.height=s,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Lz=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};uw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function wA(n,t){const e=Nz(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const Vz=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},jz=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function oc(n,t,e){return n?Vz(t,e):jz()}function zN(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function BN(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function dm(n,t,e){return n.options.clip?n[e]:t[e]}function Uz(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:dm(e,t,"left"),right:dm(e,t,"right"),top:dm(i,t,"top"),bottom:dm(i,t,"bottom")}:t}function Fz(n,t){const e=t._clip;if(e.disabled)return!1;const i=Uz(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class zz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const a=e.listeners[s],l=e.duration;a.forEach(u=>u({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=NN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,u=!1,d;for(;l>=0;--l)d=a[l],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),u=!0):(a[l]=a[a.length-1],a.pop());u&&(s.draw(),this._notify(s,i,t,"progress")),a.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var er=new zz;const EA="transparent",Bz={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=fA(n||EA),s=i.valid&&fA(t||EA);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Hz{constructor(t,e,i,s){const a=e[i];s=um([t.to,s,a,t.from]);const l=um([t.from,a,s]);this._active=!0,this._fn=t.fn||Bz[t.type||typeof l],this._easing=Rh[t.easing]||Rh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=um([t.to,e,s,t.from]),this._from=um([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,a=this._from,l=this._loop,u=this._to;let d;if(this._active=a!==u&&(l||e<i),!this._active){this._target[s]=u,this._notify(!0);return}if(e<0){this._target[s]=a;return}d=e/i%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[s]=this._fn(a,u,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class HN{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Xt(t))return;const e=Object.keys(Be.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const a=t[s];if(!Xt(a))return;const l={};for(const u of e)l[u]=a[u];(pn(a.properties)&&a.properties||[s]).forEach(u=>{(u===s||!i.has(u))&&i.set(u,l)})})}_animateOptions(t,e){const i=e.options,s=Wz(t,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&qz(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,e){const i=this._properties,s=[],a=t.$animations||(t.$animations={}),l=Object.keys(e),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(t,e));continue}const p=e[f];let y=a[f];const v=i.get(f);if(y)if(v&&y.active()){y.update(v,p,u);continue}else y.cancel();if(!v||!v.duration){t[f]=p;continue}a[f]=y=new Hz(v,t,f,p),s.push(y)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return er.add(this._chart,i),!0}}function qz(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function Wz(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function xA(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:i?a:s,end:i?s:a}}function Gz(n,t,e){if(e===!1)return!1;const i=xA(n,e),s=xA(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Yz(n){let t,e,i,s;return Xt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function qN(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,a;for(s=0,a=i.length;s<a;++s)e.push(i[s].index);return e}function TA(n,t,e,i={}){const s=n.keys,a=i.mode==="single";let l,u,d,f;if(t===null)return;let p=!1;for(l=0,u=s.length;l<u;++l){if(d=+s[l],d===e){if(p=!0,i.all)continue;break}f=n.values[d],ki(f)&&(a||t===0||xg(t)===xg(f))&&(t+=f)}return!p&&!i.all?0:t}function $z(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let d,f,p;for(d=0,f=l.length;d<f;++d)p=l[d],u[d]={[s]:p,[a]:n[p]};return u}function t0(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Qz(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Kz(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function Xz(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function SA(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(e&&a>0||!e&&a<0)return s.index}return null}function AA(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:a,vScale:l,index:u}=i,d=a.axis,f=l.axis,p=Qz(a,l,i),y=t.length;let v;for(let T=0;T<y;++T){const S=t[T],{[d]:N,[f]:C}=S,L=S._stacks||(S._stacks={});v=L[f]=Xz(s,p,N),v[u]=C,v._top=SA(v,l,!0,i.type),v._bottom=SA(v,l,!1,i.type);const q=v._visualValues||(v._visualValues={});q[u]=C}}function e0(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Zz(n,t){return Lc(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Jz(n,t,e){return Lc(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Zu(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const a=s._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}const n0=n=>n==="reset"||n==="none",CA=(n,t)=>t?n:Object.assign({},n),tB=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:qN(e,!0),values:null};class WN{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=t0(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Zu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(y,v,T,S)=>y==="x"?v:y==="r"?S:T,a=e.xAxisID=ie(i.xAxisID,e0(t,"x")),l=e.yAxisID=ie(i.yAxisID,e0(t,"y")),u=e.rAxisID=ie(i.rAxisID,e0(t,"r")),d=e.indexAxis,f=e.iAxisID=s(d,a,l,u),p=e.vAxisID=s(d,l,a,u);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(f),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&uA(this._data,this),t._stacked&&Zu(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Xt(e)){const s=this._cachedMeta;this._data=$z(e,s)}else if(i!==e){if(i){uA(i,this);const s=this._cachedMeta;Zu(s),s._parsed=[]}e&&Object.isExtensible(e)&&JF(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=e._stacked;e._stacked=t0(e.vScale,e),e.stack!==i.stack&&(s=!0,Zu(e),e.stack=i.stack),this._resyncElements(t),(s||a!==e._stacked)&&(AA(this,e._parsed),e._stacked=t0(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,u=a.axis;let d=t===0&&e===s.length?!0:i._sorted,f=t>0&&i._parsed[t-1],p,y,v;if(this._parsing===!1)i._parsed=s,i._sorted=!0,v=s;else{pn(s[t])?v=this.parseArrayData(i,s,t,e):Xt(s[t])?v=this.parseObjectData(i,s,t,e):v=this.parsePrimitiveData(i,s,t,e);const T=()=>y[u]===null||f&&y[u]<f[u];for(p=0;p<e;++p)i._parsed[p+t]=y=v[p],d&&(T()&&(d=!1),f=y);i._sorted=d}l&&AA(this,v)}parsePrimitiveData(t,e,i,s){const{iScale:a,vScale:l}=t,u=a.axis,d=l.axis,f=a.getLabels(),p=a===l,y=new Array(s);let v,T,S;for(v=0,T=s;v<T;++v)S=v+i,y[v]={[u]:p||a.parse(f[S],S),[d]:l.parse(e[S],S)};return y}parseArrayData(t,e,i,s){const{xScale:a,yScale:l}=t,u=new Array(s);let d,f,p,y;for(d=0,f=s;d<f;++d)p=d+i,y=e[p],u[d]={x:a.parse(y[0],p),y:l.parse(y[1],p)};return u}parseObjectData(t,e,i,s){const{xScale:a,yScale:l}=t,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(s);let p,y,v,T;for(p=0,y=s;p<y;++p)v=p+i,T=e[v],f[p]={x:a.parse(ed(T,u),v),y:l.parse(ed(T,d),v)};return f}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,a=this._cachedMeta,l=e[t.axis],u={keys:qN(s,!0),values:e._stacks[t.axis]._visualValues};return TA(u,l,a.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const a=i[e.axis];let l=a===null?NaN:a;const u=s&&i._stacks[e.axis];s&&u&&(s.values=u,l=TA(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&t===i.iScale,l=s.length,u=this._getOtherScale(t),d=tB(e,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:y}=Kz(u);let v,T;function S(){T=s[v];const N=T[u.axis];return!ki(T[t.axis])||p>N||y<N}for(v=0;v<l&&!(!S()&&(this.updateRangeFromParsed(f,t,T,d),a));++v);if(a){for(v=l-1;v>=0;--v)if(!S()){this.updateRangeFromParsed(f,t,T,d);break}}return f}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=e.length;s<a;++s)l=e[s][t.axis],ki(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Yz(ie(this.options.clip,Gz(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],a=e.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||s.length-u,f=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,a,u,d),p=u;p<u+d;++p){const y=s[p];y.hidden||(y.active&&f?l.push(y):y.draw(t,a))}for(p=0;p<l.length;++p)l[p].draw(t,a)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=Jz(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=Zz(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",a=this._cachedDataOpts,l=t+"-"+e,u=a[l],d=this.enableOptionSharing&&wg(i);if(u)return CA(u,d);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,t),y=s?[`${t}Hover`,"hover",t,""]:[t,""],v=f.getOptionScopes(this.getDataset(),p),T=Object.keys(Be.elements[t]),S=()=>this.getContext(i,s,e),N=f.resolveNamedOptions(v,T,S,y);return N.$shared&&(N.$shared=d,a[l]=Object.freeze(CA(N,d))),N}_resolveAnimations(t,e,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${e}`,u=a[l];if(u)return u;let d;if(s.options.animation!==!1){const p=this.chart.config,y=p.datasetAnimationScopeKeys(this._type,e),v=p.getOptionScopes(this.getDataset(),y);d=p.createResolver(v,this.getContext(t,i,e))}const f=new HN(s,d&&d.animations);return d&&d._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||n0(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(e,a)||a!==s;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:l}}updateElement(t,e,i,s){n0(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!n0(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const a=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const s=i.length,a=e.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,e,i=!0){const s=this._cachedMeta,a=s.data,l=t+e;let u;const d=f=>{for(f.length+=e,u=f.length-1;u>=l;u--)f[u]=f[u-e]};for(d(a),u=t;u<l;++u)a[u]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Zu(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function eB(n,t,e){let i=1,s=1,a=0,l=0;if(t<Xe){const u=n,d=u+t,f=Math.cos(u),p=Math.sin(u),y=Math.cos(d),v=Math.sin(d),T=(G,J,H)=>Sg(G,u,d,!0)?1:Math.max(J,J*e,H,H*e),S=(G,J,H)=>Sg(G,u,d,!0)?-1:Math.min(J,J*e,H,H*e),N=T(0,f,y),C=T(rn,p,v),L=S(pe,f,y),q=S(pe+rn,p,v);i=(N-L)/2,s=(C-q)/2,a=-(N+L)/2,l=-(C+q)/2}return{ratioX:i,ratioY:s,offsetX:a,offsetY:l}}class nB extends WN{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((a,l)=>{const d=t.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:s,lineWidth:d.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let a=d=>+i[d];if(Xt(i[t])){const{key:d="value"}=this._parsing;a=f=>+ed(i[f],d)}let l,u;for(l=t,u=t+e;l<u;++l)s._parsed[l]=a(l)}}_getRotation(){return lr(this.options.rotation-90)}_getCircumference(){return lr(this.options.circumference)}_getRotationExtents(){let t=Xe,e=-Xe;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),l=s._getCircumference();t=Math.min(t,a),e=Math.max(e,a+l)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,a=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),d=Math.min(VF(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:p,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:T,offsetX:S,offsetY:N}=eB(y,p,d),C=(i.width-l)/v,L=(i.height-l)/T,q=Math.max(Math.min(C,L)/2,0),G=SN(this.options.radius,q),J=Math.max(G*d,0),H=(G-J)/this._getVisibleDatasetWeightTotal();this.offsetX=S*G,this.offsetY=N*G,s.total=this.calculateTotal(),this.outerRadius=G-H*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-H*f,0),this.updateElements(a,0,a.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*a/Xe)}updateElements(t,e,i,s){const a=s==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,p=(u.left+u.right)/2,y=(u.top+u.bottom)/2,v=a&&f.animateScale,T=v?0:this.innerRadius,S=v?0:this.outerRadius,{sharedOptions:N,includeOptions:C}=this._getSharedOptions(e,s);let L=this._getRotation(),q;for(q=0;q<e;++q)L+=this._circumference(q,a);for(q=e;q<e+i;++q){const G=this._circumference(q,a),J=t[q],H={x:p+this.offsetX,y:y+this.offsetY,startAngle:L,endAngle:L+G,circumference:G,outerRadius:S,innerRadius:T};C&&(H.options=N||this.resolveDataElementOptions(q,J.active?"active":s)),L+=G,this.updateElement(J,q,H,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const a=t._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Xe*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=iw(e._parsed[t],i.options.locale);return{label:s[t]||"",value:a}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,a,l,u,d;if(!t){for(s=0,a=i.data.datasets.length;s<a;++s)if(i.isDatasetVisible(s)){l=i.getDatasetMeta(s),t=l.data,u=l.controller;break}}if(!t)return 0;for(s=0,a=t.length;s<a;++s)d=u.resolveDataElementOptions(s),d.borderAlign!=="inner"&&(e=Math.max(e,d.borderWidth||0,d.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const a=this.resolveDataElementOptions(i);e=Math.max(e,a.offset||0,a.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(ie(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class iB extends nB{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function po(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dw{static override(t){Object.assign(dw.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return po()}parse(){return po()}format(){return po()}add(){return po()}diff(){return po()}startOf(){return po()}endOf(){return po()}}var sB={_date:dw};function rB(n,t,e,i){const{controller:s,data:a,_sorted:l}=n,u=s._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&l&&a.length){const f=u._reversePixels?XF:ev;if(i){if(s._sharedOptions){const p=a[0],y=typeof p.getRange=="function"&&p.getRange(t);if(y){const v=f(a,t,e-y),T=f(a,t,e+y);return{lo:v.lo,hi:T.hi}}}}else{const p=f(a,t,e);if(d){const{vScale:y}=s._cachedMeta,{_parsed:v}=n,T=v.slice(0,p.lo+1).reverse().findIndex(N=>!Ne(N[y.axis]));p.lo-=Math.max(0,T);const S=v.slice(p.hi).findIndex(N=>!Ne(N[y.axis]));p.hi+=Math.max(0,S)}return p}}return{lo:0,hi:a.length-1}}function yp(n,t,e,i,s){const a=n.getSortedVisibleDatasetMetas(),l=e[t];for(let u=0,d=a.length;u<d;++u){const{index:f,data:p}=a[u],{lo:y,hi:v}=rB(a[u],t,l,s);for(let T=y;T<=v;++T){const S=p[T];S.skip||i(S,f,T)}}}function aB(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const a=t?Math.abs(i.x-s.x):0,l=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function i0(n,t,e,i,s){const a=[];return!s&&!n.isPointInArea(t)||yp(n,e,t,function(u,d,f){!s&&!PN(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&a.push({element:u,datasetIndex:d,index:f})},!0),a}function oB(n,t,e,i){let s=[];function a(l,u,d){const{startAngle:f,endAngle:p}=l.getProps(["startAngle","endAngle"],i),{angle:y}=RN(l,{x:t.x,y:t.y});Sg(y,f,p)&&s.push({element:l,datasetIndex:u,index:d})}return yp(n,e,t,a),s}function lB(n,t,e,i,s,a){let l=[];const u=aB(e);let d=Number.POSITIVE_INFINITY;function f(p,y,v){const T=p.inRange(t.x,t.y,s);if(i&&!T)return;const S=p.getCenterPoint(s);if(!(!!a||n.isPointInArea(S))&&!T)return;const C=u(t,S);C<d?(l=[{element:p,datasetIndex:y,index:v}],d=C):C===d&&l.push({element:p,datasetIndex:y,index:v})}return yp(n,e,t,f),l}function s0(n,t,e,i,s,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!i?oB(n,t,e,s):lB(n,t,e,i,s,a)}function RA(n,t,e,i,s){const a=[],l=e==="x"?"inXRange":"inYRange";let u=!1;return yp(n,e,t,(d,f,p)=>{d[l]&&d[l](t[e],s)&&(a.push({element:d,datasetIndex:f,index:p}),u=u||d.inRange(t.x,t.y,s))}),i&&!u?[]:a}var cB={modes:{index(n,t,e,i){const s=vo(t,n),a=e.axis||"x",l=e.includeInvisible||!1,u=e.intersect?i0(n,s,a,i,l):s0(n,s,a,!1,i,l),d=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const p=u[0].index,y=f.data[p];y&&!y.skip&&d.push({element:y,datasetIndex:f.index,index:p})}),d):[]},dataset(n,t,e,i){const s=vo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;let u=e.intersect?i0(n,s,a,i,l):s0(n,s,a,!1,i,l);if(u.length>0){const d=u[0].datasetIndex,f=n.getDatasetMeta(d).data;u=[];for(let p=0;p<f.length;++p)u.push({element:f[p],datasetIndex:d,index:p})}return u},point(n,t,e,i){const s=vo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return i0(n,s,a,i,l)},nearest(n,t,e,i){const s=vo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return s0(n,s,a,e.intersect,i,l)},x(n,t,e,i){const s=vo(t,n);return RA(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=vo(t,n);return RA(n,s,"y",e.intersect,i)}}};const GN=["left","top","right","bottom"];function Ju(n,t){return n.filter(e=>e.pos===t)}function IA(n,t){return n.filter(e=>GN.indexOf(e.pos)===-1&&e.box.axis===t)}function th(n,t){return n.sort((e,i)=>{const s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function uB(n){const t=[];let e,i,s,a,l,u;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:a,options:{stack:l,stackWeight:u=1}}=s,t.push({index:e,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&a+l,stackWeight:u});return t}function hB(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:a}=e;if(!i||!GN.includes(s))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function dB(n,t){const e=hB(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let a,l,u;for(a=0,l=n.length;a<l;++a){u=n[a];const{fullSize:d}=u.box,f=e[u.stack],p=f&&u.stackWeight/f.weight;u.horizontal?(u.width=p?p*i:d&&t.availableWidth,u.height=s):(u.width=i,u.height=p?p*s:d&&t.availableHeight)}return e}function fB(n){const t=uB(n),e=th(t.filter(f=>f.box.fullSize),!0),i=th(Ju(t,"left"),!0),s=th(Ju(t,"right")),a=th(Ju(t,"top"),!0),l=th(Ju(t,"bottom")),u=IA(t,"x"),d=IA(t,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:s.concat(d).concat(l).concat(u),chartArea:Ju(t,"chartArea"),vertical:i.concat(s).concat(d),horizontal:a.concat(l).concat(u)}}function NA(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function YN(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function mB(n,t,e,i){const{pos:s,box:a}=e,l=n.maxPadding;if(!Xt(s)){e.size&&(n[s]-=e.size);const y=i[e.stack]||{size:0,count:1};y.size=Math.max(y.size,e.horizontal?a.height:a.width),e.size=y.size/y.count,n[s]+=e.size}a.getPadding&&YN(l,a.getPadding());const u=Math.max(0,t.outerWidth-NA(l,n,"left","right")),d=Math.max(0,t.outerHeight-NA(l,n,"top","bottom")),f=u!==n.w,p=d!==n.h;return n.w=u,n.h=d,e.horizontal?{same:f,other:p}:{same:p,other:f}}function gB(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function pB(n,t){const e=t.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{a[l]=Math.max(t[l],e[l])}),a}return i(n?["left","right"]:["top","bottom"])}function fh(n,t,e,i){const s=[];let a,l,u,d,f,p;for(a=0,l=n.length,f=0;a<l;++a){u=n[a],d=u.box,d.update(u.width||t.w,u.height||t.h,pB(u.horizontal,t));const{same:y,other:v}=mB(t,e,u,i);f|=y&&s.length,p=p||v,d.fullSize||s.push(u)}return f&&fh(s,t,e,i)||p}function fm(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function kA(n,t,e,i){const s=e.padding;let{x:a,y:l}=t;for(const u of n){const d=u.box,f=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/f.weight||1;if(u.horizontal){const y=t.w*p,v=f.size||d.height;wg(f.start)&&(l=f.start),d.fullSize?fm(d,s.left,l,e.outerWidth-s.right-s.left,v):fm(d,t.left+f.placed,l,y,v),f.start=l,f.placed+=y,l=d.bottom}else{const y=t.h*p,v=f.size||d.width;wg(f.start)&&(a=f.start),d.fullSize?fm(d,a,s.top,v,e.outerHeight-s.bottom-s.top):fm(d,a,t.top+f.placed,v,y),f.start=a,f.placed+=y,a=d.right}}t.x=a,t.y=l}var Ii={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Mi(n.options.layout.padding),a=Math.max(t-s.width,0),l=Math.max(e-s.height,0),u=fB(n.boxes),d=u.vertical,f=u.horizontal;le(n.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const p=d.reduce((N,C)=>C.box.options&&C.box.options.display===!1?N:N+1,0)||1,y=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/p,hBoxMaxHeight:l/2}),v=Object.assign({},s);YN(v,Mi(i));const T=Object.assign({maxPadding:v,w:a,h:l,x:s.left,y:s.top},s),S=dB(d.concat(f),y);fh(u.fullSize,T,y,S),fh(d,T,y,S),fh(f,T,y,S)&&fh(d,T,y,S),gB(T),kA(u.leftAndTop,T,y,S),T.x+=T.w,T.y+=T.h,kA(u.rightAndBottom,T,y,S),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},le(u.chartArea,N=>{const C=N.box;Object.assign(C,n.chartArea),C.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class $N{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class _B extends $N{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Pm="$chartjs",yB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},MA=n=>n===null||n==="";function vB(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Pm]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",MA(s)){const a=wA(n,"width");a!==void 0&&(n.width=a)}if(MA(i))if(n.style.height==="")n.height=n.width/(t||2);else{const a=wA(n,"height");a!==void 0&&(n.height=a)}return n}const QN=Lz?{passive:!0}:!1;function bB(n,t,e){n&&n.addEventListener(t,e,QN)}function wB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,QN)}function EB(n,t){const e=yB[n.type]||n.type,{x:i,y:s}=vo(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Rg(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function xB(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||Rg(u.addedNodes,i),l=l&&!Rg(u.removedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function TB(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||Rg(u.removedNodes,i),l=l&&!Rg(u.addedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const id=new Map;let DA=0;function KN(){const n=window.devicePixelRatio;n!==DA&&(DA=n,id.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function SB(n,t){id.size||window.addEventListener("resize",KN),id.set(n,t)}function AB(n){id.delete(n),id.size||window.removeEventListener("resize",KN)}function CB(n,t,e){const i=n.canvas,s=i&&hw(i);if(!s)return;const a=kN((u,d)=>{const f=s.clientWidth;e(u,d),f<s.clientWidth&&e()},window),l=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,p=d.contentRect.height;f===0&&p===0||a(f,p)});return l.observe(s),SB(n,a),l}function r0(n,t,e){e&&e.disconnect(),t==="resize"&&AB(n)}function RB(n,t,e){const i=n.canvas,s=kN(a=>{n.ctx!==null&&e(EB(a,n))},n);return bB(i,t,s),s}class IB extends $N{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(vB(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Pm])return!1;const i=e[Pm].initial;["height","width"].forEach(a=>{const l=i[a];Ne(l)?e.removeAttribute(a):e.setAttribute(a,l)});const s=i.style||{};return Object.keys(s).forEach(a=>{e.style[a]=s[a]}),e.width=e.width,delete e[Pm],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),l={attach:xB,detach:TB,resize:CB}[e]||RB;s[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:r0,detach:r0,resize:r0}[e]||wB)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return Pz(t,e,i,s)}isAttached(t){const e=t&&hw(t);return!!(e&&e.isConnected)}}function NB(n){return!uw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?_B:IB}class Ko{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Tg(this.x)&&Tg(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}}function kB(n,t){const e=n.options.ticks,i=MB(n),s=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?OB(t):[],l=a.length,u=a[0],d=a[l-1],f=[];if(l>s)return PB(t,f,a,l/s),f;const p=DB(a,t,s);if(l>0){let y,v;const T=l>1?Math.round((d-u)/(l-1)):null;for(mm(t,f,p,Ne(T)?0:u-T,u),y=0,v=l-1;y<v;y++)mm(t,f,p,a[y],a[y+1]);return mm(t,f,p,d,Ne(T)?t.length:d+T),f}return mm(t,f,p),f}function MB(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function DB(n,t,e){const i=LB(n),s=t.length/e;if(!i)return Math.max(s,1);const a=qF(i);for(let l=0,u=a.length-1;l<u;l++){const d=a[l];if(d>s)return d}return Math.max(s,1)}function OB(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function PB(n,t,e,i){let s=0,a=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(t.push(n[l]),s++,a=e[s*i])}function mm(n,t,e,i,s){const a=ie(i,0),l=Math.min(ie(s,n.length),n.length);let u=0,d,f,p;for(e=Math.ceil(e),s&&(d=s-i,e=d/Math.floor(d/e)),p=a;p<0;)u++,p=Math.round(a+u*e);for(f=Math.max(a,0);f<l;f++)f===p&&(t.push(n[f]),u++,p=Math.round(a+u*e))}function LB(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const VB=n=>n==="left"?"right":n==="right"?"left":n,OA=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,PA=(n,t)=>Math.min(t||n,n);function LA(n,t){const e=[],i=n.length/t,s=n.length;let a=0;for(;a<s;a+=i)e.push(n[Math.floor(a)]);return e}function jB(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),a=n._startPixel,l=n._endPixel,u=1e-6;let d=n.getPixelForTick(s),f;if(!(e&&(i===1?f=Math.max(d-a,l-d):t===0?f=(n.getPixelForTick(1)-d)/2:f=(d-n.getPixelForTick(s-1))/2,d+=s<t?f:-f,d<a-u||d>l+u)))return d}function UB(n,t){le(n,e=>{const i=e.gc,s=i.length/2;let a;if(s>t){for(a=0;a<s;++a)delete e.data[i[a]];i.splice(0,s)}})}function eh(n){return n.drawTicks?n.tickLength:0}function VA(n,t){if(!n.display)return 0;const e=Ln(n.font,t),i=Mi(n.padding);return(pn(n.text)?n.text.length:1)*e.lineHeight+i.height}function FB(n,t){return Lc(n,{scale:t,type:"scale"})}function zB(n,t,e){return Lc(n,{tick:e,index:t,type:"tick"})}function BB(n,t,e){let i=nw(n);return(e&&t!=="right"||!e&&t==="right")&&(i=VB(i)),i}function HB(n,t,e,i){const{top:s,left:a,bottom:l,right:u,chart:d}=n,{chartArea:f,scales:p}=d;let y=0,v,T,S;const N=l-s,C=u-a;if(n.isHorizontal()){if(T=Dn(i,a,u),Xt(e)){const L=Object.keys(e)[0],q=e[L];S=p[L].getPixelForValue(q)+N-t}else e==="center"?S=(f.bottom+f.top)/2+N-t:S=OA(n,e,t);v=u-a}else{if(Xt(e)){const L=Object.keys(e)[0],q=e[L];T=p[L].getPixelForValue(q)-C+t}else e==="center"?T=(f.left+f.right)/2-C+t:T=OA(n,e,t);S=Dn(i,l,s),y=e==="left"?-rn:rn}return{titleX:T,titleY:S,maxWidth:v,rotation:y}}class Vc extends Ko{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=us(t,Number.POSITIVE_INFINITY),e=us(e,Number.NEGATIVE_INFINITY),i=us(i,Number.POSITIVE_INFINITY),s=us(s,Number.NEGATIVE_INFINITY),{min:us(t,i),max:us(e,s),minDefined:ki(t),maxDefined:ki(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),l;if(s&&a)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)l=u[d].controller.getMinMax(this,t),s||(e=Math.min(e,l.min)),a||(i=Math.max(i,l.max));return e=a&&e>i?i:e,i=s&&e>i?e:i,{min:us(e,us(i,e)),max:us(i,us(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xe(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:a,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bz(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?LA(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=kB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xe(this.options.afterUpdate,[this])}beforeSetDimensions(){xe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),xe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,a;for(i=0,s=t.length;i<s;i++)a=t[i],a.label=xe(e.callback,[a.value,i,t],this)}afterTickToLabelConversion(){xe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=PA(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,a=e.maxRotation;let l=s,u,d,f;if(!this._isVisible()||!e.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const p=this._getLabelSizes(),y=p.widest.width,v=p.highest.height,T=Zn(this.chart.width-y,0,this.maxWidth);u=t.offset?this.maxWidth/i:T/(i-1),y+6>u&&(u=T/(i-(t.offset?.5:1)),d=this.maxHeight-eh(t.grid)-e.padding-VA(t.title,this.chart.options.font),f=Math.sqrt(y*y+v*v),l=$F(Math.min(Math.asin(Zn((p.highest.height+6)/u,-1,1)),Math.asin(Zn(d/f,-1,1))-Math.asin(Zn(v/f,-1,1)))),l=Math.max(s,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){xe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:a}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=VA(s,e.options.font);if(u?(t.width=this.maxWidth,t.height=eh(a)+d):(t.height=this.maxHeight,t.width=eh(a)+d),i.display&&this.ticks.length){const{first:f,last:p,widest:y,highest:v}=this._getLabelSizes(),T=i.padding*2,S=lr(this.labelRotation),N=Math.cos(S),C=Math.sin(S);if(u){const L=i.mirror?0:C*y.width+N*v.height;t.height=Math.min(this.maxHeight,t.height+L+T)}else{const L=i.mirror?0:N*y.width+C*v.height;t.width=Math.min(this.maxWidth,t.width+L+T)}this._calculatePadding(f,p,C,N)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:a,padding:l},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,T=0;d?f?(v=s*t.width,T=i*e.height):(v=i*t.height,T=s*e.width):a==="start"?T=e.width:a==="end"?v=t.width:a!=="inner"&&(v=t.width/2,T=e.width/2),this.paddingLeft=Math.max((v-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((T-y+l)*this.width/(this.width-y),0)}else{let p=e.height/2,y=t.height/2;a==="start"?(p=0,y=t.height):a==="end"&&(p=e.height,y=0),this.paddingTop=p+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Ne(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=LA(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:a}=this,l=[],u=[],d=Math.floor(e/PA(e,i));let f=0,p=0,y,v,T,S,N,C,L,q,G,J,H;for(y=0;y<e;y+=d){if(S=t[y].label,N=this._resolveTickFontOptions(y),s.font=C=N.string,L=a[C]=a[C]||{data:{},gc:[]},q=N.lineHeight,G=J=0,!Ne(S)&&!pn(S))G=gA(s,L.data,L.gc,G,S),J=q;else if(pn(S))for(v=0,T=S.length;v<T;++v)H=S[v],!Ne(H)&&!pn(H)&&(G=gA(s,L.data,L.gc,G,H),J+=q);l.push(G),u.push(J),f=Math.max(G,f),p=Math.max(J,p)}UB(a,e);const ct=l.indexOf(f),M=u.indexOf(p),I=k=>({width:l[k]||0,height:u[k]||0});return{first:I(0),last:I(e-1),widest:I(ct),highest:I(M),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return KF(this._alignToPixels?go(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=zB(this.getContext(),t,i))}return this.$context||(this.$context=FB(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=lr(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,u=a?a.widest.width+l:0,d=a?a.highest.height+l:0;return this.isHorizontal()?d*i>u*s?u/i:d/s:d*s<u*i?d/i:u/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:a,position:l,border:u}=s,d=a.offset,f=this.isHorizontal(),y=this.ticks.length+(d?1:0),v=eh(a),T=[],S=u.setContext(this.getContext()),N=S.display?S.width:0,C=N/2,L=function(Q){return go(i,Q,N)};let q,G,J,H,ct,M,I,k,O,V,j,D;if(l==="top")q=L(this.bottom),M=this.bottom-v,k=q-C,V=L(t.top)+C,D=t.bottom;else if(l==="bottom")q=L(this.top),V=t.top,D=L(t.bottom)-C,M=q+C,k=this.top+v;else if(l==="left")q=L(this.right),ct=this.right-v,I=q-C,O=L(t.left)+C,j=t.right;else if(l==="right")q=L(this.left),O=t.left,j=L(t.right)-C,ct=q+C,I=this.left+v;else if(e==="x"){if(l==="center")q=L((t.top+t.bottom)/2+.5);else if(Xt(l)){const Q=Object.keys(l)[0],ot=l[Q];q=L(this.chart.scales[Q].getPixelForValue(ot))}V=t.top,D=t.bottom,M=q+C,k=M+v}else if(e==="y"){if(l==="center")q=L((t.left+t.right)/2);else if(Xt(l)){const Q=Object.keys(l)[0],ot=l[Q];q=L(this.chart.scales[Q].getPixelForValue(ot))}ct=q-C,I=ct-v,O=t.left,j=t.right}const Bt=ie(s.ticks.maxTicksLimit,y),bt=Math.max(1,Math.ceil(y/Bt));for(G=0;G<y;G+=bt){const Q=this.getContext(G),ot=a.setContext(Q),lt=u.setContext(Q),gt=ot.lineWidth,U=ot.color,it=lt.dash||[],ht=lt.dashOffset,ut=ot.tickWidth,yt=ot.tickColor,It=ot.tickBorderDash||[],st=ot.tickBorderDashOffset;J=jB(this,G,d),J!==void 0&&(H=go(i,J,gt),f?ct=I=O=j=H:M=k=V=D=H,T.push({tx1:ct,ty1:M,tx2:I,ty2:k,x1:O,y1:V,x2:j,y2:D,width:gt,color:U,borderDash:it,borderDashOffset:ht,tickWidth:ut,tickColor:yt,tickBorderDash:It,tickBorderDashOffset:st}))}return this._ticksLength=y,this._borderValue=q,T}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:a}=i,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:p,mirror:y}=a,v=eh(i.grid),T=v+p,S=y?-p:T,N=-lr(this.labelRotation),C=[];let L,q,G,J,H,ct,M,I,k,O,V,j,D="middle";if(s==="top")ct=this.bottom-S,M=this._getXAxisLabelAlignment();else if(s==="bottom")ct=this.top+S,M=this._getXAxisLabelAlignment();else if(s==="left"){const bt=this._getYAxisLabelAlignment(v);M=bt.textAlign,H=bt.x}else if(s==="right"){const bt=this._getYAxisLabelAlignment(v);M=bt.textAlign,H=bt.x}else if(e==="x"){if(s==="center")ct=(t.top+t.bottom)/2+T;else if(Xt(s)){const bt=Object.keys(s)[0],Q=s[bt];ct=this.chart.scales[bt].getPixelForValue(Q)+T}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")H=(t.left+t.right)/2-T;else if(Xt(s)){const bt=Object.keys(s)[0],Q=s[bt];H=this.chart.scales[bt].getPixelForValue(Q)}M=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(d==="start"?D="top":d==="end"&&(D="bottom"));const Bt=this._getLabelSizes();for(L=0,q=u.length;L<q;++L){G=u[L],J=G.label;const bt=a.setContext(this.getContext(L));I=this.getPixelForTick(L)+a.labelOffset,k=this._resolveTickFontOptions(L),O=k.lineHeight,V=pn(J)?J.length:1;const Q=V/2,ot=bt.color,lt=bt.textStrokeColor,gt=bt.textStrokeWidth;let U=M;l?(H=I,M==="inner"&&(L===q-1?U=this.options.reverse?"left":"right":L===0?U=this.options.reverse?"right":"left":U="center"),s==="top"?f==="near"||N!==0?j=-V*O+O/2:f==="center"?j=-Bt.highest.height/2-Q*O+O:j=-Bt.highest.height+O/2:f==="near"||N!==0?j=O/2:f==="center"?j=Bt.highest.height/2-Q*O:j=Bt.highest.height-V*O,y&&(j*=-1),N!==0&&!bt.showLabelBackdrop&&(H+=O/2*Math.sin(N))):(ct=I,j=(1-V)*O/2);let it;if(bt.showLabelBackdrop){const ht=Mi(bt.backdropPadding),ut=Bt.heights[L],yt=Bt.widths[L];let It=j-ht.top,st=0-ht.left;switch(D){case"middle":It-=ut/2;break;case"bottom":It-=ut;break}switch(M){case"center":st-=yt/2;break;case"right":st-=yt;break;case"inner":L===q-1?st-=yt:L>0&&(st-=yt/2);break}it={left:st,top:It,width:yt+ht.width,height:ut+ht.height,color:bt.backdropColor}}C.push({label:J,font:k,textOffset:j,options:{rotation:N,color:ot,strokeColor:lt,strokeWidth:gt,textAlign:U,textBaseline:D,translation:[H,ct],backdrop:it}})}return C}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-lr(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,l=this._getLabelSizes(),u=t+a,d=l.widest.width;let f,p;return e==="left"?s?(p=this.right+a,i==="near"?f="left":i==="center"?(f="center",p+=d/2):(f="right",p+=d)):(p=this.right-u,i==="near"?f="right":i==="center"?(f="center",p-=d/2):(f="left",p=this.left)):e==="right"?s?(p=this.left+a,i==="near"?f="right":i==="center"?(f="center",p-=d/2):(f="left",p-=d)):(p=this.left+u,i==="near"?f="left":i==="center"?(f="center",p+=d/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:a,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,a,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(a=>a.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const u=(d,f,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(e.display)for(a=0,l=s.length;a<l;++a){const d=s[a];e.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const u=s.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,p,y,v;this.isHorizontal()?(f=go(t,this.left,l)-l/2,p=go(t,this.right,u)+u/2,y=v=d):(y=go(t,this.top,l)-l/2,v=go(t,this.bottom,u)+u/2,f=p=d),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(f,y),e.lineTo(p,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&sw(i,s);const a=this.getLabelItems(t);for(const l of a){const u=l.options,d=l.font,f=l.label,p=l.textOffset;nd(i,f,0,p,d,u)}s&&rw(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const a=Ln(i.font),l=Mi(i.padding),u=i.align;let d=a.lineHeight/2;e==="bottom"||e==="center"||Xt(e)?(d+=l.bottom,pn(i.text)&&(d+=a.lineHeight*(i.text.length-1))):d+=l.top;const{titleX:f,titleY:p,maxWidth:y,rotation:v}=HB(this,d,e,u);nd(t,i.text,0,0,a,{color:i.color,maxWidth:y,rotation:v,textAlign:BB(u,e,s),textBaseline:"middle",translation:[f,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=ie(t.grid&&t.grid.z,-1),s=ie(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Vc.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,l;for(a=0,l=e.length;a<l;++a){const u=e[a];u[i]===this.id&&(!t||u.type===t)&&s.push(u)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ln(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class gm{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;GB(e)&&(i=this.register(e));const s=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in s||(s[a]=t,qB(t,l,i),this.override&&Be.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Be[s]&&(delete Be[s][i],this.override&&delete Bo[i])}}function qB(n,t,e){const i=td(Object.create(null),[e?Be.get(e):{},Be.get(t),n.defaults]);Be.set(t,i),n.defaultRoutes&&WB(t,n.defaultRoutes),n.descriptors&&Be.describe(t,n.descriptors)}function WB(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),a=[n].concat(i).join("."),l=t[e].split("."),u=l.pop(),d=l.join(".");Be.route(a,s,d,u)})}function GB(n){return"id"in n&&"defaults"in n}class YB{constructor(){this.controllers=new gm(WN,"datasets",!0),this.elements=new gm(Ko,"elements"),this.plugins=new gm(Object,"plugins"),this.scales=new gm(Vc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(t,a,s):le(s,l=>{const u=i||this._getRegistryForType(l);this._exec(t,u,l)})})}_exec(t,e,i){const s=tw(t);xe(i["before"+s],[],i),e[t](i),xe(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var ds=new YB;class $B{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=s?this._descriptors(t).filter(s):this._descriptors(t),l=this._notify(a,t,e,i);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),l}_notify(t,e,i,s){s=s||{};for(const a of t){const l=a.plugin,u=l[i],d=[e,s,a.options];if(xe(u,d,l)===!1&&s.cancelable)return!1}return!0}invalidate(){Ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=ie(i.options&&i.options.plugins,{}),a=QB(i);return s===!1&&!e?[]:XB(t,a,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(a,l)=>a.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function QB(n){const t={},e=[],i=Object.keys(ds.plugins.items);for(let a=0;a<i.length;a++)e.push(ds.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const l=s[a];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function KB(n,t){return!t&&n===!1?null:n===!0?{}:n}function XB(n,{plugins:t,localIds:e},i,s){const a=[],l=n.getContext();for(const u of t){const d=u.id,f=KB(i[d],s);f!==null&&a.push({plugin:u,options:ZB(n.config,{plugin:u,local:e[d]},f,l)})}return a}function ZB(n,{plugin:t,local:e},i,s){const a=n.pluginScopeKeys(t),l=n.getOptionScopes(i,a);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function iv(n,t){const e=Be.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function JB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function t8(n,t){return n===t?"_index_":"_value_"}function jA(n){if(n==="x"||n==="y"||n==="r")return n}function e8(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function sv(n,...t){if(jA(n))return n;for(const e of t){const i=e.axis||e8(e.position)||n.length>1&&jA(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function UA(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function n8(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return UA(n,"x",e[0])||UA(n,"y",e[0])}return{}}function i8(n,t){const e=Bo[n.type]||{scales:{}},i=t.scales||{},s=iv(n.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Xt(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=sv(l,u,n8(l,n),Be.scales[u.type]),f=t8(d,s),p=e.scales||{};a[l]=Ch(Object.create(null),[{axis:d},u,p[d],p[f]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,d=l.indexAxis||iv(u,t),p=(Bo[u]||{}).scales||{};Object.keys(p).forEach(y=>{const v=JB(y,d),T=l[v+"AxisID"]||v;a[T]=a[T]||Object.create(null),Ch(a[T],[{axis:v},i[T],p[y]])})}),Object.keys(a).forEach(l=>{const u=a[l];Ch(u,[Be.scales[u.type],Be.scale])}),a}function XN(n){const t=n.options||(n.options={});t.plugins=ie(t.plugins,{}),t.scales=i8(n,t)}function ZN(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function s8(n){return n=n||{},n.data=ZN(n.data),XN(n),n}const FA=new Map,JN=new Set;function pm(n,t){let e=FA.get(n);return e||(e=t(),FA.set(n,e),JN.add(e)),e}const nh=(n,t,e)=>{const i=ed(t,e);i!==void 0&&n.add(i)};class r8{constructor(t){this._config=s8(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ZN(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),XN(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return pm(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return pm(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return pm(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return pm(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:a}=this,l=this._cachedScopes(t,i),u=l.get(e);if(u)return u;const d=new Set;e.forEach(p=>{t&&(d.add(t),p.forEach(y=>nh(d,t,y))),p.forEach(y=>nh(d,s,y)),p.forEach(y=>nh(d,Bo[a]||{},y)),p.forEach(y=>nh(d,Be,y)),p.forEach(y=>nh(d,nv,y))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),JN.has(e)&&l.set(e,f),f}chartOptionScopes(){const{options:t,type:e}=this;return[t,Bo[e]||{},Be.datasets[e]||{},{type:e},Be,nv]}resolveNamedOptions(t,e,i,s=[""]){const a={$shared:!0},{resolver:l,subPrefixes:u}=zA(this._resolverCache,t,s);let d=l;if(o8(l,e)){a.$shared=!1,i=Sa(i)?i():i;const f=this.createResolver(t,i,u);d=wc(l,i,f)}for(const f of e)a[f]=d[f];return a}createResolver(t,e,i=[""],s){const{resolver:a}=zA(this._resolverCache,t,i);return Xt(e)?wc(a,e,void 0,s):a}}function zA(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let a=i.get(s);return a||(a={resolver:ow(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(s,a)),a}const a8=n=>Xt(n)&&Object.getOwnPropertyNames(n).some(t=>Sa(n[t]));function o8(n,t){const{isScriptable:e,isIndexable:i}=VN(n);for(const s of t){const a=e(s),l=i(s),u=(l||a)&&n[s];if(a&&(Sa(u)||a8(u))||l&&pn(u))return!0}return!1}var l8="4.5.0";const c8=["top","bottom","left","right","chartArea"];function BA(n,t){return n==="top"||n==="bottom"||c8.indexOf(n)===-1&&t==="x"}function HA(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function qA(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),xe(e&&e.onComplete,[n],t)}function u8(n){const t=n.chart,e=t.options.animation;xe(e&&e.onProgress,[n],t)}function tk(n){return uw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Lm={},WA=n=>{const t=tk(n);return Object.values(Lm).filter(e=>e.canvas===t).pop()};function h8(n,t,e){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=t){const l=n[s];delete n[s],(e>0||a>t)&&(n[a+e]=l)}}}function d8(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let vp=class{static defaults=Be;static instances=Lm;static overrides=Bo;static registry=ds;static version=l8;static getChart=WA;static register(...t){ds.add(...t),GA()}static unregister(...t){ds.remove(...t),GA()}constructor(t,e){const i=this.config=new r8(e),s=tk(t),a=WA(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||NB(s)),this.platform.updateConfig(i);const u=this.platform.acquireContext(s,l.aspectRatio),d=u&&u.canvas,f=d&&d.height,p=d&&d.width;if(this.id=LF(),this.ctx=u,this.canvas=d,this.width=p,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $B,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ez(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],Lm[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}er.listen(this,"complete",qA),er.listen(this,"progress",u8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:a}=this;return Ne(t)?e&&a?a:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ds}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bA(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pA(this.canvas,this.ctx),this}stop(){return er.stop(this),this}resize(t,e){er.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,t,e,a),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,bA(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),xe(i.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};le(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let a=[];e&&(a=a.concat(Object.keys(e).map(l=>{const u=e[l],d=sv(l,u),f=d==="r",p=d==="x";return{options:u,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),le(a,l=>{const u=l.options,d=u.id,f=sv(d,u),p=ie(u.type,l.dtype);(u.position===void 0||BA(u.position,f)!==BA(l.dposition))&&(u.position=l.dposition),s[d]=!0;let y=null;if(d in i&&i[d].type===p)y=i[d];else{const v=ds.getScale(p);y=new v({id:d,type:p,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(u,t)}),le(s,(l,u)=>{l||delete i[u]}),le(i,l=>{Ii.configure(this,l,l.options),Ii.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,a)=>s.index-a.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(HA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const a=e[i];let l=this.getDatasetMeta(i);const u=a.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=a.indexAxis||iv(u,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const d=ds.getController(u),{datasetElementType:f,dataElementType:p}=Be.datasets[u];Object.assign(d,{dataElementType:ds.getElement(p),datasetElementType:f&&ds.getElement(f)}),l.controller=new d(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){le(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:y}=this.getDatasetMeta(f),v=!s&&a.indexOf(y)===-1;y.buildOrUpdateElements(v),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||le(a,f=>{f.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(HA("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){le(this.scales,t=>{Ii.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!aA(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of e){const l=i==="_removeElements"?-a:a;h8(t,s,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,u)=>u+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<e;a++)if(!aA(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ii.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],le(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Sa(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(er.has(this)?this.attached&&!er.running(this)&&er.start(this):(this.draw(),qA({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,a;for(s=0,a=e.length;s<a;++s){const l=e[s];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=Fz(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&sw(e,s),t.controller.draw(),s&&rw(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return PN(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const a=cB.modes[e];return typeof a=="function"?a(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(a=>a&&a._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Lc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,s);wg(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(u=>u.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),er.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),pA(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Lm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(a,l)=>{e.addEventListener(this,a,l),t[a]=l},s=(a,l,u)=>{a.offsetX=l,a.offsetY=u,this._eventHandler(a)};le(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,f)=>{e.addEventListener(this,d,f),t[d]=f},s=(d,f)=>{t[d]&&(e.removeEventListener(this,d,f),delete t[d])},a=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const u=()=>{s("attach",u),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():l()}unbindEvents(){le(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},le(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let a,l,u,d;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),u=0,d=t.length;u<d;++u){l=t[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const u=this.getDatasetMeta(a);if(!u)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:u.data[l],index:l}});!vg(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,a=(d,f)=>d.filter(p=>!f.some(y=>p.datasetIndex===y.datasetIndex&&p.index===y.index)),l=a(e,t),u=i?t:a(t,e);l.length&&this.updateHoverStyle(l,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:a}=this,l=e,u=this._getActiveElements(t,s,i,l),d=BF(t),f=d8(t,this._lastEvent,i,d);i&&(this._lastEvent=null,xe(a.onHover,[t,u,this],this),d&&xe(a.onClick,[t,u,this],this));const p=!vg(u,s);return(p||e)&&(this._active=u,this._updateHoverStyles(u,s,e)),this._lastEvent=f,p}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}};function GA(){return le(vp.instances,n=>n._plugins.invalidate())}function f8(n,t,e){const{startAngle:i,x:s,y:a,outerRadius:l,innerRadius:u,options:d}=t,{borderWidth:f,borderJoinStyle:p}=d,y=Math.min(f/l,ms(i-e));if(n.beginPath(),n.arc(s,a,l-f/2,i+y/2,e-y/2),u>0){const v=Math.min(f/u,ms(i-e));n.arc(s,a,u+f/2,e-v/2,i+v/2,!0)}else{const v=Math.min(f/2,l*ms(i-e));if(p==="round")n.arc(s,a,v,e-pe/2,i+pe/2,!0);else if(p==="bevel"){const T=2*v*v,S=-T*Math.cos(e+pe/2)+s,N=-T*Math.sin(e+pe/2)+a,C=T*Math.cos(i+pe/2)+s,L=T*Math.sin(i+pe/2)+a;n.lineTo(S,N),n.lineTo(C,L)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function m8(n,t,e){const{startAngle:i,pixelMargin:s,x:a,y:l,outerRadius:u,innerRadius:d}=t;let f=s/u;n.beginPath(),n.arc(a,l,u,i-f,e+f),d>s?(f=s/d,n.arc(a,l,d,e+f,i-f,!0)):n.arc(a,l,s,e+rn,i-rn),n.closePath(),n.clip()}function g8(n){return aw(n,["outerStart","outerEnd","innerStart","innerEnd"])}function p8(n,t,e,i){const s=g8(n.options.borderRadius),a=(e-t)/2,l=Math.min(a,i*t/2),u=d=>{const f=(e-Math.min(a,d))*i/2;return Zn(d,0,Math.min(a,f))};return{outerStart:u(s.outerStart),outerEnd:u(s.outerEnd),innerStart:Zn(s.innerStart,0,l),innerEnd:Zn(s.innerEnd,0,l)}}function Wl(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Ig(n,t,e,i,s,a){const{x:l,y:u,startAngle:d,pixelMargin:f,innerRadius:p}=t,y=Math.max(t.outerRadius+i+e-f,0),v=p>0?p+i+e+f:0;let T=0;const S=s-d;if(i){const bt=p>0?p-i:0,Q=y>0?y-i:0,ot=(bt+Q)/2,lt=ot!==0?S*ot/(ot+i):S;T=(S-lt)/2}const N=Math.max(.001,S*y-e/pe)/y,C=(S-N)/2,L=d+C+T,q=s-C-T,{outerStart:G,outerEnd:J,innerStart:H,innerEnd:ct}=p8(t,v,y,q-L),M=y-G,I=y-J,k=L+G/M,O=q-J/I,V=v+H,j=v+ct,D=L+H/V,Bt=q-ct/j;if(n.beginPath(),a){const bt=(k+O)/2;if(n.arc(l,u,y,k,bt),n.arc(l,u,y,bt,O),J>0){const gt=Wl(I,O,l,u);n.arc(gt.x,gt.y,J,O,q+rn)}const Q=Wl(j,q,l,u);if(n.lineTo(Q.x,Q.y),ct>0){const gt=Wl(j,Bt,l,u);n.arc(gt.x,gt.y,ct,q+rn,Bt+Math.PI)}const ot=(q-ct/v+(L+H/v))/2;if(n.arc(l,u,v,q-ct/v,ot,!0),n.arc(l,u,v,ot,L+H/v,!0),H>0){const gt=Wl(V,D,l,u);n.arc(gt.x,gt.y,H,D+Math.PI,L-rn)}const lt=Wl(M,L,l,u);if(n.lineTo(lt.x,lt.y),G>0){const gt=Wl(M,k,l,u);n.arc(gt.x,gt.y,G,L-rn,k)}}else{n.moveTo(l,u);const bt=Math.cos(k)*y+l,Q=Math.sin(k)*y+u;n.lineTo(bt,Q);const ot=Math.cos(O)*y+l,lt=Math.sin(O)*y+u;n.lineTo(ot,lt)}n.closePath()}function _8(n,t,e,i,s){const{fullCircles:a,startAngle:l,circumference:u}=t;let d=t.endAngle;if(a){Ig(n,t,e,i,d,s);for(let f=0;f<a;++f)n.fill();isNaN(u)||(d=l+(u%Xe||Xe))}return Ig(n,t,e,i,d,s),n.fill(),d}function y8(n,t,e,i,s){const{fullCircles:a,startAngle:l,circumference:u,options:d}=t,{borderWidth:f,borderJoinStyle:p,borderDash:y,borderDashOffset:v,borderRadius:T}=d,S=d.borderAlign==="inner";if(!f)return;n.setLineDash(y||[]),n.lineDashOffset=v,S?(n.lineWidth=f*2,n.lineJoin=p||"round"):(n.lineWidth=f,n.lineJoin=p||"bevel");let N=t.endAngle;if(a){Ig(n,t,e,i,N,s);for(let C=0;C<a;++C)n.stroke();isNaN(u)||(N=l+(u%Xe||Xe))}S&&m8(n,t,N),d.selfJoin&&N-l>=pe&&T===0&&p!=="miter"&&f8(n,t,N),a||(Ig(n,t,e,i,N,s),n.stroke())}class v8 extends Ko{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:a,distance:l}=RN(s,{x:t,y:e}),{startAngle:u,endAngle:d,innerRadius:f,outerRadius:p,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,T=ie(y,d-u),S=Sg(a,u,d)&&u!==d,N=T>=Xe||S,C=Io(l,f+v,p+v);return N&&C}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:a,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:d,spacing:f}=this.options,p=(s+a)/2,y=(l+u+f+d)/2;return{x:e+Math.cos(p)*y,y:i+Math.sin(p)*y}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/4,a=(e.spacing||0)/2,l=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>Xe?Math.floor(i/Xe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const u=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(u)*s,Math.sin(u)*s);const d=1-Math.sin(Math.min(pe,i||0)),f=s*d;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,_8(t,this,f,a,l),y8(t,this,f,a,l),t.restore()}}function ek(n,t){const{x:e,y:i,base:s,width:a,height:l}=n.getProps(["x","y","base","width","height"],t);let u,d,f,p,y;return n.horizontal?(y=l/2,u=Math.min(e,s),d=Math.max(e,s),f=i-y,p=i+y):(y=a/2,u=e-y,d=e+y,f=Math.min(i,s),p=Math.max(i,s)),{left:u,top:f,right:d,bottom:p}}function ra(n,t,e,i){return n?0:Zn(t,e,i)}function b8(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,a=LN(i);return{t:ra(s.top,a.top,0,e),r:ra(s.right,a.right,0,t),b:ra(s.bottom,a.bottom,0,e),l:ra(s.left,a.left,0,t)}}function w8(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,a=ac(s),l=Math.min(t,e),u=n.borderSkipped,d=i||Xt(s);return{topLeft:ra(!d||u.top||u.left,a.topLeft,0,l),topRight:ra(!d||u.top||u.right,a.topRight,0,l),bottomLeft:ra(!d||u.bottom||u.left,a.bottomLeft,0,l),bottomRight:ra(!d||u.bottom||u.right,a.bottomRight,0,l)}}function E8(n){const t=ek(n),e=t.right-t.left,i=t.bottom-t.top,s=b8(n,e/2,i/2),a=w8(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:a},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function a0(n,t,e,i){const s=t===null,a=e===null,u=n&&!(s&&a)&&ek(n,i);return u&&(s||Io(t,u.left,u.right))&&(a||Io(e,u.top,u.bottom))}function x8(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function T8(n,t){n.rect(t.x,t.y,t.w,t.h)}function o0(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,a=(n.x+n.w!==e.x+e.w?t:0)-i,l=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+a,h:n.h+l,radius:n.radius}}class S8 extends Ko{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:a,outer:l}=E8(this),u=x8(l.radius)?Ag:T8;t.save(),(l.w!==a.w||l.h!==a.h)&&(t.beginPath(),u(t,o0(l,e,a)),t.clip(),u(t,o0(a,-e,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,o0(a,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return a0(this,t,e,i)}inXRange(t,e){return a0(this,t,null,e)}inYRange(t,e){return a0(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(e+s)/2:e,y:a?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const YA=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},A8=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class $A extends Ko{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=xe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Ln(i.font),a=s.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=YA(i,a);let f,p;e.font=s.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(l,a,u,d)+10):(p=this.maxHeight,f=this._fitCols(l,s,u,d)+10),this.width=Math.min(f,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:a,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],p=s+u;let y=t;a.textAlign="left",a.textBaseline="middle";let v=-1,T=-p;return this.legendItems.forEach((S,N)=>{const C=i+e/2+a.measureText(S.text).width;(N===0||f[f.length-1]+C+2*u>l)&&(y+=p,f[f.length-(N>0?0:1)]=0,T+=p,v++),d[N]={left:0,top:T,row:v,width:C,height:s},f[f.length-1]+=C+u}),y}_fitCols(t,e,i,s){const{ctx:a,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],p=l-t;let y=u,v=0,T=0,S=0,N=0;return this.legendItems.forEach((C,L)=>{const{itemWidth:q,itemHeight:G}=C8(i,e,a,C,s);L>0&&T+G+2*u>p&&(y+=v+u,f.push({width:v,height:T}),S+=v+u,N++,v=T=0),d[L]={left:S,top:T,col:N,width:q,height:G},v=Math.max(v,q),T+=G+u}),y+=v,f.push({width:v,height:T}),y}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:a}}=this,l=oc(a,this.left,this.width);if(this.isHorizontal()){let u=0,d=Dn(i,this.left+s,this.right-this.lineWidths[u]);for(const f of e)u!==f.row&&(u=f.row,d=Dn(i,this.left+s,this.right-this.lineWidths[u])),f.top+=this.top+t+s,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+s}else{let u=0,d=Dn(i,this.top+t+s,this.bottom-this.columnSizes[u].height);for(const f of e)f.col!==u&&(u=f.col,d=Dn(i,this.top+t+s,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+s,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;sw(t,this),this._draw(),rw(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:a,labels:l}=t,u=Be.color,d=oc(t.rtl,this.left,this.width),f=Ln(l.font),{padding:p}=l,y=f.size,v=y/2;let T;this.drawTitle(),s.textAlign=d.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:S,boxHeight:N,itemHeight:C}=YA(l,y),L=function(ct,M,I){if(isNaN(S)||S<=0||isNaN(N)||N<0)return;s.save();const k=ie(I.lineWidth,1);if(s.fillStyle=ie(I.fillStyle,u),s.lineCap=ie(I.lineCap,"butt"),s.lineDashOffset=ie(I.lineDashOffset,0),s.lineJoin=ie(I.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=ie(I.strokeStyle,u),s.setLineDash(ie(I.lineDash,[])),l.usePointStyle){const O={radius:N*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:k},V=d.xPlus(ct,S/2),j=M+v;ON(s,O,V,j,l.pointStyleWidth&&S)}else{const O=M+Math.max((y-N)/2,0),V=d.leftForLtr(ct,S),j=ac(I.borderRadius);s.beginPath(),Object.values(j).some(D=>D!==0)?Ag(s,{x:V,y:O,w:S,h:N,radius:j}):s.rect(V,O,S,N),s.fill(),k!==0&&s.stroke()}s.restore()},q=function(ct,M,I){nd(s,I.text,ct,M+C/2,f,{strikethrough:I.hidden,textAlign:d.textAlign(I.textAlign)})},G=this.isHorizontal(),J=this._computeTitleHeight();G?T={x:Dn(a,this.left+p,this.right-i[0]),y:this.top+p+J,line:0}:T={x:this.left+p,y:Dn(a,this.top+J+p,this.bottom-e[0].height),line:0},zN(this.ctx,t.textDirection);const H=C+p;this.legendItems.forEach((ct,M)=>{s.strokeStyle=ct.fontColor,s.fillStyle=ct.fontColor;const I=s.measureText(ct.text).width,k=d.textAlign(ct.textAlign||(ct.textAlign=l.textAlign)),O=S+v+I;let V=T.x,j=T.y;d.setWidth(this.width),G?M>0&&V+O+p>this.right&&(j=T.y+=H,T.line++,V=T.x=Dn(a,this.left+p,this.right-i[T.line])):M>0&&j+H>this.bottom&&(V=T.x=V+e[T.line].width+p,T.line++,j=T.y=Dn(a,this.top+J+p,this.bottom-e[T.line].height));const D=d.x(V);if(L(D,j,ct),V=nz(k,V+S+v,G?V+O:this.right,t.rtl),q(d.x(V),j,ct),G)T.x+=O+p;else if(typeof ct.text!="string"){const Bt=f.lineHeight;T.y+=nk(ct,Bt)+p}else T.y+=H}),BN(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ln(e.font),s=Mi(e.padding);if(!e.display)return;const a=oc(t.rtl,this.left,this.width),l=this.ctx,u=e.position,d=i.size/2,f=s.top+d;let p,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),p=this.top+f,y=Dn(t.align,y,this.right-v);else{const S=this.columnSizes.reduce((N,C)=>Math.max(N,C.height),0);p=f+Dn(t.align,this.top,this.bottom-S-t.labels.padding-this._computeTitleHeight())}const T=Dn(u,y,y+v);l.textAlign=a.textAlign(nw(u)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,nd(l,e.text,T,p,i)}_computeTitleHeight(){const t=this.options.title,e=Ln(t.font),i=Mi(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,a;if(Io(t,this.left,this.right)&&Io(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],Io(t,s.left,s.left+s.width)&&Io(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!N8(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,a=A8(s,i);s&&!a&&xe(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!a&&xe(e.onHover,[t,i,this],this)}else i&&xe(e.onClick,[t,i,this],this)}}function C8(n,t,e,i,s){const a=R8(i,n,t,e),l=I8(s,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function R8(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,l)=>a.length>l.length?a:l)),t+e.size/2+i.measureText(s).width}function I8(n,t,e){let i=n;return typeof t.text!="string"&&(i=nk(t,e)),i}function nk(n,t){const e=n.text?n.text.length:0;return t*e}function N8(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var k8={id:"legend",_element:$A,start(n,t,e){const i=n.legend=new $A({ctx:n.ctx,options:e,chart:n});Ii.configure(n,i,e),Ii.addBox(n,i)},stop(n){Ii.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Ii.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:a,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(e?0:void 0),p=Mi(f.borderWidth);return{text:t[d.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class ik extends Ko{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=pn(i.text)?i.text.length:1;this._padding=Mi(i.padding);const a=s*Ln(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:a,options:l}=this,u=l.align;let d=0,f,p,y;return this.isHorizontal()?(p=Dn(u,i,a),y=e+t,f=a-i):(l.position==="left"?(p=i+t,y=Dn(u,s,e),d=pe*-.5):(p=a-t,y=Dn(u,e,s),d=pe*.5),f=s-e),{titleX:p,titleY:y,maxWidth:f,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ln(e.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:d,rotation:f}=this._drawArgs(a);nd(t,e.text,0,0,i,{color:e.color,maxWidth:d,rotation:f,textAlign:nw(e.align),textBaseline:"middle",translation:[l,u]})}}function M8(n,t){const e=new ik({ctx:n.ctx,options:t,chart:n});Ii.configure(n,e,t),Ii.addBox(n,e),n.titleBlock=e}var D8={id:"title",_element:ik,start(n,t,e){M8(n,e)},stop(n){const t=n.titleBlock;Ii.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Ii.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mh={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,a=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const d=u.tooltipPosition();i.add(d.x),s+=d.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((u,d)=>u+d)/i.size,y:s/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,a,l,u;for(a=0,l=n.length;a<l;++a){const d=n[a].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),p=QF(t,f);p<s&&(s=p,u=d)}}if(u){const d=u.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function hs(n,t){return t&&(pn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function nr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function O8(n,t){const{element:e,datasetIndex:i,index:s}=t,a=n.getDatasetMeta(i).controller,{label:l,value:u}=a.getLabelAndValue(s);return{chart:n,label:l,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:u,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function QA(n,t){const e=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:l,boxHeight:u}=t,d=Ln(t.bodyFont),f=Ln(t.titleFont),p=Ln(t.footerFont),y=a.length,v=s.length,T=i.length,S=Mi(t.padding);let N=S.height,C=0,L=i.reduce((J,H)=>J+H.before.length+H.lines.length+H.after.length,0);if(L+=n.beforeBody.length+n.afterBody.length,y&&(N+=y*f.lineHeight+(y-1)*t.titleSpacing+t.titleMarginBottom),L){const J=t.displayColors?Math.max(u,d.lineHeight):d.lineHeight;N+=T*J+(L-T)*d.lineHeight+(L-1)*t.bodySpacing}v&&(N+=t.footerMarginTop+v*p.lineHeight+(v-1)*t.footerSpacing);let q=0;const G=function(J){C=Math.max(C,e.measureText(J).width+q)};return e.save(),e.font=f.string,le(n.title,G),e.font=d.string,le(n.beforeBody.concat(n.afterBody),G),q=t.displayColors?l+2+t.boxPadding:0,le(i,J=>{le(J.before,G),le(J.lines,G),le(J.after,G)}),q=0,e.font=p.string,le(n.footer,G),e.restore(),C+=S.width,{width:C,height:N}}function P8(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function L8(n,t,e,i){const{x:s,width:a}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&s+a+l>t.width||n==="right"&&s-a-l<0)return!0}function V8(n,t,e,i){const{x:s,width:a}=e,{width:l,chartArea:{left:u,right:d}}=n;let f="center";return i==="center"?f=s<=(u+d)/2?"left":"right":s<=a/2?f="left":s>=l-a/2&&(f="right"),L8(f,n,t,e)&&(f="center"),f}function KA(n,t,e){const i=e.yAlign||t.yAlign||P8(n,e);return{xAlign:e.xAlign||t.xAlign||V8(n,t,e,i),yAlign:i}}function j8(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function U8(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function XA(n,t,e,i){const{caretSize:s,caretPadding:a,cornerRadius:l}=n,{xAlign:u,yAlign:d}=e,f=s+a,{topLeft:p,topRight:y,bottomLeft:v,bottomRight:T}=ac(l);let S=j8(t,u);const N=U8(t,d,f);return d==="center"?u==="left"?S+=f:u==="right"&&(S-=f):u==="left"?S-=Math.max(p,v)+s:u==="right"&&(S+=Math.max(y,T)+s),{x:Zn(S,0,i.width-t.width),y:Zn(N,0,i.height-t.height)}}function _m(n,t,e){const i=Mi(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function ZA(n){return hs([],nr(n))}function F8(n,t,e){return Lc(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function JA(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const sk={beforeTitle:Js,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Js,beforeBody:Js,beforeLabel:Js,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Ne(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Js,afterBody:Js,beforeFooter:Js,footer:Js,afterFooter:Js};function Wn(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?sk[t].call(e,i):s}class tC extends Ko{static positioners=mh;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,a=new HN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=F8(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Wn(i,"beforeTitle",this,t),a=Wn(i,"title",this,t),l=Wn(i,"afterTitle",this,t);let u=[];return u=hs(u,nr(s)),u=hs(u,nr(a)),u=hs(u,nr(l)),u}getBeforeBody(t,e){return ZA(Wn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return le(t,a=>{const l={before:[],lines:[],after:[]},u=JA(i,a);hs(l.before,nr(Wn(u,"beforeLabel",this,a))),hs(l.lines,Wn(u,"label",this,a)),hs(l.after,nr(Wn(u,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(t,e){return ZA(Wn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Wn(i,"beforeFooter",this,t),a=Wn(i,"footer",this,t),l=Wn(i,"afterFooter",this,t);let u=[];return u=hs(u,nr(s)),u=hs(u,nr(a)),u=hs(u,nr(l)),u}_createItems(t){const e=this._active,i=this.chart.data,s=[],a=[],l=[];let u=[],d,f;for(d=0,f=e.length;d<f;++d)u.push(O8(this.chart,e[d]));return t.filter&&(u=u.filter((p,y,v)=>t.filter(p,y,v,i))),t.itemSort&&(u=u.sort((p,y)=>t.itemSort(p,y,i))),le(u,p=>{const y=JA(t.callbacks,p);s.push(Wn(y,"labelColor",this,p)),a.push(Wn(y,"labelPointStyle",this,p)),l.push(Wn(y,"labelTextColor",this,p))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const u=mh[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const d=this._size=QA(this,i),f=Object.assign({},u,d),p=KA(this.chart,i,f),y=XA(i,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,a={opacity:1,x:y.x,y:y.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const a=this.getCaretPosition(t,i,s);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:y}=ac(u),{x:v,y:T}=t,{width:S,height:N}=e;let C,L,q,G,J,H;return a==="center"?(J=T+N/2,s==="left"?(C=v,L=C-l,G=J+l,H=J-l):(C=v+S,L=C+l,G=J-l,H=J+l),q=C):(s==="left"?L=v+Math.max(d,p)+l:s==="right"?L=v+S-Math.max(f,y)-l:L=this.caretX,a==="top"?(G=T,J=G-l,C=L-l,q=L+l):(G=T+N,J=G+l,C=L+l,q=L-l),H=G),{x1:C,x2:L,x3:q,y1:G,y2:J,y3:H}}drawTitle(t,e,i){const s=this.title,a=s.length;let l,u,d;if(a){const f=oc(i.rtl,this.x,this.width);for(t.x=_m(this,i.titleAlign,i),e.textAlign=f.textAlign(i.titleAlign),e.textBaseline="middle",l=Ln(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,d=0;d<a;++d)e.fillText(s[d],f.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,d+1===a&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,s,a){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:d,boxWidth:f}=a,p=Ln(a.bodyFont),y=_m(this,"left",a),v=s.x(y),T=d<p.lineHeight?(p.lineHeight-d)/2:0,S=e.y+T;if(a.usePointStyle){const N={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},C=s.leftForLtr(v,f)+f/2,L=S+d/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,_A(t,N,C,L),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,_A(t,N,C,L)}else{t.lineWidth=Xt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const N=s.leftForLtr(v,f),C=s.leftForLtr(s.xPlus(v,1),f-2),L=ac(l.borderRadius);Object.values(L).some(q=>q!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,Ag(t,{x:N,y:S,w:f,h:d,radius:L}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Ag(t,{x:C,y:S+1,w:f-2,h:d-2,radius:L}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(N,S,f,d),t.strokeRect(N,S,f,d),t.fillStyle=l.backgroundColor,t.fillRect(C,S+1,f-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:p}=i,y=Ln(i.bodyFont);let v=y.lineHeight,T=0;const S=oc(i.rtl,this.x,this.width),N=function(I){e.fillText(I,S.x(t.x+T),t.y+v/2),t.y+=v+a},C=S.textAlign(l);let L,q,G,J,H,ct,M;for(e.textAlign=l,e.textBaseline="middle",e.font=y.string,t.x=_m(this,C,i),e.fillStyle=i.bodyColor,le(this.beforeBody,N),T=u&&C!=="right"?l==="center"?f/2+p:f+2+p:0,J=0,ct=s.length;J<ct;++J){for(L=s[J],q=this.labelTextColors[J],e.fillStyle=q,le(L.before,N),G=L.lines,u&&G.length&&(this._drawColorBox(e,t,J,S,i),v=Math.max(y.lineHeight,d)),H=0,M=G.length;H<M;++H)N(G[H]),v=y.lineHeight;le(L.after,N)}T=0,v=y.lineHeight,le(this.afterBody,N),t.y-=a}drawFooter(t,e,i){const s=this.footer,a=s.length;let l,u;if(a){const d=oc(i.rtl,this.x,this.width);for(t.x=_m(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",l=Ln(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,u=0;u<a;++u)e.fillText(s[u],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:a,yAlign:l}=this,{x:u,y:d}=t,{width:f,height:p}=i,{topLeft:y,topRight:v,bottomLeft:T,bottomRight:S}=ac(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(u+y,d),l==="top"&&this.drawCaret(t,e,i,s),e.lineTo(u+f-v,d),e.quadraticCurveTo(u+f,d,u+f,d+v),l==="center"&&a==="right"&&this.drawCaret(t,e,i,s),e.lineTo(u+f,d+p-S),e.quadraticCurveTo(u+f,d+p,u+f-S,d+p),l==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(u+T,d+p),e.quadraticCurveTo(u,d+p,u,d+p-T),l==="center"&&a==="left"&&this.drawCaret(t,e,i,s),e.lineTo(u,d+y),e.quadraticCurveTo(u,d,u+y,d),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=mh[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=QA(this,t),d=Object.assign({},l,this._size),f=KA(e,t,d),p=XA(t,d,f,e);(s._to!==p.x||a._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Mi(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,s,e),zN(t,e.textDirection),a.y+=l.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),BN(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),a=!vg(i,s),l=this._positionChanged(s,e);(a||l)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(t,a,e,i),u=this._positionChanged(l,t),d=e||!vg(l,a)||u;return d&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,s){const a=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:s,options:a}=this,l=mh[a.position].call(this,t,e);return l!==!1&&(i!==l.x||s!==l.y)}}var z8={id:"tooltip",_element:tC,positioners:mh,afterInit(n,t,e){e&&(n.tooltip=new tC({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:sk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const B8=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function H8(n,t,e,i){const s=n.indexOf(t);if(s===-1)return B8(n,t,e,i);const a=n.lastIndexOf(t);return s!==a?e:s}const q8=(n,t)=>n===null?null:Zn(Math.round(n),0,t);function eC(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class W8 extends Vc{static id="category";static defaults={ticks:{callback:eC}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:a}of e)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ne(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:H8(i,t,ie(e,t),this._addedLabels),q8(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=e;l++)s.push({value:l});return s}getLabelForValue(t){return eC.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function G8(n,t){const e=[],{bounds:s,step:a,min:l,max:u,precision:d,count:f,maxTicks:p,maxDigits:y,includeBounds:v}=n,T=a||1,S=p-1,{min:N,max:C}=t,L=!Ne(l),q=!Ne(u),G=!Ne(f),J=(C-N)/(y+1);let H=lA((C-N)/S/T)*T,ct,M,I,k;if(H<1e-14&&!L&&!q)return[{value:N},{value:C}];k=Math.ceil(C/H)-Math.floor(N/H),k>S&&(H=lA(k*H/S/T)*T),Ne(d)||(ct=Math.pow(10,d),H=Math.ceil(H*ct)/ct),s==="ticks"?(M=Math.floor(N/H)*H,I=Math.ceil(C/H)*H):(M=N,I=C),L&&q&&a&&GF((u-l)/a,H/1e3)?(k=Math.round(Math.min((u-l)/H,p)),H=(u-l)/k,M=l,I=u):G?(M=L?l:M,I=q?u:I,k=f-1,H=(I-M)/k):(k=(I-M)/H,Om(k,Math.round(k),H/1e3)?k=Math.round(k):k=Math.ceil(k));const O=Math.max(cA(H),cA(M));ct=Math.pow(10,Ne(d)?O:d),M=Math.round(M*ct)/ct,I=Math.round(I*ct)/ct;let V=0;for(L&&(v&&M!==l?(e.push({value:l}),M<l&&V++,Om(Math.round((M+V*H)*ct)/ct,l,nC(l,J,n))&&V++):M<l&&V++);V<k;++V){const j=Math.round((M+V*H)*ct)/ct;if(q&&j>u)break;e.push({value:j})}return q&&v&&I!==u?e.length&&Om(e[e.length-1].value,u,nC(u,J,n))?e[e.length-1].value=u:e.push({value:u}):(!q||I===u)&&e.push({value:I}),e}function nC(n,t,{horizontal:e,minRotation:i}){const s=lr(i),a=(e?Math.sin(s):Math.cos(s))||.001,l=.75*t*(""+n).length;return Math.min(t/a,l)}class Y8 extends Vc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ne(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const l=d=>s=e?s:d,u=d=>a=i?a:d;if(t){const d=xg(s),f=xg(a);d<0&&f<0?u(0):d>0&&f>0&&l(0)}if(s===a){let d=a===0?1:Math.abs(a*.05);u(a+d),t||l(s-d)}this.min=s,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,l=G8(s,a);return t.bounds==="ticks"&&YF(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return iw(t,this.chart.options.locale,this.options.ticks.format)}}class $8 extends Y8{static id="linear";static defaults={ticks:{callback:DN.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ki(t)?t:0,this.max=ki(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=lr(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const bp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qn=Object.keys(bp);function iC(n,t){return n-t}function sC(n,t){if(Ne(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),ki(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(s&&(l=s==="week"&&(Tg(a)||a===!0)?e.startOf(l,"isoWeek",a):e.startOf(l,s)),+l)}function rC(n,t,e,i){const s=Qn.length;for(let a=Qn.indexOf(n);a<s-1;++a){const l=bp[Qn[a]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(u*l.size))<=i)return Qn[a]}return Qn[s-1]}function Q8(n,t,e,i,s){for(let a=Qn.length-1;a>=Qn.indexOf(e);a--){const l=Qn[a];if(bp[l].common&&n._adapter.diff(s,i,l)>=t-1)return l}return Qn[e?Qn.indexOf(e):0]}function K8(n){for(let t=Qn.indexOf(n)+1,e=Qn.length;t<e;++t)if(bp[Qn[t]].common)return Qn[t]}function aC(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=ew(e,t),a=e[i]>=t?e[i]:e[s];n[a]=!0}}function X8(n,t,e,i){const s=n._adapter,a=+s.startOf(t[0].value,i),l=t[t.length-1].value;let u,d;for(u=a;u<=l;u=+s.add(u,1,i))d=e[u],d>=0&&(t[d].major=!0);return t}function oC(n,t,e){const i=[],s={},a=t.length;let l,u;for(l=0;l<a;++l)u=t[l],s[u]=l,i.push({value:u,major:!1});return a===0||!e?i:X8(n,i,s,e)}class lC extends Vc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new sB._date(t.adapters.date);s.init(e),Ch(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:sC(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:u}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!u&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!u)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=ki(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),a=ki(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,l=this.max,u=ZF(s,a,l);return this._unit=e.unit||(i.autoSkip?rC(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):Q8(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:K8(this._unit),this.initOffsets(s),t.reverse&&u.reverse(),oC(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,a;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=Zn(e,0,l),i=Zn(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||rC(a.minUnit,e,i,this._getLabelCapacity(e)),u=ie(s.ticks.stepSize,1),d=l==="week"?a.isoWeekday:!1,f=Tg(d)||d===!0,p={};let y=e,v,T;if(f&&(y=+t.startOf(y,"isoWeek",d)),y=+t.startOf(y,f?"day":l),t.diff(i,e,l)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+l);const S=s.ticks.source==="data"&&this.getDataTimestamps();for(v=y,T=0;v<i;v=+t.add(v,u,l),T++)aC(p,v,S);return(v===i||s.bounds==="ticks"||T===1)&&aC(p,v,S),Object.keys(p).sort(iC).map(N=>+N)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,a=this._unit,l=e||s[a];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,s){const a=this.options,l=a.ticks.callback;if(l)return xe(l,[t,e,i],this);const u=a.time.displayFormats,d=this._unit,f=this._majorUnit,p=d&&u[d],y=f&&u[f],v=i[e],T=f&&y&&v&&v.major;return this._adapter.format(t,s||(T?y:p))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=lr(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:i*a+u*l,h:i*l+u*a}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,a=this._tickFormatFunction(t,0,oC(this,[t],this._majorUnit),s),l=this._getLabelSize(a),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(sC(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return tz(t.sort(iC))}}function ym(n,t,e){let i=0,s=n.length-1,a,l,u,d;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=ev(n,"pos",t)),{pos:a,time:u}=n[i],{pos:l,time:d}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=ev(n,"time",t)),{time:a,pos:u}=n[i],{time:l,pos:d}=n[s]);const f=l-a;return f?u+(d-u)*(t-a)/f:u}class G7 extends lC{static id="timeseries";static defaults=lC.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ym(e,this.min),this._tableRange=ym(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],a=[];let l,u,d,f,p;for(l=0,u=t.length;l<u;++l)f=t[l],f>=e&&f<=i&&s.push(f);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,u=s.length;l<u;++l)p=s[l+1],d=s[l-1],f=s[l],Math.round((p+d)/2)!==f&&a.push({time:f,pos:l/(u-1)});return a}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ym(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ym(this._table,i*this._tableRange+this._minPos,!0)}}const rk="label";function cC(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function Z8(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function ak(n,t){n.labels=t}function ok(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rk;const i=[];n.datasets=t.map(s=>{const a=n.datasets.find(l=>l[e]===s[e]);return!a||!s.data||i.includes(a)?{...s}:(i.push(a),Object.assign(a,s),a)})}function J8(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rk;const e={labels:[],datasets:[]};return ak(e,n.labels),ok(e,n.datasets,t),e}function tH(n,t){const{height:e=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:l,data:u,options:d,plugins:f=[],fallbackContent:p,updateMode:y,...v}=n,T=z.useRef(null),S=z.useRef(null),N=()=>{T.current&&(S.current=new vp(T.current,{type:l,data:J8(u,a),options:d&&{...d},plugins:f}),cC(t,S.current))},C=()=>{cC(t,null),S.current&&(S.current.destroy(),S.current=null)};return z.useEffect(()=>{!s&&S.current&&d&&Z8(S.current,d)},[s,d]),z.useEffect(()=>{!s&&S.current&&ak(S.current.config.data,u.labels)},[s,u.labels]),z.useEffect(()=>{!s&&S.current&&u.datasets&&ok(S.current.config.data,u.datasets,a)},[s,u.datasets]),z.useEffect(()=>{S.current&&(s?(C(),setTimeout(N)):S.current.update(y))},[s,d,u.labels,u.datasets,y]),z.useEffect(()=>{S.current&&(C(),setTimeout(N))},[l]),z.useEffect(()=>(N(),()=>C()),[]),cr.createElement("canvas",{ref:T,role:"img",height:e,width:i,...v},p)}const eH=z.forwardRef(tH);function nH(n,t){return vp.register(t),z.forwardRef((e,i)=>cr.createElement(eH,{...e,ref:i,type:n}))}const iH=nH("pie",iB);var lk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uC=cr.createContext&&cr.createContext(lk),sH=["attr","size","title"];function rH(n,t){if(n==null)return{};var e=aH(n,t),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function aH(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function Ng(){return Ng=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ng.apply(this,arguments)}function hC(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function kg(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(e),!0).forEach(function(i){oH(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):hC(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function oH(n,t,e){return t=lH(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function lH(n){var t=cH(n,"string");return typeof t=="symbol"?t:t+""}function cH(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function ck(n){return n&&n.map((t,e)=>cr.createElement(t.tag,kg({key:e},t.attr),ck(t.child)))}function Qt(n){return t=>cr.createElement(uH,Ng({attr:kg({},n.attr)},t),ck(n.child))}function uH(n){var t=e=>{var{attr:i,size:s,title:a}=n,l=rH(n,sH),u=s||e.size||"1em",d;return e.className&&(d=e.className),n.className&&(d=(d?d+" ":"")+n.className),cr.createElement("svg",Ng({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,l,{className:d,style:kg(kg({color:n.color||e.color},e.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&cr.createElement("title",null,a),n.children)};return uC!==void 0?cr.createElement(uC.Consumer,null,e=>t(e)):t(lk)}function hH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(n)}function wp(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(n)}function sd(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(n)}function dH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(n)}function fH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(n)}function dC(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(n)}function Mg(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(n)}function gh(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(n)}function mH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function gH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(n)}function Dg(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(n)}function pH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(n)}function _H(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(n)}function yH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(n)}function uk(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(n)}function Og(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(n)}function fw(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(n)}function vH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},child:[]},{tag:"polyline",attr:{points:"10 17 15 12 10 7"},child:[]},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"},child:[]}]})(n)}function mw(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(n)}function gw(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(n)}function Nh(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(n)}function bH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(n)}function wH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(n)}function EH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(n)}function hk(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(n)}function xH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(n)}function TH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(n)}function SH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},child:[]}]})(n)}function AH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(n)}function Ec(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}function dk(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(n)}function vm(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}function CH(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(n)}function No(n){return Qt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}const fC=({question:n,currentUser:t,darkMode:e,onAnswerSubmit:i,onRequestAiHelp:s})=>{const[a,l]=z.useState(!1),[u,d]=z.useState(!1),[f,p]=z.useState(""),[y,v]=z.useState(!1),[T,S]=z.useState([]),[N,C]=z.useState(!1),[L,q]=z.useState(n.views||0),[G,J]=z.useState(!1),[H,ct]=z.useState([]),[M,I]=z.useState(!1),[k,O]=z.useState(null);z.useEffect(()=>{(async()=>{try{await sg(qh(xn,"questions",n.id),{views:wo(1)}),q(gt=>gt+1)}catch(gt){console.error("Error updating views:",gt)}})()},[n.id]),z.useEffect(()=>{let lt;return u&&n.answers>0&&(async()=>{C(!0);try{const U=So(Ai(xn,"answers"),Wh("questionId","==",n.id),U0("createdAt","desc"));lt=Ao(U,it=>{S(it.docs.map(ht=>({id:ht.id,...ht.data()}))),C(!1)})}catch(U){console.error("Error loading answers:",U),C(!1)}})(),()=>{lt&&lt()}},[u,n.id,n.answers]);const V=lt=>{if(!lt?.toDate)return"Just now";const gt=lt.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(gt)},j=async lt=>{if(lt.preventDefault(),!(!f.trim()||!t))try{const gt={questionId:n.id,content:f,userId:t.uid,userDisplayName:t.displayName||"Anonymous",createdAt:hh(),upvotes:0,usedAiHelp:M};await i(n.id,f),p(""),l(!1),I(!1)}catch(gt){console.error("Error submitting answer:",gt)}},D=()=>{v(!y)},Bt=async lt=>{try{await sg(qh(xn,"answers",lt),{upvotes:wo(1)})}catch(gt){console.error("Error upvoting answer:",gt)}},bt=async()=>{if(f.trim()){J(!0);try{const lt=["Consider structuring your answer with clear sections","Adding an example would make your explanation more concrete","You might want to cite relevant sources or references","Try to address the core of the question more directly"];await new Promise(gt=>setTimeout(gt,1e3)),ct(lt),I(!0)}catch(lt){console.error("Error getting AI suggestions:",lt)}finally{J(!1)}}},Q=lt=>{p(gt=>`${gt}

${lt}`),I(!1)},ot=()=>{s(n.id,n.title)};return w.jsxs("div",{className:`question-card ${n.answered?"answered":""} ${e?"dark":""}`,children:[w.jsxs("div",{className:"question-header",children:[w.jsxs("div",{className:"question-meta",children:[w.jsx("span",{className:`subject-badge ${n.subject.toLowerCase()}`,children:n.subject}),w.jsxs("span",{className:"asked-by",children:[w.jsx(Ec,{className:"icon"}),n.userDisplayName||"Anonymous"]}),w.jsxs("span",{className:"timestamp",children:[w.jsx(Dg,{className:"icon"}),V(n.createdAt)]})]}),n.answered&&w.jsxs("div",{className:"answered-badge",children:[w.jsx(gh,{className:"icon"}),"Answered"]})]}),w.jsx("h3",{className:"question-title",children:w.jsx(fe,{to:`/question/${n.id}`,children:n.title})}),n.aiOptimized&&w.jsxs("div",{className:"ai-optimized-badge",children:[w.jsx(No,{className:"mr-1"}),"AI-Enhanced Question"]}),n.answers>0&&w.jsxs("div",{className:"answers-section",children:[w.jsx("button",{className:"toggle-answers-btn",onClick:()=>d(!u),disabled:N,children:u?w.jsxs(w.Fragment,{children:[w.jsx(gH,{className:"icon"}),"Hide answers"]}):w.jsxs(w.Fragment,{children:[w.jsx(mH,{className:"icon"}),N?"Loading...":`Show answers (${n.answers})`]})}),u&&w.jsx("div",{className:"answers-list",children:N?w.jsx("div",{className:"loading-answers",children:"Loading answers..."}):T.length>0?T.map(lt=>w.jsxs("div",{className:"answer-card",children:[w.jsxs("div",{className:"answer-header",children:[w.jsxs("span",{className:"answer-author",children:[w.jsx(Ec,{className:"icon"}),lt.userDisplayName||"Anonymous"]}),w.jsxs("span",{className:"answer-date",children:[w.jsx(Dg,{className:"icon"}),V(lt.createdAt)]}),lt.usedAiHelp&&w.jsxs("span",{className:"ai-assisted-badge",children:[w.jsx(No,{className:"mr-1"}),"AI-Assisted"]})]}),w.jsx("div",{className:"answer-content",children:lt.content}),w.jsxs("div",{className:"answer-actions",children:[w.jsxs("button",{className:"upvote-btn",onClick:()=>Bt(lt.id),children:[w.jsx(SH,{className:"icon"}),lt.upvotes||0," upvotes"]}),lt.pointsAwarded&&w.jsxs("span",{className:"points-badge",children:[w.jsx(sd,{className:"mr-1"}),"+",lt.pointsAwarded," pts"]})]})]},lt.id)):w.jsx("div",{className:"no-answers",children:"No answers yet"})})]}),t&&w.jsx("div",{className:"answer-action-section",children:a?w.jsxs("form",{onSubmit:j,className:"answer-form",children:[w.jsx("textarea",{value:f,onChange:lt=>p(lt.target.value),placeholder:"Write your answer...",className:"answer-input",required:!0,rows:4}),M&&w.jsxs("div",{className:"ai-suggestions-panel",children:[w.jsxs("div",{className:"ai-suggestions-header",children:[w.jsx(No,{className:"mr-2"}),w.jsx("span",{children:"AI Suggestions for Your Answer"})]}),w.jsx("ul",{className:"ai-suggestions-list",children:H.map((lt,gt)=>w.jsx("li",{onClick:()=>Q(lt),children:lt},gt))})]}),w.jsxs("div",{className:"answer-form-actions",children:[w.jsxs("div",{className:"left-actions",children:[w.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(!1),children:"Cancel"}),w.jsx("button",{type:"button",className:"btn-ai-help",onClick:bt,disabled:G||!f.trim(),children:G?"Analyzing...":w.jsxs(w.Fragment,{children:[w.jsx(No,{className:"mr-1"}),"Get AI Help"]})})]}),w.jsx("button",{type:"submit",className:"btn-primary",disabled:!f.trim(),children:"Post Answer"})]})]}):w.jsxs("div",{className:"answer-prompt",children:[w.jsxs("button",{className:"btn-text",onClick:()=>l(!0),children:[w.jsx(pH,{className:"icon"}),"Add Answer"]}),w.jsxs("button",{className:"btn-ai-hint",onClick:ot,children:[w.jsx(Og,{className:"icon"}),"Need Help Answering?"]})]})}),w.jsxs("div",{className:"question-footer",children:[w.jsxs("div",{className:"stats",children:[w.jsxs("span",{className:"stat",children:[w.jsx(Nh,{className:"icon"}),n.answers||0," answers"]}),w.jsxs("span",{className:"stat",children:[w.jsx(_H,{className:"icon"}),L," views"]})]}),w.jsxs("div",{className:"right-actions",children:[k&&w.jsxs("div",{className:"quality-score",children:[w.jsx(sd,{className:"mr-1"}),"Quality: ",k,"/10"]}),w.jsx("button",{className:`bookmark-btn ${y?"active":""}`,onClick:D,"aria-label":y?"Remove bookmark":"Add bookmark",children:w.jsx(Mg,{className:"icon"})})]})]})]})};vp.register(W8,$8,S8,D8,z8,k8,v8);function RH(){const[n]=pp(hi),t=qo(),{darkMode:e}=hv(),[i,s]=z.useState([]),[a,l]=z.useState([]),[u,d]=z.useState([]),[f,p]=z.useState([]),[y,v]=z.useState(null),[T,S]=z.useState([]),[N,C]=z.useState(""),[L,q]=z.useState(""),[G,J]=z.useState("all"),[H,ct]=z.useState(!1),[M,I]=z.useState({totalQuestions:0,totalAnswers:0,answerRate:0,subjectDistribution:{}}),[k,O]=z.useState([]),[V,j]=z.useState(!1),[D,Bt]=z.useState(!1),[bt,Q]=z.useState("");z.useEffect(()=>{const st=So(Ai(xn,"questions"),U0("createdAt","desc"),p1(50)),Dt=Ao(st,async xt=>{const Kt=xt.docs.map(Ee=>({id:Ee.id,...Ee.data()}));s(Kt);const _e=Kt.reduce((Ee,Me)=>(Ee[Me.subject]=(Ee[Me.subject]||0)+1,Ee),{}),Ae=await v1(Ai(xn,"questions")),_n=await v1(Ai(xn,"answers"));I(Ee=>({...Ee,totalQuestions:Ae.data().count,totalAnswers:_n.data().count,answerRate:Kt.length>0?Math.round(Kt.filter(Me=>Me.answered).length/Kt.length*100):0,subjectDistribution:_e}))});return()=>Dt()},[]),z.useEffect(()=>{const st=So(Ai(xn,"questions"),U0("engagementScore","desc"),p1(5)),Dt=Ao(st,xt=>{l(xt.docs.map(Kt=>({id:Kt.id,...Kt.data()})))});return()=>Dt()},[]),z.useEffect(()=>{if(n){const st=Ui(Fi,`users/${n.uid}/analytics`);Eo(st,_e=>{v(_e.val())});const Dt=Ui(Fi,`users/${n.uid}/recentlyViewed`);Eo(Dt,_e=>{const Ae=_e.val();if(Ae){const _n=Object.keys(Ae),Ee=So(Ai(xn,"questions"),Wh("id","in",_n));Ao(Ee,Me=>{d(Me.docs.map(ti=>({id:ti.id,...ti.data(),viewedAt:Ae[ti.id]?.timestamp||null})))})}});const xt=Ui(Fi,`users/${n.uid}/bookmarks`);Eo(xt,_e=>{const Ae=_e.val();if(Ae){const _n=Object.keys(Ae),Ee=So(Ai(xn,"questions"),Wh("id","in",_n));Ao(Ee,Me=>{p(Me.docs.map(ti=>({id:ti.id,...ti.data(),bookmarkedAt:Ae[ti.id]?.timestamp||null})))})}});const Kt=Ui(Fi,"users");Eo(Kt,_e=>{const Ae=_e.val();if(Ae){const _n=Object.entries(Ae).filter(([Ee,Me])=>Me.points>0).map(([Ee,Me])=>({id:Ee,...Me})).sort((Ee,Me)=>(Me.points||0)-(Ee.points||0)).slice(0,5);S(_n)}})}},[n]);const ot=async()=>{if(L.trim()){j(!0);try{const st=["Consider adding more details about what you've tried so far","Could you specify which part you're struggling with?","Adding an example would help others understand your question better","Have you checked similar questions in our database?"];await new Promise(Dt=>setTimeout(Dt,1e3)),O(st)}catch(st){console.error("Error getting AI suggestions:",st)}finally{j(!1)}}},lt=async(st,Dt)=>{Bt(!0);try{const xt=["This question seems to be about understanding the core concept rather than a specific calculation","A good approach would be to break down the problem into smaller steps","Consider explaining the fundamental principles involved","Visual aids or diagrams might help in explaining this concept"];await new Promise(Kt=>setTimeout(Kt,800)),Q(xt[Math.floor(Math.random()*xt.length)])}catch(xt){console.error("Error getting AI hint:",xt),Q("Couldn't generate a hint at this time. Please try again later.")}},gt=async(st,Dt)=>{try{const xt=Math.floor(Math.random()*20)+5,Kt=Ui(Fi,`users/${n.uid}/analytics/points`);Eo(Kt,Ae=>{const _n=Ae.val()||0;yg(Ui(Fi,`users/${n.uid}/analytics`),{points:_n+xt,answers:wo(1),bestAnswers:xt>15?wo(1):wo(0)})});const _e=Ui(Fi,`users/${n.uid}/answerHistory/${st}`);return yg(_e,{pointsAwarded:xt,timestamp:hh(),questionId:st}),xt}catch(xt){return console.error("Error analyzing answer quality:",xt),0}},U=async st=>{if(st.preventDefault(),!L.trim())return;const Dt={title:L,subject:G,userId:n?.uid,userDisplayName:n?.displayName||"Anonymous",createdAt:hh(),answered:!1,engagementScore:0,aiOptimized:k.length>0};await Hy(Ai(xn,"questions"),Dt),q(""),O([])},it=async()=>{try{await f4(hi),t("/login")}catch(st){console.error("Logout error:",st)}},ht=i.filter(st=>(G==="all"||st.subject===G)&&st.title.toLowerCase().includes(N.toLowerCase())),ut=()=>w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(dH,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Community Stats"})]}),w.jsxs("div",{className:"stats-grid",children:[w.jsxs("div",{className:"stats-item",children:[w.jsx("div",{className:"text-sm font-medium mb-1",children:"Total Questions"}),w.jsx("div",{className:"text-2xl font-bold",children:M.totalQuestions})]}),w.jsxs("div",{className:"stats-item",children:[w.jsx("div",{className:"text-sm font-medium mb-1",children:"Total Answers"}),w.jsx("div",{className:"text-2xl font-bold",children:M.totalAnswers})]}),w.jsxs("div",{className:"stats-item",children:[w.jsx("div",{className:"text-sm font-medium mb-1",children:"Answer Rate"}),w.jsxs("div",{className:"text-2xl font-bold",children:[M.answerRate,"%"]})]})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm font-medium mb-2",children:"Topic Distribution"}),w.jsx("div",{className:"chart-container",children:w.jsx(iH,{data:{labels:Object.keys(M.subjectDistribution),datasets:[{data:Object.values(M.subjectDistribution),backgroundColor:["#06b6d4","#3b82f6","#8b5cf6","#ec4899","#f97316"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:e?"#fff":"#333"}}}}})})]})]}),yt=()=>w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(dk,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Top Contributors"})]}),w.jsx("div",{className:"space-y-3",children:T.map((st,Dt)=>w.jsx(fe,{to:`/profile/${userId}`,className:"block hover:opacity-80 transition-opacity",children:w.jsxs("div",{className:"expert-item",children:[w.jsxs("span",{className:"w-6 text-center mr-2 font-medium",children:[Dt+1,"."]}),w.jsx("div",{className:"expert-avatar",children:st.displayName?.charAt(0)||"E"}),w.jsxs("div",{className:"flex-1",children:[w.jsx("div",{className:"font-medium",children:st.displayName||"Expert"}),w.jsxs("div",{className:"text-sm text-secondary",children:[st.points||0," points"]})]}),w.jsx("div",{className:"expert-badge",children:w.jsx(sd,{className:"text-yellow-500"})})]})},st.id))})]}),It=()=>w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(hH,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Your Stats"})]}),w.jsxs("div",{className:"stats-grid",children:[w.jsxs("div",{className:"stats-item",children:[w.jsx("div",{className:"text-sm font-medium mb-1",children:"Points"}),w.jsx("div",{className:"text-2xl font-bold text-primary",children:y?.points||0}),w.jsx("div",{className:"text-xs text-secondary",children:"Earned through contributions"})]}),w.jsxs("div",{className:"stats-item",children:[w.jsx("div",{className:"text-sm font-medium mb-1",children:"Questions"}),w.jsx("div",{className:"text-2xl font-bold",children:y?.questions||0}),w.jsx("div",{className:"text-xs text-secondary",children:"Asked"})]}),w.jsxs("div",{className:"stats-item",children:[w.jsx("div",{className:"text-sm font-medium mb-1",children:"Answers"}),w.jsx("div",{className:"text-2xl font-bold",children:y?.answers||0}),w.jsx("div",{className:"text-xs text-secondary",children:"Provided"})]}),w.jsxs("div",{className:"stats-item",children:[w.jsx("div",{className:"text-sm font-medium mb-1",children:"Best Answers"}),w.jsx("div",{className:"text-2xl font-bold",children:y?.bestAnswers||0}),w.jsx("div",{className:"text-xs text-secondary",children:"High-quality solutions"})]})]}),y?.points&&w.jsxs("div",{className:"mt-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-1",children:[w.jsx("span",{className:"text-sm font-medium",children:"Your Contribution Level"}),w.jsx("span",{className:"text-xs text-primary",children:y.points>100?"Expert":y.points>50?"Advanced":y.points>20?"Intermediate":"Beginner"})]}),w.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:w.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min(100,y.points)}%`}})})]})]});return w.jsxs("div",{className:`home-container ${e?"dark":""}`,children:[w.jsx("header",{className:"header",children:w.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[w.jsxs(fe,{to:"/",className:"logo",children:[w.jsx(CH,{className:"inline mr-2"}),"StudiQ"]}),w.jsxs("div",{className:"search-container",children:[w.jsx("div",{className:"search-icon",children:w.jsx(EH,{})}),w.jsx("input",{type:"text",placeholder:"Search for questions...",className:"input search-input",value:N,onChange:st=>C(st.target.value)})]}),w.jsx("nav",{className:"flex items-center space-x-4",children:n?w.jsxs("div",{className:"relative",children:[w.jsxs("button",{onClick:()=>ct(!H),className:"flex items-center space-x-2 focus:outline-none",children:[w.jsx("div",{className:"user-avatar",children:n.displayName?.charAt(0)||"U"}),w.jsx("span",{className:"hidden md:inline",children:n.displayName||"User"})]}),H&&w.jsxs("div",{className:"dropdown",children:[w.jsxs(fe,{to:`/profile/${n.uid}`,className:"dropdown-item flex items-center",children:[w.jsx(Ec,{className:"mr-2"})," Profile"]}),w.jsxs(fe,{to:"/settings",className:"dropdown-item flex items-center",children:[w.jsx(hk,{className:"mr-2"})," Settings"]}),w.jsxs("button",{onClick:it,className:"dropdown-item flex items-center w-full text-left",children:[w.jsx(mw,{className:"mr-2"})," Sign out"]})]})]}):w.jsxs(w.Fragment,{children:[w.jsx(fe,{to:"/login",className:"text-secondary hover:text-primary",children:"Log in"}),w.jsx(fe,{to:"/signup",className:"btn-primary",children:"Sign up"})]})})]})}),w.jsx("main",{className:"container mx-auto px-4 py-8",children:w.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[w.jsxs("div",{className:"w-full md:w-1/4 space-y-6",children:[w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(fH,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Topics"})]}),w.jsxs("ul",{className:"space-y-2",children:[w.jsx("li",{children:w.jsx("button",{onClick:()=>J("all"),className:`subject-item ${G==="all"?"active":""}`,children:"All Topics"})}),["Mathematics","Science","History","Literature","Technology","Arts","Languages"].map(st=>w.jsx("li",{children:w.jsx("button",{onClick:()=>J(st),className:`subject-item ${G===st?"active":""}`,children:st})},st))]})]}),n&&w.jsxs(w.Fragment,{children:[It(),u.length>0&&w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(Dg,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Recently Viewed"})]}),w.jsx("div",{className:"space-y-3",children:u.slice(0,3).map(st=>w.jsx(fe,{to:`/question/${st.id}`,className:"question-link text-sm",children:st.title},st.id))})]}),f.length>0&&w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(Mg,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Your Bookmarks"})]}),w.jsx("div",{className:"space-y-3",children:f.slice(0,3).map(st=>w.jsx(fe,{to:`/question/${st.id}`,className:"question-link text-sm",children:st.title},st.id))})]})]})]}),w.jsxs("div",{className:"w-full md:w-2/4 space-y-6",children:[n&&w.jsxs("div",{className:"card",children:[w.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(Og,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Ask your question"})]}),w.jsxs("form",{onSubmit:U,children:[w.jsx("textarea",{placeholder:"What concept or problem are you trying to understand? Be as specific as possible...",className:"input question-form",rows:4,value:L,onChange:st=>q(st.target.value),onBlur:ot,required:!0}),k.length>0&&w.jsxs("div",{className:"ai-suggestions",children:[w.jsxs("div",{className:"flex items-center mb-2",children:[w.jsx(No,{className:"mr-2 text-blue-500"}),w.jsx("span",{className:"text-sm font-medium",children:"AI Suggestions to Improve Your Question"})]}),w.jsx("ul",{className:"space-y-2",children:k.map((st,Dt)=>w.jsxs("li",{className:"text-sm text-secondary",children:[" ",st]},Dt))})]}),V&&w.jsxs("div",{className:"text-sm text-secondary flex items-center",children:[w.jsx(No,{className:"mr-2 animate-pulse"}),"Analyzing your question for improvements..."]}),w.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[w.jsxs("select",{value:G,onChange:st=>J(st.target.value),className:"input py-1 px-3 text-sm",children:[w.jsx("option",{value:"Mathematics",children:"Mathematics"}),w.jsx("option",{value:"Science",children:"Science"}),w.jsx("option",{value:"History",children:"History"}),w.jsx("option",{value:"Literature",children:"Literature"}),w.jsx("option",{value:"Technology",children:"Technology"}),w.jsx("option",{value:"Arts",children:"Arts"}),w.jsx("option",{value:"Languages",children:"Languages"})]}),w.jsx("button",{type:"submit",className:"btn-primary px-4 py-2",children:"Post Question"})]})]})]}),w.jsxs("div",{className:"card",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[w.jsx(AH,{className:"mr-2 text-primary"}),"Trending Questions"]}),w.jsx(fe,{to:"/trending",className:"text-sm text-primary hover:underline",children:"View all"})]}),w.jsx("div",{className:"space-y-4",children:a.map(st=>w.jsx(fC,{question:st,darkMode:e,currentUser:n,onAnswerSubmit:async(Dt,xt)=>{try{const Kt=await Hy(Ai(xn,"answers"),{questionId:Dt,content:xt,userId:n.uid,userDisplayName:n.displayName||"Anonymous",createdAt:hh(),upvotes:0});await sg(qh(xn,"questions",Dt),{answers:wo(1),answered:!0});const _e=await gt(Kt.id,xt);_e>0&&alert(`Great job! You earned ${_e} points for your helpful answer!`)}catch(Kt){console.error("Error submitting answer:",Kt)}},onRequestAiHelp:lt},st.id))})]}),w.jsxs("div",{className:"card",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsx("h2",{className:"text-xl font-semibold",children:"Recent Questions"}),w.jsx(fe,{to:"/questions",className:"text-sm text-primary hover:underline",children:"View all"})]}),w.jsx("div",{className:"space-y-4",children:ht.slice(0,5).map(st=>w.jsx(fC,{question:st,darkMode:e,currentUser:n,onAnswerSubmit:async(Dt,xt)=>{try{const Kt=await Hy(Ai(xn,"answers"),{questionId:Dt,content:xt,userId:n.uid,userDisplayName:n.displayName||"Anonymous",createdAt:hh(),upvotes:0});await sg(qh(xn,"questions",Dt),{answers:wo(1),answered:!0});const _e=await gt(Kt.id,xt);_e>0&&alert(`Great job! You earned ${_e} points for your helpful answer!`)}catch(Kt){console.error("Error submitting answer:",Kt)}},onRequestAiHelp:lt},st.id))})]})]}),w.jsxs("div",{className:"w-full md:w-1/4 space-y-6",children:[yt(),ut(),w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[w.jsx(xH,{className:"mr-2 text-primary"}),w.jsx("span",{children:"Featured Questions"})]}),w.jsx("div",{className:"space-y-3",children:i.filter(st=>st.featured).slice(0,3).map(st=>w.jsx(fe,{to:`/question/${st.id}`,className:"question-link text-sm",children:st.title},st.id))})]}),D&&w.jsxs("div",{className:"card bg-blue-50 border-blue-200",children:[w.jsxs("div",{className:"flex justify-between items-center mb-3",children:[w.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[w.jsx(No,{className:"mr-2 text-blue-600"}),w.jsx("span",{children:"AI Answer Assistant"})]}),w.jsx("button",{onClick:()=>Bt(!1),className:"text-blue-600 hover:text-blue-800",children:""})]}),w.jsxs("div",{className:"text-sm text-blue-800",children:[w.jsx("p",{className:"mb-2",children:"Here's a hint to help you craft a great answer:"}),w.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:bt}),w.jsx("p",{className:"mt-3 text-xs",children:"Remember: High-quality answers earn more points! Focus on clarity and depth."})]})]})]})]})})]})}function IH(){const[n,t]=z.useState(""),[e,i]=z.useState(""),[s,a]=z.useState(""),[l,u]=z.useState(!1),d=qo(),f=async y=>{y.preventDefault(),u(!0),a("");try{await o4(hi,n,e),d("/")}catch(v){a(v.message)}finally{u(!1)}},p=async()=>{try{u(!0),await OR(hi,bN),d("/")}catch(y){a(y.message)}finally{u(!1)}};return w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:w.jsxs("div",{className:"max-w-md w-full p-8 rounded-xl bg-white shadow-lg",children:[w.jsxs("div",{className:"flex items-center mb-8",children:[w.jsx(fe,{to:"/",className:"mr-4 text-gray-500 hover:text-teal-500",children:w.jsx(wp,{className:"w-5 h-5"})}),w.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-teal-400 to-blue-500 bg-clip-text text-transparent",children:"Welcome Back"})]}),s&&w.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:s}),w.jsxs("form",{onSubmit:f,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(gw,{className:"h-5 w-5 text-gray-400"})}),w.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:y=>t(y.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"your@email.com"})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(fw,{className:"h-5 w-5 text-gray-400"})}),w.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:e,onChange:y=>i(y.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:""})]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),w.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),w.jsx("div",{className:"text-sm",children:w.jsx(fe,{to:"/forgot-password",className:"font-medium text-teal-600 hover:text-teal-500",children:"Forgot password?"})})]}),w.jsx("div",{children:w.jsx("button",{type:"submit",disabled:l,className:`w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ${l?"opacity-70 cursor-not-allowed":""}`,children:l?w.jsxs(w.Fragment,{children:[w.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):w.jsxs(w.Fragment,{children:[w.jsx(vH,{className:"w-5 h-5 mr-2"}),"Sign In"]})})})]}),w.jsxs("div",{className:"mt-6",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-gray-300"})}),w.jsx("div",{className:"relative flex justify-center text-sm",children:w.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),w.jsx("div",{className:"mt-6",children:w.jsxs("button",{onClick:p,disabled:l,className:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:[w.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"Google logo",className:"h-5 w-5 mr-2"}),"Google"]})})]}),w.jsxs("div",{className:"mt-6 text-center text-sm",children:[w.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),w.jsx(fe,{to:"/signup",className:"font-medium text-teal-600 hover:text-teal-500",children:"Sign up"})]})]})})}function NH(){const[n,t]=z.useState(""),[e,i]=z.useState(""),[s,a]=z.useState(""),[l,u]=z.useState(""),[d,f]=z.useState(!1),p=qo(),y=async T=>{T.preventDefault(),f(!0),u("");try{const S=await a4(hi,e,s);await l4(S.user),p("/verify-email")}catch(S){u(S.message)}finally{f(!1)}},v=async()=>{try{f(!0),await OR(hi,bN),p("/")}catch(T){u(T.message)}finally{f(!1)}};return w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:w.jsxs("div",{className:"max-w-md w-full p-8 rounded-xl bg-white shadow-lg",children:[w.jsxs("div",{className:"flex items-center mb-8",children:[w.jsx(fe,{to:"/",className:"mr-4 text-gray-500 hover:text-teal-500",children:w.jsx(wp,{className:"w-5 h-5"})}),w.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-teal-400 to-blue-500 bg-clip-text text-transparent",children:"Create Account"})]}),l&&w.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:l}),w.jsxs("form",{onSubmit:y,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(Ec,{className:"h-5 w-5 text-gray-400"})}),w.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n,onChange:T=>t(T.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"Your Name"})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(gw,{className:"h-5 w-5 text-gray-400"})}),w.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:T=>i(T.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"your@email.com"})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx(fw,{className:"h-5 w-5 text-gray-400"})}),w.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:s,onChange:T=>a(T.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:""})]}),w.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum 6 characters"})]}),w.jsx("div",{children:w.jsx("button",{type:"submit",disabled:d,className:`w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ${d?"opacity-70 cursor-not-allowed":""}`,children:d?w.jsxs(w.Fragment,{children:[w.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[w.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),w.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Sign Up"})})]}),w.jsxs("div",{className:"mt-6",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-gray-300"})}),w.jsx("div",{className:"relative flex justify-center text-sm",children:w.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or sign up with"})})]}),w.jsx("div",{className:"mt-6",children:w.jsxs("button",{onClick:v,disabled:d,className:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:[w.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"Google logo",className:"h-5 w-5 mr-2"}),"Google"]})})]}),w.jsxs("div",{className:"mt-6 text-center text-sm",children:[w.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),w.jsx(fe,{to:"/login",className:"font-medium text-teal-600 hover:text-teal-500",children:"Log in"})]})]})})}function kH(){const[n]=pp(hi),t=qo(),{darkMode:e,setDarkMode:i}=hv(),[s,a]=z.useState(null),[l,u]=z.useState({displayName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",language:"en",notifications:!0}),[d,f]=z.useState({}),[p,y]=z.useState(""),[v,T]=z.useState(!1),[S,N]=z.useState({length:!1,uppercase:!1,number:!1,specialChar:!1});z.useEffect(()=>{if(n){const J=Ui(Fi,`users/${n.uid}`);Eo(J,H=>{const ct=H.val();a(ct),u(M=>({...M,displayName:ct?.displayName||n.displayName||"",email:n.email||"",language:ct?.language||"en",notifications:ct?.notifications??!0}))})}},[n]),z.useEffect(()=>{l.newPassword&&N({length:l.newPassword.length>=8,uppercase:/[A-Z]/.test(l.newPassword),number:/\d/.test(l.newPassword),specialChar:/[!@#$%^&*(),.?":{}|<>]/.test(l.newPassword)})},[l.newPassword]);const C=J=>{const{name:H,value:ct,type:M,checked:I}=J.target;u(k=>({...k,[H]:M==="checkbox"?I:ct}))},L=async J=>{J.preventDefault(),T(!0),f({}),y("");try{if(l.newPassword&&l.newPassword!==l.confirmPassword)throw new Error("New passwords do not match");const H={};l.displayName!==(s?.displayName||n.displayName)&&(H.displayName=l.displayName,await u4(hi.currentUser,{displayName:l.displayName})),H.language=l.language,H.notifications=l.notifications,H.darkMode=e,await yg(Ui(Fi,`users/${n.uid}`),H),y("Settings updated successfully!")}catch(H){console.error("Update error:",H),f({general:H.message||"Failed to update settings"})}finally{T(!1)}},q=()=>{const J=!e;i(J),n&&yg(Ui(Fi,`users/${n.uid}`),{darkMode:J})},G=async()=>{try{await hi.signOut(),t("/login")}catch(J){console.error("Logout error:",J)}};return n?w.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${e?"dark bg-gray-900":"bg-gray-50"}`,children:[w.jsx("header",{className:`sticky top-0 z-10 backdrop-blur-md ${e?"bg-black/80":"bg-white/80"} shadow-sm`,children:w.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[w.jsxs(fe,{to:`/profile/${n.uid}`,className:"flex items-center text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300",children:[w.jsx(wp,{className:"mr-1"})," Back to Profile"]}),w.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-teal-400 to-teal-600 bg-clip-text text-transparent",children:"Account Settings"}),w.jsx("div",{})," "]})}),w.jsx("main",{className:"container mx-auto px-4 py-8",children:w.jsx("div",{className:"max-w-2xl mx-auto",children:w.jsx("div",{className:`p-6 rounded-xl shadow-lg mb-8 backdrop-blur-sm ${e?"bg-gray-800/70 border border-gray-700":"bg-white/80 border border-gray-200"}`,children:w.jsxs("form",{onSubmit:L,children:[d.general&&w.jsx("div",{className:`mb-4 p-3 rounded-lg ${e?"bg-red-900/50 text-red-200":"bg-red-100 text-red-800"}`,children:d.general}),p&&w.jsx("div",{className:`mb-4 p-3 rounded-lg ${e?"bg-teal-900/50 text-teal-200":"bg-teal-100 text-teal-800"}`,children:p}),w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${e?"text-gray-200":"text-gray-800"}`,children:[w.jsx(Ec,{className:"mr-2 text-teal-500"}),"Profile Information"]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"displayName",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Display Name"}),w.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Email Address"}),w.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:C,disabled:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700/50 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`}),w.jsx("p",{className:`mt-1 text-xs ${e?"text-gray-400":"text-gray-500"}`,children:"Contact support to change your email address"})]})]})]}),w.jsxs("div",{children:[w.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${e?"text-gray-200":"text-gray-800"}`,children:[w.jsx(fw,{className:"mr-2 text-teal-500"}),"Security"]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"currentPassword",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Current Password"}),w.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:l.currentPassword,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,placeholder:"Required for password changes"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"newPassword",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"New Password"}),w.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:l.newPassword,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,placeholder:"Leave blank to keep current password"})]}),l.newPassword&&w.jsxs("div",{className:`p-3 rounded-lg ${e?"bg-gray-700/50":"bg-gray-100"}`,children:[w.jsx("h4",{className:`text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Password Requirements:"}),w.jsxs("ul",{className:"space-y-1 text-sm",children:[w.jsxs("li",{className:`flex items-center ${S.length?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.length?w.jsx(gh,{className:"mr-1"}):w.jsx(vm,{className:"mr-1"}),"At least 8 characters"]}),w.jsxs("li",{className:`flex items-center ${S.uppercase?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.uppercase?w.jsx(gh,{className:"mr-1"}):w.jsx(vm,{className:"mr-1"}),"At least one uppercase letter"]}),w.jsxs("li",{className:`flex items-center ${S.number?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.number?w.jsx(gh,{className:"mr-1"}):w.jsx(vm,{className:"mr-1"}),"At least one number"]}),w.jsxs("li",{className:`flex items-center ${S.specialChar?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.specialChar?w.jsx(gh,{className:"mr-1"}):w.jsx(vm,{className:"mr-1"}),"At least one special character"]})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Confirm New Password"}),w.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:l.confirmPassword,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,placeholder:"Confirm your new password"})]})]})]}),w.jsxs("div",{children:[w.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${e?"text-gray-200":"text-gray-800"}`,children:[w.jsx(uk,{className:"mr-2 text-teal-500"}),"Preferences"]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h3",{className:`font-medium ${e?"text-gray-200":"text-gray-800"}`,children:"Theme"}),w.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"}`,children:e?"Dark mode":"Light mode"})]}),w.jsx("button",{type:"button",onClick:q,className:`p-2 rounded-full ${e?"bg-gray-700 text-teal-400":"bg-gray-200 text-gray-700"}`,"aria-label":"Toggle dark mode",children:e?w.jsx(TH,{className:"w-5 h-5"}):w.jsx(bH,{className:"w-5 h-5"})})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"language",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Language"}),w.jsxs("select",{id:"language",name:"language",value:l.language,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,children:[w.jsx("option",{value:"en",children:"English"}),w.jsx("option",{value:"hi",children:" (Hindi)"}),w.jsx("option",{value:"ta",children:" (Tamil)"}),w.jsx("option",{value:"te",children:" (Telugu)"}),w.jsx("option",{value:"bn",children:" (Bengali)"}),w.jsx("option",{value:"mr",children:" (Marathi)"})]})]}),w.jsxs("div",{className:"flex items-center",children:[w.jsx("input",{type:"checkbox",id:"notifications",name:"notifications",checked:l.notifications,onChange:C,className:`h-4 w-4 rounded focus:ring-teal-500 ${e?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`}),w.jsx("label",{htmlFor:"notifications",className:`ml-2 block text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"Email Notifications"})]})]})]}),w.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row justify-between gap-4",children:[w.jsxs("button",{type:"submit",disabled:v,className:`flex-1 py-3 px-4 rounded-lg font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 flex items-center justify-center ${e?"focus:ring-offset-gray-800":"focus:ring-offset-white"}`,children:[w.jsx(wH,{className:"mr-2"}),v?"Saving...":"Save Changes"]}),w.jsxs("button",{type:"button",onClick:G,className:`flex-1 py-3 px-4 rounded-lg font-medium flex items-center justify-center ${e?"bg-red-600/90 text-white hover:bg-red-700 border border-red-700":"bg-red-500 text-white hover:bg-red-600 border border-red-600"}`,children:[w.jsx(mw,{className:"mr-2"}),"Sign Out"]})]})]})]})})})})]}):w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:w.jsxs("div",{className:"text-center p-8 rounded-xl bg-white/80 dark:bg-gray-800/70 backdrop-blur-sm shadow-lg border border-gray-200 dark:border-gray-700",children:[w.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-gray-200",children:"Please sign in to access settings"}),w.jsx(fe,{to:"/login",className:"text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300 font-medium",children:"Go to login page"})]})})}function MH(){return w.jsxs("div",{className:"text-center p-10",children:[w.jsx("h1",{className:"text-4xl font-bold text-red-600",children:"404 - Page Not Found"}),w.jsx("p",{className:"text-gray-600 mt-4",children:"Oops! The page you're looking for doesn't exist."})]})}const fk=6048e5,DH=864e5,mC=Symbol.for("constructDateFrom");function Aa(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&mC in n?n[mC](t):n instanceof Date?new n.constructor(t):new Date(t)}function Yi(n,t){return Aa(t||n,n)}let OH={};function Ep(){return OH}function rd(n,t){const e=Ep(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,s=Yi(n,t?.in),a=s.getDay(),l=(a<i?7:0)+a-i;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function Pg(n,t){return rd(n,{...t,weekStartsOn:1})}function mk(n,t){const e=Yi(n,t?.in),i=e.getFullYear(),s=Aa(e,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const a=Pg(s),l=Aa(e,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const u=Pg(l);return e.getTime()>=a.getTime()?i+1:e.getTime()>=u.getTime()?i:i-1}function gC(n){const t=Yi(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function PH(n,...t){const e=Aa.bind(null,t.find(i=>typeof i=="object"));return t.map(e)}function pC(n,t){const e=Yi(n,t?.in);return e.setHours(0,0,0,0),e}function LH(n,t,e){const[i,s]=PH(e?.in,n,t),a=pC(i),l=pC(s),u=+a-gC(a),d=+l-gC(l);return Math.round((u-d)/DH)}function VH(n,t){const e=mk(n,t),i=Aa(n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),Pg(i)}function jH(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function UH(n){return!(!jH(n)&&typeof n!="number"||isNaN(+Yi(n)))}function FH(n,t){const e=Yi(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const zH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BH=(n,t,e)=>{let i;const s=zH[n];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function l0(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const HH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},WH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GH={date:l0({formats:HH,defaultWidth:"full"}),time:l0({formats:qH,defaultWidth:"full"}),dateTime:l0({formats:WH,defaultWidth:"full"})},YH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$H=(n,t,e,i)=>YH[n];function ih(n){return(t,e)=>{const i=e?.context?String(e.context):"standalone";let s;if(i==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,u=e?.width?String(e.width):l;s=n.formattingValues[u]||n.formattingValues[l]}else{const l=n.defaultWidth,u=e?.width?String(e.width):n.defaultWidth;s=n.values[u]||n.values[l]}const a=n.argumentCallback?n.argumentCallback(t):t;return s[a]}}const QH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},XH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},t7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},e7=(n,t)=>{const e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},n7={ordinalNumber:e7,era:ih({values:QH,defaultWidth:"wide"}),quarter:ih({values:KH,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ih({values:XH,defaultWidth:"wide"}),day:ih({values:ZH,defaultWidth:"wide"}),dayPeriod:ih({values:JH,defaultWidth:"wide",formattingValues:t7,defaultFormattingWidth:"wide"})};function sh(n){return(t,e={})=>{const i=e.width,s=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],a=t.match(s);if(!a)return null;const l=a[0],u=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?s7(u,y=>y.test(l)):i7(u,y=>y.test(l));let f;f=n.valueCallback?n.valueCallback(d):d,f=e.valueCallback?e.valueCallback(f):f;const p=t.slice(l.length);return{value:f,rest:p}}}function i7(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function s7(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function r7(n){return(t,e={})=>{const i=t.match(n.matchPattern);if(!i)return null;const s=i[0],a=t.match(n.parsePattern);if(!a)return null;let l=n.valueCallback?n.valueCallback(a[0]):a[0];l=e.valueCallback?e.valueCallback(l):l;const u=t.slice(s.length);return{value:l,rest:u}}}const a7=/^(\d+)(th|st|nd|rd)?/i,o7=/\d+/i,l7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c7={any:[/^b/i,/^(a|c)/i]},u7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h7={any:[/1/i,/2/i,/3/i,/4/i]},d7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},f7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},m7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},g7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},p7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},y7={ordinalNumber:r7({matchPattern:a7,parsePattern:o7,valueCallback:n=>parseInt(n,10)}),era:sh({matchPatterns:l7,defaultMatchWidth:"wide",parsePatterns:c7,defaultParseWidth:"any"}),quarter:sh({matchPatterns:u7,defaultMatchWidth:"wide",parsePatterns:h7,defaultParseWidth:"any",valueCallback:n=>n+1}),month:sh({matchPatterns:d7,defaultMatchWidth:"wide",parsePatterns:f7,defaultParseWidth:"any"}),day:sh({matchPatterns:m7,defaultMatchWidth:"wide",parsePatterns:g7,defaultParseWidth:"any"}),dayPeriod:sh({matchPatterns:p7,defaultMatchWidth:"any",parsePatterns:_7,defaultParseWidth:"any"})},v7={code:"en-US",formatDistance:BH,formatLong:GH,formatRelative:$H,localize:n7,match:y7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function b7(n,t){const e=Yi(n,t?.in);return LH(e,FH(e))+1}function w7(n,t){const e=Yi(n,t?.in),i=+Pg(e)-+VH(e);return Math.round(i/fk)+1}function gk(n,t){const e=Yi(n,t?.in),i=e.getFullYear(),s=Ep(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=Aa(t?.in||n,0);l.setFullYear(i+1,0,a),l.setHours(0,0,0,0);const u=rd(l,t),d=Aa(t?.in||n,0);d.setFullYear(i,0,a),d.setHours(0,0,0,0);const f=rd(d,t);return+e>=+u?i+1:+e>=+f?i:i-1}function E7(n,t){const e=Ep(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,s=gk(n,t),a=Aa(t?.in||n,0);return a.setFullYear(s,0,i),a.setHours(0,0,0,0),rd(a,t)}function x7(n,t){const e=Yi(n,t?.in),i=+rd(e,t)-+E7(e,t);return Math.round(i/fk)+1}function oe(n,t){const e=n<0?"-":"",i=Math.abs(n).toString().padStart(t,"0");return e+i}const Xr={y(n,t){const e=n.getFullYear(),i=e>0?e:1-e;return oe(t==="yy"?i%100:i,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):oe(e+1,2)},d(n,t){return oe(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return oe(n.getHours()%12||12,t.length)},H(n,t){return oe(n.getHours(),t.length)},m(n,t){return oe(n.getMinutes(),t.length)},s(n,t){return oe(n.getSeconds(),t.length)},S(n,t){const e=t.length,i=n.getMilliseconds(),s=Math.trunc(i*Math.pow(10,e-3));return oe(s,t.length)}},Gl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_C={G:function(n,t,e){const i=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});case"GGGG":default:return e.era(i,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const i=n.getFullYear(),s=i>0?i:1-i;return e.ordinalNumber(s,{unit:"year"})}return Xr.y(n,t)},Y:function(n,t,e,i){const s=gk(n,i),a=s>0?s:1-s;if(t==="YY"){const l=a%100;return oe(l,2)}return t==="Yo"?e.ordinalNumber(a,{unit:"year"}):oe(a,t.length)},R:function(n,t){const e=mk(n);return oe(e,t.length)},u:function(n,t){const e=n.getFullYear();return oe(e,t.length)},Q:function(n,t,e){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return oe(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,e){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return oe(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,e){const i=n.getMonth();switch(t){case"M":case"MM":return Xr.M(n,t);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,e){const i=n.getMonth();switch(t){case"L":return String(i+1);case"LL":return oe(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,e,i){const s=x7(n,i);return t==="wo"?e.ordinalNumber(s,{unit:"week"}):oe(s,t.length)},I:function(n,t,e){const i=w7(n);return t==="Io"?e.ordinalNumber(i,{unit:"week"}):oe(i,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Xr.d(n,t)},D:function(n,t,e){const i=b7(n);return t==="Do"?e.ordinalNumber(i,{unit:"dayOfYear"}):oe(i,t.length)},E:function(n,t,e){const i=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});case"EEEE":default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,e,i){const s=n.getDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return oe(a,2);case"eo":return e.ordinalNumber(a,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});case"eeee":default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(n,t,e,i){const s=n.getDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return oe(a,t.length);case"co":return e.ordinalNumber(a,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});case"cccc":default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(n,t,e){const i=n.getDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return oe(s,t.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});case"iiii":default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,e){const s=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,t,e){const i=n.getHours();let s;switch(i===12?s=Gl.noon:i===0?s=Gl.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,t,e){const i=n.getHours();let s;switch(i>=17?s=Gl.evening:i>=12?s=Gl.afternoon:i>=4?s=Gl.morning:s=Gl.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let i=n.getHours()%12;return i===0&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return Xr.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Xr.H(n,t)},K:function(n,t,e){const i=n.getHours()%12;return t==="Ko"?e.ordinalNumber(i,{unit:"hour"}):oe(i,t.length)},k:function(n,t,e){let i=n.getHours();return i===0&&(i=24),t==="ko"?e.ordinalNumber(i,{unit:"hour"}):oe(i,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Xr.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Xr.s(n,t)},S:function(n,t){return Xr.S(n,t)},X:function(n,t,e){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return vC(i);case"XXXX":case"XX":return bo(i);case"XXXXX":case"XXX":default:return bo(i,":")}},x:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"x":return vC(i);case"xxxx":case"xx":return bo(i);case"xxxxx":case"xxx":default:return bo(i,":")}},O:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yC(i,":");case"OOOO":default:return"GMT"+bo(i,":")}},z:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yC(i,":");case"zzzz":default:return"GMT"+bo(i,":")}},t:function(n,t,e){const i=Math.trunc(+n/1e3);return oe(i,t.length)},T:function(n,t,e){return oe(+n,t.length)}};function yC(n,t=""){const e=n>0?"-":"+",i=Math.abs(n),s=Math.trunc(i/60),a=i%60;return a===0?e+String(s):e+String(s)+t+oe(a,2)}function vC(n,t){return n%60===0?(n>0?"-":"+")+oe(Math.abs(n)/60,2):bo(n,t)}function bo(n,t=""){const e=n>0?"-":"+",i=Math.abs(n),s=oe(Math.trunc(i/60),2),a=oe(i%60,2);return e+s+t+a}const bC=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pk=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},T7=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],i=e[1],s=e[2];if(!s)return bC(n,t);let a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",bC(i,t)).replace("{{time}}",pk(s,t))},S7={p:pk,P:T7},A7=/^D+$/,C7=/^Y+$/,R7=["D","DD","YY","YYYY"];function I7(n){return A7.test(n)}function N7(n){return C7.test(n)}function k7(n,t,e){const i=M7(n,t,e);if(console.warn(i),R7.includes(n))throw new RangeError(i)}function M7(n,t,e){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const D7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,O7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,P7=/^'([^]*?)'?$/,L7=/''/g,V7=/[a-zA-Z]/;function bm(n,t,e){const i=Ep(),s=i.locale??v7,a=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,u=Yi(n,e?.in);if(!UH(u))throw new RangeError("Invalid time value");let d=t.match(O7).map(p=>{const y=p[0];if(y==="p"||y==="P"){const v=S7[y];return v(p,s.formatLong)}return p}).join("").match(D7).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const y=p[0];if(y==="'")return{isToken:!1,value:j7(p)};if(_C[y])return{isToken:!0,value:p};if(y.match(V7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:p}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));const f={firstWeekContainsDate:a,weekStartsOn:l,locale:s};return d.map(p=>{if(!p.isToken)return p.value;const y=p.value;(N7(y)||I7(y))&&k7(y,t,String(n));const v=_C[y[0]];return v(u,y,s.localize,f)}).join("")}function j7(n){const t=n.match(P7);return t?t[1].replace(L7,"'"):n}function U7(){const[n]=pp(hi),{userId:t}=CD(),e=qo(),{darkMode:i}=hv(),[s,a]=z.useState(null),[l,u]=z.useState(null),[d,f]=z.useState([]),[p,y]=z.useState([]),[v,T]=z.useState("questions"),[S,N]=z.useState(!0),C=n&&t===n.uid;z.useEffect(()=>{if(!t){e(n?`/profile/${n.uid}`:"/login");return}const H=Ui(Fi,`users/${t}`),ct=Eo(H,j=>{const D=j.val();a(D),N(!1)});(async()=>{try{const j=await getDoc(doc(xn,"users",t));j.exists()&&u(j.data())}catch(j){console.error("Error fetching user:",j)}})();const I=So(Ai(xn,"questions"),Wh("userId","==",t)),k=Ao(I,j=>{f(j.docs.map(D=>({id:D.id,...D.data()})))}),O=So(Ai(xn,"answers"),Wh("userId","==",t)),V=Ao(O,j=>{y(j.docs.map(D=>({id:D.id,...D.data()})))});return()=>{ct(),k(),V()}},[t,n,e]);const L=async()=>{try{await hi.signOut(),e("/login")}catch(H){console.error("Logout error:",H)}};if(S)return w.jsx("div",{className:`min-h-screen flex items-center justify-center ${i?"dark bg-gray-900":"bg-gray-50"}`,children:w.jsx("div",{className:"animate-pulse",children:"Loading profile..."})});if(!s)return w.jsx("div",{className:`min-h-screen flex items-center justify-center ${i?"dark bg-gray-900":"bg-gray-50"}`,children:w.jsxs("div",{className:`p-8 rounded-xl shadow-lg ${i?"bg-gray-800":"bg-white"}`,children:[w.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User not found"}),w.jsx(fe,{to:"/",className:"text-teal-600 hover:underline",children:"Return home"})]})});const q=l?.displayName||s?.displayName||"User",G=C?n.email:null,J=n?.metadata?.creationTime?bm(new Date(n.metadata.creationTime),"MMM yyyy"):"Recently";return w.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${i?"dark bg-gray-900":"bg-gray-50"}`,children:[w.jsx("header",{className:`sticky top-0 z-10 backdrop-blur-md ${i?"bg-black/80":"bg-white/80"} shadow-sm`,children:w.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[w.jsx(fe,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-teal-400 to-teal-600 bg-clip-text text-transparent",children:"StudiQ"}),C&&w.jsxs("nav",{className:"flex items-center space-x-4",children:[w.jsxs(fe,{to:"/settings",className:`flex items-center ${i?"text-gray-300 hover:text-teal-400":"text-gray-700 hover:text-teal-600"}`,children:[w.jsx(hk,{className:"mr-1"})," Settings"]}),w.jsxs("button",{onClick:L,className:`flex items-center ${i?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-800"}`,children:[w.jsx(mw,{className:"mr-1"})," Sign Out"]})]})]})}),w.jsx("main",{className:"container mx-auto px-4 py-8",children:w.jsxs("div",{className:"max-w-6xl mx-auto",children:[w.jsx("div",{className:`p-6 rounded-xl shadow-lg mb-6 ${i?"bg-gray-800/70":"bg-white/80"} backdrop-blur-sm`,children:w.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[w.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center text-5xl ${i?"bg-teal-900 text-teal-300":"bg-teal-100 text-teal-800"}`,children:q.charAt(0)}),w.jsxs("div",{className:"flex-1 text-center md:text-left",children:[w.jsxs("h1",{className:`text-3xl font-bold mb-2 ${i?"text-gray-100":"text-gray-800"}`,children:[q,C&&w.jsx("span",{className:"ml-2 text-sm font-normal px-2 py-1 rounded-full bg-teal-500/10 text-teal-500",children:"You"})]}),G&&w.jsx("p",{className:`mb-4 ${i?"text-gray-400":"text-gray-600"}`,children:G}),w.jsxs("div",{className:`flex flex-wrap justify-center md:justify-start gap-4 ${i?"text-gray-300":"text-gray-700"}`,children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx(sd,{className:"mr-2 text-teal-500"}),w.jsxs("span",{children:[s?.points||0," Points"]})]}),w.jsxs("div",{className:"flex items-center",children:[w.jsx(dC,{className:"mr-2 text-teal-500"}),w.jsxs("span",{children:[d.length," Questions"]})]}),w.jsxs("div",{className:"flex items-center",children:[w.jsx(Nh,{className:"mr-2 text-teal-500"}),w.jsxs("span",{children:[p.length," Answers"]})]}),C&&s?.bookmarks&&w.jsxs("div",{className:"flex items-center",children:[w.jsx(Mg,{className:"mr-2 text-teal-500"}),w.jsxs("span",{children:[Object.keys(s.bookmarks).length," Bookmarks"]})]})]})]})]})}),w.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-${C?"4":"3"} gap-4 mb-6 ${i?"text-gray-200":"text-gray-800"}`,children:[w.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[w.jsxs("h3",{className:"font-semibold flex items-center",children:[w.jsx(sd,{className:"mr-2 text-yellow-500"})," Best Answers"]}),w.jsx("p",{className:"text-2xl font-bold",children:s?.bestAnswers||0})]}),w.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[w.jsxs("h3",{className:"font-semibold flex items-center",children:[w.jsx(Dg,{className:"mr-2 text-blue-500"})," Active Days"]}),w.jsx("p",{className:"text-2xl font-bold",children:s?.activeDays||1})]}),C&&w.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[w.jsxs("h3",{className:"font-semibold flex items-center",children:[w.jsx(Ec,{className:"mr-2 text-green-500"})," Member Since"]}),w.jsx("p",{className:"text-xl",children:J})]}),C&&w.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[w.jsxs("h3",{className:"font-semibold flex items-center",children:[w.jsx(Nh,{className:"mr-2 text-purple-500"})," Answer Rate"]}),w.jsx("p",{className:"text-2xl font-bold",children:d.length>0?`${Math.round(d.filter(H=>H.answered).length/d.length*100)}%`:"0%"})]})]}),w.jsx("div",{className:`mb-4 border-b ${i?"border-gray-700":"border-gray-200"}`,children:w.jsxs("nav",{className:"flex space-x-4",children:[w.jsxs("button",{onClick:()=>T("questions"),className:`py-2 px-4 font-medium ${v==="questions"?i?"text-teal-400 border-b-2 border-teal-400":"text-teal-600 border-b-2 border-teal-600":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:["Questions (",d.length,")"]}),w.jsxs("button",{onClick:()=>T("answers"),className:`py-2 px-4 font-medium ${v==="answers"?i?"text-teal-400 border-b-2 border-teal-400":"text-teal-600 border-b-2 border-teal-600":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:["Answers (",p.length,")"]}),C&&w.jsxs("button",{onClick:()=>T("bookmarks"),className:`py-2 px-4 font-medium ${v==="bookmarks"?i?"text-teal-400 border-b-2 border-teal-400":"text-teal-600 border-b-2 border-teal-600":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:["Bookmarks (",s?.bookmarks?Object.keys(s.bookmarks).length:0,")"]})]})}),w.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${i?"bg-gray-800/70":"bg-white/80"} backdrop-blur-sm`,children:[v==="questions"&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("h2",{className:`text-xl font-semibold mb-4 ${i?"text-gray-200":"text-gray-800"}`,children:[w.jsx(dC,{className:"inline mr-2"})," ",C?"My":`${q}'s`," Questions"]}),d.length>0?d.map(H=>w.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700/50 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[w.jsx(fe,{to:`/question/${H.id}`,className:`font-medium block mb-1 ${i?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:H.title}),w.jsxs("div",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:[w.jsx("span",{className:"capitalize",children:H.subject})," ",H.createdAt?.toDate?bm(H.createdAt.toDate(),"MMM d, yyyy"):"Recent"," ",H.answered?w.jsx("span",{className:"text-green-500 ml-1",children:"Answered"}):w.jsx("span",{className:"text-yellow-500 ml-1",children:"Pending"})]})]},H.id)):w.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:C?"You haven't asked any questions yet":"This user hasn't asked any questions yet"})]}),v==="answers"&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("h2",{className:`text-xl font-semibold mb-4 ${i?"text-gray-200":"text-gray-800"}`,children:[w.jsx(Nh,{className:"inline mr-2"})," ",C?"My":`${q}'s`," Answers"]}),p.length>0?p.map(H=>w.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700/50 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[w.jsxs(fe,{to:`/question/${H.questionId}`,className:`font-medium block mb-1 ${i?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:[H.content.substring(0,100),"..."]}),w.jsxs("div",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:[H.createdAt?.toDate?bm(H.createdAt.toDate(),"MMM d, yyyy"):"Recent"," ",H.isBestAnswer?w.jsx("span",{className:"text-green-500 ml-1",children:"Marked as Best"}):w.jsx("span",{className:"text-gray-500 ml-1",children:"Regular answer"})]})]},H.id)):w.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:C?"You haven't answered any questions yet":"This user hasn't answered any questions yet"})]}),v==="bookmarks"&&C&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("h2",{className:`text-xl font-semibold mb-4 ${i?"text-gray-200":"text-gray-800"}`,children:[w.jsx(Mg,{className:"inline mr-2"})," My Bookmarks"]}),s?.bookmarks&&Object.keys(s.bookmarks).length>0?w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(s.bookmarks).map(H=>w.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700/50 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[w.jsx(fe,{to:`/question/${H}`,className:`font-medium block ${i?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:s.bookmarks[H].title||"Bookmarked Question"}),w.jsxs("div",{className:`text-sm mt-1 ${i?"text-gray-400":"text-gray-600"}`,children:["Bookmarked on ",bm(new Date(s.bookmarks[H].timestamp),"MMM d, yyyy")]})]},H))}):w.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:"No bookmarks yet"})]})]})]})})]})}function F7(){const[n]=pp(hi);qo();const[t,e]=z.useState(!1),[i,s]=z.useState("faq"),[a,l]=z.useState({name:"",email:"",subject:"",message:""}),[u,d]=z.useState(!1);z.useEffect(()=>{const T=localStorage.getItem("darkMode")==="true";e(T),document.documentElement.classList.toggle("dark",T)},[]);const f=T=>{const{name:S,value:N}=T.target;l(C=>({...C,[S]:N}))},p=T=>{T.preventDefault(),console.log("Contact form submitted:",a),d(!0),l({name:"",email:"",subject:"",message:""}),setTimeout(()=>d(!1),5e3)},y=[{question:"How do I post a question?",answer:"Navigate to the home page and click on the 'Ask your question' box. Type your question, select a subject, and click 'Post Question'."},{question:"How do I earn points?",answer:"You earn points by asking questions, providing helpful answers, and receiving upvotes on your contributions."},{question:"Can I change my display name?",answer:"Yes, you can change your display name in the Account Settings page under Profile Information."},{question:"How do I report inappropriate content?",answer:"Click on the three dots next to any question or answer and select 'Report'. Our moderation team will review it."},{question:"Is there a mobile app available?",answer:"Currently we're web-only, but our site is fully responsive and works great on mobile browsers."}],v=[{title:"Getting Started",content:"Learn how to create an account, set up your profile, and make your first post."},{title:"Community Guidelines",content:"Understand our rules and expectations for participation in the StudiQ community."},{title:"Answering Questions",content:"Tips for providing helpful, high-quality answers that earn you points and reputation."},{title:"Privacy & Security",content:"How we protect your data and what you can do to keep your account secure."}];return w.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${t?"dark bg-gray-900":"bg-gray-50"}`,children:[w.jsx("header",{className:`sticky top-0 z-10 backdrop-blur-md ${t?"bg-black/80":"bg-white/80"} shadow-sm`,children:w.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[w.jsxs(fe,{to:n?"/":"/login",className:"flex items-center text-teal-600 hover:text-teal-700",children:[w.jsx(wp,{className:"mr-1"})," ",n?"Back to Home":"Back to Login"]}),w.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-teal-400 to-teal-600 bg-clip-text text-transparent",children:"Help Center"}),w.jsx("div",{})," "]})}),w.jsx("main",{className:"container mx-auto px-4 py-8",children:w.jsx("div",{className:"max-w-4xl mx-auto",children:w.jsx("div",{className:`p-6 rounded-xl shadow-lg mb-8 backdrop-blur-sm ${t?"bg-gray-800/70 border border-gray-700":"bg-white/80 border border-gray-200"}`,children:w.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[w.jsx("div",{className:"md:w-1/3",children:w.jsxs("div",{className:`p-4 rounded-lg sticky top-4 ${t?"bg-gray-700/50":"bg-gray-100"}`,children:[w.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[w.jsx(Og,{className:"mr-2 text-teal-500"}),"Help Topics"]}),w.jsxs("nav",{className:"space-y-2",children:[w.jsx("button",{onClick:()=>s("faq"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="faq"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"FAQs"}),w.jsx("button",{onClick:()=>s("guides"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="guides"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"Guides"}),w.jsx("button",{onClick:()=>s("contact"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="contact"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"Contact Us"}),w.jsx("button",{onClick:()=>s("community"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="community"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"Community"})]})]})}),w.jsxs("div",{className:"md:w-2/3",children:[i==="faq"&&w.jsxs("div",{children:[w.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[w.jsx(Og,{className:"mr-2 text-teal-500"}),"Frequently Asked Questions"]}),w.jsx("div",{className:"space-y-4",children:y.map((T,S)=>w.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700/50 border border-gray-600":"bg-white border border-gray-200"}`,children:[w.jsx("h3",{className:`font-medium mb-2 ${t?"text-teal-400":"text-teal-600"}`,children:T.question}),w.jsx("p",{className:t?"text-gray-300":"text-gray-700",children:T.answer})]},S))})]}),i==="guides"&&w.jsxs("div",{children:[w.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[w.jsx(yH,{className:"mr-2 text-teal-500"}),"Helpful Guides"]}),w.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:v.map((T,S)=>w.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700/50 border border-gray-600":"bg-white border border-gray-200"}`,children:[w.jsx("h3",{className:`font-medium mb-2 ${t?"text-teal-400":"text-teal-600"}`,children:T.title}),w.jsx("p",{className:t?"text-gray-300":"text-gray-700",children:T.content}),w.jsx("button",{className:`mt-3 text-sm ${t?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:"Read more "})]},S))})]}),i==="contact"&&w.jsxs("div",{children:[w.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[w.jsx(gw,{className:"mr-2 text-teal-500"}),"Contact Support"]}),u?w.jsx("div",{className:`p-4 rounded-lg ${t?"bg-teal-900/30 text-teal-200":"bg-teal-100 text-teal-800"}`,children:"Thank you for contacting us! We'll get back to you within 24 hours."}):w.jsxs("form",{onSubmit:p,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Your Name"}),w.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Email Address"}),w.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"subject",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Subject"}),w.jsxs("select",{id:"subject",name:"subject",value:a.subject,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,children:[w.jsx("option",{value:"",children:"Select a topic"}),w.jsx("option",{value:"account",children:"Account Issues"}),w.jsx("option",{value:"technical",children:"Technical Problems"}),w.jsx("option",{value:"billing",children:"Billing Questions"}),w.jsx("option",{value:"feedback",children:"Feedback"}),w.jsx("option",{value:"other",children:"Other"})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Message"}),w.jsx("textarea",{id:"message",name:"message",rows:"5",value:a.message,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),w.jsx("button",{type:"submit",className:`w-full py-3 px-4 rounded-lg font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 ${t?"focus:ring-offset-gray-800":"focus:ring-offset-white"}`,children:"Send Message"})]})]}),i==="community"&&w.jsxs("div",{children:[w.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[w.jsx(dk,{className:"mr-2 text-teal-500"}),"Community Resources"]}),w.jsxs("div",{className:`p-6 rounded-lg mb-6 ${t?"bg-gray-700/50 border border-gray-600":"bg-white border border-gray-200"}`,children:[w.jsx("h3",{className:`text-lg font-medium mb-3 ${t?"text-teal-400":"text-teal-600"}`,children:"Join Our Community"}),w.jsx("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-700"}`,children:"Connect with other learners, ask questions, and share knowledge in our active community forums."}),w.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[w.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-600/30":"bg-gray-100"}`,children:[w.jsxs("h4",{className:`font-medium mb-2 ${t?"text-gray-200":"text-gray-800"}`,children:[w.jsx(Nh,{className:"inline mr-2 text-teal-500"}),"Discussion Forums"]}),w.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Participate in topic-specific discussions with students and educators."}),w.jsx("button",{className:`mt-3 text-sm ${t?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:"Visit Forums "})]}),w.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-600/30":"bg-gray-100"}`,children:[w.jsxs("h4",{className:`font-medium mb-2 ${t?"text-gray-200":"text-gray-800"}`,children:[w.jsx(uk,{className:"inline mr-2 text-teal-500"}),"Local Study Groups"]}),w.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Find or create study groups in your area or language."}),w.jsx("button",{className:`mt-3 text-sm ${t?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:"Find Groups "})]})]})]})]})]})]})})})})]})}function z7(){return w.jsx(jC,{children:w.jsxs(BD,{children:[w.jsx(Zr,{path:"/",element:w.jsx(RH,{})}),w.jsx(Zr,{path:"/login",element:w.jsx(IH,{})}),w.jsx(Zr,{path:"/signup",element:w.jsx(NH,{})}),w.jsx(Zr,{path:"/profile/:userId",element:w.jsx(U7,{})}),w.jsx(Zr,{path:"/help",element:w.jsx(F7,{})}),w.jsx(Zr,{path:"/settings",element:w.jsx(kH,{})}),w.jsx(Zr,{path:"*",element:w.jsx(MH,{})})]})})}function B7(){return w.jsx(jC,{children:w.jsx(cF,{children:w.jsx(hO,{basename:"/StudiQ",children:w.jsx(z7,{})})})})}XM.createRoot(document.getElementById("root")).render(w.jsx(z.StrictMode,{children:w.jsx(B7,{})}));
