(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function FD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yy={exports:{}},Bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function zD(){if(wT)return Bu;wT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Bu.Fragment=t,Bu.jsx=e,Bu.jsxs=e,Bu}var xT;function BD(){return xT||(xT=1,yy.exports=zD()),yy.exports}var E=BD(),vy={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function HD(){if(TT)return kt;TT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(j){return j===null||typeof j!="object"?null:(j=y&&j[y]||j["@@iterator"],typeof j=="function"?j:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,N={};function C(j,tt,ct){this.props=j,this.context=tt,this.refs=N,this.updater=ct||T}C.prototype.isReactComponent={},C.prototype.setState=function(j,tt){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,tt,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function L(){}L.prototype=C.prototype;function W(j,tt,ct){this.props=j,this.context=tt,this.refs=N,this.updater=ct||T}var $=W.prototype=new L;$.constructor=W,S($,C.prototype),$.isPureReactComponent=!0;var Z=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},lt=Object.prototype.hasOwnProperty;function D(j,tt,ct,rt,ft,wt){return ct=wt.ref,{$$typeof:n,type:j,key:tt,ref:ct!==void 0?ct:null,props:wt}}function I(j,tt){return D(j.type,tt,void 0,void 0,void 0,j.props)}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function P(j){var tt={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ct){return tt[ct]})}var V=/\/+/g;function U(j,tt){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):tt.toString(36)}function M(){}function Gt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(M,M):(j.status="pending",j.then(function(tt){j.status==="pending"&&(j.status="fulfilled",j.value=tt)},function(tt){j.status==="pending"&&(j.status="rejected",j.reason=tt)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Et(j,tt,ct,rt,ft){var wt=typeof j;(wt==="undefined"||wt==="boolean")&&(j=null);var bt=!1;if(j===null)bt=!0;else switch(wt){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(j.$$typeof){case n:case t:bt=!0;break;case p:return bt=j._init,Et(bt(j._payload),tt,ct,rt,ft)}}if(bt)return ft=ft(j),bt=rt===""?"."+U(j,0):rt,Z(ft)?(ct="",bt!=null&&(ct=bt.replace(V,"$&/")+"/"),Et(ft,tt,ct,"",function(Ui){return Ui})):ft!=null&&(k(ft)&&(ft=I(ft,ct+(ft.key==null||j&&j.key===ft.key?"":(""+ft.key).replace(V,"$&/")+"/")+bt)),tt.push(ft)),1;bt=0;var en=rt===""?".":rt+":";if(Z(j))for(var me=0;me<j.length;me++)rt=j[me],wt=en+U(rt,me),bt+=Et(rt,tt,ct,wt,ft);else if(me=v(j),typeof me=="function")for(j=me.call(j),me=0;!(rt=j.next()).done;)rt=rt.value,wt=en+U(rt,me++),bt+=Et(rt,tt,ct,wt,ft);else if(wt==="object"){if(typeof j.then=="function")return Et(Gt(j),tt,ct,rt,ft);throw tt=String(j),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return bt}function z(j,tt,ct){if(j==null)return j;var rt=[],ft=0;return Et(j,rt,"","",function(wt){return tt.call(ct,wt,ft++)}),rt}function it(j){if(j._status===-1){var tt=j._result;tt=tt(),tt.then(function(ct){(j._status===0||j._status===-1)&&(j._status=1,j._result=ct)},function(ct){(j._status===0||j._status===-1)&&(j._status=2,j._result=ct)}),j._status===-1&&(j._status=0,j._result=tt)}if(j._status===1)return j._result.default;throw j._result}var dt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function _t(){}return kt.Children={map:z,forEach:function(j,tt,ct){z(j,function(){tt.apply(this,arguments)},ct)},count:function(j){var tt=0;return z(j,function(){tt++}),tt},toArray:function(j){return z(j,function(tt){return tt})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},kt.Component=C,kt.Fragment=e,kt.Profiler=s,kt.PureComponent=W,kt.StrictMode=i,kt.Suspense=d,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,kt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return H.H.useMemoCache(j)}},kt.cache=function(j){return function(){return j.apply(null,arguments)}},kt.cloneElement=function(j,tt,ct){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var rt=S({},j.props),ft=j.key,wt=void 0;if(tt!=null)for(bt in tt.ref!==void 0&&(wt=void 0),tt.key!==void 0&&(ft=""+tt.key),tt)!lt.call(tt,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&tt.ref===void 0||(rt[bt]=tt[bt]);var bt=arguments.length-2;if(bt===1)rt.children=ct;else if(1<bt){for(var en=Array(bt),me=0;me<bt;me++)en[me]=arguments[me+2];rt.children=en}return D(j.type,ft,void 0,void 0,wt,rt)},kt.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},kt.createElement=function(j,tt,ct){var rt,ft={},wt=null;if(tt!=null)for(rt in tt.key!==void 0&&(wt=""+tt.key),tt)lt.call(tt,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ft[rt]=tt[rt]);var bt=arguments.length-2;if(bt===1)ft.children=ct;else if(1<bt){for(var en=Array(bt),me=0;me<bt;me++)en[me]=arguments[me+2];ft.children=en}if(j&&j.defaultProps)for(rt in bt=j.defaultProps,bt)ft[rt]===void 0&&(ft[rt]=bt[rt]);return D(j,wt,void 0,void 0,null,ft)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(j){return{$$typeof:u,render:j}},kt.isValidElement=k,kt.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:it}},kt.memo=function(j,tt){return{$$typeof:f,type:j,compare:tt===void 0?null:tt}},kt.startTransition=function(j){var tt=H.T,ct={};H.T=ct;try{var rt=j(),ft=H.S;ft!==null&&ft(ct,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(_t,dt)}catch(wt){dt(wt)}finally{H.T=tt}},kt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},kt.use=function(j){return H.H.use(j)},kt.useActionState=function(j,tt,ct){return H.H.useActionState(j,tt,ct)},kt.useCallback=function(j,tt){return H.H.useCallback(j,tt)},kt.useContext=function(j){return H.H.useContext(j)},kt.useDebugValue=function(){},kt.useDeferredValue=function(j,tt){return H.H.useDeferredValue(j,tt)},kt.useEffect=function(j,tt,ct){var rt=H.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(j,tt)},kt.useId=function(){return H.H.useId()},kt.useImperativeHandle=function(j,tt,ct){return H.H.useImperativeHandle(j,tt,ct)},kt.useInsertionEffect=function(j,tt){return H.H.useInsertionEffect(j,tt)},kt.useLayoutEffect=function(j,tt){return H.H.useLayoutEffect(j,tt)},kt.useMemo=function(j,tt){return H.H.useMemo(j,tt)},kt.useOptimistic=function(j,tt){return H.H.useOptimistic(j,tt)},kt.useReducer=function(j,tt,ct){return H.H.useReducer(j,tt,ct)},kt.useRef=function(j){return H.H.useRef(j)},kt.useState=function(j){return H.H.useState(j)},kt.useSyncExternalStore=function(j,tt,ct){return H.H.useSyncExternalStore(j,tt,ct)},kt.useTransition=function(){return H.H.useTransition()},kt.version="19.1.0",kt}var ST;function ev(){return ST||(ST=1,vy.exports=HD()),vy.exports}var B=ev();const er=FD(B);var by={exports:{}},Hu={},Ey={exports:{}},wy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function qD(){return AT||(AT=1,function(n){function t(z,it){var dt=z.length;z.push(it);t:for(;0<dt;){var _t=dt-1>>>1,j=z[_t];if(0<s(j,it))z[_t]=it,z[dt]=j,dt=_t;else break t}}function e(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var it=z[0],dt=z.pop();if(dt!==it){z[0]=dt;t:for(var _t=0,j=z.length,tt=j>>>1;_t<tt;){var ct=2*(_t+1)-1,rt=z[ct],ft=ct+1,wt=z[ft];if(0>s(rt,dt))ft<j&&0>s(wt,rt)?(z[_t]=wt,z[ft]=dt,_t=ft):(z[_t]=rt,z[ct]=dt,_t=ct);else if(ft<j&&0>s(wt,dt))z[_t]=wt,z[ft]=dt,_t=ft;else break t}}return it}function s(z,it){var dt=z.sortIndex-it.sortIndex;return dt!==0?dt:z.id-it.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,y=null,v=3,T=!1,S=!1,N=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function Z(z){for(var it=e(f);it!==null;){if(it.callback===null)i(f);else if(it.startTime<=z)i(f),it.sortIndex=it.expirationTime,t(d,it);else break;it=e(f)}}function H(z){if(N=!1,Z(z),!S)if(e(d)!==null)S=!0,lt||(lt=!0,U());else{var it=e(f);it!==null&&Et(H,it.startTime-z)}}var lt=!1,D=-1,I=5,k=-1;function P(){return C?!0:!(n.unstable_now()-k<I)}function V(){if(C=!1,lt){var z=n.unstable_now();k=z;var it=!0;try{t:{S=!1,N&&(N=!1,W(D),D=-1),T=!0;var dt=v;try{e:{for(Z(z),y=e(d);y!==null&&!(y.expirationTime>z&&P());){var _t=y.callback;if(typeof _t=="function"){y.callback=null,v=y.priorityLevel;var j=_t(y.expirationTime<=z);if(z=n.unstable_now(),typeof j=="function"){y.callback=j,Z(z),it=!0;break e}y===e(d)&&i(d),Z(z)}else i(d);y=e(d)}if(y!==null)it=!0;else{var tt=e(f);tt!==null&&Et(H,tt.startTime-z),it=!1}}break t}finally{y=null,v=dt,T=!1}it=void 0}}finally{it?U():lt=!1}}}var U;if(typeof $=="function")U=function(){$(V)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Gt=M.port2;M.port1.onmessage=V,U=function(){Gt.postMessage(null)}}else U=function(){L(V,0)};function Et(z,it){D=L(function(){z(n.unstable_now())},it)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(z){switch(v){case 1:case 2:case 3:var it=3;break;default:it=v}var dt=v;v=it;try{return z()}finally{v=dt}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(z,it){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var dt=v;v=z;try{return it()}finally{v=dt}},n.unstable_scheduleCallback=function(z,it,dt){var _t=n.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?_t+dt:_t):dt=_t,z){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=dt+j,z={id:p++,callback:it,priorityLevel:z,startTime:dt,expirationTime:j,sortIndex:-1},dt>_t?(z.sortIndex=dt,t(f,z),e(d)===null&&z===e(f)&&(N?(W(D),D=-1):N=!0,Et(H,dt-_t))):(z.sortIndex=j,t(d,z),S||T||(S=!0,lt||(lt=!0,U()))),z},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(z){var it=v;return function(){var dt=v;v=it;try{return z.apply(this,arguments)}finally{v=dt}}}}(wy)),wy}var CT;function WD(){return CT||(CT=1,Ey.exports=qD()),Ey.exports}var xy={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function GD(){if(RT)return Sn;RT=1;var n=ev();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Sn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(d,f,null,p)},Sn.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},Sn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Sn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Sn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:T}):p==="script"&&i.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Sn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Sn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Sn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Sn.requestFormReset=function(d){i.d.r(d)},Sn.unstable_batchedUpdates=function(d,f){return d(f)},Sn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},Sn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Sn.version="19.1.0",Sn}var IT;function YD(){if(IT)return xy.exports;IT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),xy.exports=GD(),xy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function $D(){if(NT)return Hu;NT=1;var n=WD(),t=ev(),e=YD();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(a(r)!==r)throw Error(i(188))}function d(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var c=r,h=o;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return u(g),r;if(_===h)return u(g),o;_=_.sibling}throw Error(i(188))}if(c.return!==h.return)c=g,h=_;else{for(var x=!1,A=g.child;A;){if(A===c){x=!0,c=g,h=_;break}if(A===h){x=!0,h=g,c=_;break}A=A.sibling}if(!x){for(A=_.child;A;){if(A===c){x=!0,c=_,h=g;break}if(A===h){x=!0,h=_,c=g;break}A=A.sibling}if(!x)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:o}function f(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=f(r),o!==null)return o;r=r.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),$=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),lt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function Gt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case H:return"Suspense";case lt:return"SuspenseList";case k:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case $:return(r.displayName||"Context")+".Provider";case W:return(r._context.displayName||"Context")+".Consumer";case Z:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return o=r.displayName||null,o!==null?o:Gt(r.type)||"Memo";case I:o=r._payload,r=r._init;try{return Gt(r(o))}catch{}}return null}var Et=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},_t=[],j=-1;function tt(r){return{current:r}}function ct(r){0>j||(r.current=_t[j],_t[j]=null,j--)}function rt(r,o){j++,_t[j]=r.current,r.current=o}var ft=tt(null),wt=tt(null),bt=tt(null),en=tt(null);function me(r,o){switch(rt(bt,o),rt(wt,r),rt(ft,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Kx(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Kx(o),r=Xx(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ct(ft),rt(ft,r)}function Ui(){ct(ft),ct(wt),ct(bt)}function gr(r){r.memoizedState!==null&&rt(en,r);var o=ft.current,c=Xx(o,r.type);o!==c&&(rt(wt,r),rt(ft,c))}function vs(r){wt.current===r&&(ct(ft),ct(wt)),en.current===r&&(ct(en),Vu._currentValue=dt)}var Ia=Object.prototype.hasOwnProperty,Na=n.unstable_scheduleCallback,ka=n.unstable_cancelCallback,Oc=n.unstable_shouldYield,Ed=n.unstable_requestPaint,ri=n.unstable_now,yp=n.unstable_getCurrentPriorityLevel,Pc=n.unstable_ImmediatePriority,Yo=n.unstable_UserBlockingPriority,Da=n.unstable_NormalPriority,vp=n.unstable_LowPriority,$o=n.unstable_IdlePriority,Lc=n.log,wd=n.unstable_setDisableYieldValue,Ce=null,ee=null;function $n(r){if(typeof Lc=="function"&&wd(r),ee&&typeof ee.setStrictMode=="function")try{ee.setStrictMode(Ce,r)}catch{}}var xn=Math.clz32?Math.clz32:Ma,xd=Math.log,bp=Math.LN2;function Ma(r){return r>>>=0,r===0?32:31-(xd(r)/bp|0)|0}var Oa=256,Pa=4194304;function Ai(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Qo(r,o,c){var h=r.pendingLanes;if(h===0)return 0;var g=0,_=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var A=h&134217727;return A!==0?(h=A&~_,h!==0?g=Ai(h):(x&=A,x!==0?g=Ai(x):c||(c=A&~r,c!==0&&(g=Ai(c))))):(A=h&~_,A!==0?g=Ai(A):x!==0?g=Ai(x):c||(c=h&~r,c!==0&&(g=Ai(c)))),g===0?0:o!==0&&o!==g&&(o&_)===0&&(_=g&-g,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:g}function La(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Vc(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jc(){var r=Oa;return Oa<<=1,(Oa&4194048)===0&&(Oa=256),r}function Uc(){var r=Pa;return Pa<<=1,(Pa&62914560)===0&&(Pa=4194304),r}function bs(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Es(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Fc(r,o,c,h,g,_){var x=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var A=r.entanglements,O=r.expirationTimes,Q=r.hiddenUpdates;for(c=x&~c;0<c;){var et=31-xn(c),at=1<<et;A[et]=0,O[et]=-1;var K=Q[et];if(K!==null)for(Q[et]=null,et=0;et<K.length;et++){var X=K[et];X!==null&&(X.lane&=-536870913)}c&=~at}h!==0&&Fi(r,h,0),_!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=_&~(x&~o))}function Fi(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var h=31-xn(o);r.entangledLanes|=o,r.entanglements[h]=r.entanglements[h]|1073741824|c&4194090}function zc(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var h=31-xn(c),g=1<<h;g&o|r[h]&o&&(r[h]|=o),c&=~g}}function pr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ko(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function _r(){var r=it.p;return r!==0?r:(r=window.event,r===void 0?32:pT(r.type))}function Td(r,o){var c=it.p;try{return it.p=r,o()}finally{it.p=c}}var Ee=Math.random().toString(36).slice(2),Ye="__reactFiber$"+Ee,Ve="__reactProps$"+Ee,ai="__reactContainer$"+Ee,Bc="__reactEvents$"+Ee,Ep="__reactListeners$"+Ee,yr="__reactHandles$"+Ee,Sd="__reactResources$"+Ee,Va="__reactMarker$"+Ee;function vr(r){delete r[Ye],delete r[Ve],delete r[Bc],delete r[Ep],delete r[yr]}function ws(r){var o=r[Ye];if(o)return o;for(var c=r.parentNode;c;){if(o=c[ai]||c[Ye]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=eT(r);r!==null;){if(c=r[Ye])return c;r=eT(r)}return o}r=c,c=r.parentNode}return null}function zi(r){if(r=r[Ye]||r[ai]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Bi(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Dn(r){var o=r[Sd];return o||(o=r[Sd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function De(r){r[Va]=!0}var Hc=new Set,Xo={};function Ci(r,o){xs(r,o),xs(r+"Capture",o)}function xs(r,o){for(Xo[r]=o,r=0;r<o.length;r++)Hc.add(o[r])}var Ad=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cd={},ja={};function Rd(r){return Ia.call(ja,r)?!0:Ia.call(Cd,r)?!1:Ad.test(r)?ja[r]=!0:(Cd[r]=!0,!1)}function br(r,o,c){if(Rd(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function Hi(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function fn(r,o,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+h)}}var Ua,Id;function Ts(r){if(Ua===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Ua=o&&o[1]||"",Id=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ua+r+Id}var Zo=!1;function Jo(r,o){if(!r||Zo)return"";Zo=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(X){var K=X}Reflect.construct(r,[],at)}else{try{at.call()}catch(X){K=X}r.call(at.prototype)}}else{try{throw Error()}catch(X){K=X}(at=r())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),x=_[0],A=_[1];if(x&&A){var O=x.split(`
`),Q=A.split(`
`);for(g=h=0;h<O.length&&!O[h].includes("DetermineComponentFrameRoot");)h++;for(;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;if(h===O.length||g===Q.length)for(h=O.length-1,g=Q.length-1;1<=h&&0<=g&&O[h]!==Q[g];)g--;for(;1<=h&&0<=g;h--,g--)if(O[h]!==Q[g]){if(h!==1||g!==1)do if(h--,g--,0>g||O[h]!==Q[g]){var et=`
`+O[h].replace(" at new "," at ");return r.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",r.displayName)),et}while(1<=h&&0<=g);break}}}finally{Zo=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ts(c):""}function qc(r){switch(r.tag){case 26:case 27:case 5:return Ts(r.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 15:return Jo(r.type,!1);case 11:return Jo(r.type.render,!1);case 1:return Jo(r.type,!0);case 31:return Ts("Activity");default:return""}}function tl(r){try{var o="";do o+=qc(r),r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Mn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Wc(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wp(r){var o=Wc(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),h=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,_.call(this,x)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function el(r){r._valueTracker||(r._valueTracker=wp(r))}function Gc(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return r&&(h=Wc(r)?r.checked?"true":"false":r.value),r=h,r!==c?(o.setValue(r),!0):!1}function Fa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var xp=/[\n"\\]/g;function je(r){return r.replace(xp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Qn(r,o,c,h,g,_,x,A){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),o!=null?x==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Mn(o)):r.value!==""+Mn(o)&&(r.value=""+Mn(o)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),o!=null?Er(r,x,Mn(o)):c!=null?Er(r,x,Mn(c)):h!=null&&r.removeAttribute("value"),g==null&&_!=null&&(r.defaultChecked=!!_),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+Mn(A):r.removeAttribute("name")}function za(r,o,c,h,g,_,x,A){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null))return;c=c!=null?""+Mn(c):"",o=o!=null?""+Mn(o):c,A||o===r.value||(r.value=o),r.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=A?r.checked:!!h,r.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Er(r,o,c){o==="number"&&Fa(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Ss(r,o,c,h){if(r=r.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=o.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&h&&(r[c].defaultSelected=!0)}else{for(c=""+Mn(c),o=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,h&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function ae(r,o,c){if(o!=null&&(o=""+Mn(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+Mn(c):""}function Ba(r,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(i(92));if(Et(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=Mn(o),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h)}function oi(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var Ha=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nd(r,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":h?r.setProperty(o,c):typeof c!="number"||c===0||Ha.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function Yc(r,o,c){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&c[g]!==h&&Nd(r,g,h)}else for(var _ in o)o.hasOwnProperty(_)&&Nd(r,_,o[_])}function $c(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nl(r){return Sp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var As=null;function li(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Cs=null,Rs=null;function Qc(r){var o=zi(r);if(o&&(r=o.stateNode)){var c=r[Ve]||null;t:switch(r=o.stateNode,o.type){case"input":if(Qn(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+je(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==r&&h.form===r.form){var g=h[Ve]||null;if(!g)throw Error(i(90));Qn(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===r.form&&Gc(h)}break t;case"textarea":ae(r,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&Ss(r,!!c.multiple,o,!1)}}}var qi=!1;function kd(r,o,c){if(qi)return r(o,c);qi=!0;try{var h=r(o);return h}finally{if(qi=!1,(Cs!==null||Rs!==null)&&(Sf(),Cs&&(o=Cs,r=Rs,Rs=Cs=null,Qc(o),r)))for(o=0;o<r.length;o++)Qc(r[o])}}function qa(r,o){var c=r.stateNode;if(c===null)return null;var h=c[Ve]||null;if(h===null)return null;c=h[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break t;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,o,typeof c));return c}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ci=!1;if(Ri)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){ci=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{ci=!1}var Wi=null,wr=null,Is=null;function Kc(){if(Is)return Is;var r,o=wr,c=o.length,h,g="value"in Wi?Wi.value:Wi.textContent,_=g.length;for(r=0;r<c&&o[r]===g[r];r++);var x=c-r;for(h=1;h<=x&&o[c-h]===g[_-h];h++);return Is=g.slice(r,1<h?1-h:void 0)}function Gi(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Yi(){return!0}function Xc(){return!1}function nn(r){function o(c,h,g,_,x){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(c=r[A],this[A]=c?c(_):_[A]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yi:Xc,this.isPropagationStopped=Xc,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),o}var Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},il=nn(Jt),Ga=p({},Jt,{view:0,detail:0}),Dd=nn(Ga),sl,rl,$i,Ya=p({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==$i&&($i&&r.type==="mousemove"?(sl=r.screenX-$i.screenX,rl=r.screenY-$i.screenY):rl=sl=0,$i=r),sl)},movementY:function(r){return"movementY"in r?r.movementY:rl}}),ui=nn(Ya),Md=p({},Ya,{dataTransfer:0}),Ap=nn(Md),$a=p({},Ga,{relatedTarget:0}),al=nn($a),Zc=p({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0}),ol=nn(Zc),Od=p({},Jt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ll=nn(Od),Cp=p({},Jt,{data:0}),Jc=nn(Cp),Qa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Ld[r])?!!o[r]:!1}function Ka(){return tu}var Vd=p({},Ga,{key:function(r){if(r.key){var o=Qa[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Gi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Pd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(r){return r.type==="keypress"?Gi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Gi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cl=nn(Vd),jd=p({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eu=nn(jd),Ns=p({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),Ud=nn(Ns),Fd=p({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),zd=nn(Fd),Bd=p({},Ya,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ul=nn(Bd),On=p({},Jt,{newState:0,oldState:0}),Hd=nn(On),qd=[9,13,27,32],Qi=Ri&&"CompositionEvent"in window,m=null;Ri&&"documentMode"in document&&(m=document.documentMode);var b=Ri&&"TextEvent"in window&&!m,w=Ri&&(!Qi||m&&8<m&&11>=m),R=" ",G=!1;function J(r,o){switch(r){case"keyup":return qd.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ht(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bt=!1;function $e(r,o){switch(r){case"compositionend":return ht(o);case"keypress":return o.which!==32?null:(G=!0,R);case"textInput":return r=o.data,r===R&&G?null:r;default:return null}}function Ht(r,o){if(Bt)return r==="compositionend"||!Qi&&J(r,o)?(r=Kc(),Is=wr=Wi=null,Bt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return w&&o.locale!=="ko"?null:o.data;default:return null}}var sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qe(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!sn[r.type]:o==="textarea"}function ks(r,o,c,h){Cs?Rs?Rs.push(h):Rs=[h]:Cs=h,o=kf(o,"onChange"),0<o.length&&(c=new il("onChange","change",null,c,h),r.push({event:c,listeners:o}))}var mn=null,Ki=null;function nu(r){Wx(r,0)}function Wd(r){var o=Bi(r);if(Gc(o))return r}function dE(r,o){if(r==="change")return o}var fE=!1;if(Ri){var Rp;if(Ri){var Ip="oninput"in document;if(!Ip){var mE=document.createElement("div");mE.setAttribute("oninput","return;"),Ip=typeof mE.oninput=="function"}Rp=Ip}else Rp=!1;fE=Rp&&(!document.documentMode||9<document.documentMode)}function gE(){mn&&(mn.detachEvent("onpropertychange",pE),Ki=mn=null)}function pE(r){if(r.propertyName==="value"&&Wd(Ki)){var o=[];ks(o,Ki,r,li(r)),kd(nu,o)}}function pk(r,o,c){r==="focusin"?(gE(),mn=o,Ki=c,mn.attachEvent("onpropertychange",pE)):r==="focusout"&&gE()}function _k(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Wd(Ki)}function yk(r,o){if(r==="click")return Wd(o)}function vk(r,o){if(r==="input"||r==="change")return Wd(o)}function bk(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Kn=typeof Object.is=="function"?Object.is:bk;function iu(r,o){if(Kn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!Ia.call(o,g)||!Kn(r[g],o[g]))return!1}return!0}function _E(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function yE(r,o){var c=_E(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=o&&h>=o)return{node:c,offset:o-r};r=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=_E(c)}}function vE(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?vE(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function bE(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Fa(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=Fa(r.document)}return o}function Np(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var Ek=Ri&&"documentMode"in document&&11>=document.documentMode,hl=null,kp=null,su=null,Dp=!1;function EE(r,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Dp||hl==null||hl!==Fa(h)||(h=hl,"selectionStart"in h&&Np(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),su&&iu(su,h)||(su=h,h=kf(kp,"onSelect"),0<h.length&&(o=new il("onSelect","select",null,o,c),r.push({event:o,listeners:h}),o.target=hl)))}function Xa(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var dl={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},Mp={},wE={};Ri&&(wE=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function Za(r){if(Mp[r])return Mp[r];if(!dl[r])return r;var o=dl[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in wE)return Mp[r]=o[c];return r}var xE=Za("animationend"),TE=Za("animationiteration"),SE=Za("animationstart"),wk=Za("transitionrun"),xk=Za("transitionstart"),Tk=Za("transitioncancel"),AE=Za("transitionend"),CE=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function Ii(r,o){CE.set(r,o),Ci(o,[r])}var RE=new WeakMap;function hi(r,o){if(typeof r=="object"&&r!==null){var c=RE.get(r);return c!==void 0?c:(o={value:r,source:o,stack:tl(o)},RE.set(r,o),o)}return{value:r,source:o,stack:tl(o)}}var di=[],fl=0,Pp=0;function Gd(){for(var r=fl,o=Pp=fl=0;o<r;){var c=di[o];di[o++]=null;var h=di[o];di[o++]=null;var g=di[o];di[o++]=null;var _=di[o];if(di[o++]=null,h!==null&&g!==null){var x=h.pending;x===null?g.next=g:(g.next=x.next,x.next=g),h.pending=g}_!==0&&IE(c,g,_)}}function Yd(r,o,c,h){di[fl++]=r,di[fl++]=o,di[fl++]=c,di[fl++]=h,Pp|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Lp(r,o,c,h){return Yd(r,o,c,h),$d(r)}function ml(r,o){return Yd(r,null,null,o),$d(r)}function IE(r,o,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var g=!1,_=r.return;_!==null;)_.childLanes|=c,h=_.alternate,h!==null&&(h.childLanes|=c),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(g=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,g&&o!==null&&(g=31-xn(c),r=_.hiddenUpdates,h=r[g],h===null?r[g]=[o]:h.push(o),o.lane=c|536870912),_):null}function $d(r){if(50<Iu)throw Iu=0,B_=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var gl={};function Sk(r,o,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(r,o,c,h){return new Sk(r,o,c,h)}function Vp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ds(r,o){var c=r.alternate;return c===null?(c=Xn(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function NE(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Qd(r,o,c,h,g,_){var x=0;if(h=r,typeof r=="function")Vp(r)&&(x=1);else if(typeof r=="string")x=CD(r,c,ft.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case k:return r=Xn(31,c,o,g),r.elementType=k,r.lanes=_,r;case S:return Ja(c.children,g,_,o);case N:x=8,g|=24;break;case C:return r=Xn(12,c,o,g|2),r.elementType=C,r.lanes=_,r;case H:return r=Xn(13,c,o,g),r.elementType=H,r.lanes=_,r;case lt:return r=Xn(19,c,o,g),r.elementType=lt,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:case $:x=10;break t;case W:x=9;break t;case Z:x=11;break t;case D:x=14;break t;case I:x=16,h=null;break t}x=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return o=Xn(x,c,o,g),o.elementType=r,o.type=h,o.lanes=_,o}function Ja(r,o,c,h){return r=Xn(7,r,h,o),r.lanes=c,r}function jp(r,o,c){return r=Xn(6,r,null,o),r.lanes=c,r}function Up(r,o,c){return o=Xn(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var pl=[],_l=0,Kd=null,Xd=0,fi=[],mi=0,to=null,Ms=1,Os="";function eo(r,o){pl[_l++]=Xd,pl[_l++]=Kd,Kd=r,Xd=o}function kE(r,o,c){fi[mi++]=Ms,fi[mi++]=Os,fi[mi++]=to,to=r;var h=Ms;r=Os;var g=32-xn(h)-1;h&=~(1<<g),c+=1;var _=32-xn(o)+g;if(30<_){var x=g-g%5;_=(h&(1<<x)-1).toString(32),h>>=x,g-=x,Ms=1<<32-xn(o)+g|c<<g|h,Os=_+r}else Ms=1<<_|c<<g|h,Os=r}function Fp(r){r.return!==null&&(eo(r,1),kE(r,1,0))}function zp(r){for(;r===Kd;)Kd=pl[--_l],pl[_l]=null,Xd=pl[--_l],pl[_l]=null;for(;r===to;)to=fi[--mi],fi[mi]=null,Os=fi[--mi],fi[mi]=null,Ms=fi[--mi],fi[mi]=null}var Pn=null,Re=null,Kt=!1,no=null,Xi=!1,Bp=Error(i(519));function io(r){var o=Error(i(418,""));throw ou(hi(o,r)),Bp}function DE(r){var o=r.stateNode,c=r.type,h=r.memoizedProps;switch(o[Ye]=r,o[Ve]=h,c){case"dialog":Lt("cancel",o),Lt("close",o);break;case"iframe":case"object":case"embed":Lt("load",o);break;case"video":case"audio":for(c=0;c<ku.length;c++)Lt(ku[c],o);break;case"source":Lt("error",o);break;case"img":case"image":case"link":Lt("error",o),Lt("load",o);break;case"details":Lt("toggle",o);break;case"input":Lt("invalid",o),za(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),el(o);break;case"select":Lt("invalid",o);break;case"textarea":Lt("invalid",o),Ba(o,h.value,h.defaultValue,h.children),el(o)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||Qx(o.textContent,c)?(h.popover!=null&&(Lt("beforetoggle",o),Lt("toggle",o)),h.onScroll!=null&&Lt("scroll",o),h.onScrollEnd!=null&&Lt("scrollend",o),h.onClick!=null&&(o.onclick=Df),o=!0):o=!1,o||io(r)}function ME(r){for(Pn=r.return;Pn;)switch(Pn.tag){case 5:case 13:Xi=!1;return;case 27:case 3:Xi=!0;return;default:Pn=Pn.return}}function ru(r){if(r!==Pn)return!1;if(!Kt)return ME(r),Kt=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||sy(r.type,r.memoizedProps)),c=!c),c&&Re&&io(r),ME(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(o===0){Re=ki(r.nextSibling);break t}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;r=r.nextSibling}Re=null}}else o===27?(o=Re,jr(r.type)?(r=ly,ly=null,Re=r):Re=o):Re=Pn?ki(r.stateNode.nextSibling):null;return!0}function au(){Re=Pn=null,Kt=!1}function OE(){var r=no;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),no=null),r}function ou(r){no===null?no=[r]:no.push(r)}var Hp=tt(null),so=null,Ps=null;function xr(r,o,c){rt(Hp,o._currentValue),o._currentValue=c}function Ls(r){r._currentValue=Hp.current,ct(Hp)}function qp(r,o,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),r===c)break;r=r.return}}function Wp(r,o,c,h){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var _=g.dependencies;if(_!==null){var x=g.child;_=_.firstContext;t:for(;_!==null;){var A=_;_=g;for(var O=0;O<o.length;O++)if(A.context===o[O]){_.lanes|=c,A=_.alternate,A!==null&&(A.lanes|=c),qp(_.return,c,r),h||(x=null);break t}_=A.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(i(341));x.lanes|=c,_=x.alternate,_!==null&&(_.lanes|=c),qp(x,c,r),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===r){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function lu(r,o,c,h){r=null;for(var g=o,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var A=g.type;Kn(g.pendingProps.value,x.value)||(r!==null?r.push(A):r=[A])}}else if(g===en.current){if(x=g.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Vu):r=[Vu])}g=g.return}r!==null&&Wp(o,r,c,h),o.flags|=262144}function Zd(r){for(r=r.firstContext;r!==null;){if(!Kn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ro(r){so=r,Ps=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Tn(r){return PE(so,r)}function Jd(r,o){return so===null&&ro(r),PE(r,o)}function PE(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ps===null){if(r===null)throw Error(i(308));Ps=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Ps=Ps.next=o;return c}var Ak=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},Ck=n.unstable_scheduleCallback,Rk=n.unstable_NormalPriority,Ke={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gp(){return{controller:new Ak,data:new Map,refCount:0}}function cu(r){r.refCount--,r.refCount===0&&Ck(Rk,function(){r.controller.abort()})}var uu=null,Yp=0,yl=0,vl=null;function Ik(r,o){if(uu===null){var c=uu=[];Yp=0,yl=Q_(),vl={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Yp++,o.then(LE,LE),o}function LE(){if(--Yp===0&&uu!==null){vl!==null&&(vl.status="fulfilled");var r=uu;uu=null,yl=0,vl=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Nk(r,o){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return r.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var VE=z.S;z.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Ik(r,o),VE!==null&&VE(r,o)};var ao=tt(null);function $p(){var r=ao.current;return r!==null?r:ge.pooledCache}function tf(r,o){o===null?rt(ao,ao.current):rt(ao,o.pool)}function jE(){var r=$p();return r===null?null:{parent:Ke._currentValue,pool:r}}var hu=Error(i(460)),UE=Error(i(474)),ef=Error(i(542)),Qp={then:function(){}};function FE(r){return r=r.status,r==="fulfilled"||r==="rejected"}function nf(){}function zE(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(nf,nf),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,HE(r),r;default:if(typeof o.status=="string")o.then(nf,nf);else{if(r=ge,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,HE(r),r}throw du=o,hu}}var du=null;function BE(){if(du===null)throw Error(i(459));var r=du;return du=null,r}function HE(r){if(r===hu||r===ef)throw Error(i(483))}var Tr=!1;function Kp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xp(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Sr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ar(r,o,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ne&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=$d(r),IE(r,null,c),o}return Yd(r,h,o,c),$d(r)}function fu(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,zc(r,c)}}function Zp(r,o){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?g=_=x:_=_.next=x,c=c.next}while(c!==null);_===null?g=_=o:_=_.next=o}else g=_=o;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var Jp=!1;function mu(){if(Jp){var r=vl;if(r!==null)throw r}}function gu(r,o,c,h){Jp=!1;var g=r.updateQueue;Tr=!1;var _=g.firstBaseUpdate,x=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var O=A,Q=O.next;O.next=null,x===null?_=Q:x.next=Q,x=O;var et=r.alternate;et!==null&&(et=et.updateQueue,A=et.lastBaseUpdate,A!==x&&(A===null?et.firstBaseUpdate=Q:A.next=Q,et.lastBaseUpdate=O))}if(_!==null){var at=g.baseState;x=0,et=Q=O=null,A=_;do{var K=A.lane&-536870913,X=K!==A.lane;if(X?(qt&K)===K:(h&K)===K){K!==0&&K===yl&&(Jp=!0),et!==null&&(et=et.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Ct=r,xt=A;K=o;var ce=c;switch(xt.tag){case 1:if(Ct=xt.payload,typeof Ct=="function"){at=Ct.call(ce,at,K);break t}at=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=xt.payload,K=typeof Ct=="function"?Ct.call(ce,at,K):Ct,K==null)break t;at=p({},at,K);break t;case 2:Tr=!0}}K=A.callback,K!==null&&(r.flags|=64,X&&(r.flags|=8192),X=g.callbacks,X===null?g.callbacks=[K]:X.push(K))}else X={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},et===null?(Q=et=X,O=at):et=et.next=X,x|=K;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;X=A,A=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);et===null&&(O=at),g.baseState=O,g.firstBaseUpdate=Q,g.lastBaseUpdate=et,_===null&&(g.shared.lanes=0),Or|=x,r.lanes=x,r.memoizedState=at}}function qE(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function WE(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)qE(c[r],o)}var bl=tt(null),sf=tt(0);function GE(r,o){r=Hs,rt(sf,r),rt(bl,o),Hs=r|o.baseLanes}function t_(){rt(sf,Hs),rt(bl,bl.current)}function e_(){Hs=sf.current,ct(bl),ct(sf)}var Cr=0,Dt=null,oe=null,Ue=null,rf=!1,El=!1,oo=!1,af=0,pu=0,wl=null,kk=0;function Me(){throw Error(i(321))}function n_(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!Kn(r[c],o[c]))return!1;return!0}function i_(r,o,c,h,g,_){return Cr=_,Dt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,z.H=r===null||r.memoizedState===null?Iw:Nw,oo=!1,_=c(h,g),oo=!1,El&&(_=$E(o,c,h,g)),YE(r),_}function YE(r){z.H=df;var o=oe!==null&&oe.next!==null;if(Cr=0,Ue=oe=Dt=null,rf=!1,pu=0,wl=null,o)throw Error(i(300));r===null||rn||(r=r.dependencies,r!==null&&Zd(r)&&(rn=!0))}function $E(r,o,c,h){Dt=r;var g=0;do{if(El&&(wl=null),pu=0,El=!1,25<=g)throw Error(i(301));if(g+=1,Ue=oe=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}z.H=jk,_=o(c,h)}while(El);return _}function Dk(){var r=z.H,o=r.useState()[0];return o=typeof o.then=="function"?_u(o):o,r=r.useState()[0],(oe!==null?oe.memoizedState:null)!==r&&(Dt.flags|=1024),o}function s_(){var r=af!==0;return af=0,r}function r_(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function a_(r){if(rf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}rf=!1}Cr=0,Ue=oe=Dt=null,El=!1,pu=af=0,wl=null}function Ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Dt.memoizedState=Ue=r:Ue=Ue.next=r,Ue}function Fe(){if(oe===null){var r=Dt.alternate;r=r!==null?r.memoizedState:null}else r=oe.next;var o=Ue===null?Dt.memoizedState:Ue.next;if(o!==null)Ue=o,oe=r;else{if(r===null)throw Dt.alternate===null?Error(i(467)):Error(i(310));oe=r,r={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},Ue===null?Dt.memoizedState=Ue=r:Ue=Ue.next=r}return Ue}function o_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _u(r){var o=pu;return pu+=1,wl===null&&(wl=[]),r=zE(wl,r,o),o=Dt,(Ue===null?o.memoizedState:Ue.next)===null&&(o=o.alternate,z.H=o===null||o.memoizedState===null?Iw:Nw),r}function of(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return _u(r);if(r.$$typeof===$)return Tn(r)}throw Error(i(438,String(r)))}function l_(r){var o=null,c=Dt.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Dt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=o_(),Dt.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),h=0;h<r;h++)c[h]=P;return o.index++,c}function Vs(r,o){return typeof o=="function"?o(r):o}function lf(r){var o=Fe();return c_(o,oe,r)}function c_(r,o,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var g=r.baseQueue,_=h.pending;if(_!==null){if(g!==null){var x=g.next;g.next=_.next,_.next=x}o.baseQueue=g=_,h.pending=null}if(_=r.baseState,g===null)r.memoizedState=_;else{o=g.next;var A=x=null,O=null,Q=o,et=!1;do{var at=Q.lane&-536870913;if(at!==Q.lane?(qt&at)===at:(Cr&at)===at){var K=Q.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),at===yl&&(et=!0);else if((Cr&K)===K){Q=Q.next,K===yl&&(et=!0);continue}else at={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(A=O=at,x=_):O=O.next=at,Dt.lanes|=K,Or|=K;at=Q.action,oo&&c(_,at),_=Q.hasEagerState?Q.eagerState:c(_,at)}else K={lane:at,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(A=O=K,x=_):O=O.next=K,Dt.lanes|=at,Or|=at;Q=Q.next}while(Q!==null&&Q!==o);if(O===null?x=_:O.next=A,!Kn(_,r.memoizedState)&&(rn=!0,et&&(c=vl,c!==null)))throw c;r.memoizedState=_,r.baseState=x,r.baseQueue=O,h.lastRenderedState=_}return g===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function u_(r){var o=Fe(),c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,g=c.pending,_=o.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do _=r(_,x.action),x=x.next;while(x!==g);Kn(_,o.memoizedState)||(rn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,h]}function QE(r,o,c){var h=Dt,g=Fe(),_=Kt;if(_){if(c===void 0)throw Error(i(407));c=c()}else c=o();var x=!Kn((oe||g).memoizedState,c);x&&(g.memoizedState=c,rn=!0),g=g.queue;var A=ZE.bind(null,h,g,r);if(yu(2048,8,A,[r]),g.getSnapshot!==o||x||Ue!==null&&Ue.memoizedState.tag&1){if(h.flags|=2048,xl(9,cf(),XE.bind(null,h,g,c,o),null),ge===null)throw Error(i(349));_||(Cr&124)!==0||KE(h,o,c)}return c}function KE(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Dt.updateQueue,o===null?(o=o_(),Dt.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function XE(r,o,c,h){o.value=c,o.getSnapshot=h,JE(o)&&tw(r)}function ZE(r,o,c){return c(function(){JE(o)&&tw(r)})}function JE(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!Kn(r,c)}catch{return!0}}function tw(r){var o=ml(r,2);o!==null&&ni(o,r,2)}function h_(r){var o=Ln();if(typeof r=="function"){var c=r;if(r=c(),oo){$n(!0);try{c()}finally{$n(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:r},o}function ew(r,o,c,h){return r.baseState=c,c_(r,oe,typeof h=="function"?h:Vs)}function Mk(r,o,c,h,g){if(hf(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};z.T!==null?c(!0):_.isTransition=!1,h(_),c=o.pending,c===null?(_.next=o.pending=_,nw(o,_)):(_.next=c.next,o.pending=c.next=_)}}function nw(r,o){var c=o.action,h=o.payload,g=r.state;if(o.isTransition){var _=z.T,x={};z.T=x;try{var A=c(g,h),O=z.S;O!==null&&O(x,A),iw(r,o,A)}catch(Q){d_(r,o,Q)}finally{z.T=_}}else try{_=c(g,h),iw(r,o,_)}catch(Q){d_(r,o,Q)}}function iw(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){sw(r,o,h)},function(h){return d_(r,o,h)}):sw(r,o,c)}function sw(r,o,c){o.status="fulfilled",o.value=c,rw(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,nw(r,c)))}function d_(r,o,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,rw(o),o=o.next;while(o!==h)}r.action=null}function rw(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function aw(r,o){return o}function ow(r,o){if(Kt){var c=ge.formState;if(c!==null){t:{var h=Dt;if(Kt){if(Re){e:{for(var g=Re,_=Xi;g.nodeType!==8;){if(!_){g=null;break e}if(g=ki(g.nextSibling),g===null){g=null;break e}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){Re=ki(g.nextSibling),h=g.data==="F!";break t}}io(h)}h=!1}h&&(o=c[0])}}return c=Ln(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aw,lastRenderedState:o},c.queue=h,c=Aw.bind(null,Dt,h),h.dispatch=c,h=h_(!1),_=__.bind(null,Dt,!1,h.queue),h=Ln(),g={state:o,dispatch:null,action:r,pending:null},h.queue=g,c=Mk.bind(null,Dt,g,_,c),g.dispatch=c,h.memoizedState=r,[o,c,!1]}function lw(r){var o=Fe();return cw(o,oe,r)}function cw(r,o,c){if(o=c_(r,o,aw)[0],r=lf(Vs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=_u(o)}catch(x){throw x===hu?ef:x}else h=o;o=Fe();var g=o.queue,_=g.dispatch;return c!==o.memoizedState&&(Dt.flags|=2048,xl(9,cf(),Ok.bind(null,g,c),null)),[h,_,r]}function Ok(r,o){r.action=o}function uw(r){var o=Fe(),c=oe;if(c!==null)return cw(o,c,r);Fe(),o=o.memoizedState,c=Fe();var h=c.queue.dispatch;return c.memoizedState=r,[o,h,!1]}function xl(r,o,c,h){return r={tag:r,create:c,deps:h,inst:o,next:null},o=Dt.updateQueue,o===null&&(o=o_(),Dt.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,o.lastEffect=r),r}function cf(){return{destroy:void 0,resource:void 0}}function hw(){return Fe().memoizedState}function uf(r,o,c,h){var g=Ln();h=h===void 0?null:h,Dt.flags|=r,g.memoizedState=xl(1|o,cf(),c,h)}function yu(r,o,c,h){var g=Fe();h=h===void 0?null:h;var _=g.memoizedState.inst;oe!==null&&h!==null&&n_(h,oe.memoizedState.deps)?g.memoizedState=xl(o,_,c,h):(Dt.flags|=r,g.memoizedState=xl(1|o,_,c,h))}function dw(r,o){uf(8390656,8,r,o)}function fw(r,o){yu(2048,8,r,o)}function mw(r,o){return yu(4,2,r,o)}function gw(r,o){return yu(4,4,r,o)}function pw(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function _w(r,o,c){c=c!=null?c.concat([r]):null,yu(4,4,pw.bind(null,o,r),c)}function f_(){}function yw(r,o){var c=Fe();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&n_(o,h[1])?h[0]:(c.memoizedState=[r,o],r)}function vw(r,o){var c=Fe();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&n_(o,h[1]))return h[0];if(h=r(),oo){$n(!0);try{r()}finally{$n(!1)}}return c.memoizedState=[h,o],h}function m_(r,o,c){return c===void 0||(Cr&1073741824)!==0?r.memoizedState=o:(r.memoizedState=c,r=wx(),Dt.lanes|=r,Or|=r,c)}function bw(r,o,c,h){return Kn(c,o)?c:bl.current!==null?(r=m_(r,c,h),Kn(r,o)||(rn=!0),r):(Cr&42)===0?(rn=!0,r.memoizedState=c):(r=wx(),Dt.lanes|=r,Or|=r,o)}function Ew(r,o,c,h,g){var _=it.p;it.p=_!==0&&8>_?_:8;var x=z.T,A={};z.T=A,__(r,!1,o,c);try{var O=g(),Q=z.S;if(Q!==null&&Q(A,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var et=Nk(O,h);vu(r,o,et,ei(r))}else vu(r,o,h,ei(r))}catch(at){vu(r,o,{then:function(){},status:"rejected",reason:at},ei())}finally{it.p=_,z.T=x}}function Pk(){}function g_(r,o,c,h){if(r.tag!==5)throw Error(i(476));var g=ww(r).queue;Ew(r,g,o,dt,c===null?Pk:function(){return xw(r),c(h)})}function ww(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:dt},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function xw(r){var o=ww(r).next.queue;vu(r,o,{},ei())}function p_(){return Tn(Vu)}function Tw(){return Fe().memoizedState}function Sw(){return Fe().memoizedState}function Lk(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=ei();r=Sr(c);var h=Ar(o,r,c);h!==null&&(ni(h,o,c),fu(h,o,c)),o={cache:Gp()},r.payload=o;return}o=o.return}}function Vk(r,o,c){var h=ei();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},hf(r)?Cw(o,c):(c=Lp(r,o,c,h),c!==null&&(ni(c,r,h),Rw(c,o,h)))}function Aw(r,o,c){var h=ei();vu(r,o,c,h)}function vu(r,o,c,h){var g={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(hf(r))Cw(o,g);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var x=o.lastRenderedState,A=_(x,c);if(g.hasEagerState=!0,g.eagerState=A,Kn(A,x))return Yd(r,o,g,0),ge===null&&Gd(),!1}catch{}finally{}if(c=Lp(r,o,g,h),c!==null)return ni(c,r,h),Rw(c,o,h),!0}return!1}function __(r,o,c,h){if(h={lane:2,revertLane:Q_(),action:h,hasEagerState:!1,eagerState:null,next:null},hf(r)){if(o)throw Error(i(479))}else o=Lp(r,c,h,2),o!==null&&ni(o,r,2)}function hf(r){var o=r.alternate;return r===Dt||o!==null&&o===Dt}function Cw(r,o){El=rf=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function Rw(r,o,c){if((c&4194048)!==0){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,zc(r,c)}}var df={readContext:Tn,use:of,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me},Iw={readContext:Tn,use:of,useCallback:function(r,o){return Ln().memoizedState=[r,o===void 0?null:o],r},useContext:Tn,useEffect:dw,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,uf(4194308,4,pw.bind(null,o,r),c)},useLayoutEffect:function(r,o){return uf(4194308,4,r,o)},useInsertionEffect:function(r,o){uf(4,2,r,o)},useMemo:function(r,o){var c=Ln();o=o===void 0?null:o;var h=r();if(oo){$n(!0);try{r()}finally{$n(!1)}}return c.memoizedState=[h,o],h},useReducer:function(r,o,c){var h=Ln();if(c!==void 0){var g=c(o);if(oo){$n(!0);try{c(o)}finally{$n(!1)}}}else g=o;return h.memoizedState=h.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},h.queue=r,r=r.dispatch=Vk.bind(null,Dt,r),[h.memoizedState,r]},useRef:function(r){var o=Ln();return r={current:r},o.memoizedState=r},useState:function(r){r=h_(r);var o=r.queue,c=Aw.bind(null,Dt,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:f_,useDeferredValue:function(r,o){var c=Ln();return m_(c,r,o)},useTransition:function(){var r=h_(!1);return r=Ew.bind(null,Dt,r.queue,!0,!1),Ln().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var h=Dt,g=Ln();if(Kt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=o(),ge===null)throw Error(i(349));(qt&124)!==0||KE(h,o,c)}g.memoizedState=c;var _={value:c,getSnapshot:o};return g.queue=_,dw(ZE.bind(null,h,_,r),[r]),h.flags|=2048,xl(9,cf(),XE.bind(null,h,_,c,o),null),c},useId:function(){var r=Ln(),o=ge.identifierPrefix;if(Kt){var c=Os,h=Ms;c=(h&~(1<<32-xn(h)-1)).toString(32)+c,o="«"+o+"R"+c,c=af++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=kk++,o="«"+o+"r"+c.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:p_,useFormState:ow,useActionState:ow,useOptimistic:function(r){var o=Ln();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=__.bind(null,Dt,!0,c),c.dispatch=o,[r,o]},useMemoCache:l_,useCacheRefresh:function(){return Ln().memoizedState=Lk.bind(null,Dt)}},Nw={readContext:Tn,use:of,useCallback:yw,useContext:Tn,useEffect:fw,useImperativeHandle:_w,useInsertionEffect:mw,useLayoutEffect:gw,useMemo:vw,useReducer:lf,useRef:hw,useState:function(){return lf(Vs)},useDebugValue:f_,useDeferredValue:function(r,o){var c=Fe();return bw(c,oe.memoizedState,r,o)},useTransition:function(){var r=lf(Vs)[0],o=Fe().memoizedState;return[typeof r=="boolean"?r:_u(r),o]},useSyncExternalStore:QE,useId:Tw,useHostTransitionStatus:p_,useFormState:lw,useActionState:lw,useOptimistic:function(r,o){var c=Fe();return ew(c,oe,r,o)},useMemoCache:l_,useCacheRefresh:Sw},jk={readContext:Tn,use:of,useCallback:yw,useContext:Tn,useEffect:fw,useImperativeHandle:_w,useInsertionEffect:mw,useLayoutEffect:gw,useMemo:vw,useReducer:u_,useRef:hw,useState:function(){return u_(Vs)},useDebugValue:f_,useDeferredValue:function(r,o){var c=Fe();return oe===null?m_(c,r,o):bw(c,oe.memoizedState,r,o)},useTransition:function(){var r=u_(Vs)[0],o=Fe().memoizedState;return[typeof r=="boolean"?r:_u(r),o]},useSyncExternalStore:QE,useId:Tw,useHostTransitionStatus:p_,useFormState:uw,useActionState:uw,useOptimistic:function(r,o){var c=Fe();return oe!==null?ew(c,oe,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:l_,useCacheRefresh:Sw},Tl=null,bu=0;function ff(r){var o=bu;return bu+=1,Tl===null&&(Tl=[]),zE(Tl,r,o)}function Eu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function mf(r,o){throw o.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function kw(r){var o=r._init;return o(r._payload)}function Dw(r){function o(q,F){if(r){var Y=q.deletions;Y===null?(q.deletions=[F],q.flags|=16):Y.push(F)}}function c(q,F){if(!r)return null;for(;F!==null;)o(q,F),F=F.sibling;return null}function h(q){for(var F=new Map;q!==null;)q.key!==null?F.set(q.key,q):F.set(q.index,q),q=q.sibling;return F}function g(q,F){return q=Ds(q,F),q.index=0,q.sibling=null,q}function _(q,F,Y){return q.index=Y,r?(Y=q.alternate,Y!==null?(Y=Y.index,Y<F?(q.flags|=67108866,F):Y):(q.flags|=67108866,F)):(q.flags|=1048576,F)}function x(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function A(q,F,Y,nt){return F===null||F.tag!==6?(F=jp(Y,q.mode,nt),F.return=q,F):(F=g(F,Y),F.return=q,F)}function O(q,F,Y,nt){var pt=Y.type;return pt===S?et(q,F,Y.props.children,nt,Y.key):F!==null&&(F.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===I&&kw(pt)===F.type)?(F=g(F,Y.props),Eu(F,Y),F.return=q,F):(F=Qd(Y.type,Y.key,Y.props,null,q.mode,nt),Eu(F,Y),F.return=q,F)}function Q(q,F,Y,nt){return F===null||F.tag!==4||F.stateNode.containerInfo!==Y.containerInfo||F.stateNode.implementation!==Y.implementation?(F=Up(Y,q.mode,nt),F.return=q,F):(F=g(F,Y.children||[]),F.return=q,F)}function et(q,F,Y,nt,pt){return F===null||F.tag!==7?(F=Ja(Y,q.mode,nt,pt),F.return=q,F):(F=g(F,Y),F.return=q,F)}function at(q,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=jp(""+F,q.mode,Y),F.return=q,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return Y=Qd(F.type,F.key,F.props,null,q.mode,Y),Eu(Y,F),Y.return=q,Y;case T:return F=Up(F,q.mode,Y),F.return=q,F;case I:var nt=F._init;return F=nt(F._payload),at(q,F,Y)}if(Et(F)||U(F))return F=Ja(F,q.mode,Y,null),F.return=q,F;if(typeof F.then=="function")return at(q,ff(F),Y);if(F.$$typeof===$)return at(q,Jd(q,F),Y);mf(q,F)}return null}function K(q,F,Y,nt){var pt=F!==null?F.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return pt!==null?null:A(q,F,""+Y,nt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return Y.key===pt?O(q,F,Y,nt):null;case T:return Y.key===pt?Q(q,F,Y,nt):null;case I:return pt=Y._init,Y=pt(Y._payload),K(q,F,Y,nt)}if(Et(Y)||U(Y))return pt!==null?null:et(q,F,Y,nt,null);if(typeof Y.then=="function")return K(q,F,ff(Y),nt);if(Y.$$typeof===$)return K(q,F,Jd(q,Y),nt);mf(q,Y)}return null}function X(q,F,Y,nt,pt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return q=q.get(Y)||null,A(F,q,""+nt,pt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case v:return q=q.get(nt.key===null?Y:nt.key)||null,O(F,q,nt,pt);case T:return q=q.get(nt.key===null?Y:nt.key)||null,Q(F,q,nt,pt);case I:var Mt=nt._init;return nt=Mt(nt._payload),X(q,F,Y,nt,pt)}if(Et(nt)||U(nt))return q=q.get(Y)||null,et(F,q,nt,pt,null);if(typeof nt.then=="function")return X(q,F,Y,ff(nt),pt);if(nt.$$typeof===$)return X(q,F,Y,Jd(F,nt),pt);mf(F,nt)}return null}function Ct(q,F,Y,nt){for(var pt=null,Mt=null,yt=F,Tt=F=0,on=null;yt!==null&&Tt<Y.length;Tt++){yt.index>Tt?(on=yt,yt=null):on=yt.sibling;var $t=K(q,yt,Y[Tt],nt);if($t===null){yt===null&&(yt=on);break}r&&yt&&$t.alternate===null&&o(q,yt),F=_($t,F,Tt),Mt===null?pt=$t:Mt.sibling=$t,Mt=$t,yt=on}if(Tt===Y.length)return c(q,yt),Kt&&eo(q,Tt),pt;if(yt===null){for(;Tt<Y.length;Tt++)yt=at(q,Y[Tt],nt),yt!==null&&(F=_(yt,F,Tt),Mt===null?pt=yt:Mt.sibling=yt,Mt=yt);return Kt&&eo(q,Tt),pt}for(yt=h(yt);Tt<Y.length;Tt++)on=X(yt,q,Tt,Y[Tt],nt),on!==null&&(r&&on.alternate!==null&&yt.delete(on.key===null?Tt:on.key),F=_(on,F,Tt),Mt===null?pt=on:Mt.sibling=on,Mt=on);return r&&yt.forEach(function(Hr){return o(q,Hr)}),Kt&&eo(q,Tt),pt}function xt(q,F,Y,nt){if(Y==null)throw Error(i(151));for(var pt=null,Mt=null,yt=F,Tt=F=0,on=null,$t=Y.next();yt!==null&&!$t.done;Tt++,$t=Y.next()){yt.index>Tt?(on=yt,yt=null):on=yt.sibling;var Hr=K(q,yt,$t.value,nt);if(Hr===null){yt===null&&(yt=on);break}r&&yt&&Hr.alternate===null&&o(q,yt),F=_(Hr,F,Tt),Mt===null?pt=Hr:Mt.sibling=Hr,Mt=Hr,yt=on}if($t.done)return c(q,yt),Kt&&eo(q,Tt),pt;if(yt===null){for(;!$t.done;Tt++,$t=Y.next())$t=at(q,$t.value,nt),$t!==null&&(F=_($t,F,Tt),Mt===null?pt=$t:Mt.sibling=$t,Mt=$t);return Kt&&eo(q,Tt),pt}for(yt=h(yt);!$t.done;Tt++,$t=Y.next())$t=X(yt,q,Tt,$t.value,nt),$t!==null&&(r&&$t.alternate!==null&&yt.delete($t.key===null?Tt:$t.key),F=_($t,F,Tt),Mt===null?pt=$t:Mt.sibling=$t,Mt=$t);return r&&yt.forEach(function(UD){return o(q,UD)}),Kt&&eo(q,Tt),pt}function ce(q,F,Y,nt){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:t:{for(var pt=Y.key;F!==null;){if(F.key===pt){if(pt=Y.type,pt===S){if(F.tag===7){c(q,F.sibling),nt=g(F,Y.props.children),nt.return=q,q=nt;break t}}else if(F.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===I&&kw(pt)===F.type){c(q,F.sibling),nt=g(F,Y.props),Eu(nt,Y),nt.return=q,q=nt;break t}c(q,F);break}else o(q,F);F=F.sibling}Y.type===S?(nt=Ja(Y.props.children,q.mode,nt,Y.key),nt.return=q,q=nt):(nt=Qd(Y.type,Y.key,Y.props,null,q.mode,nt),Eu(nt,Y),nt.return=q,q=nt)}return x(q);case T:t:{for(pt=Y.key;F!==null;){if(F.key===pt)if(F.tag===4&&F.stateNode.containerInfo===Y.containerInfo&&F.stateNode.implementation===Y.implementation){c(q,F.sibling),nt=g(F,Y.children||[]),nt.return=q,q=nt;break t}else{c(q,F);break}else o(q,F);F=F.sibling}nt=Up(Y,q.mode,nt),nt.return=q,q=nt}return x(q);case I:return pt=Y._init,Y=pt(Y._payload),ce(q,F,Y,nt)}if(Et(Y))return Ct(q,F,Y,nt);if(U(Y)){if(pt=U(Y),typeof pt!="function")throw Error(i(150));return Y=pt.call(Y),xt(q,F,Y,nt)}if(typeof Y.then=="function")return ce(q,F,ff(Y),nt);if(Y.$$typeof===$)return ce(q,F,Jd(q,Y),nt);mf(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,F!==null&&F.tag===6?(c(q,F.sibling),nt=g(F,Y),nt.return=q,q=nt):(c(q,F),nt=jp(Y,q.mode,nt),nt.return=q,q=nt),x(q)):c(q,F)}return function(q,F,Y,nt){try{bu=0;var pt=ce(q,F,Y,nt);return Tl=null,pt}catch(yt){if(yt===hu||yt===ef)throw yt;var Mt=Xn(29,yt,null,q.mode);return Mt.lanes=nt,Mt.return=q,Mt}finally{}}}var Sl=Dw(!0),Mw=Dw(!1),gi=tt(null),Zi=null;function Rr(r){var o=r.alternate;rt(Xe,Xe.current&1),rt(gi,r),Zi===null&&(o===null||bl.current!==null||o.memoizedState!==null)&&(Zi=r)}function Ow(r){if(r.tag===22){if(rt(Xe,Xe.current),rt(gi,r),Zi===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(Zi=r)}}else Ir()}function Ir(){rt(Xe,Xe.current),rt(gi,gi.current)}function js(r){ct(gi),Zi===r&&(Zi=null),ct(Xe)}var Xe=tt(0);function gf(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||oy(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function y_(r,o,c,h){o=r.memoizedState,c=c(h,o),c=c==null?o:p({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var v_={enqueueSetState:function(r,o,c){r=r._reactInternals;var h=ei(),g=Sr(h);g.payload=o,c!=null&&(g.callback=c),o=Ar(r,g,h),o!==null&&(ni(o,r,h),fu(o,r,h))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var h=ei(),g=Sr(h);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=Ar(r,g,h),o!==null&&(ni(o,r,h),fu(o,r,h))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=ei(),h=Sr(c);h.tag=2,o!=null&&(h.callback=o),o=Ar(r,h,c),o!==null&&(ni(o,r,c),fu(o,r,c))}};function Pw(r,o,c,h,g,_,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,_,x):o.prototype&&o.prototype.isPureReactComponent?!iu(c,h)||!iu(g,_):!0}function Lw(r,o,c,h){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==r&&v_.enqueueReplaceState(o,o.state,null)}function lo(r,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(r=r.defaultProps){c===o&&(c=p({},c));for(var g in r)c[g]===void 0&&(c[g]=r[g])}return c}var pf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Vw(r){pf(r)}function jw(r){console.error(r)}function Uw(r){pf(r)}function _f(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function Fw(r,o,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function b_(r,o,c){return c=Sr(c),c.tag=3,c.payload={element:null},c.callback=function(){_f(r,o)},c}function zw(r){return r=Sr(r),r.tag=3,r}function Bw(r,o,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var _=h.value;r.payload=function(){return g(_)},r.callback=function(){Fw(o,c,h)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){Fw(o,c,h),typeof g!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function Uk(r,o,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&lu(o,c,g,!0),c=gi.current,c!==null){switch(c.tag){case 13:return Zi===null?q_():c.alternate===null&&Ie===0&&(Ie=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===Qp?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),G_(r,h,g)),!1;case 22:return c.flags|=65536,h===Qp?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),G_(r,h,g)),!1}throw Error(i(435,c.tag))}return G_(r,h,g),q_(),!1}if(Kt)return o=gi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==Bp&&(r=Error(i(422),{cause:h}),ou(hi(r,c)))):(h!==Bp&&(o=Error(i(423),{cause:h}),ou(hi(o,c))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,h=hi(h,c),g=b_(r.stateNode,h,g),Zp(r,g),Ie!==4&&(Ie=2)),!1;var _=Error(i(520),{cause:h});if(_=hi(_,c),Ru===null?Ru=[_]:Ru.push(_),Ie!==4&&(Ie=2),o===null)return!0;h=hi(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=g&-g,c.lanes|=r,r=b_(c.stateNode,h,r),Zp(c,r),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Pr===null||!Pr.has(_))))return c.flags|=65536,g&=-g,c.lanes|=g,g=zw(g),Bw(g,r,c,h),Zp(c,g),!1}c=c.return}while(c!==null);return!1}var Hw=Error(i(461)),rn=!1;function gn(r,o,c,h){o.child=r===null?Mw(o,null,c,h):Sl(o,r.child,c,h)}function qw(r,o,c,h,g){c=c.render;var _=o.ref;if("ref"in h){var x={};for(var A in h)A!=="ref"&&(x[A]=h[A])}else x=h;return ro(o),h=i_(r,o,c,x,_,g),A=s_(),r!==null&&!rn?(r_(r,o,g),Us(r,o,g)):(Kt&&A&&Fp(o),o.flags|=1,gn(r,o,h,g),o.child)}function Ww(r,o,c,h,g){if(r===null){var _=c.type;return typeof _=="function"&&!Vp(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,Gw(r,o,_,h,g)):(r=Qd(c.type,null,h,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!R_(r,g)){var x=_.memoizedProps;if(c=c.compare,c=c!==null?c:iu,c(x,h)&&r.ref===o.ref)return Us(r,o,g)}return o.flags|=1,r=Ds(_,h),r.ref=o.ref,r.return=o,o.child=r}function Gw(r,o,c,h,g){if(r!==null){var _=r.memoizedProps;if(iu(_,h)&&r.ref===o.ref)if(rn=!1,o.pendingProps=h=_,R_(r,g))(r.flags&131072)!==0&&(rn=!0);else return o.lanes=r.lanes,Us(r,o,g)}return E_(r,o,c,h,g)}function Yw(r,o,c){var h=o.pendingProps,g=h.children,_=r!==null?r.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=_!==null?_.baseLanes|c:c,r!==null){for(g=o.child=r.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;o.childLanes=_&~h}else o.childLanes=0,o.child=null;return $w(r,o,h,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&tf(o,_!==null?_.cachePool:null),_!==null?GE(o,_):t_(),Ow(o);else return o.lanes=o.childLanes=536870912,$w(r,o,_!==null?_.baseLanes|c:c,c)}else _!==null?(tf(o,_.cachePool),GE(o,_),Ir(),o.memoizedState=null):(r!==null&&tf(o,null),t_(),Ir());return gn(r,o,g,c),o.child}function $w(r,o,c,h){var g=$p();return g=g===null?null:{parent:Ke._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},r!==null&&tf(o,null),t_(),Ow(o),r!==null&&lu(r,o,h,!0),null}function yf(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function E_(r,o,c,h,g){return ro(o),c=i_(r,o,c,h,void 0,g),h=s_(),r!==null&&!rn?(r_(r,o,g),Us(r,o,g)):(Kt&&h&&Fp(o),o.flags|=1,gn(r,o,c,g),o.child)}function Qw(r,o,c,h,g,_){return ro(o),o.updateQueue=null,c=$E(o,h,c,g),YE(r),h=s_(),r!==null&&!rn?(r_(r,o,_),Us(r,o,_)):(Kt&&h&&Fp(o),o.flags|=1,gn(r,o,c,_),o.child)}function Kw(r,o,c,h,g){if(ro(o),o.stateNode===null){var _=gl,x=c.contextType;typeof x=="object"&&x!==null&&(_=Tn(x)),_=new c(h,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=v_,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=h,_.state=o.memoizedState,_.refs={},Kp(o),x=c.contextType,_.context=typeof x=="object"&&x!==null?Tn(x):gl,_.state=o.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(y_(o,c,x,h),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&v_.enqueueReplaceState(_,_.state,null),gu(o,h,_,g),mu(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(r===null){_=o.stateNode;var A=o.memoizedProps,O=lo(c,A);_.props=O;var Q=_.context,et=c.contextType;x=gl,typeof et=="object"&&et!==null&&(x=Tn(et));var at=c.getDerivedStateFromProps;et=typeof at=="function"||typeof _.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,et||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A||Q!==x)&&Lw(o,_,h,x),Tr=!1;var K=o.memoizedState;_.state=K,gu(o,h,_,g),mu(),Q=o.memoizedState,A||K!==Q||Tr?(typeof at=="function"&&(y_(o,c,at,h),Q=o.memoizedState),(O=Tr||Pw(o,c,O,h,K,Q,x))?(et||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=Q),_.props=h,_.state=Q,_.context=x,h=O):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{_=o.stateNode,Xp(r,o),x=o.memoizedProps,et=lo(c,x),_.props=et,at=o.pendingProps,K=_.context,Q=c.contextType,O=gl,typeof Q=="object"&&Q!==null&&(O=Tn(Q)),A=c.getDerivedStateFromProps,(Q=typeof A=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==at||K!==O)&&Lw(o,_,h,O),Tr=!1,K=o.memoizedState,_.state=K,gu(o,h,_,g),mu();var X=o.memoizedState;x!==at||K!==X||Tr||r!==null&&r.dependencies!==null&&Zd(r.dependencies)?(typeof A=="function"&&(y_(o,c,A,h),X=o.memoizedState),(et=Tr||Pw(o,c,et,h,K,X,O)||r!==null&&r.dependencies!==null&&Zd(r.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,X,O),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,X,O)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=X),_.props=h,_.state=X,_.context=O,h=et):(typeof _.componentDidUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&K===r.memoizedState||(o.flags|=1024),h=!1)}return _=h,yf(r,o),h=(o.flags&128)!==0,_||h?(_=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&h?(o.child=Sl(o,r.child,null,g),o.child=Sl(o,null,c,g)):gn(r,o,c,g),o.memoizedState=_.state,r=o.child):r=Us(r,o,g),r}function Xw(r,o,c,h){return au(),o.flags|=256,gn(r,o,c,h),o.child}var w_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function x_(r){return{baseLanes:r,cachePool:jE()}}function T_(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=pi),r}function Zw(r,o,c){var h=o.pendingProps,g=!1,_=(o.flags&128)!==0,x;if((x=_)||(x=r!==null&&r.memoizedState===null?!1:(Xe.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,r===null){if(Kt){if(g?Rr(o):Ir(),Kt){var A=Re,O;if(O=A){t:{for(O=A,A=Xi;O.nodeType!==8;){if(!A){A=null;break t}if(O=ki(O.nextSibling),O===null){A=null;break t}}A=O}A!==null?(o.memoizedState={dehydrated:A,treeContext:to!==null?{id:Ms,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},O=Xn(18,null,null,0),O.stateNode=A,O.return=o,o.child=O,Pn=o,Re=null,O=!0):O=!1}O||io(o)}if(A=o.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return oy(A)?o.lanes=32:o.lanes=536870912,null;js(o)}return A=h.children,h=h.fallback,g?(Ir(),g=o.mode,A=vf({mode:"hidden",children:A},g),h=Ja(h,g,c,null),A.return=o,h.return=o,A.sibling=h,o.child=A,g=o.child,g.memoizedState=x_(c),g.childLanes=T_(r,x,c),o.memoizedState=w_,h):(Rr(o),S_(o,A))}if(O=r.memoizedState,O!==null&&(A=O.dehydrated,A!==null)){if(_)o.flags&256?(Rr(o),o.flags&=-257,o=A_(r,o,c)):o.memoizedState!==null?(Ir(),o.child=r.child,o.flags|=128,o=null):(Ir(),g=h.fallback,A=o.mode,h=vf({mode:"visible",children:h.children},A),g=Ja(g,A,c,null),g.flags|=2,h.return=o,g.return=o,h.sibling=g,o.child=h,Sl(o,r.child,null,c),h=o.child,h.memoizedState=x_(c),h.childLanes=T_(r,x,c),o.memoizedState=w_,o=g);else if(Rr(o),oy(A)){if(x=A.nextSibling&&A.nextSibling.dataset,x)var Q=x.dgst;x=Q,h=Error(i(419)),h.stack="",h.digest=x,ou({value:h,source:null,stack:null}),o=A_(r,o,c)}else if(rn||lu(r,o,c,!1),x=(c&r.childLanes)!==0,rn||x){if(x=ge,x!==null&&(h=c&-c,h=(h&42)!==0?1:pr(h),h=(h&(x.suspendedLanes|c))!==0?0:h,h!==0&&h!==O.retryLane))throw O.retryLane=h,ml(r,h),ni(x,r,h),Hw;A.data==="$?"||q_(),o=A_(r,o,c)}else A.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=O.treeContext,Re=ki(A.nextSibling),Pn=o,Kt=!0,no=null,Xi=!1,r!==null&&(fi[mi++]=Ms,fi[mi++]=Os,fi[mi++]=to,Ms=r.id,Os=r.overflow,to=o),o=S_(o,h.children),o.flags|=4096);return o}return g?(Ir(),g=h.fallback,A=o.mode,O=r.child,Q=O.sibling,h=Ds(O,{mode:"hidden",children:h.children}),h.subtreeFlags=O.subtreeFlags&65011712,Q!==null?g=Ds(Q,g):(g=Ja(g,A,c,null),g.flags|=2),g.return=o,h.return=o,h.sibling=g,o.child=h,h=g,g=o.child,A=r.child.memoizedState,A===null?A=x_(c):(O=A.cachePool,O!==null?(Q=Ke._currentValue,O=O.parent!==Q?{parent:Q,pool:Q}:O):O=jE(),A={baseLanes:A.baseLanes|c,cachePool:O}),g.memoizedState=A,g.childLanes=T_(r,x,c),o.memoizedState=w_,h):(Rr(o),c=r.child,r=c.sibling,c=Ds(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,r!==null&&(x=o.deletions,x===null?(o.deletions=[r],o.flags|=16):x.push(r)),o.child=c,o.memoizedState=null,c)}function S_(r,o){return o=vf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function vf(r,o){return r=Xn(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function A_(r,o,c){return Sl(o,r.child,null,c),r=S_(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Jw(r,o,c){r.lanes|=o;var h=r.alternate;h!==null&&(h.lanes|=o),qp(r.return,o,c)}function C_(r,o,c,h,g){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=c,_.tailMode=g)}function tx(r,o,c){var h=o.pendingProps,g=h.revealOrder,_=h.tail;if(gn(r,o,h.children,c),h=Xe.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Jw(r,c,o);else if(r.tag===19)Jw(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break t;for(;r.sibling===null;){if(r.return===null||r.return===o)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}switch(rt(Xe,h),g){case"forwards":for(c=o.child,g=null;c!==null;)r=c.alternate,r!==null&&gf(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),C_(o,!1,g,c,_);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&gf(r)===null){o.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}C_(o,!0,c,null,_);break;case"together":C_(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Us(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),Or|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(lu(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,c=Ds(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Ds(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function R_(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Zd(r)))}function Fk(r,o,c){switch(o.tag){case 3:me(o,o.stateNode.containerInfo),xr(o,Ke,r.memoizedState.cache),au();break;case 27:case 5:gr(o);break;case 4:me(o,o.stateNode.containerInfo);break;case 10:xr(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Rr(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Zw(r,o,c):(Rr(o),r=Us(r,o,c),r!==null?r.sibling:null);Rr(o);break;case 19:var g=(r.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(lu(r,o,c,!1),h=(c&o.childLanes)!==0),g){if(h)return tx(r,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),rt(Xe,Xe.current),h)break;return null;case 22:case 23:return o.lanes=0,Yw(r,o,c);case 24:xr(o,Ke,r.memoizedState.cache)}return Us(r,o,c)}function ex(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)rn=!0;else{if(!R_(r,c)&&(o.flags&128)===0)return rn=!1,Fk(r,o,c);rn=(r.flags&131072)!==0}else rn=!1,Kt&&(o.flags&1048576)!==0&&kE(o,Xd,o.index);switch(o.lanes=0,o.tag){case 16:t:{r=o.pendingProps;var h=o.elementType,g=h._init;if(h=g(h._payload),o.type=h,typeof h=="function")Vp(h)?(r=lo(h,r),o.tag=1,o=Kw(null,o,h,r,c)):(o.tag=0,o=E_(null,o,h,r,c));else{if(h!=null){if(g=h.$$typeof,g===Z){o.tag=11,o=qw(null,o,h,r,c);break t}else if(g===D){o.tag=14,o=Ww(null,o,h,r,c);break t}}throw o=Gt(h)||h,Error(i(306,o,""))}}return o;case 0:return E_(r,o,o.type,o.pendingProps,c);case 1:return h=o.type,g=lo(h,o.pendingProps),Kw(r,o,h,g,c);case 3:t:{if(me(o,o.stateNode.containerInfo),r===null)throw Error(i(387));h=o.pendingProps;var _=o.memoizedState;g=_.element,Xp(r,o),gu(o,h,null,c);var x=o.memoizedState;if(h=x.cache,xr(o,Ke,h),h!==_.cache&&Wp(o,[Ke],c,!0),mu(),h=x.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=Xw(r,o,h,c);break t}else if(h!==g){g=hi(Error(i(424)),o),ou(g),o=Xw(r,o,h,c);break t}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Re=ki(r.firstChild),Pn=o,Kt=!0,no=null,Xi=!0,c=Mw(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(au(),h===g){o=Us(r,o,c);break t}gn(r,o,h,c)}o=o.child}return o;case 26:return yf(r,o),r===null?(c=rT(o.type,null,o.pendingProps,null))?o.memoizedState=c:Kt||(c=o.type,r=o.pendingProps,h=Mf(bt.current).createElement(c),h[Ye]=o,h[Ve]=r,_n(h,c,r),De(h),o.stateNode=h):o.memoizedState=rT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return gr(o),r===null&&Kt&&(h=o.stateNode=nT(o.type,o.pendingProps,bt.current),Pn=o,Xi=!0,g=Re,jr(o.type)?(ly=g,Re=ki(h.firstChild)):Re=g),gn(r,o,o.pendingProps.children,c),yf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Kt&&((g=h=Re)&&(h=mD(h,o.type,o.pendingProps,Xi),h!==null?(o.stateNode=h,Pn=o,Re=ki(h.firstChild),Xi=!1,g=!0):g=!1),g||io(o)),gr(o),g=o.type,_=o.pendingProps,x=r!==null?r.memoizedProps:null,h=_.children,sy(g,_)?h=null:x!==null&&sy(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=i_(r,o,Dk,null,null,c),Vu._currentValue=g),yf(r,o),gn(r,o,h,c),o.child;case 6:return r===null&&Kt&&((r=c=Re)&&(c=gD(c,o.pendingProps,Xi),c!==null?(o.stateNode=c,Pn=o,Re=null,r=!0):r=!1),r||io(o)),null;case 13:return Zw(r,o,c);case 4:return me(o,o.stateNode.containerInfo),h=o.pendingProps,r===null?o.child=Sl(o,null,h,c):gn(r,o,h,c),o.child;case 11:return qw(r,o,o.type,o.pendingProps,c);case 7:return gn(r,o,o.pendingProps,c),o.child;case 8:return gn(r,o,o.pendingProps.children,c),o.child;case 12:return gn(r,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,xr(o,o.type,h.value),gn(r,o,h.children,c),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,ro(o),g=Tn(g),h=h(g),o.flags|=1,gn(r,o,h,c),o.child;case 14:return Ww(r,o,o.type,o.pendingProps,c);case 15:return Gw(r,o,o.type,o.pendingProps,c);case 19:return tx(r,o,c);case 31:return h=o.pendingProps,c=o.mode,h={mode:h.mode,children:h.children},r===null?(c=vf(h,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Ds(r.child,h),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return Yw(r,o,c);case 24:return ro(o),h=Tn(Ke),r===null?(g=$p(),g===null&&(g=ge,_=Gp(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=c),g=_),o.memoizedState={parent:h,cache:g},Kp(o),xr(o,Ke,g)):((r.lanes&c)!==0&&(Xp(r,o),gu(o,null,null,c),mu()),g=r.memoizedState,_=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),xr(o,Ke,h)):(h=_.cache,xr(o,Ke,h),h!==g.cache&&Wp(o,[Ke],c,!0))),gn(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Fs(r){r.flags|=4}function nx(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!uT(o)){if(o=gi.current,o!==null&&((qt&4194048)===qt?Zi!==null:(qt&62914560)!==qt&&(qt&536870912)===0||o!==Zi))throw du=Qp,UE;r.flags|=8192}}function bf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Uc():536870912,r.lanes|=o,Il|=o)}function wu(r,o){if(!Kt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Te(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(o)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=h,r.childLanes=c,o}function zk(r,o,c){var h=o.pendingProps;switch(zp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(o),null;case 1:return Te(o),null;case 3:return c=o.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Ls(Ke),Ui(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(ru(o)?Fs(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,OE())),Te(o),null;case 26:return c=o.memoizedState,r===null?(Fs(o),c!==null?(Te(o),nx(o,c)):(Te(o),o.flags&=-16777217)):c?c!==r.memoizedState?(Fs(o),Te(o),nx(o,c)):(Te(o),o.flags&=-16777217):(r.memoizedProps!==h&&Fs(o),Te(o),o.flags&=-16777217),null;case 27:vs(o),c=bt.current;var g=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==h&&Fs(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Te(o),null}r=ft.current,ru(o)?DE(o):(r=nT(g,h,c),o.stateNode=r,Fs(o))}return Te(o),null;case 5:if(vs(o),c=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==h&&Fs(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Te(o),null}if(r=ft.current,ru(o))DE(o);else{switch(g=Mf(bt.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?r.multiple=!0:h.size&&(r.size=h.size);break;default:r=typeof h.is=="string"?g.createElement(c,{is:h.is}):g.createElement(c)}}r[Ye]=o,r[Ve]=h;t:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break t;for(;g.sibling===null;){if(g.return===null||g.return===o)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=r;t:switch(_n(r,c,h),c){case"button":case"input":case"select":case"textarea":r=!!h.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Fs(o)}}return Te(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==h&&Fs(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(r=bt.current,ru(o)){if(r=o.stateNode,c=o.memoizedProps,h=null,g=Pn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}r[Ye]=o,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Qx(r.nodeValue,c)),r||io(o)}else r=Mf(r).createTextNode(h),r[Ye]=o,o.stateNode=r}return Te(o),null;case 13:if(h=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=ru(o),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ye]=o}else au(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Te(o),g=!1}else g=OE(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(js(o),o):(js(o),null)}if(js(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=h!==null,r=r!==null&&r.memoizedState!==null,c){h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var _=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==g&&(h.flags|=2048)}return c!==r&&c&&(o.child.flags|=8192),bf(o,o.updateQueue),Te(o),null;case 4:return Ui(),r===null&&J_(o.stateNode.containerInfo),Te(o),null;case 10:return Ls(o.type),Te(o),null;case 19:if(ct(Xe),g=o.memoizedState,g===null)return Te(o),null;if(h=(o.flags&128)!==0,_=g.rendering,_===null)if(h)wu(g,!1);else{if(Ie!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=gf(r),_!==null){for(o.flags|=128,wu(g,!1),r=_.updateQueue,o.updateQueue=r,bf(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)NE(c,r),c=c.sibling;return rt(Xe,Xe.current&1|2),o.child}r=r.sibling}g.tail!==null&&ri()>xf&&(o.flags|=128,h=!0,wu(g,!1),o.lanes=4194304)}else{if(!h)if(r=gf(_),r!==null){if(o.flags|=128,h=!0,r=r.updateQueue,o.updateQueue=r,bf(o,r),wu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Kt)return Te(o),null}else 2*ri()-g.renderingStartTime>xf&&c!==536870912&&(o.flags|=128,h=!0,wu(g,!1),o.lanes=4194304);g.isBackwards?(_.sibling=o.child,o.child=_):(r=g.last,r!==null?r.sibling=_:o.child=_,g.last=_)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=ri(),o.sibling=null,r=Xe.current,rt(Xe,h?r&1|2:r&1),o):(Te(o),null);case 22:case 23:return js(o),e_(),h=o.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(Te(o),o.subtreeFlags&6&&(o.flags|=8192)):Te(o),c=o.updateQueue,c!==null&&bf(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),r!==null&&ct(ao),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ls(Ke),Te(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Bk(r,o){switch(zp(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Ls(Ke),Ui(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return vs(o),null;case 13:if(js(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));au()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ct(Xe),null;case 4:return Ui(),null;case 10:return Ls(o.type),null;case 22:case 23:return js(o),e_(),r!==null&&ct(ao),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Ls(Ke),null;case 25:return null;default:return null}}function ix(r,o){switch(zp(o),o.tag){case 3:Ls(Ke),Ui();break;case 26:case 27:case 5:vs(o);break;case 4:Ui();break;case 13:js(o);break;case 19:ct(Xe);break;case 10:Ls(o.type);break;case 22:case 23:js(o),e_(),r!==null&&ct(ao);break;case 24:Ls(Ke)}}function xu(r,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&r)===r){h=void 0;var _=c.create,x=c.inst;h=_(),x.destroy=h}c=c.next}while(c!==g)}}catch(A){de(o,o.return,A)}}function Nr(r,o,c){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var _=g.next;h=_;do{if((h.tag&r)===r){var x=h.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,g=o;var O=c,Q=A;try{Q()}catch(et){de(g,O,et)}}}h=h.next}while(h!==_)}}catch(et){de(o,o.return,et)}}function sx(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{WE(o,c)}catch(h){de(r,r.return,h)}}}function rx(r,o,c){c.props=lo(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){de(r,o,h)}}function Tu(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(g){de(r,o,g)}}function Ji(r,o){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){de(r,o,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){de(r,o,g)}else c.current=null}function ax(r){var o=r.type,c=r.memoizedProps,h=r.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){de(r,r.return,g)}}function I_(r,o,c){try{var h=r.stateNode;cD(h,r.type,c,o),h[Ve]=o}catch(g){de(r,r.return,g)}}function ox(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&jr(r.type)||r.tag===4}function N_(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||ox(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&jr(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function k_(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Df));else if(h!==4&&(h===27&&jr(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(k_(r,o,c),r=r.sibling;r!==null;)k_(r,o,c),r=r.sibling}function Ef(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(h!==4&&(h===27&&jr(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Ef(r,o,c),r=r.sibling;r!==null;)Ef(r,o,c),r=r.sibling}function lx(r){var o=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);_n(o,h,c),o[Ye]=r,o[Ve]=c}catch(_){de(r,r.return,_)}}var zs=!1,Oe=!1,D_=!1,cx=typeof WeakSet=="function"?WeakSet:Set,an=null;function Hk(r,o){if(r=r.containerInfo,ny=Uf,r=bE(r),Np(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else t:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break t}var x=0,A=-1,O=-1,Q=0,et=0,at=r,K=null;e:for(;;){for(var X;at!==c||g!==0&&at.nodeType!==3||(A=x+g),at!==_||h!==0&&at.nodeType!==3||(O=x+h),at.nodeType===3&&(x+=at.nodeValue.length),(X=at.firstChild)!==null;)K=at,at=X;for(;;){if(at===r)break e;if(K===c&&++Q===g&&(A=x),K===_&&++et===h&&(O=x),(X=at.nextSibling)!==null)break;at=K,K=at.parentNode}at=X}c=A===-1||O===-1?null:{start:A,end:O}}else c=null}c=c||{start:0,end:0}}else c=null;for(iy={focusedElem:r,selectionRange:c},Uf=!1,an=o;an!==null;)if(o=an,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,an=r;else for(;an!==null;){switch(o=an,_=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,c=o,g=_.memoizedProps,_=_.memoizedState,h=c.stateNode;try{var Ct=lo(c.type,g,c.elementType===c.type);r=h.getSnapshotBeforeUpdate(Ct,_),h.__reactInternalSnapshotBeforeUpdate=r}catch(xt){de(c,c.return,xt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)ay(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":ay(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,an=r;break}an=o.return}}function ux(r,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:kr(r,c),h&4&&xu(5,c);break;case 1:if(kr(r,c),h&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(x){de(c,c.return,x)}else{var g=lo(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(g,o,r.__reactInternalSnapshotBeforeUpdate)}catch(x){de(c,c.return,x)}}h&64&&sx(c),h&512&&Tu(c,c.return);break;case 3:if(kr(r,c),h&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{WE(r,o)}catch(x){de(c,c.return,x)}}break;case 27:o===null&&h&4&&lx(c);case 26:case 5:kr(r,c),o===null&&h&4&&ax(c),h&512&&Tu(c,c.return);break;case 12:kr(r,c);break;case 13:kr(r,c),h&4&&fx(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Zk.bind(null,c),pD(r,c))));break;case 22:if(h=c.memoizedState!==null||zs,!h){o=o!==null&&o.memoizedState!==null||Oe,g=zs;var _=Oe;zs=h,(Oe=o)&&!_?Dr(r,c,(c.subtreeFlags&8772)!==0):kr(r,c),zs=g,Oe=_}break;case 30:break;default:kr(r,c)}}function hx(r){var o=r.alternate;o!==null&&(r.alternate=null,hx(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&vr(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var we=null,Vn=!1;function Bs(r,o,c){for(c=c.child;c!==null;)dx(r,o,c),c=c.sibling}function dx(r,o,c){if(ee&&typeof ee.onCommitFiberUnmount=="function")try{ee.onCommitFiberUnmount(Ce,c)}catch{}switch(c.tag){case 26:Oe||Ji(c,o),Bs(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Oe||Ji(c,o);var h=we,g=Vn;jr(c.type)&&(we=c.stateNode,Vn=!1),Bs(r,o,c),Mu(c.stateNode),we=h,Vn=g;break;case 5:Oe||Ji(c,o);case 6:if(h=we,g=Vn,we=null,Bs(r,o,c),we=h,Vn=g,we!==null)if(Vn)try{(we.nodeType===9?we.body:we.nodeName==="HTML"?we.ownerDocument.body:we).removeChild(c.stateNode)}catch(_){de(c,o,_)}else try{we.removeChild(c.stateNode)}catch(_){de(c,o,_)}break;case 18:we!==null&&(Vn?(r=we,tT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),zu(r)):tT(we,c.stateNode));break;case 4:h=we,g=Vn,we=c.stateNode.containerInfo,Vn=!0,Bs(r,o,c),we=h,Vn=g;break;case 0:case 11:case 14:case 15:Oe||Nr(2,c,o),Oe||Nr(4,c,o),Bs(r,o,c);break;case 1:Oe||(Ji(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&rx(c,o,h)),Bs(r,o,c);break;case 21:Bs(r,o,c);break;case 22:Oe=(h=Oe)||c.memoizedState!==null,Bs(r,o,c),Oe=h;break;default:Bs(r,o,c)}}function fx(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{zu(r)}catch(c){de(o,o.return,c)}}function qk(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new cx),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new cx),o;default:throw Error(i(435,r.tag))}}function M_(r,o){var c=qk(r);o.forEach(function(h){var g=Jk.bind(null,r,h);c.has(h)||(c.add(h),h.then(g,g))})}function Zn(r,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],_=r,x=o,A=x;t:for(;A!==null;){switch(A.tag){case 27:if(jr(A.type)){we=A.stateNode,Vn=!1;break t}break;case 5:we=A.stateNode,Vn=!1;break t;case 3:case 4:we=A.stateNode.containerInfo,Vn=!0;break t}A=A.return}if(we===null)throw Error(i(160));dx(_,x,g),we=null,Vn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)mx(o,r),o=o.sibling}var Ni=null;function mx(r,o){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Zn(o,r),Jn(r),h&4&&(Nr(3,r,r.return),xu(3,r),Nr(5,r,r.return));break;case 1:Zn(o,r),Jn(r),h&512&&(Oe||c===null||Ji(c,c.return)),h&64&&zs&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=Ni;if(Zn(o,r),Jn(r),h&512&&(Oe||c===null||Ji(c,c.return)),h&4){var _=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){t:{h=r.type,c=r.memoizedProps,g=g.ownerDocument||g;e:switch(h){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Va]||_[Ye]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(h),g.head.insertBefore(_,g.querySelector("head > title"))),_n(_,h,c),_[Ye]=r,De(_),h=_;break t;case"link":var x=lT("link","href",g).get(h+(c.href||""));if(x){for(var A=0;A<x.length;A++)if(_=x[A],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(A,1);break e}}_=g.createElement(h),_n(_,h,c),g.head.appendChild(_);break;case"meta":if(x=lT("meta","content",g).get(h+(c.content||""))){for(A=0;A<x.length;A++)if(_=x[A],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(A,1);break e}}_=g.createElement(h),_n(_,h,c),g.head.appendChild(_);break;default:throw Error(i(468,h))}_[Ye]=r,De(_),h=_}r.stateNode=h}else cT(g,r.type,r.stateNode);else r.stateNode=oT(g,h,r.memoizedProps);else _!==h?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,h===null?cT(g,r.type,r.stateNode):oT(g,h,r.memoizedProps)):h===null&&r.stateNode!==null&&I_(r,r.memoizedProps,c.memoizedProps)}break;case 27:Zn(o,r),Jn(r),h&512&&(Oe||c===null||Ji(c,c.return)),c!==null&&h&4&&I_(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Zn(o,r),Jn(r),h&512&&(Oe||c===null||Ji(c,c.return)),r.flags&32){g=r.stateNode;try{oi(g,"")}catch(X){de(r,r.return,X)}}h&4&&r.stateNode!=null&&(g=r.memoizedProps,I_(r,g,c!==null?c.memoizedProps:g)),h&1024&&(D_=!0);break;case 6:if(Zn(o,r),Jn(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(X){de(r,r.return,X)}}break;case 3:if(Lf=null,g=Ni,Ni=Of(o.containerInfo),Zn(o,r),Ni=g,Jn(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{zu(o.containerInfo)}catch(X){de(r,r.return,X)}D_&&(D_=!1,gx(r));break;case 4:h=Ni,Ni=Of(r.stateNode.containerInfo),Zn(o,r),Jn(r),Ni=h;break;case 12:Zn(o,r),Jn(r);break;case 13:Zn(o,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(U_=ri()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,M_(r,h)));break;case 22:g=r.memoizedState!==null;var O=c!==null&&c.memoizedState!==null,Q=zs,et=Oe;if(zs=Q||g,Oe=et||O,Zn(o,r),Oe=et,zs=Q,Jn(r),h&8192)t:for(o=r.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||O||zs||Oe||co(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){O=c=o;try{if(_=O.stateNode,g)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{A=O.stateNode;var at=O.memoizedProps.style,K=at!=null&&at.hasOwnProperty("display")?at.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(X){de(O,O.return,X)}}}else if(o.tag===6){if(c===null){O=o;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(X){de(O,O.return,X)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break t;for(;o.sibling===null;){if(o.return===null||o.return===r)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,M_(r,c))));break;case 19:Zn(o,r),Jn(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,M_(r,h)));break;case 30:break;case 21:break;default:Zn(o,r),Jn(r)}}function Jn(r){var o=r.flags;if(o&2){try{for(var c,h=r.return;h!==null;){if(ox(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,_=N_(r);Ef(r,_,g);break;case 5:var x=c.stateNode;c.flags&32&&(oi(x,""),c.flags&=-33);var A=N_(r);Ef(r,A,x);break;case 3:case 4:var O=c.stateNode.containerInfo,Q=N_(r);k_(r,Q,O);break;default:throw Error(i(161))}}catch(et){de(r,r.return,et)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function gx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;gx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function kr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ux(r,o.alternate,o),o=o.sibling}function co(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Nr(4,o,o.return),co(o);break;case 1:Ji(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&rx(o,o.return,c),co(o);break;case 27:Mu(o.stateNode);case 26:case 5:Ji(o,o.return),co(o);break;case 22:o.memoizedState===null&&co(o);break;case 30:co(o);break;default:co(o)}r=r.sibling}}function Dr(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=r,_=o,x=_.flags;switch(_.tag){case 0:case 11:case 15:Dr(g,_,c),xu(4,_);break;case 1:if(Dr(g,_,c),h=_,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Q){de(h,h.return,Q)}if(h=_,g=h.updateQueue,g!==null){var A=h.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)qE(O[g],A)}catch(Q){de(h,h.return,Q)}}c&&x&64&&sx(_),Tu(_,_.return);break;case 27:lx(_);case 26:case 5:Dr(g,_,c),c&&h===null&&x&4&&ax(_),Tu(_,_.return);break;case 12:Dr(g,_,c);break;case 13:Dr(g,_,c),c&&x&4&&fx(g,_);break;case 22:_.memoizedState===null&&Dr(g,_,c),Tu(_,_.return);break;case 30:break;default:Dr(g,_,c)}o=o.sibling}}function O_(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&cu(c))}function P_(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&cu(r))}function ts(r,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)px(r,o,c,h),o=o.sibling}function px(r,o,c,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ts(r,o,c,h),g&2048&&xu(9,o);break;case 1:ts(r,o,c,h);break;case 3:ts(r,o,c,h),g&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&cu(r)));break;case 12:if(g&2048){ts(r,o,c,h),r=o.stateNode;try{var _=o.memoizedProps,x=_.id,A=_.onPostCommit;typeof A=="function"&&A(x,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(O){de(o,o.return,O)}}else ts(r,o,c,h);break;case 13:ts(r,o,c,h);break;case 23:break;case 22:_=o.stateNode,x=o.alternate,o.memoizedState!==null?_._visibility&2?ts(r,o,c,h):Su(r,o):_._visibility&2?ts(r,o,c,h):(_._visibility|=2,Al(r,o,c,h,(o.subtreeFlags&10256)!==0)),g&2048&&O_(x,o);break;case 24:ts(r,o,c,h),g&2048&&P_(o.alternate,o);break;default:ts(r,o,c,h)}}function Al(r,o,c,h,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var _=r,x=o,A=c,O=h,Q=x.flags;switch(x.tag){case 0:case 11:case 15:Al(_,x,A,O,g),xu(8,x);break;case 23:break;case 22:var et=x.stateNode;x.memoizedState!==null?et._visibility&2?Al(_,x,A,O,g):Su(_,x):(et._visibility|=2,Al(_,x,A,O,g)),g&&Q&2048&&O_(x.alternate,x);break;case 24:Al(_,x,A,O,g),g&&Q&2048&&P_(x.alternate,x);break;default:Al(_,x,A,O,g)}o=o.sibling}}function Su(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,h=o,g=h.flags;switch(h.tag){case 22:Su(c,h),g&2048&&O_(h.alternate,h);break;case 24:Su(c,h),g&2048&&P_(h.alternate,h);break;default:Su(c,h)}o=o.sibling}}var Au=8192;function Cl(r){if(r.subtreeFlags&Au)for(r=r.child;r!==null;)_x(r),r=r.sibling}function _x(r){switch(r.tag){case 26:Cl(r),r.flags&Au&&r.memoizedState!==null&&ID(Ni,r.memoizedState,r.memoizedProps);break;case 5:Cl(r);break;case 3:case 4:var o=Ni;Ni=Of(r.stateNode.containerInfo),Cl(r),Ni=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=Au,Au=16777216,Cl(r),Au=o):Cl(r));break;default:Cl(r)}}function yx(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Cu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];an=h,bx(h,r)}yx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)vx(r),r=r.sibling}function vx(r){switch(r.tag){case 0:case 11:case 15:Cu(r),r.flags&2048&&Nr(9,r,r.return);break;case 3:Cu(r);break;case 12:Cu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,wf(r)):Cu(r);break;default:Cu(r)}}function wf(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];an=h,bx(h,r)}yx(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Nr(8,o,o.return),wf(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,wf(o));break;default:wf(o)}r=r.sibling}}function bx(r,o){for(;an!==null;){var c=an;switch(c.tag){case 0:case 11:case 15:Nr(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:cu(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,an=h;else t:for(c=r;an!==null;){h=an;var g=h.sibling,_=h.return;if(hx(h),h===c){an=null;break t}if(g!==null){g.return=_,an=g;break t}an=_}}}var Wk={getCacheForType:function(r){var o=Tn(Ke),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c}},Gk=typeof WeakMap=="function"?WeakMap:Map,ne=0,ge=null,Pt=null,qt=0,ie=0,ti=null,Mr=!1,Rl=!1,L_=!1,Hs=0,Ie=0,Or=0,uo=0,V_=0,pi=0,Il=0,Ru=null,jn=null,j_=!1,U_=0,xf=1/0,Tf=null,Pr=null,pn=0,Lr=null,Nl=null,kl=0,F_=0,z_=null,Ex=null,Iu=0,B_=null;function ei(){if((ne&2)!==0&&qt!==0)return qt&-qt;if(z.T!==null){var r=yl;return r!==0?r:Q_()}return _r()}function wx(){pi===0&&(pi=(qt&536870912)===0||Kt?jc():536870912);var r=gi.current;return r!==null&&(r.flags|=32),pi}function ni(r,o,c){(r===ge&&(ie===2||ie===9)||r.cancelPendingCommit!==null)&&(Dl(r,0),Vr(r,qt,pi,!1)),Es(r,c),((ne&2)===0||r!==ge)&&(r===ge&&((ne&2)===0&&(uo|=c),Ie===4&&Vr(r,qt,pi,!1)),es(r))}function xx(r,o,c){if((ne&6)!==0)throw Error(i(327));var h=!c&&(o&124)===0&&(o&r.expiredLanes)===0||La(r,o),g=h?Qk(r,o):W_(r,o,!0),_=h;do{if(g===0){Rl&&!h&&Vr(r,o,0,!1);break}else{if(c=r.current.alternate,_&&!Yk(c)){g=W_(r,o,!1),_=!1;continue}if(g===2){if(_=o,r.errorRecoveryDisabledLanes&_)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;t:{var A=r;g=Ru;var O=A.current.memoizedState.isDehydrated;if(O&&(Dl(A,x).flags|=256),x=W_(A,x,!1),x!==2){if(L_&&!O){A.errorRecoveryDisabledLanes|=_,uo|=_,g=4;break t}_=jn,jn=g,_!==null&&(jn===null?jn=_:jn.push.apply(jn,_))}g=x}if(_=!1,g!==2)continue}}if(g===1){Dl(r,0),Vr(r,o,0,!0);break}t:{switch(h=r,_=g,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Vr(h,o,pi,!Mr);break t;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=U_+300-ri(),10<g)){if(Vr(h,o,pi,!Mr),Qo(h,0,!0)!==0)break t;h.timeoutHandle=Zx(Tx.bind(null,h,c,jn,Tf,j_,o,pi,uo,Il,Mr,_,2,-0,0),g);break t}Tx(h,c,jn,Tf,j_,o,pi,uo,Il,Mr,_,0,-0,0)}}break}while(!0);es(r)}function Tx(r,o,c,h,g,_,x,A,O,Q,et,at,K,X){if(r.timeoutHandle=-1,at=o.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(Lu={stylesheets:null,count:0,unsuspend:RD},_x(o),at=ND(),at!==null)){r.cancelPendingCommit=at(kx.bind(null,r,o,_,c,h,g,x,A,O,et,1,K,X)),Vr(r,_,x,!Q);return}kx(r,o,_,c,h,g,x,A,O)}function Yk(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],_=g.getSnapshot;g=g.value;try{if(!Kn(_(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vr(r,o,c,h){o&=~V_,o&=~uo,r.suspendedLanes|=o,r.pingedLanes&=~o,h&&(r.warmLanes|=o),h=r.expirationTimes;for(var g=o;0<g;){var _=31-xn(g),x=1<<_;h[_]=-1,g&=~x}c!==0&&Fi(r,c,o)}function Sf(){return(ne&6)===0?(Nu(0),!1):!0}function H_(){if(Pt!==null){if(ie===0)var r=Pt.return;else r=Pt,Ps=so=null,a_(r),Tl=null,bu=0,r=Pt;for(;r!==null;)ix(r.alternate,r),r=r.return;Pt=null}}function Dl(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,hD(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),H_(),ge=r,Pt=c=Ds(r.current,null),qt=o,ie=0,ti=null,Mr=!1,Rl=La(r,o),L_=!1,Il=pi=V_=uo=Or=Ie=0,jn=Ru=null,j_=!1,(o&8)!==0&&(o|=o&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=o;0<h;){var g=31-xn(h),_=1<<g;o|=r[g],h&=~_}return Hs=o,Gd(),c}function Sx(r,o){Dt=null,z.H=df,o===hu||o===ef?(o=BE(),ie=3):o===UE?(o=BE(),ie=4):ie=o===Hw?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ti=o,Pt===null&&(Ie=1,_f(r,hi(o,r.current)))}function Ax(){var r=z.H;return z.H=df,r===null?df:r}function Cx(){var r=z.A;return z.A=Wk,r}function q_(){Ie=4,Mr||(qt&4194048)!==qt&&gi.current!==null||(Rl=!0),(Or&134217727)===0&&(uo&134217727)===0||ge===null||Vr(ge,qt,pi,!1)}function W_(r,o,c){var h=ne;ne|=2;var g=Ax(),_=Cx();(ge!==r||qt!==o)&&(Tf=null,Dl(r,o)),o=!1;var x=Ie;t:do try{if(ie!==0&&Pt!==null){var A=Pt,O=ti;switch(ie){case 8:H_(),x=6;break t;case 3:case 2:case 9:case 6:gi.current===null&&(o=!0);var Q=ie;if(ie=0,ti=null,Ml(r,A,O,Q),c&&Rl){x=0;break t}break;default:Q=ie,ie=0,ti=null,Ml(r,A,O,Q)}}$k(),x=Ie;break}catch(et){Sx(r,et)}while(!0);return o&&r.shellSuspendCounter++,Ps=so=null,ne=h,z.H=g,z.A=_,Pt===null&&(ge=null,qt=0,Gd()),x}function $k(){for(;Pt!==null;)Rx(Pt)}function Qk(r,o){var c=ne;ne|=2;var h=Ax(),g=Cx();ge!==r||qt!==o?(Tf=null,xf=ri()+500,Dl(r,o)):Rl=La(r,o);t:do try{if(ie!==0&&Pt!==null){o=Pt;var _=ti;e:switch(ie){case 1:ie=0,ti=null,Ml(r,o,_,1);break;case 2:case 9:if(FE(_)){ie=0,ti=null,Ix(o);break}o=function(){ie!==2&&ie!==9||ge!==r||(ie=7),es(r)},_.then(o,o);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:FE(_)?(ie=0,ti=null,Ix(o)):(ie=0,ti=null,Ml(r,o,_,7));break;case 5:var x=null;switch(Pt.tag){case 26:x=Pt.memoizedState;case 5:case 27:var A=Pt;if(!x||uT(x)){ie=0,ti=null;var O=A.sibling;if(O!==null)Pt=O;else{var Q=A.return;Q!==null?(Pt=Q,Af(Q)):Pt=null}break e}}ie=0,ti=null,Ml(r,o,_,5);break;case 6:ie=0,ti=null,Ml(r,o,_,6);break;case 8:H_(),Ie=6;break t;default:throw Error(i(462))}}Kk();break}catch(et){Sx(r,et)}while(!0);return Ps=so=null,z.H=h,z.A=g,ne=c,Pt!==null?0:(ge=null,qt=0,Gd(),Ie)}function Kk(){for(;Pt!==null&&!Oc();)Rx(Pt)}function Rx(r){var o=ex(r.alternate,r,Hs);r.memoizedProps=r.pendingProps,o===null?Af(r):Pt=o}function Ix(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=Qw(c,o,o.pendingProps,o.type,void 0,qt);break;case 11:o=Qw(c,o,o.pendingProps,o.type.render,o.ref,qt);break;case 5:a_(o);default:ix(c,o),o=Pt=NE(o,Hs),o=ex(c,o,Hs)}r.memoizedProps=r.pendingProps,o===null?Af(r):Pt=o}function Ml(r,o,c,h){Ps=so=null,a_(o),Tl=null,bu=0;var g=o.return;try{if(Uk(r,g,o,c,qt)){Ie=1,_f(r,hi(c,r.current)),Pt=null;return}}catch(_){if(g!==null)throw Pt=g,_;Ie=1,_f(r,hi(c,r.current)),Pt=null;return}o.flags&32768?(Kt||h===1?r=!0:Rl||(qt&536870912)!==0?r=!1:(Mr=r=!0,(h===2||h===9||h===3||h===6)&&(h=gi.current,h!==null&&h.tag===13&&(h.flags|=16384))),Nx(o,r)):Af(o)}function Af(r){var o=r;do{if((o.flags&32768)!==0){Nx(o,Mr);return}r=o.return;var c=zk(o.alternate,o,Hs);if(c!==null){Pt=c;return}if(o=o.sibling,o!==null){Pt=o;return}Pt=o=r}while(o!==null);Ie===0&&(Ie=5)}function Nx(r,o){do{var c=Bk(r.alternate,r);if(c!==null){c.flags&=32767,Pt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Pt=r;return}Pt=r=c}while(r!==null);Ie=6,Pt=null}function kx(r,o,c,h,g,_,x,A,O){r.cancelPendingCommit=null;do Cf();while(pn!==0);if((ne&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Pp,Fc(r,c,_,x,A,O),r===ge&&(Pt=ge=null,qt=0),Nl=o,Lr=r,kl=c,F_=_,z_=g,Ex=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,tD(Da,function(){return Lx(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=z.T,z.T=null,g=it.p,it.p=2,x=ne,ne|=4;try{Hk(r,o,c)}finally{ne=x,it.p=g,z.T=h}}pn=1,Dx(),Mx(),Ox()}}function Dx(){if(pn===1){pn=0;var r=Lr,o=Nl,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var h=it.p;it.p=2;var g=ne;ne|=4;try{mx(o,r);var _=iy,x=bE(r.containerInfo),A=_.focusedElem,O=_.selectionRange;if(x!==A&&A&&A.ownerDocument&&vE(A.ownerDocument.documentElement,A)){if(O!==null&&Np(A)){var Q=O.start,et=O.end;if(et===void 0&&(et=Q),"selectionStart"in A)A.selectionStart=Q,A.selectionEnd=Math.min(et,A.value.length);else{var at=A.ownerDocument||document,K=at&&at.defaultView||window;if(K.getSelection){var X=K.getSelection(),Ct=A.textContent.length,xt=Math.min(O.start,Ct),ce=O.end===void 0?xt:Math.min(O.end,Ct);!X.extend&&xt>ce&&(x=ce,ce=xt,xt=x);var q=yE(A,xt),F=yE(A,ce);if(q&&F&&(X.rangeCount!==1||X.anchorNode!==q.node||X.anchorOffset!==q.offset||X.focusNode!==F.node||X.focusOffset!==F.offset)){var Y=at.createRange();Y.setStart(q.node,q.offset),X.removeAllRanges(),xt>ce?(X.addRange(Y),X.extend(F.node,F.offset)):(Y.setEnd(F.node,F.offset),X.addRange(Y))}}}}for(at=[],X=A;X=X.parentNode;)X.nodeType===1&&at.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<at.length;A++){var nt=at[A];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}Uf=!!ny,iy=ny=null}finally{ne=g,it.p=h,z.T=c}}r.current=o,pn=2}}function Mx(){if(pn===2){pn=0;var r=Lr,o=Nl,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var h=it.p;it.p=2;var g=ne;ne|=4;try{ux(r,o.alternate,o)}finally{ne=g,it.p=h,z.T=c}}pn=3}}function Ox(){if(pn===4||pn===3){pn=0,Ed();var r=Lr,o=Nl,c=kl,h=Ex;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?pn=5:(pn=0,Nl=Lr=null,Px(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(Pr=null),Ko(c),o=o.stateNode,ee&&typeof ee.onCommitFiberRoot=="function")try{ee.onCommitFiberRoot(Ce,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=z.T,g=it.p,it.p=2,z.T=null;try{for(var _=r.onRecoverableError,x=0;x<h.length;x++){var A=h[x];_(A.value,{componentStack:A.stack})}}finally{z.T=o,it.p=g}}(kl&3)!==0&&Cf(),es(r),g=r.pendingLanes,(c&4194090)!==0&&(g&42)!==0?r===B_?Iu++:(Iu=0,B_=r):Iu=0,Nu(0)}}function Px(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,cu(o)))}function Cf(r){return Dx(),Mx(),Ox(),Lx()}function Lx(){if(pn!==5)return!1;var r=Lr,o=F_;F_=0;var c=Ko(kl),h=z.T,g=it.p;try{it.p=32>c?32:c,z.T=null,c=z_,z_=null;var _=Lr,x=kl;if(pn=0,Nl=Lr=null,kl=0,(ne&6)!==0)throw Error(i(331));var A=ne;if(ne|=4,vx(_.current),px(_,_.current,x,c),ne=A,Nu(0,!1),ee&&typeof ee.onPostCommitFiberRoot=="function")try{ee.onPostCommitFiberRoot(Ce,_)}catch{}return!0}finally{it.p=g,z.T=h,Px(r,o)}}function Vx(r,o,c){o=hi(c,o),o=b_(r.stateNode,o,2),r=Ar(r,o,2),r!==null&&(Es(r,2),es(r))}function de(r,o,c){if(r.tag===3)Vx(r,r,c);else for(;o!==null;){if(o.tag===3){Vx(o,r,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Pr===null||!Pr.has(h))){r=hi(c,r),c=zw(2),h=Ar(o,c,2),h!==null&&(Bw(c,h,o,r),Es(h,2),es(h));break}}o=o.return}}function G_(r,o,c){var h=r.pingCache;if(h===null){h=r.pingCache=new Gk;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(c)||(L_=!0,g.add(c),r=Xk.bind(null,r,o,c),o.then(r,r))}function Xk(r,o,c){var h=r.pingCache;h!==null&&h.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ge===r&&(qt&c)===c&&(Ie===4||Ie===3&&(qt&62914560)===qt&&300>ri()-U_?(ne&2)===0&&Dl(r,0):V_|=c,Il===qt&&(Il=0)),es(r)}function jx(r,o){o===0&&(o=Uc()),r=ml(r,o),r!==null&&(Es(r,o),es(r))}function Zk(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),jx(r,c)}function Jk(r,o){var c=0;switch(r.tag){case 13:var h=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),jx(r,c)}function tD(r,o){return Na(r,o)}var Rf=null,Ol=null,Y_=!1,If=!1,$_=!1,ho=0;function es(r){r!==Ol&&r.next===null&&(Ol===null?Rf=Ol=r:Ol=Ol.next=r),If=!0,Y_||(Y_=!0,nD())}function Nu(r,o){if(!$_&&If){$_=!0;do for(var c=!1,h=Rf;h!==null;){if(r!==0){var g=h.pendingLanes;if(g===0)var _=0;else{var x=h.suspendedLanes,A=h.pingedLanes;_=(1<<31-xn(42|r)+1)-1,_&=g&~(x&~A),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,Bx(h,_))}else _=qt,_=Qo(h,h===ge?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||La(h,_)||(c=!0,Bx(h,_));h=h.next}while(c);$_=!1}}function eD(){Ux()}function Ux(){If=Y_=!1;var r=0;ho!==0&&(uD()&&(r=ho),ho=0);for(var o=ri(),c=null,h=Rf;h!==null;){var g=h.next,_=Fx(h,o);_===0?(h.next=null,c===null?Rf=g:c.next=g,g===null&&(Ol=c)):(c=h,(r!==0||(_&3)!==0)&&(If=!0)),h=g}Nu(r)}function Fx(r,o){for(var c=r.suspendedLanes,h=r.pingedLanes,g=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var x=31-xn(_),A=1<<x,O=g[x];O===-1?((A&c)===0||(A&h)!==0)&&(g[x]=Vc(A,o)):O<=o&&(r.expiredLanes|=A),_&=~A}if(o=ge,c=qt,c=Qo(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===o&&(ie===2||ie===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&ka(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||La(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(h!==null&&ka(h),Ko(c)){case 2:case 8:c=Yo;break;case 32:c=Da;break;case 268435456:c=$o;break;default:c=Da}return h=zx.bind(null,r),c=Na(c,h),r.callbackPriority=o,r.callbackNode=c,o}return h!==null&&h!==null&&ka(h),r.callbackPriority=2,r.callbackNode=null,2}function zx(r,o){if(pn!==0&&pn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Cf()&&r.callbackNode!==c)return null;var h=qt;return h=Qo(r,r===ge?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(xx(r,h,o),Fx(r,ri()),r.callbackNode!=null&&r.callbackNode===c?zx.bind(null,r):null)}function Bx(r,o){if(Cf())return null;xx(r,o,!0)}function nD(){dD(function(){(ne&6)!==0?Na(Pc,eD):Ux()})}function Q_(){return ho===0&&(ho=jc()),ho}function Hx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:nl(""+r)}function qx(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function iD(r,o,c,h,g){if(o==="submit"&&c&&c.stateNode===g){var _=Hx((g[Ve]||null).action),x=h.submitter;x&&(o=(o=x[Ve]||null)?Hx(o.formAction):x.getAttribute("formAction"),o!==null&&(_=o,x=null));var A=new il("action","action",null,h,g);r.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ho!==0){var O=x?qx(g,x):new FormData(g);g_(c,{pending:!0,data:O,method:g.method,action:_},null,O)}}else typeof _=="function"&&(A.preventDefault(),O=x?qx(g,x):new FormData(g),g_(c,{pending:!0,data:O,method:g.method,action:_},_,O))},currentTarget:g}]})}}for(var K_=0;K_<Op.length;K_++){var X_=Op[K_],sD=X_.toLowerCase(),rD=X_[0].toUpperCase()+X_.slice(1);Ii(sD,"on"+rD)}Ii(xE,"onAnimationEnd"),Ii(TE,"onAnimationIteration"),Ii(SE,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(wk,"onTransitionRun"),Ii(xk,"onTransitionStart"),Ii(Tk,"onTransitionCancel"),Ii(AE,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function Wx(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],g=h.event;h=h.listeners;t:{var _=void 0;if(o)for(var x=h.length-1;0<=x;x--){var A=h[x],O=A.instance,Q=A.currentTarget;if(A=A.listener,O!==_&&g.isPropagationStopped())break t;_=A,g.currentTarget=Q;try{_(g)}catch(et){pf(et)}g.currentTarget=null,_=O}else for(x=0;x<h.length;x++){if(A=h[x],O=A.instance,Q=A.currentTarget,A=A.listener,O!==_&&g.isPropagationStopped())break t;_=A,g.currentTarget=Q;try{_(g)}catch(et){pf(et)}g.currentTarget=null,_=O}}}}function Lt(r,o){var c=o[Bc];c===void 0&&(c=o[Bc]=new Set);var h=r+"__bubble";c.has(h)||(Gx(o,r,2,!1),c.add(h))}function Z_(r,o,c){var h=0;o&&(h|=4),Gx(c,r,h,o)}var Nf="_reactListening"+Math.random().toString(36).slice(2);function J_(r){if(!r[Nf]){r[Nf]=!0,Hc.forEach(function(c){c!=="selectionchange"&&(aD.has(c)||Z_(c,!1,r),Z_(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Nf]||(o[Nf]=!0,Z_("selectionchange",!1,o))}}function Gx(r,o,c,h){switch(pT(o)){case 2:var g=MD;break;case 8:g=OD;break;default:g=fy}c=g.bind(null,o,c,r),g=void 0,!ci||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?r.addEventListener(o,c,{capture:!0,passive:g}):r.addEventListener(o,c,!0):g!==void 0?r.addEventListener(o,c,{passive:g}):r.addEventListener(o,c,!1)}function ty(r,o,c,h,g){var _=h;if((o&1)===0&&(o&2)===0&&h!==null)t:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var A=h.stateNode.containerInfo;if(A===g)break;if(x===4)for(x=h.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;A!==null;){if(x=ws(A),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){h=_=x;continue t}A=A.parentNode}}h=h.return}kd(function(){var Q=_,et=li(c),at=[];t:{var K=CE.get(r);if(K!==void 0){var X=il,Ct=r;switch(r){case"keypress":if(Gi(c)===0)break t;case"keydown":case"keyup":X=cl;break;case"focusin":Ct="focus",X=al;break;case"focusout":Ct="blur",X=al;break;case"beforeblur":case"afterblur":X=al;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Ud;break;case xE:case TE:case SE:X=ol;break;case AE:X=zd;break;case"scroll":case"scrollend":X=Dd;break;case"wheel":X=ul;break;case"copy":case"cut":case"paste":X=ll;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=eu;break;case"toggle":case"beforetoggle":X=Hd}var xt=(o&4)!==0,ce=!xt&&(r==="scroll"||r==="scrollend"),q=xt?K!==null?K+"Capture":null:K;xt=[];for(var F=Q,Y;F!==null;){var nt=F;if(Y=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||Y===null||q===null||(nt=qa(F,q),nt!=null&&xt.push(Du(F,nt,Y))),ce)break;F=F.return}0<xt.length&&(K=new X(K,Ct,null,c,et),at.push({event:K,listeners:xt}))}}if((o&7)===0){t:{if(K=r==="mouseover"||r==="pointerover",X=r==="mouseout"||r==="pointerout",K&&c!==As&&(Ct=c.relatedTarget||c.fromElement)&&(ws(Ct)||Ct[ai]))break t;if((X||K)&&(K=et.window===et?et:(K=et.ownerDocument)?K.defaultView||K.parentWindow:window,X?(Ct=c.relatedTarget||c.toElement,X=Q,Ct=Ct?ws(Ct):null,Ct!==null&&(ce=a(Ct),xt=Ct.tag,Ct!==ce||xt!==5&&xt!==27&&xt!==6)&&(Ct=null)):(X=null,Ct=Q),X!==Ct)){if(xt=ui,nt="onMouseLeave",q="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(xt=eu,nt="onPointerLeave",q="onPointerEnter",F="pointer"),ce=X==null?K:Bi(X),Y=Ct==null?K:Bi(Ct),K=new xt(nt,F+"leave",X,c,et),K.target=ce,K.relatedTarget=Y,nt=null,ws(et)===Q&&(xt=new xt(q,F+"enter",Ct,c,et),xt.target=Y,xt.relatedTarget=ce,nt=xt),ce=nt,X&&Ct)e:{for(xt=X,q=Ct,F=0,Y=xt;Y;Y=Pl(Y))F++;for(Y=0,nt=q;nt;nt=Pl(nt))Y++;for(;0<F-Y;)xt=Pl(xt),F--;for(;0<Y-F;)q=Pl(q),Y--;for(;F--;){if(xt===q||q!==null&&xt===q.alternate)break e;xt=Pl(xt),q=Pl(q)}xt=null}else xt=null;X!==null&&Yx(at,K,X,xt,!1),Ct!==null&&ce!==null&&Yx(at,ce,Ct,xt,!0)}}t:{if(K=Q?Bi(Q):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var pt=dE;else if(Qe(K))if(fE)pt=vk;else{pt=_k;var Mt=pk}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Q&&$c(Q.elementType)&&(pt=dE):pt=yk;if(pt&&(pt=pt(r,Q))){ks(at,pt,c,et);break t}Mt&&Mt(r,K,Q),r==="focusout"&&Q&&K.type==="number"&&Q.memoizedProps.value!=null&&Er(K,"number",K.value)}switch(Mt=Q?Bi(Q):window,r){case"focusin":(Qe(Mt)||Mt.contentEditable==="true")&&(hl=Mt,kp=Q,su=null);break;case"focusout":su=kp=hl=null;break;case"mousedown":Dp=!0;break;case"contextmenu":case"mouseup":case"dragend":Dp=!1,EE(at,c,et);break;case"selectionchange":if(Ek)break;case"keydown":case"keyup":EE(at,c,et)}var yt;if(Qi)t:{switch(r){case"compositionstart":var Tt="onCompositionStart";break t;case"compositionend":Tt="onCompositionEnd";break t;case"compositionupdate":Tt="onCompositionUpdate";break t}Tt=void 0}else Bt?J(r,c)&&(Tt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Tt="onCompositionStart");Tt&&(w&&c.locale!=="ko"&&(Bt||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Bt&&(yt=Kc()):(Wi=et,wr="value"in Wi?Wi.value:Wi.textContent,Bt=!0)),Mt=kf(Q,Tt),0<Mt.length&&(Tt=new Jc(Tt,r,null,c,et),at.push({event:Tt,listeners:Mt}),yt?Tt.data=yt:(yt=ht(c),yt!==null&&(Tt.data=yt)))),(yt=b?$e(r,c):Ht(r,c))&&(Tt=kf(Q,"onBeforeInput"),0<Tt.length&&(Mt=new Jc("onBeforeInput","beforeinput",null,c,et),at.push({event:Mt,listeners:Tt}),Mt.data=yt)),iD(at,r,Q,c,et)}Wx(at,o)})}function Du(r,o,c){return{instance:r,listener:o,currentTarget:c}}function kf(r,o){for(var c=o+"Capture",h=[];r!==null;){var g=r,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=qa(r,c),g!=null&&h.unshift(Du(r,g,_)),g=qa(r,o),g!=null&&h.push(Du(r,g,_))),r.tag===3)return h;r=r.return}return[]}function Pl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Yx(r,o,c,h,g){for(var _=o._reactName,x=[];c!==null&&c!==h;){var A=c,O=A.alternate,Q=A.stateNode;if(A=A.tag,O!==null&&O===h)break;A!==5&&A!==26&&A!==27||Q===null||(O=Q,g?(Q=qa(c,_),Q!=null&&x.unshift(Du(c,Q,O))):g||(Q=qa(c,_),Q!=null&&x.push(Du(c,Q,O)))),c=c.return}x.length!==0&&r.push({event:o,listeners:x})}var oD=/\r\n?/g,lD=/\u0000|\uFFFD/g;function $x(r){return(typeof r=="string"?r:""+r).replace(oD,`
`).replace(lD,"")}function Qx(r,o){return o=$x(o),$x(r)===o}function Df(){}function le(r,o,c,h,g,_){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||oi(r,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&oi(r,""+h);break;case"className":Hi(r,"class",h);break;case"tabIndex":Hi(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Hi(r,c,h);break;case"style":Yc(r,h,_);break;case"data":if(o!=="object"){Hi(r,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=nl(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&le(r,o,"name",g.name,g,null),le(r,o,"formEncType",g.formEncType,g,null),le(r,o,"formMethod",g.formMethod,g,null),le(r,o,"formTarget",g.formTarget,g,null)):(le(r,o,"encType",g.encType,g,null),le(r,o,"method",g.method,g,null),le(r,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=nl(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Df);break;case"onScroll":h!=null&&Lt("scroll",r);break;case"onScrollEnd":h!=null&&Lt("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=nl(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":Lt("beforetoggle",r),Lt("toggle",r),br(r,"popover",h);break;case"xlinkActuate":fn(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":fn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":fn(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":fn(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":fn(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":fn(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":fn(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":fn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":fn(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":br(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Tp.get(c)||c,br(r,c,h))}}function ey(r,o,c,h,g,_){switch(c){case"style":Yc(r,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?oi(r,h):(typeof h=="number"||typeof h=="bigint")&&oi(r,""+h);break;case"onScroll":h!=null&&Lt("scroll",r);break;case"onScrollEnd":h!=null&&Lt("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Df);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xo.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),_=r[Ve]||null,_=_!=null?_[c]:null,typeof _=="function"&&r.removeEventListener(o,_,g),typeof h=="function")){typeof _!="function"&&_!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,h,g);break t}c in r?r[c]=h:h===!0?r.setAttribute(c,""):br(r,c,h)}}}function _n(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",r),Lt("load",r);var h=!1,g=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var x=c[_];if(x!=null)switch(_){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:le(r,o,_,x,c,null)}}g&&le(r,o,"srcSet",c.srcSet,c,null),h&&le(r,o,"src",c.src,c,null);return;case"input":Lt("invalid",r);var A=_=x=g=null,O=null,Q=null;for(h in c)if(c.hasOwnProperty(h)){var et=c[h];if(et!=null)switch(h){case"name":g=et;break;case"type":x=et;break;case"checked":O=et;break;case"defaultChecked":Q=et;break;case"value":_=et;break;case"defaultValue":A=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(i(137,o));break;default:le(r,o,h,et,c,null)}}za(r,_,A,O,Q,x,g,!1),el(r);return;case"select":Lt("invalid",r),h=x=_=null;for(g in c)if(c.hasOwnProperty(g)&&(A=c[g],A!=null))switch(g){case"value":_=A;break;case"defaultValue":x=A;break;case"multiple":h=A;default:le(r,o,g,A,c,null)}o=_,c=x,r.multiple=!!h,o!=null?Ss(r,!!h,o,!1):c!=null&&Ss(r,!!h,c,!0);return;case"textarea":Lt("invalid",r),_=g=h=null;for(x in c)if(c.hasOwnProperty(x)&&(A=c[x],A!=null))switch(x){case"value":h=A;break;case"defaultValue":g=A;break;case"children":_=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:le(r,o,x,A,c,null)}Ba(r,h,g,_),el(r);return;case"option":for(O in c)if(c.hasOwnProperty(O)&&(h=c[O],h!=null))switch(O){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:le(r,o,O,h,c,null)}return;case"dialog":Lt("beforetoggle",r),Lt("toggle",r),Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":Lt("load",r);break;case"video":case"audio":for(h=0;h<ku.length;h++)Lt(ku[h],r);break;case"image":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"embed":case"source":case"link":Lt("error",r),Lt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(h=c[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:le(r,o,Q,h,c,null)}return;default:if($c(o)){for(et in c)c.hasOwnProperty(et)&&(h=c[et],h!==void 0&&ey(r,o,et,h,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(h=c[A],h!=null&&le(r,o,A,h,c,null))}function cD(r,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,x=null,A=null,O=null,Q=null,et=null;for(X in c){var at=c[X];if(c.hasOwnProperty(X)&&at!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=at;default:h.hasOwnProperty(X)||le(r,o,X,null,h,at)}}for(var K in h){var X=h[K];if(at=c[K],h.hasOwnProperty(K)&&(X!=null||at!=null))switch(K){case"type":_=X;break;case"name":g=X;break;case"checked":Q=X;break;case"defaultChecked":et=X;break;case"value":x=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,o));break;default:X!==at&&le(r,o,K,X,h,at)}}Qn(r,x,A,O,Q,et,_,g);return;case"select":X=x=A=K=null;for(_ in c)if(O=c[_],c.hasOwnProperty(_)&&O!=null)switch(_){case"value":break;case"multiple":X=O;default:h.hasOwnProperty(_)||le(r,o,_,null,h,O)}for(g in h)if(_=h[g],O=c[g],h.hasOwnProperty(g)&&(_!=null||O!=null))switch(g){case"value":K=_;break;case"defaultValue":A=_;break;case"multiple":x=_;default:_!==O&&le(r,o,g,_,h,O)}o=A,c=x,h=X,K!=null?Ss(r,!!c,K,!1):!!h!=!!c&&(o!=null?Ss(r,!!c,o,!0):Ss(r,!!c,c?[]:"",!1));return;case"textarea":X=K=null;for(A in c)if(g=c[A],c.hasOwnProperty(A)&&g!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:le(r,o,A,null,h,g)}for(x in h)if(g=h[x],_=c[x],h.hasOwnProperty(x)&&(g!=null||_!=null))switch(x){case"value":K=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==_&&le(r,o,x,g,h,_)}ae(r,K,X);return;case"option":for(var Ct in c)if(K=c[Ct],c.hasOwnProperty(Ct)&&K!=null&&!h.hasOwnProperty(Ct))switch(Ct){case"selected":r.selected=!1;break;default:le(r,o,Ct,null,h,K)}for(O in h)if(K=h[O],X=c[O],h.hasOwnProperty(O)&&K!==X&&(K!=null||X!=null))switch(O){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:le(r,o,O,K,h,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in c)K=c[xt],c.hasOwnProperty(xt)&&K!=null&&!h.hasOwnProperty(xt)&&le(r,o,xt,null,h,K);for(Q in h)if(K=h[Q],X=c[Q],h.hasOwnProperty(Q)&&K!==X&&(K!=null||X!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,o));break;default:le(r,o,Q,K,h,X)}return;default:if($c(o)){for(var ce in c)K=c[ce],c.hasOwnProperty(ce)&&K!==void 0&&!h.hasOwnProperty(ce)&&ey(r,o,ce,void 0,h,K);for(et in h)K=h[et],X=c[et],!h.hasOwnProperty(et)||K===X||K===void 0&&X===void 0||ey(r,o,et,K,h,X);return}}for(var q in c)K=c[q],c.hasOwnProperty(q)&&K!=null&&!h.hasOwnProperty(q)&&le(r,o,q,null,h,K);for(at in h)K=h[at],X=c[at],!h.hasOwnProperty(at)||K===X||K==null&&X==null||le(r,o,at,K,h,X)}var ny=null,iy=null;function Mf(r){return r.nodeType===9?r:r.ownerDocument}function Kx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xx(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function sy(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ry=null;function uD(){var r=window.event;return r&&r.type==="popstate"?r===ry?!1:(ry=r,!0):(ry=null,!1)}var Zx=typeof setTimeout=="function"?setTimeout:void 0,hD=typeof clearTimeout=="function"?clearTimeout:void 0,Jx=typeof Promise=="function"?Promise:void 0,dD=typeof queueMicrotask=="function"?queueMicrotask:typeof Jx<"u"?function(r){return Jx.resolve(null).then(r).catch(fD)}:Zx;function fD(r){setTimeout(function(){throw r})}function jr(r){return r==="head"}function tT(r,o){var c=o,h=0,g=0;do{var _=c.nextSibling;if(r.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(0<h&&8>h){c=h;var x=r.ownerDocument;if(c&1&&Mu(x.documentElement),c&2&&Mu(x.body),c&4)for(c=x.head,Mu(c),x=c.firstChild;x;){var A=x.nextSibling,O=x.nodeName;x[Va]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=A}}if(g===0){r.removeChild(_),zu(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:h=c.charCodeAt(0)-48;else h=0;c=_}while(c);zu(o)}function ay(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":ay(c),vr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function mD(r,o,c,h){for(;r.nodeType===1;){var g=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Va])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=ki(r.nextSibling),r===null)break}return null}function gD(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=ki(r.nextSibling),r===null))return null;return r}function oy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function pD(r,o){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function ki(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var ly=null;function eT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}function nT(r,o,c){switch(o=Mf(c),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Mu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);vr(r)}var _i=new Map,iT=new Set;function Of(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var qs=it.d;it.d={f:_D,r:yD,D:vD,C:bD,L:ED,m:wD,X:TD,S:xD,M:SD};function _D(){var r=qs.f(),o=Sf();return r||o}function yD(r){var o=zi(r);o!==null&&o.tag===5&&o.type==="form"?xw(o):qs.r(r)}var Ll=typeof document>"u"?null:document;function sT(r,o,c){var h=Ll;if(h&&typeof o=="string"&&o){var g=je(o);g='link[rel="'+r+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),iT.has(g)||(iT.add(g),r={rel:r,crossOrigin:c,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),_n(o,"link",r),De(o),h.head.appendChild(o)))}}function vD(r){qs.D(r),sT("dns-prefetch",r,null)}function bD(r,o){qs.C(r,o),sT("preconnect",r,o)}function ED(r,o,c){qs.L(r,o,c);var h=Ll;if(h&&r&&o){var g='link[rel="preload"][as="'+je(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+je(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+je(c.imageSizes)+'"]')):g+='[href="'+je(r)+'"]';var _=g;switch(o){case"style":_=Vl(r);break;case"script":_=jl(r)}_i.has(_)||(r=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),_i.set(_,r),h.querySelector(g)!==null||o==="style"&&h.querySelector(Ou(_))||o==="script"&&h.querySelector(Pu(_))||(o=h.createElement("link"),_n(o,"link",r),De(o),h.head.appendChild(o)))}}function wD(r,o){qs.m(r,o);var c=Ll;if(c&&r){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+je(h)+'"][href="'+je(r)+'"]',_=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=jl(r)}if(!_i.has(_)&&(r=p({rel:"modulepreload",href:r},o),_i.set(_,r),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Pu(_)))return}h=c.createElement("link"),_n(h,"link",r),De(h),c.head.appendChild(h)}}}function xD(r,o,c){qs.S(r,o,c);var h=Ll;if(h&&r){var g=Dn(h).hoistableStyles,_=Vl(r);o=o||"default";var x=g.get(_);if(!x){var A={loading:0,preload:null};if(x=h.querySelector(Ou(_)))A.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":o},c),(c=_i.get(_))&&cy(r,c);var O=x=h.createElement("link");De(O),_n(O,"link",r),O._p=new Promise(function(Q,et){O.onload=Q,O.onerror=et}),O.addEventListener("load",function(){A.loading|=1}),O.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Pf(x,o,h)}x={type:"stylesheet",instance:x,count:1,state:A},g.set(_,x)}}}function TD(r,o){qs.X(r,o);var c=Ll;if(c&&r){var h=Dn(c).hoistableScripts,g=jl(r),_=h.get(g);_||(_=c.querySelector(Pu(g)),_||(r=p({src:r,async:!0},o),(o=_i.get(g))&&uy(r,o),_=c.createElement("script"),De(_),_n(_,"link",r),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function SD(r,o){qs.M(r,o);var c=Ll;if(c&&r){var h=Dn(c).hoistableScripts,g=jl(r),_=h.get(g);_||(_=c.querySelector(Pu(g)),_||(r=p({src:r,async:!0,type:"module"},o),(o=_i.get(g))&&uy(r,o),_=c.createElement("script"),De(_),_n(_,"link",r),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function rT(r,o,c,h){var g=(g=bt.current)?Of(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Vl(c.href),c=Dn(g).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Vl(c.href);var _=Dn(g).hoistableStyles,x=_.get(r);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,x),(_=g.querySelector(Ou(r)))&&!_._p&&(x.instance=_,x.state.loading=5),_i.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},_i.set(r,c),_||AD(g,r,c,x.state))),o&&h===null)throw Error(i(528,""));return x}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=jl(c),c=Dn(g).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Vl(r){return'href="'+je(r)+'"'}function Ou(r){return'link[rel="stylesheet"]['+r+"]"}function aT(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function AD(r,o,c,h){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=r.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),_n(o,"link",c),De(o),r.head.appendChild(o))}function jl(r){return'[src="'+je(r)+'"]'}function Pu(r){return"script[async]"+r}function oT(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=r.querySelector('style[data-href~="'+je(c.href)+'"]');if(h)return o.instance=h,De(h),h;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),De(h),_n(h,"style",g),Pf(h,c.precedence,r),o.instance=h;case"stylesheet":g=Vl(c.href);var _=r.querySelector(Ou(g));if(_)return o.state.loading|=4,o.instance=_,De(_),_;h=aT(c),(g=_i.get(g))&&cy(h,g),_=(r.ownerDocument||r).createElement("link"),De(_);var x=_;return x._p=new Promise(function(A,O){x.onload=A,x.onerror=O}),_n(_,"link",h),o.state.loading|=4,Pf(_,c.precedence,r),o.instance=_;case"script":return _=jl(c.src),(g=r.querySelector(Pu(_)))?(o.instance=g,De(g),g):(h=c,(g=_i.get(_))&&(h=p({},c),uy(h,g)),r=r.ownerDocument||r,g=r.createElement("script"),De(g),_n(g,"link",h),r.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,Pf(h,c.precedence,r));return o.instance}function Pf(r,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,_=g,x=0;x<h.length;x++){var A=h[x];if(A.dataset.precedence===o)_=A;else if(_!==g)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function cy(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function uy(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Lf=null;function lT(r,o,c){if(Lf===null){var h=new Map,g=Lf=new Map;g.set(c,h)}else g=Lf,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),g=0;g<c.length;g++){var _=c[g];if(!(_[Va]||_[Ye]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(o)||"";x=r+x;var A=h.get(x);A?A.push(_):h.set(x,[_])}}return h}function cT(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function CD(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function uT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Lu=null;function RD(){}function ID(r,o,c){if(Lu===null)throw Error(i(475));var h=Lu;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Vl(c.href),_=r.querySelector(Ou(g));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(h.count++,h=Vf.bind(h),r.then(h,h)),o.state.loading|=4,o.instance=_,De(_);return}_=r.ownerDocument||r,c=aT(c),(g=_i.get(g))&&cy(c,g),_=_.createElement("link"),De(_);var x=_;x._p=new Promise(function(A,O){x.onload=A,x.onerror=O}),_n(_,"link",c),o.instance=_}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=Vf.bind(h),r.addEventListener("load",o),r.addEventListener("error",o))}}function ND(){if(Lu===null)throw Error(i(475));var r=Lu;return r.stylesheets&&r.count===0&&hy(r,r.stylesheets),0<r.count?function(o){var c=setTimeout(function(){if(r.stylesheets&&hy(r,r.stylesheets),r.unsuspend){var h=r.unsuspend;r.unsuspend=null,h()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c)}}:null}function Vf(){if(this.count--,this.count===0){if(this.stylesheets)hy(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var jf=null;function hy(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,jf=new Map,o.forEach(kD,r),jf=null,Vf.call(r))}function kD(r,o){if(!(o.state.loading&4)){var c=jf.get(r);if(c)var h=c.get(null);else{c=new Map,jf.set(r,c);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var x=g[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),h=x)}h&&c.set(null,h)}g=o.instance,x=g.getAttribute("data-precedence"),_=c.get(x)||h,_===h&&c.set(null,g),c.set(x,g),this.count++,h=Vf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),_?_.parentNode.insertBefore(g,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),o.state.loading|=4}}var Vu={$$typeof:$,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function DD(r,o,c,h,g,_,x,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.hiddenUpdates=bs(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function hT(r,o,c,h,g,_,x,A,O,Q,et,at){return r=new DD(r,o,c,x,A,O,Q,at),o=1,_===!0&&(o|=24),_=Xn(3,null,null,o),r.current=_,_.stateNode=r,o=Gp(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:h,isDehydrated:c,cache:o},Kp(_),r}function dT(r){return r?(r=gl,r):gl}function fT(r,o,c,h,g,_){g=dT(g),h.context===null?h.context=g:h.pendingContext=g,h=Sr(o),h.payload={element:c},_=_===void 0?null:_,_!==null&&(h.callback=_),c=Ar(r,h,o),c!==null&&(ni(c,r,o),fu(c,r,o))}function mT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function dy(r,o){mT(r,o),(r=r.alternate)&&mT(r,o)}function gT(r){if(r.tag===13){var o=ml(r,67108864);o!==null&&ni(o,r,67108864),dy(r,67108864)}}var Uf=!0;function MD(r,o,c,h){var g=z.T;z.T=null;var _=it.p;try{it.p=2,fy(r,o,c,h)}finally{it.p=_,z.T=g}}function OD(r,o,c,h){var g=z.T;z.T=null;var _=it.p;try{it.p=8,fy(r,o,c,h)}finally{it.p=_,z.T=g}}function fy(r,o,c,h){if(Uf){var g=my(h);if(g===null)ty(r,o,h,Ff,c),_T(r,h);else if(LD(g,r,o,c,h))h.stopPropagation();else if(_T(r,h),o&4&&-1<PD.indexOf(r)){for(;g!==null;){var _=zi(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=Ai(_.pendingLanes);if(x!==0){var A=_;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var O=1<<31-xn(x);A.entanglements[1]|=O,x&=~O}es(_),(ne&6)===0&&(xf=ri()+500,Nu(0))}}break;case 13:A=ml(_,2),A!==null&&ni(A,_,2),Sf(),dy(_,2)}if(_=my(h),_===null&&ty(r,o,h,Ff,c),_===g)break;g=_}g!==null&&h.stopPropagation()}else ty(r,o,h,null,c)}}function my(r){return r=li(r),gy(r)}var Ff=null;function gy(r){if(Ff=null,r=ws(r),r!==null){var o=a(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=l(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Ff=r,null}function pT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yp()){case Pc:return 2;case Yo:return 8;case Da:case vp:return 32;case $o:return 268435456;default:return 32}default:return 32}}var py=!1,Ur=null,Fr=null,zr=null,ju=new Map,Uu=new Map,Br=[],PD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _T(r,o){switch(r){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":ju.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(o.pointerId)}}function Fu(r,o,c,h,g,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:_,targetContainers:[g]},o!==null&&(o=zi(o),o!==null&&gT(o)),r):(r.eventSystemFlags|=h,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function LD(r,o,c,h,g){switch(o){case"focusin":return Ur=Fu(Ur,r,o,c,h,g),!0;case"dragenter":return Fr=Fu(Fr,r,o,c,h,g),!0;case"mouseover":return zr=Fu(zr,r,o,c,h,g),!0;case"pointerover":var _=g.pointerId;return ju.set(_,Fu(ju.get(_)||null,r,o,c,h,g)),!0;case"gotpointercapture":return _=g.pointerId,Uu.set(_,Fu(Uu.get(_)||null,r,o,c,h,g)),!0}return!1}function yT(r){var o=ws(r.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){r.blockedOn=o,Td(r.priority,function(){if(c.tag===13){var h=ei();h=pr(h);var g=ml(c,h);g!==null&&ni(g,c,h),dy(c,h)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function zf(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=my(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);As=h,c.target.dispatchEvent(h),As=null}else return o=zi(c),o!==null&&gT(o),r.blockedOn=c,!1;o.shift()}return!0}function vT(r,o,c){zf(r)&&c.delete(o)}function VD(){py=!1,Ur!==null&&zf(Ur)&&(Ur=null),Fr!==null&&zf(Fr)&&(Fr=null),zr!==null&&zf(zr)&&(zr=null),ju.forEach(vT),Uu.forEach(vT)}function Bf(r,o){r.blockedOn===o&&(r.blockedOn=null,py||(py=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VD)))}var Hf=null;function bT(r){Hf!==r&&(Hf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hf===r&&(Hf=null);for(var o=0;o<r.length;o+=3){var c=r[o],h=r[o+1],g=r[o+2];if(typeof h!="function"){if(gy(h||c)===null)continue;break}var _=zi(c);_!==null&&(r.splice(o,3),o-=3,g_(_,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function zu(r){function o(O){return Bf(O,r)}Ur!==null&&Bf(Ur,r),Fr!==null&&Bf(Fr,r),zr!==null&&Bf(zr,r),ju.forEach(o),Uu.forEach(o);for(var c=0;c<Br.length;c++){var h=Br[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Br.length&&(c=Br[0],c.blockedOn===null);)yT(c),c.blockedOn===null&&Br.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],_=c[h+1],x=g[Ve]||null;if(typeof _=="function")x||bT(c);else if(x){var A=null;if(_&&_.hasAttribute("formAction")){if(g=_,x=_[Ve]||null)A=x.formAction;else if(gy(g)!==null)continue}else A=x.action;typeof A=="function"?c[h+1]=A:(c.splice(h,3),h-=3),bT(c)}}}function _y(r){this._internalRoot=r}qf.prototype.render=_y.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var c=o.current,h=ei();fT(c,h,r,o,null,null)},qf.prototype.unmount=_y.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;fT(r.current,2,null,r,null,null),Sf(),o[ai]=null}};function qf(r){this._internalRoot=r}qf.prototype.unstable_scheduleHydration=function(r){if(r){var o=_r();r={blockedOn:null,target:r,priority:o};for(var c=0;c<Br.length&&o!==0&&o<Br[c].priority;c++);Br.splice(c,0,r),c===0&&yT(r)}};var ET=t.version;if(ET!=="19.1.0")throw Error(i(527,ET,"19.1.0"));it.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(o),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var jD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{Ce=Wf.inject(jD),ee=Wf}catch{}}return Hu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var c=!1,h="",g=Vw,_=jw,x=Uw,A=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(A=o.unstable_transitionCallbacks)),o=hT(r,1,!1,null,null,c,h,g,_,x,A,null),r[ai]=o.current,J_(r),new _y(o)},Hu.hydrateRoot=function(r,o,c){if(!s(r))throw Error(i(299));var h=!1,g="",_=Vw,x=jw,A=Uw,O=null,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(O=c.unstable_transitionCallbacks),c.formState!==void 0&&(Q=c.formState)),o=hT(r,1,!0,o,c??null,h,g,_,x,A,O,Q),o.context=dT(null),c=o.current,h=ei(),h=pr(h),g=Sr(h),g.callback=null,Ar(c,g,h),c=h,o.current.lanes=c,Es(o,c),es(o),r[ai]=o.current,J_(r),new qf(o)},Hu.version="19.1.0",Hu}var kT;function QD(){if(kT)return by.exports;kT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),by.exports=$D(),by.exports}var KD=QD();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DT="popstate";function XD(n={}){function t(i,s){let{pathname:a,search:l,hash:u}=i.location;return r0("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:Ch(s)}return JD(t,e,null,n)}function Ae(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function ms(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ZD(){return Math.random().toString(36).substring(2,10)}function MT(n,t){return{usr:n.state,key:n.key,idx:t}}function r0(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?vc(t):t,state:e,key:t&&t.key||i||ZD()}}function Ch({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function vc(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function JD(n,t,e,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function y(){u="POP";let C=p(),L=C==null?null:C-f;f=C,d&&d({action:u,location:N.location,delta:L})}function v(C,L){u="PUSH";let W=r0(N.location,C,L);f=p()+1;let $=MT(W,f),Z=N.createHref(W);try{l.pushState($,"",Z)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(Z)}a&&d&&d({action:u,location:N.location,delta:1})}function T(C,L){u="REPLACE";let W=r0(N.location,C,L);f=p();let $=MT(W,f),Z=N.createHref(W);l.replaceState($,"",Z),a&&d&&d({action:u,location:N.location,delta:0})}function S(C){return tM(C)}let N={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(DT,y),d=C,()=>{s.removeEventListener(DT,y),d=null}},createHref(C){return t(s,C)},createURL:S,encodeLocation(C){let L=S(C);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:T,go(C){return l.go(C)}};return N}function tM(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ae(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ch(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function bC(n,t,e="/"){return eM(n,t,e,!1)}function eM(n,t,e,i){let s=typeof t=="string"?vc(t):t,a=rr(s.pathname||"/",e);if(a==null)return null;let l=EC(n);nM(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=fM(a);u=hM(l[d],f,i)}return u}function EC(n,t=[],e=[],i=""){let s=(a,l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(Ae(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let f=nr([i,d.relativePath]),p=e.concat(d);a.children&&a.children.length>0&&(Ae(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),EC(a.children,t,p,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:cM(f,a.index),routesMeta:p})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let u of wC(a.path))s(a,l,u)}),t}function wC(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),a=e.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=wC(i.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function nM(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:uM(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var iM=/^:[\w-]+$/,sM=3,rM=2,aM=1,oM=10,lM=-2,OT=n=>n==="*";function cM(n,t){let e=n.split("/"),i=e.length;return e.some(OT)&&(i+=lM),t&&(i+=rM),e.filter(s=>!OT(s)).reduce((s,a)=>s+(iM.test(a)?sM:a===""?aM:oM),i)}function uM(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function hM(n,t,e=!1){let{routesMeta:i}=n,s={},a="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=a==="/"?t:t.slice(a.length)||"/",y=Pm({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!y&&f&&e&&!i[i.length-1].route.index&&(y=Pm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:nr([a,y.pathname]),pathnameBase:_M(nr([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=nr([a,y.pathnameBase]))}return l}function Pm(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=dM(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:y},v)=>{if(p==="*"){let S=u[v]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const T=u[v];return y&&!T?f[p]=void 0:f[p]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function dM(n,t=!1,e=!0){ms(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function fM(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ms(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function rr(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function mM(n,t="/"){let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?vc(n):n;return{pathname:e?e.startsWith("/")?e:gM(e,t):t,search:yM(i),hash:vM(s)}}function gM(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Ty(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pM(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function xC(n){let t=pM(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function TC(n,t,e,i=!1){let s;typeof n=="string"?s=vc(n):(s={...n},Ae(!s.pathname||!s.pathname.includes("?"),Ty("?","pathname","search",s)),Ae(!s.pathname||!s.pathname.includes("#"),Ty("#","pathname","hash",s)),Ae(!s.search||!s.search.includes("#"),Ty("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=e;else{let y=t.length-1;if(!i&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?t[y]:"/"}let d=mM(s,u),f=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var nr=n=>n.join("/").replace(/\/\/+/g,"/"),_M=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,vM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var SC=["POST","PUT","PATCH","DELETE"];new Set(SC);var EM=["GET",...SC];new Set(EM);var bc=B.createContext(null);bc.displayName="DataRouter";var kg=B.createContext(null);kg.displayName="DataRouterState";B.createContext(!1);var AC=B.createContext({isTransitioning:!1});AC.displayName="ViewTransition";var wM=B.createContext(new Map);wM.displayName="Fetchers";var xM=B.createContext(null);xM.displayName="Await";var ps=B.createContext(null);ps.displayName="Navigation";var ed=B.createContext(null);ed.displayName="Location";var _s=B.createContext({outlet:null,matches:[],isDataRoute:!1});_s.displayName="Route";var nv=B.createContext(null);nv.displayName="RouteError";function TM(n,{relative:t}={}){Ae(nd(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=B.useContext(ps),{hash:s,pathname:a,search:l}=id(n,{relative:t}),u=a;return e!=="/"&&(u=a==="/"?e:nr([e,a])),i.createHref({pathname:u,search:l,hash:s})}function nd(){return B.useContext(ed)!=null}function Uo(){return Ae(nd(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(ed).location}var CC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RC(n){B.useContext(ps).static||B.useLayoutEffect(n)}function Fo(){let{isDataRoute:n}=B.useContext(_s);return n?jM():SM()}function SM(){Ae(nd(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(bc),{basename:t,navigator:e}=B.useContext(ps),{matches:i}=B.useContext(_s),{pathname:s}=Uo(),a=JSON.stringify(xC(i)),l=B.useRef(!1);return RC(()=>{l.current=!0}),B.useCallback((d,f={})=>{if(ms(l.current,CC),!l.current)return;if(typeof d=="number"){e.go(d);return}let p=TC(d,JSON.parse(a),s,f.relative==="path");n==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:nr([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,a,s,n])}B.createContext(null);function AM(){let{matches:n}=B.useContext(_s),t=n[n.length-1];return t?t.params:{}}function id(n,{relative:t}={}){let{matches:e}=B.useContext(_s),{pathname:i}=Uo(),s=JSON.stringify(xC(e));return B.useMemo(()=>TC(n,JSON.parse(s),i,t==="path"),[n,s,i,t])}function CM(n,t){return IC(n,t)}function IC(n,t,e,i){Ae(nd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=B.useContext(ps),{matches:a}=B.useContext(_s),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let L=p&&p.path||"";NC(d,!p||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let y=Uo(),v;if(t){let L=typeof t=="string"?vc(t):t;Ae(f==="/"||L.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${L.pathname}" was given in the \`location\` prop.`),v=L}else v=y;let T=v.pathname||"/",S=T;if(f!=="/"){let L=f.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let N=bC(n,{pathname:S});ms(p||N!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),ms(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=DM(N&&N.map(L=>Object.assign({},L,{params:Object.assign({},u,L.params),pathname:nr([f,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:nr([f,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,e,i);return t&&C?B.createElement(ed.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function RM(){let n=VM(),t=bM(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:a},"ErrorBoundary")," or"," ",B.createElement("code",{style:a},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),e?B.createElement("pre",{style:s},e):null,l)}var IM=B.createElement(RM,null),NM=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?B.createElement(_s.Provider,{value:this.props.routeContext},B.createElement(nv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kM({routeContext:n,match:t,children:e}){let i=B.useContext(bc);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(_s.Provider,{value:n},e)}function DM(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let s=n,a=e?.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);Ae(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(e)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:y}=e,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let y,v=!1,T=null,S=null;e&&(y=a&&f.route.id?a[f.route.id]:void 0,T=f.route.errorElement||IM,l&&(u<0&&p===0?(NC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):u===p&&(v=!0,S=f.route.hydrateFallbackElement||null)));let N=t.concat(s.slice(0,p+1)),C=()=>{let L;return y?L=T:v?L=S:f.route.Component?L=B.createElement(f.route.Component,null):f.route.element?L=f.route.element:L=d,B.createElement(kM,{match:f,routeContext:{outlet:d,matches:N,isDataRoute:e!=null},children:L})};return e&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?B.createElement(NM,{location:e.location,revalidation:e.revalidation,component:T,error:y,children:C(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):C()},null)}function iv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MM(n){let t=B.useContext(bc);return Ae(t,iv(n)),t}function OM(n){let t=B.useContext(kg);return Ae(t,iv(n)),t}function PM(n){let t=B.useContext(_s);return Ae(t,iv(n)),t}function sv(n){let t=PM(n),e=t.matches[t.matches.length-1];return Ae(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function LM(){return sv("useRouteId")}function VM(){let n=B.useContext(nv),t=OM("useRouteError"),e=sv("useRouteError");return n!==void 0?n:t.errors?.[e]}function jM(){let{router:n}=MM("useNavigate"),t=sv("useNavigate"),e=B.useRef(!1);return RC(()=>{e.current=!0}),B.useCallback(async(s,a={})=>{ms(e.current,CC),e.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:t,...a}))},[n,t])}var PT={};function NC(n,t,e){!t&&!PT[n]&&(PT[n]=!0,ms(!1,e))}B.memo(UM);function UM({routes:n,future:t,state:e}){return IC(n,void 0,e,t)}function Gr(n){Ae(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FM({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:s,static:a=!1}){Ae(!nd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=B.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof e=="string"&&(e=vc(e));let{pathname:d="/",search:f="",hash:p="",state:y=null,key:v="default"}=e,T=B.useMemo(()=>{let S=rr(d,l);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:v},navigationType:i}},[l,d,f,p,y,v,i]);return ms(T!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:B.createElement(ps.Provider,{value:u},B.createElement(ed.Provider,{children:t,value:T}))}function zM({children:n,location:t}){return CM(a0(n),t)}function a0(n,t=[]){let e=[];return B.Children.forEach(n,(i,s)=>{if(!B.isValidElement(i))return;let a=[...t,s];if(i.type===B.Fragment){e.push.apply(e,a0(i.props.children,a));return}Ae(i.type===Gr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ae(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=a0(i.props.children,a)),e.push(l)}),e}var pm="get",_m="application/x-www-form-urlencoded";function Dg(n){return n!=null&&typeof n.tagName=="string"}function BM(n){return Dg(n)&&n.tagName.toLowerCase()==="button"}function HM(n){return Dg(n)&&n.tagName.toLowerCase()==="form"}function qM(n){return Dg(n)&&n.tagName.toLowerCase()==="input"}function WM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function GM(n,t){return n.button===0&&(!t||t==="_self")&&!WM(n)}var Gf=null;function YM(){if(Gf===null)try{new FormData(document.createElement("form"),0),Gf=!1}catch{Gf=!0}return Gf}var $M=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sy(n){return n!=null&&!$M.has(n)?(ms(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_m}"`),null):n}function QM(n,t){let e,i,s,a,l;if(HM(n)){let u=n.getAttribute("action");i=u?rr(u,t):null,e=n.getAttribute("method")||pm,s=Sy(n.getAttribute("enctype"))||_m,a=new FormData(n)}else if(BM(n)||qM(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(i=d?rr(d,t):null,e=n.getAttribute("formmethod")||u.getAttribute("method")||pm,s=Sy(n.getAttribute("formenctype"))||Sy(u.getAttribute("enctype"))||_m,a=new FormData(u,n),!YM()){let{name:f,type:p,value:y}=n;if(p==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,y)}}else{if(Dg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=pm,i=null,s=_m,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rv(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function KM(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&rr(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function XM(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function JM(n,t,e){let i=await Promise.all(n.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await XM(a,e);return l.links?l.links():[]}return[]}));return iO(i.flat(1).filter(ZM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function LT(n,t,e,i,s,a){let l=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return a==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):a==="data"?t.filter((d,f)=>{let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function tO(n,t,{includeHydrateFallback:e}={}){return eO(n.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function eO(n){return[...new Set(n)]}function nO(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function iO(n,t){let e=new Set;return new Set(t),n.reduce((i,s)=>{let a=JSON.stringify(nO(s));return e.has(a)||(e.add(a),i.push({key:a,link:s})),i},[])}function kC(){let n=B.useContext(bc);return rv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function sO(){let n=B.useContext(kg);return rv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var av=B.createContext(void 0);av.displayName="FrameworkContext";function DC(){let n=B.useContext(av);return rv(n,"You must render this element inside a <HydratedRouter> element"),n}function rO(n,t){let e=B.useContext(av),[i,s]=B.useState(!1),[a,l]=B.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=t,v=B.useRef(null);B.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let N=L=>{L.forEach(W=>{l(W.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[n]),B.useEffect(()=>{if(i){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[i]);let T=()=>{s(!0)},S=()=>{s(!1),l(!1)};return e?n!=="intent"?[a,v,{}]:[a,v,{onFocus:qu(u,T),onBlur:qu(d,S),onMouseEnter:qu(f,T),onMouseLeave:qu(p,S),onTouchStart:qu(y,T)}]:[!1,v,{}]}function qu(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function aO({page:n,...t}){let{router:e}=kC(),i=B.useMemo(()=>bC(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?B.createElement(lO,{page:n,matches:i,...t}):null}function oO(n){let{manifest:t,routeModules:e}=DC(),[i,s]=B.useState([]);return B.useEffect(()=>{let a=!1;return JM(n,t,e).then(l=>{a||s(l)}),()=>{a=!0}},[n,t,e]),i}function lO({page:n,matches:t,...e}){let i=Uo(),{manifest:s,routeModules:a}=DC(),{basename:l}=kC(),{loaderData:u,matches:d}=sO(),f=B.useMemo(()=>LT(n,t,d,s,i,"data"),[n,t,d,s,i]),p=B.useMemo(()=>LT(n,t,d,s,i,"assets"),[n,t,d,s,i]),y=B.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,N=!1;if(t.forEach(L=>{let W=s.routes[L.route.id];!W||!W.hasLoader||(!f.some($=>$.route.id===L.route.id)&&L.route.id in u&&a[L.route.id]?.shouldRevalidate||W.hasClientLoader?N=!0:S.add(L.route.id))}),S.size===0)return[];let C=KM(n,l,"data");return N&&S.size>0&&C.searchParams.set("_routes",t.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[C.pathname+C.search]},[l,u,i,s,f,t,n,a]),v=B.useMemo(()=>tO(p,s),[p,s]),T=oO(p);return B.createElement(B.Fragment,null,y.map(S=>B.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),v.map(S=>B.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),T.map(({key:S,link:N})=>B.createElement("link",{key:S,...N})))}function cO(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var MC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MC&&(window.__reactRouterVersion="7.7.1")}catch{}function uO({basename:n,children:t,window:e}){let i=B.useRef();i.current==null&&(i.current=XD({window:e,v5Compat:!0}));let s=i.current,[a,l]=B.useState({action:s.action,location:s.location}),u=B.useCallback(d=>{B.startTransition(()=>l(d))},[l]);return B.useLayoutEffect(()=>s.listen(u),[s,u]),B.createElement(FM,{basename:n,children:t,location:a.location,navigationType:a.action,navigator:s})}var OC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=B.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:y,...v},T){let{basename:S}=B.useContext(ps),N=typeof f=="string"&&OC.test(f),C,L=!1;if(typeof f=="string"&&N&&(C=f,MC))try{let k=new URL(window.location.href),P=f.startsWith("//")?new URL(k.protocol+f):new URL(f),V=rr(P.pathname,S);P.origin===k.origin&&V!=null?f=V+P.search+P.hash:L=!0}catch{ms(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=TM(f,{relative:s}),[$,Z,H]=rO(i,v),lt=mO(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:y});function D(k){t&&t(k),k.defaultPrevented||lt(k)}let I=B.createElement("a",{...v,...H,href:C||W,onClick:L||a?t:D,ref:cO(T,Z),target:d,"data-discover":!N&&e==="render"?"true":void 0});return $&&!N?B.createElement(B.Fragment,null,I,B.createElement(aO,{page:W})):I});ue.displayName="Link";var hO=B.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...f},p){let y=id(l,{relative:f.relative}),v=Uo(),T=B.useContext(kg),{navigator:S,basename:N}=B.useContext(ps),C=T!=null&&vO(y)&&u===!0,L=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,W=v.pathname,$=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;e||(W=W.toLowerCase(),$=$?$.toLowerCase():null,L=L.toLowerCase()),$&&N&&($=rr($,N)||$);const Z=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let H=W===L||!s&&W.startsWith(L)&&W.charAt(Z)==="/",lt=$!=null&&($===L||!s&&$.startsWith(L)&&$.charAt(L.length)==="/"),D={isActive:H,isPending:lt,isTransitioning:C},I=H?t:void 0,k;typeof i=="function"?k=i(D):k=[i,H?"active":null,lt?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(D):a;return B.createElement(ue,{...f,"aria-current":I,className:k,ref:p,style:P,to:l,viewTransition:u},typeof d=="function"?d(D):d)});hO.displayName="NavLink";var dO=B.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:s,state:a,method:l=pm,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:y,...v},T)=>{let S=_O(),N=yO(u,{relative:f}),C=l.toLowerCase()==="get"?"get":"post",L=typeof u=="string"&&OC.test(u),W=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let Z=$.nativeEvent.submitter,H=Z?.getAttribute("formmethod")||l;S(Z||$.currentTarget,{fetcherKey:t,method:H,navigate:e,replace:s,state:a,relative:f,preventScrollReset:p,viewTransition:y})};return B.createElement("form",{ref:T,method:C,action:N,onSubmit:i?d:W,...v,"data-discover":!L&&n==="render"?"true":void 0})});dO.displayName="Form";function fO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PC(n){let t=B.useContext(bc);return Ae(t,fO(n)),t}function mO(n,{target:t,replace:e,state:i,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=Fo(),d=Uo(),f=id(n,{relative:a});return B.useCallback(p=>{if(GM(p,t)){p.preventDefault();let y=e!==void 0?e:Ch(d)===Ch(f);u(n,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,f,e,i,t,n,s,a,l])}var gO=0,pO=()=>`__${String(++gO)}__`;function _O(){let{router:n}=PC("useSubmit"),{basename:t}=B.useContext(ps),e=LM();return B.useCallback(async(i,s={})=>{let{action:a,method:l,encType:u,formData:d,body:f}=QM(i,t);if(s.navigate===!1){let p=s.fetcherKey||pO();await n.fetch(p,e,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,t,e])}function yO(n,{relative:t}={}){let{basename:e}=B.useContext(ps),i=B.useContext(_s);Ae(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...id(n||".",{relative:t})},l=Uo();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:nr([e,a.pathname])),Ch(a)}function vO(n,{relative:t}={}){let e=B.useContext(AC);Ae(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=PC("useViewTransitionState"),s=id(n,{relative:t});if(!e.isTransitioning)return!1;let a=rr(e.currentLocation.pathname,i)||e.currentLocation.pathname,l=rr(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Pm(s.pathname,l)!=null||Pm(s.pathname,a)!=null}const LC=B.createContext();function VC({children:n}){const[t,e]=B.useState(()=>{const i=localStorage.getItem("darkMode");return i?JSON.parse(i):!1});return B.useEffect(()=>{document.documentElement.classList.toggle("dark",t),localStorage.setItem("darkMode",JSON.stringify(t))},[t]),E.jsx(LC.Provider,{value:{darkMode:t,setDarkMode:e},children:n})}function ov(){return B.useContext(LC)}const bO=()=>{};var VT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut=function(n,t){if(!n)throw Ec(t)},Ec=function(n){return new Error("Firebase Database ("+jC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},EO=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[e++];t[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[e++],l=n[e++],u=n[e++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const a=n[e++],l=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return t.join("")},lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,p=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;d||(T=64,l||(v=64)),i.push(e[p],e[y],e[v],e[T])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(UC(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):EO(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=e[n.charAt(s++)],u=s<n.length?e[n.charAt(s)]:0;++s;const f=s<n.length?e[n.charAt(s)]:64;++s;const y=s<n.length?e[n.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new wO;const v=a<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),y!==64){const S=f<<6&192|y;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FC=function(n){const t=UC(n);return lv.encodeByteArray(t,!0)},Lm=function(n){return FC(n).replace(/\./g,"")},Vm=function(n){try{return lv.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(n){return zC(void 0,n)}function zC(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!TO(e)||(n[e]=zC(n[e],t[e]));return n}function TO(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=()=>SO().__FIREBASE_DEFAULTS__,CO=()=>{if(typeof process>"u"||typeof VT>"u")return;const n=VT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Vm(n[1]);return t&&JSON.parse(t)},Mg=()=>{try{return bO()||AO()||CO()||RO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BC=n=>Mg()?.emulatorHosts?.[n],HC=n=>{const t=BC(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},qC=()=>Mg()?.config,WC=n=>Mg()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Lm(JSON.stringify(e)),Lm(JSON.stringify(l)),""].join(".")}const dh={};function IO(){const n={prod:[],emulator:[]};for(const t of Object.keys(dh))dh[t]?n.emulator.push(t):n.prod.push(t);return n}function NO(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let jT=!1;function uv(n,t){if(typeof window>"u"||typeof document>"u"||!xa(window.location.host)||dh[n]===t||dh[n]||jT)return;dh[n]=t;function e(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=IO().prod.length>0;function l(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{jT=!0,l()},v}function p(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=NO(i),T=e("text"),S=document.getElementById(T)||document.createElement("span"),N=e("learnmore"),C=document.getElementById(N)||document.createElement("a"),L=e("preprendIcon"),W=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const $=v.element;u($),p(C,N);const Z=f();d(W,L),$.append(W,S,C,Z),document.body.appendChild($)}a?(S.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function kO(){const n=Mg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function YC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OO(){const n=kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PO(){return jC.NODE_ADMIN===!0}function LO(){return!kO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VO(){try{return typeof indexedDB=="object"}catch{return!1}}function jO(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="FirebaseError";class dr extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=UO,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,a=this.errors[t],l=a?FO(a,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new dr(s,u,i)}}function FO(n,t){return n.replace(zO,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const zO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n){return JSON.parse(n)}function hn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=function(n){let t={},e={},i={},s="";try{const a=n.split(".");t=Rh(Vm(a[0])||""),e=Rh(Vm(a[1])||""),s=a[2],i=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:i,signature:s}},BO=function(n){const t=$C(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},HO=function(n){const t=$C(n).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function rc(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function o0(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function jm(n,t,e){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=t.call(e,n[s],s,n));return i}function ha(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const a=n[s],l=t[s];if(UT(a)&&UT(l)){if(!ha(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function UT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function nh(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(a)}}),t}function ih(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if(typeof t=="string")for(let y=0;y<16;y++)i[y]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let y=0;y<16;y++)i[y]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let y=16;y<80;y++){const v=i[y-3]^i[y-8]^i[y-14]^i[y-16];i[y]=(v<<1|v>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4],f,p;for(let y=0;y<80;y++){y<40?y<20?(f=u^a&(l^u),p=1518500249):(f=a^l^u,p=1859775393):y<60?(f=a&l|u&(a|l),p=2400959708):(f=a^l^u,p=3395469782);const v=(s<<5|s>>>27)+f+d+p+i[y]&4294967295;d=u,u=l,l=(a<<30|a>>>2)&4294967295,a=s,s=v}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const i=e-this.blockSize;let s=0;const a=this.buf_;let l=this.inbuf_;for(;s<e;){if(l===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(a[l]=t.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}else for(;s<e;)if(a[l]=t[s],++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=e&255,e/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)t[i]=this.chain_[s]>>a&255,++i;return t}}function WO(n,t){const e=new GO(n,t);return e.subscribe.bind(e)}class GO{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");YO(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=Ay),s.error===void 0&&(s.error=Ay),s.complete===void 0&&(s.complete=Ay);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YO(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Ay(){}function dv(n,t){return`${n} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const a=s-55296;i++,ut(i<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(i)-56320;s=65536+(a<<10)+l}s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):s<65536?(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},Pg=function(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,e++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n){return n&&n._delegate?n._delegate:n}class da{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Og;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(XO(t))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(t=po){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=po){return this.instances.has(t)}getOptions(t=po){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);i===u&&l.resolve(s)}return s}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&t(a,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:KO(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=po){return this.component?this.component.multipleInstances?t:po:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KO(n){return n===po?void 0:n}function XO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new QO(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Vt||(Vt={}));const JO={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},tP=Vt.INFO,eP={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},nP=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=eP[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Lg{constructor(t){this.name=t,this._logLevel=tP,this._logHandler=nP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const iP=(n,t)=>t.some(e=>n instanceof e);let FT,zT;function sP(){return FT||(FT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rP(){return zT||(zT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QC=new WeakMap,l0=new WeakMap,KC=new WeakMap,Cy=new WeakMap,fv=new WeakMap;function aP(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{e(na(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&QC.set(e,n)}).catch(()=>{}),fv.set(t,n),t}function oP(n){if(l0.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{e(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});l0.set(n,t)}let c0={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return l0.get(n);if(t==="objectStoreNames")return n.objectStoreNames||KC.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return na(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function lP(n){c0=n(c0)}function cP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Ry(this),t,...e);return KC.set(i,t.sort?t.sort():[t]),na(i)}:rP().includes(n)?function(...t){return n.apply(Ry(this),t),na(QC.get(this))}:function(...t){return na(n.apply(Ry(this),t))}}function uP(n){return typeof n=="function"?cP(n):(n instanceof IDBTransaction&&oP(n),iP(n,sP())?new Proxy(n,c0):n)}function na(n){if(n instanceof IDBRequest)return aP(n);if(Cy.has(n))return Cy.get(n);const t=uP(n);return t!==n&&(Cy.set(n,t),fv.set(t,n)),t}const Ry=n=>fv.get(n);function hP(n,t,{blocked:e,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,t),u=na(l);return i&&l.addEventListener("upgradeneeded",d=>{i(na(l.result),d.oldVersion,d.newVersion,na(l.transaction),d)}),e&&l.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const dP=["get","getKey","getAll","getAllKeys","count"],fP=["put","add","delete","clear"],Iy=new Map;function BT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Iy.get(t))return Iy.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=fP.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||dP.includes(e)))return;const a=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[e](...u),s&&d.done]))[0]};return Iy.set(t,a),a}lP(n=>({...n,get:(t,e,i)=>BT(t,e)||n.get(t,e,i),has:(t,e)=>!!BT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(gP(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function gP(n){return n.getComponent()?.type==="VERSION"}const u0="@firebase/app",HT="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Lg("@firebase/app"),pP="@firebase/app-compat",_P="@firebase/analytics-compat",yP="@firebase/analytics",vP="@firebase/app-check-compat",bP="@firebase/app-check",EP="@firebase/auth",wP="@firebase/auth-compat",xP="@firebase/database",TP="@firebase/data-connect",SP="@firebase/database-compat",AP="@firebase/functions",CP="@firebase/functions-compat",RP="@firebase/installations",IP="@firebase/installations-compat",NP="@firebase/messaging",kP="@firebase/messaging-compat",DP="@firebase/performance",MP="@firebase/performance-compat",OP="@firebase/remote-config",PP="@firebase/remote-config-compat",LP="@firebase/storage",VP="@firebase/storage-compat",jP="@firebase/firestore",UP="@firebase/ai",FP="@firebase/firestore-compat",zP="firebase",BP="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="[DEFAULT]",HP={[u0]:"fire-core",[pP]:"fire-core-compat",[yP]:"fire-analytics",[_P]:"fire-analytics-compat",[bP]:"fire-app-check",[vP]:"fire-app-check-compat",[EP]:"fire-auth",[wP]:"fire-auth-compat",[xP]:"fire-rtdb",[TP]:"fire-data-connect",[SP]:"fire-rtdb-compat",[AP]:"fire-fn",[CP]:"fire-fn-compat",[RP]:"fire-iid",[IP]:"fire-iid-compat",[NP]:"fire-fcm",[kP]:"fire-fcm-compat",[DP]:"fire-perf",[MP]:"fire-perf-compat",[OP]:"fire-rc",[PP]:"fire-rc-compat",[LP]:"fire-gcs",[VP]:"fire-gcs-compat",[jP]:"fire-fst",[FP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[zP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=new Map,qP=new Map,d0=new Map;function qT(n,t){try{n.container.addComponent(t)}catch(e){ar.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Io(n){const t=n.name;if(d0.has(t))return ar.debug(`There were multiple attempts to register component ${t}.`),!1;d0.set(t,n);for(const e of Um.values())qT(e,n);for(const e of qP.values())qT(e,n);return!0}function Vg(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new sd("app","Firebase",WP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=BP;function XC(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:h0,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw ia.create("bad-app-name",{appName:String(s)});if(e||(e=qC()),!e)throw ia.create("no-options");const a=Um.get(s);if(a){if(ha(e,a.options)&&ha(i,a.config))return a;throw ia.create("duplicate-app",{appName:s})}const l=new ZO(s);for(const d of d0.values())l.addComponent(d);const u=new GP(e,i,l);return Um.set(s,u),u}function mv(n=h0){const t=Um.get(n);if(!t&&n===h0&&qC())return XC();if(!t)throw ia.create("no-app",{appName:n});return t}function os(n,t,e){let i=HP[n]??n;e&&(i+=`-${e}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${t}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ar.warn(l.join(" "));return}Io(new da(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebase-heartbeat-database",$P=1,Ih="firebase-heartbeat-store";let Ny=null;function ZC(){return Ny||(Ny=hP(YP,$P,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ih)}catch(e){console.warn(e)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),Ny}async function QP(n){try{const e=(await ZC()).transaction(Ih),i=await e.objectStore(Ih).get(JC(n));return await e.done,i}catch(t){if(t instanceof dr)ar.warn(t.message);else{const e=ia.create("idb-get",{originalErrorMessage:t?.message});ar.warn(e.message)}}}async function WT(n,t){try{const i=(await ZC()).transaction(Ih,"readwrite");await i.objectStore(Ih).put(t,JC(n)),await i.done}catch(e){if(e instanceof dr)ar.warn(e.message);else{const i=ia.create("idb-set",{originalErrorMessage:e?.message});ar.warn(i.message)}}}function JC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=1024,XP=30;class ZP{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new tL(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=GT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>XP){const s=eL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ar.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=GT(),{heartbeatsToSend:e,unsentEntries:i}=JP(this._heartbeatsCache.heartbeats),s=Lm(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ar.warn(t),""}}}function GT(){return new Date().toISOString().substring(0,10)}function JP(n,t=KP){const e=[];let i=n.slice();for(const s of n){const a=e.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),YT(e)>t){a.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),YT(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class tL{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VO()?jO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await QP(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return WT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return WT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function YT(n){return Lm(JSON.stringify({version:2,heartbeats:n})).length}function eL(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(n){Io(new da("platform-logger",t=>new mP(t),"PRIVATE")),Io(new da("heartbeat",t=>new ZP(t),"PRIVATE")),os(u0,HT,n),os(u0,HT,"esm2020"),os("fire-js","")}nL("");var iL="firebase",sL="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os(iL,sL,"app");function tR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rL=tR,eR=new sd("auth","Firebase",tR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Lg("@firebase/auth");function aL(n,...t){Fm.logLevel<=Vt.WARN&&Fm.warn(`Auth (${zo}): ${n}`,...t)}function ym(n,...t){Fm.logLevel<=Vt.ERROR&&Fm.error(`Auth (${zo}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(n,...t){throw pv(n,...t)}function Pi(n,...t){return pv(n,...t)}function gv(n,t,e){const i={...rL(),[t]:e};return new sd("auth","Firebase",i).create(t,{appName:n.name})}function ir(n){return gv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oL(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&wi(n,"argument-error"),gv(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pv(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return eR.create(n,...t)}function St(n,t,...e){if(!n)throw pv(t,...e)}function Xs(n){const t="INTERNAL ASSERTION FAILED: "+n;throw ym(t),new Error(t)}function or(n,t){n||Xs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(){return typeof self<"u"&&self.location?.href||""}function lL(){return $T()==="http:"||$T()==="https:"}function $T(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lL()||MO()||"connection"in navigator)?navigator.onLine:!0}function uL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t,e){this.shortDelay=t,this.longDelay=e,or(e>t,"Short delay should be less than long delay!"),this.isMobile=hv()||YC()}get(){return cL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n,t){or(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fL=new rd(3e4,6e4);function fr(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function mr(n,t,e,i,s={}){return iR(n,s,async()=>{let a={},l={};i&&(t==="GET"?l=i:a={body:JSON.stringify(i)});const u=wc({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:t,headers:d,...a};return DO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&xa(n.emulatorConfig.host)&&(f.credentials="include"),nR.fetch()(await sR(n,n.config.apiHost,e,u),f)})}async function iR(n,t,e){n._canInitEmulator=!1;const i={...hL,...t};try{const s=new gL(n),a=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Yf(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Yf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Yf(n,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw gv(n,p,f);wi(n,p)}}catch(s){if(s instanceof dr)throw s;wi(n,"network-request-failed",{message:String(s)})}}async function ad(n,t,e,i,s={}){const a=await mr(n,t,e,i,s);return"mfaPendingCredential"in a&&wi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function sR(n,t,e,i){const s=`${t}${e}?${i}`,a=n,l=a.config.emulator?_v(n.config,s):`${n.config.apiScheme}://${s}`;return dL.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function mL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Pi(this.auth,"network-request-failed")),fL.get())})}}function Yf(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=Pi(n,t,i);return s.customData._tokenResponse=e,s}function QT(n){return n!==void 0&&n.enterprise!==void 0}class pL{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return mL(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _L(n,t){return mr(n,"GET","/v2/recaptchaConfig",fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(n,t){return mr(n,"POST","/v1/accounts:delete",t)}async function zm(n,t){return mr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function vL(n,t=!1){const e=xe(n),i=await e.getIdToken(t),s=yv(i);St(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:i,authTime:fh(ky(s.auth_time)),issuedAtTime:fh(ky(s.iat)),expirationTime:fh(ky(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function ky(n){return Number(n)*1e3}function yv(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return ym("JWT malformed, contained fewer than 3 sections"),null;try{const s=Vm(e);return s?JSON.parse(s):(ym("Failed to decode base64 JWT payload"),null)}catch(s){return ym("Caught error parsing JWT payload as JSON",s?.toString()),null}}function KT(n){const t=yv(n);return St(t,"internal-error"),St(typeof t.exp<"u","internal-error"),St(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof dr&&bL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function bL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=fh(this.lastLoginAt),this.creationTime=fh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(n){const t=n.auth,e=await n.getIdToken(),i=await Nh(n,zm(t,{idToken:e}));St(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=s.providerUserInfo?.length?rR(s.providerUserInfo):[],l=xL(n.providerData,a),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new m0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function wL(n){const t=xe(n);await Bm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function xL(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function rR(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(n,t){const e=await iR(n,{},async()=>{const i=wc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await sR(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:i};return n.emulatorConfig&&xa(n.emulatorConfig.host)&&(d.credentials="include"),nR.fetch()(l,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function SL(n,t){return mr(n,"POST","/v2/accounts:revokeToken",fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){St(t.idToken,"internal-error"),St(typeof t.idToken<"u","internal-error"),St(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):KT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){St(t.length!==0,"internal-error");const e=KT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:a}=await TL(t,e);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:a}=e,l=new Ql;return i&&(St(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),s&&(St(typeof s=="string","internal-error",{appName:t}),l.accessToken=s),a&&(St(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ql,this.toJSON())}_performRefresh(){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(n,t){St(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Mi{constructor({uid:t,auth:e,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new EL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new m0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await Nh(this,this.stsTokenManager.getToken(this.auth,t));return St(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return vL(this,t)}reload(){return wL(this)}_assign(t){this!==t&&(St(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Mi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Bm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(ir(this.auth));const t=await this.getIdToken();return await Nh(this,yL(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,s=e.email??void 0,a=e.phoneNumber??void 0,l=e.photoURL??void 0,u=e.tenantId??void 0,d=e._redirectEventId??void 0,f=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:T,providerData:S,stsTokenManager:N}=e;St(y&&N,t,"internal-error");const C=Ql.fromJSON(this.name,N);St(typeof y=="string",t,"internal-error"),qr(i,t.name),qr(s,t.name),St(typeof v=="boolean",t,"internal-error"),St(typeof T=="boolean",t,"internal-error"),qr(a,t.name),qr(l,t.name),qr(u,t.name),qr(d,t.name),qr(f,t.name),qr(p,t.name);const L=new Mi({uid:y,auth:t,email:s,emailVerified:v,displayName:i,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:C,createdAt:f,lastLoginAt:p});return S&&Array.isArray(S)&&(L.providerData=S.map(W=>({...W}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(t,e,i=!1){const s=new Ql;s.updateFromServerResponse(e);const a=new Mi({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Bm(a),a}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];St(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?rR(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new Ql;u.updateFromIdToken(i);const d=new Mi({uid:s.localId,auth:t,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new m0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=new Map;function Zs(n){or(n instanceof Function,"Expected a class definition");let t=XT.get(n);return t?(or(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,XT.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}aR.type="NONE";const ZT=aR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(n,t,e){return`firebase:${n}:${t}:${e}`}class Kl{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=vm(this.userKey,s.apiKey,a),this.fullPersistenceKey=vm("persistence",s.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await zm(this.auth,{idToken:t}).catch(()=>{});return e?Mi._fromGetAccountInfoResponse(this.auth,e,t):null}return Mi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Kl(Zs(ZT),t,i);const s=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Zs(ZT);const l=vm(i,t.config.apiKey,t.name);let u=null;for(const f of e)try{const p=await f._get(l);if(p){let y;if(typeof p=="string"){const v=await zm(t,{idToken:p}).catch(()=>{});if(!v)break;y=await Mi._fromGetAccountInfoResponse(t,v,p)}else y=Mi._fromJSON(t,p);f!==a&&(u=y),a=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Kl(a,t,i):(a=d[0],u&&await a._set(l,u.toJSON()),await Promise.all(e.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new Kl(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dR(t))return"Blackberry";if(fR(t))return"Webos";if(lR(t))return"Safari";if((t.includes("chrome/")||cR(t))&&!t.includes("edge/"))return"Chrome";if(hR(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function oR(n=kn()){return/firefox\//i.test(n)}function lR(n=kn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function cR(n=kn()){return/crios\//i.test(n)}function uR(n=kn()){return/iemobile/i.test(n)}function hR(n=kn()){return/android/i.test(n)}function dR(n=kn()){return/blackberry/i.test(n)}function fR(n=kn()){return/webos/i.test(n)}function vv(n=kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AL(n=kn()){return vv(n)&&!!window.navigator?.standalone}function CL(){return OO()&&document.documentMode===10}function mR(n=kn()){return vv(n)||hR(n)||fR(n)||dR(n)||/windows phone/i.test(n)||uR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n,t=[]){let e;switch(n){case"Browser":e=JT(kn());break;case"Worker":e=`${JT(kn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${zo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=a=>new Promise((l,u)=>{try{const d=t(a);l(d)}catch(d){u(d)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(n,t={}){return mr(n,"GET","/v2/passwordPolicy",fr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=6;class kL{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??NL,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tS(this),this.idTokenSubscription=new tS(this),this.beforeStateQueue=new RL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Zs(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await zm(this,{idToken:t}),i=await Mi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(zn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Bm(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=uL()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zn(this.app))return Promise.reject(ir(this));const e=t?xe(t):null;return e&&St(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&St(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zs(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await IL(this),e=new kL(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new sd("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await SL(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Zs(t)||this._popupRedirectResolver;St(e,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[Zs(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,s);return()=>{l=!0,d()}}else{const d=t.addObserver(e);return()=>{l=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=gR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&aL(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ta(n){return xe(n)}class tS{constructor(t){this.auth=t,this.observer=null,this.addObserver=WO(e=>this.observer=e)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ML(n){jg=n}function pR(n){return jg.loadJS(n)}function OL(){return jg.recaptchaEnterpriseScript}function PL(){return jg.gapiScript}function LL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class VL{constructor(){this.enterprise=new jL}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class jL{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const UL="recaptcha-enterprise",_R="NO_RECAPTCHA";class FL{constructor(t){this.type=UL,this.auth=Ta(t)}async verify(t="verify",e=!1){async function i(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{_L(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new pL(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(a,l,u){const d=window.grecaptcha;QT(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:t}).then(f=>{l(f)}).catch(()=>{l(_R)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VL().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(u=>{if(!e&&QT(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=OL();d.length!==0&&(d+=u),pR(d).then(()=>{s(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function eS(n,t,e,i=!1,s=!1){const a=new FL(n);let l;if(s)l=_R;else try{l=await a.verify(e)}catch{l=await a.verify(e,!0)}const u={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function g0(n,t,e,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await eS(n,t,e,e==="getOobCode");return i(n,a)}else return i(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await eS(n,t,e,e==="getOobCode");return i(n,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(n,t){const e=Vg(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),a=e.getOptions();if(ha(a,t??{}))return s;wi(s,"already-initialized")}return e.initialize({options:t})}function BL(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Zs);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function HL(n,t,e){const i=Ta(n);St(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,a=yR(t),{host:l,port:u}=qL(t),d=u===null?"":`:${u}`,f={url:`${a}//${l}${d}/`},p=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){St(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),St(ha(f,i.config.emulator)&&ha(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,xa(l)?(cv(`${a}//${l}${d}`),uv("Auth",!0)):WL()}function yR(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function qL(n){const t=yR(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:nS(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:nS(l)}}}function nS(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function WL(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Xs("not implemented")}_getIdTokenResponse(t){return Xs("not implemented")}_linkToIdToken(t,e){return Xs("not implemented")}_getReauthenticationResolver(t){return Xs("not implemented")}}async function GL(n,t){return mr(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(n,t){return ad(n,"POST","/v1/accounts:signInWithPassword",fr(n,t))}async function $L(n,t){return mr(n,"POST","/v1/accounts:sendOobCode",fr(n,t))}async function QL(n,t){return $L(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(n,t){return ad(n,"POST","/v1/accounts:signInWithEmailLink",fr(n,t))}async function XL(n,t){return ad(n,"POST","/v1/accounts:signInWithEmailLink",fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends bv{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new kh(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new kh(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(t,e,"signInWithPassword",YL);case"emailLink":return KL(t,{email:this._email,oobCode:this._password});default:wi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(t,i,"signUpPassword",GL);case"emailLink":return XL(t,{idToken:e,email:this._email,oobCode:this._password});default:wi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,t){return ad(n,"POST","/v1/accounts:signInWithIdp",fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="http://localhost";class No extends bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new No(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):wi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...a}=e;if(!i||!s)return null;const l=new No(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const e=this.buildRequest();return Xl(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Xl(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Xl(t,e)}buildRequest(){const t={requestUri:ZL,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=wc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function t4(n){const t=nh(ih(n)).link,e=t?nh(ih(t)).deep_link_id:null,i=nh(ih(n)).deep_link_id;return(i?nh(ih(i)).link:null)||i||e||t||n}class Ev{constructor(t){const e=nh(ih(t)),i=e.apiKey??null,s=e.oobCode??null,a=JL(e.mode??null);St(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=t4(t);try{return new Ev(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.providerId=xc.PROVIDER_ID}static credential(t,e){return kh._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Ev.parseLink(e);return St(i,"argument-error"),kh._fromEmailAndCode(t,i.code,i.tenantId)}}xc.PROVIDER_ID="password";xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends wv{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends od{constructor(){super("facebook.com")}static credential(t){return No._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Yr.credentialFromTaggedObject(t)}static credentialFromError(t){return Yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Yr.credential(t.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends od{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return No._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ks.credentialFromTaggedObject(t)}static credentialFromError(t){return Ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Ks.credential(e,i)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends od{constructor(){super("github.com")}static credential(t){return No._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $r.credentialFromTaggedObject(t)}static credentialFromError(t){return $r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $r.credential(t.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends od{constructor(){super("twitter.com")}static credential(t,e){return No._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Qr.credentialFromTaggedObject(t)}static credentialFromError(t){return Qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Qr.credential(e,i)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(n,t){return ad(n,"POST","/v1/accounts:signUp",fr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const a=await Mi._fromIdTokenResponse(t,i,s),l=iS(i);return new ko({user:a,providerId:l,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=iS(i);return new ko({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function iS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends dr{constructor(t,e,i,s){super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Hm.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new Hm(t,e,i,s)}}function vR(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hm._fromErrorAndOperation(n,a,t,i):a})}async function n4(n,t,e=!1){const i=await Nh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return ko._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(n,t,e=!1){const{auth:i}=n;if(zn(i.app))return Promise.reject(ir(i));const s="reauthenticate";try{const a=await Nh(n,vR(i,s,t,n),e);St(a.idToken,i,"internal-error");const l=yv(a.idToken);St(l,i,"internal-error");const{sub:u}=l;return St(n.uid===u,i,"user-mismatch"),ko._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&wi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,t,e=!1){if(zn(n.app))return Promise.reject(ir(n));const i="signIn",s=await vR(n,i,t),a=await ko._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(a.user),a}async function s4(n,t){return bR(Ta(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(n){const t=Ta(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function r4(n,t,e){if(zn(n.app))return Promise.reject(ir(n));const i=Ta(n),l=await g0(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e4).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&ER(n),d}),u=await ko._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function a4(n,t,e){return zn(n.app)?Promise.reject(ir(n)):s4(xe(n),xc.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ER(n),i})}async function o4(n,t){const e=xe(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await QL(e.auth,s);a!==n.email&&await n.reload()}function l4(n,t,e,i){return xe(n).onIdTokenChanged(t,e,i)}function c4(n,t,e){return xe(n).beforeAuthStateChanged(t,e)}function wR(n,t,e,i){return xe(n).onAuthStateChanged(t,e,i)}function u4(n){return xe(n).signOut()}const qm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(qm,"1"),this.storage.removeItem(qm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=1e3,d4=10;class TR extends xR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!e&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);CL()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,d4):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}TR.type="LOCAL";const f4=TR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR extends xR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}SR.type="SESSION";const AR=SR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new Ug(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:a}=e.data,l=this.handlersMap[s];if(!l?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(e.origin,a)),d=await m4(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ug.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,d)=>{const f=xv("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(p),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){return window}function p4(n){ls().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function _4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y4(){return navigator?.serviceWorker?.controller||null}function v4(){return CR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebaseLocalStorageDb",b4=1,Wm="firebaseLocalStorage",IR="fbase_key";class ld{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Fg(n,t){return n.transaction([Wm],t?"readwrite":"readonly").objectStore(Wm)}function E4(){const n=indexedDB.deleteDatabase(RR);return new ld(n).toPromise()}function p0(){const n=indexedDB.open(RR,b4);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Wm,{keyPath:IR})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Wm)?t(i):(i.close(),await E4(),t(await p0()))})})}async function sS(n,t,e){const i=Fg(n,!0).put({[IR]:t,value:e});return new ld(i).toPromise()}async function w4(n,t){const e=Fg(n,!1).get(t),i=await new ld(e).toPromise();return i===void 0?null:i.value}function rS(n,t){const e=Fg(n,!0).delete(t);return new ld(e).toPromise()}const x4=800,T4=3;class NR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await p0(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>T4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ug._getInstance(v4()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _4(),!this.activeServiceWorker)return;this.sender=new g4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||y4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await p0();return await sS(t,qm,"1"),await rS(t,qm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>sS(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>w4(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>rS(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=Fg(s,!1).getAll();return new ld(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NR.type="LOCAL";const S4=NR;new rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n,t){return t?Zs(t):(St(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends bv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Xl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Xl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function A4(n){return bR(n.auth,new Tv(n),n.bypassAuthState)}function C4(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),i4(e,new Tv(n),n.bypassAuthState)}async function R4(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),n4(e,new Tv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(t,e,i,s,a=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:a,error:l,type:u}=t;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return A4;case"linkViaPopup":case"linkViaRedirect":return R4;case"reauthViaPopup":case"reauthViaRedirect":return C4;default:wi(this.auth,"internal-error")}}resolve(t){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new rd(2e3,1e4);async function MR(n,t,e){if(zn(n.app))return Promise.reject(Pi(n,"operation-not-supported-in-this-environment"));const i=Ta(n);oL(n,t,wv);const s=kR(i,e);return new bo(i,"signInViaPopup",t,s).executeNotNull()}class bo extends DR{constructor(t,e,i,s,a){super(t,e,s,a),this.provider=i,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return St(t,this.auth,"internal-error"),t}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const t=xv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,I4.get())};t()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="pendingRedirect",bm=new Map;class k4 extends DR{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=bm.get(this.auth._key());if(!t){try{const i=await D4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}bm.set(this.auth._key(),t)}return this.bypassAuthState||bm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function D4(n,t){const e=P4(t),i=O4(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function M4(n,t){bm.set(n._key(),t)}function O4(n){return Zs(n._redirectPersistence)}function P4(n){return vm(N4,n.config.apiKey,n.name)}async function L4(n,t,e=!1){if(zn(n.app))return Promise.reject(ir(n));const i=Ta(n),s=kR(i,t),l=await new k4(i,s,e).execute();return l&&!e&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=600*1e3;class j4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!U4(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!OR(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Pi(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=V4&&this.cachedEventUids.clear(),this.cachedEventUids.has(aS(t))}saveEventToCache(t){this.cachedEventUids.add(aS(t)),this.lastProcessedEventTime=Date.now()}}function aS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function OR({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function U4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(n,t={}){return mr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B4=/^https?/;async function H4(n){if(n.config.emulator)return;const{authorizedDomains:t}=await F4(n);for(const e of t)try{if(q4(e))return}catch{}wi(n,"unauthorized-domain")}function q4(n){const t=f0(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&l.hostname===i}if(!B4.test(e))return!1;if(z4.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new rd(3e4,6e4);function oS(){const n=ls().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function G4(n){return new Promise((t,e)=>{function i(){oS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oS(),e(Pi(n,"network-request-failed"))},timeout:W4.get()})}if(ls().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ls().gapi?.load)i();else{const s=LL("iframefcb");return ls()[s]=()=>{gapi.load?i():e(Pi(n,"network-request-failed"))},pR(`${PL()}?onload=${s}`).catch(a=>e(a))}}).catch(t=>{throw Em=null,t})}let Em=null;function Y4(n){return Em=Em||G4(n),Em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new rd(5e3,15e3),Q4="__/auth/iframe",K4="emulator/auth/iframe",X4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J4(n){const t=n.config;St(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?_v(t,K4):`https://${n.config.authDomain}/${Q4}`,i={apiKey:t.apiKey,appName:n.name,v:zo},s=Z4.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${e}?${wc(i).slice(1)}`}async function tV(n){const t=await Y4(n),e=ls().gapi;return St(e,n,"internal-error"),t.open({where:document.body,url:J4(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X4,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=Pi(n,"network-request-failed"),u=ls().setTimeout(()=>{a(l)},$4.get());function d(){ls().clearTimeout(u),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nV=500,iV=600,sV="_blank",rV="http://localhost";class lS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aV(n,t,e,i=nV,s=iV){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d={...eV,width:i.toString(),height:s.toString(),top:a,left:l},f=kn().toLowerCase();e&&(u=cR(f)?sV:e),oR(f)&&(t=t||rV,d.scrollbars="yes");const p=Object.entries(d).reduce((v,[T,S])=>`${v}${T}=${S},`,"");if(AL(f)&&u!=="_self")return oV(t||"",u),new lS(null);const y=window.open(t||"",u,p);St(y,n,"popup-blocked");try{y.focus()}catch{}return new lS(y)}function oV(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="__/auth/handler",cV="emulator/auth/handler",uV=encodeURIComponent("fac");async function cS(n,t,e,i,s,a){St(n.config.authDomain,n,"auth-domain-config-required"),St(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:zo,eventId:s};if(t instanceof wv){t.setDefaultLanguage(n.languageCode),l.providerId=t.providerId||"",o0(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,y]of Object.entries({}))l[p]=y}if(t instanceof od){const p=t.getScopes().filter(y=>y!=="");p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const d=await n._getAppCheckToken(),f=d?`#${uV}=${encodeURIComponent(d)}`:"";return`${hV(n)}?${wc(u).slice(1)}${f}`}function hV({config:n}){return n.emulator?_v(n,cV):`https://${n.authDomain}/${lV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="webStorageSupport";class dV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AR,this._completeRedirectFn=L4,this._overrideRedirectResult=M4}async _openPopup(t,e,i,s){or(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await cS(t,e,i,f0(),s);return aV(t,a,xv())}async _openRedirect(t,e,i,s){await this._originValidation(t);const a=await cS(t,e,i,f0(),s);return p4(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:a}=this.eventManagers[e];return s?Promise.resolve(s):(or(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await tV(t),i=new j4(t);return e.register("authEvent",s=>(St(s?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Dy,{type:Dy},s=>{const a=s?.[0]?.[Dy];a!==void 0&&e(!!a),wi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=H4(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return mR()||lR()||vv()}}const fV=dV;var uS="@firebase/auth",hS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pV(n){Io(new da("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;St(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gR(n)},f=new DL(i,s,a,d);return BL(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Io(new da("auth-internal",t=>{const e=Ta(t.getProvider("auth").getImmediate());return(i=>new mV(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),os(uS,hS,gV(n)),os(uS,hS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=300,yV=WC("authIdTokenMaxAge")||_V;let dS=null;const vV=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>yV)return;const s=e?.token;dS!==s&&(dS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bV(n=mv()){const t=Vg(n,"auth");if(t.isInitialized())return t.getImmediate();const e=zL(n,{popupRedirectResolver:fV,persistence:[S4,f4,AR]}),i=WC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=vV(a.toString());c4(e,l,()=>l(e.currentUser)),l4(e,u=>l(u))}}const s=BC("auth");return s&&HL(e,`http://${s}`),e}function EV(){return document.getElementsByTagName("head")?.[0]??document}ML({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const a=Pi("internal-error");a.customData=s,e(a)},i.type="text/javascript",i.charset="UTF-8",EV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pV("Browser");var fS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sa,PR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,I){function k(){}k.prototype=I.prototype,D.D=I.prototype,D.prototype=new k,D.prototype.constructor=D,D.C=function(P,V,U){for(var M=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)M[Gt-2]=arguments[Gt];return I.prototype[V].apply(P,M)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,I,k){k||(k=0);var P=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)P[V]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(V=0;16>V;++V)P[V]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=D.g[0],k=D.g[1],V=D.g[2];var U=D.g[3],M=I+(U^k&(V^U))+P[0]+3614090360&4294967295;I=k+(M<<7&4294967295|M>>>25),M=U+(V^I&(k^V))+P[1]+3905402710&4294967295,U=I+(M<<12&4294967295|M>>>20),M=V+(k^U&(I^k))+P[2]+606105819&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(I^V&(U^I))+P[3]+3250441966&4294967295,k=V+(M<<22&4294967295|M>>>10),M=I+(U^k&(V^U))+P[4]+4118548399&4294967295,I=k+(M<<7&4294967295|M>>>25),M=U+(V^I&(k^V))+P[5]+1200080426&4294967295,U=I+(M<<12&4294967295|M>>>20),M=V+(k^U&(I^k))+P[6]+2821735955&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(I^V&(U^I))+P[7]+4249261313&4294967295,k=V+(M<<22&4294967295|M>>>10),M=I+(U^k&(V^U))+P[8]+1770035416&4294967295,I=k+(M<<7&4294967295|M>>>25),M=U+(V^I&(k^V))+P[9]+2336552879&4294967295,U=I+(M<<12&4294967295|M>>>20),M=V+(k^U&(I^k))+P[10]+4294925233&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(I^V&(U^I))+P[11]+2304563134&4294967295,k=V+(M<<22&4294967295|M>>>10),M=I+(U^k&(V^U))+P[12]+1804603682&4294967295,I=k+(M<<7&4294967295|M>>>25),M=U+(V^I&(k^V))+P[13]+4254626195&4294967295,U=I+(M<<12&4294967295|M>>>20),M=V+(k^U&(I^k))+P[14]+2792965006&4294967295,V=U+(M<<17&4294967295|M>>>15),M=k+(I^V&(U^I))+P[15]+1236535329&4294967295,k=V+(M<<22&4294967295|M>>>10),M=I+(V^U&(k^V))+P[1]+4129170786&4294967295,I=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(I^k))+P[6]+3225465664&4294967295,U=I+(M<<9&4294967295|M>>>23),M=V+(I^k&(U^I))+P[11]+643717713&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^I&(V^U))+P[0]+3921069994&4294967295,k=V+(M<<20&4294967295|M>>>12),M=I+(V^U&(k^V))+P[5]+3593408605&4294967295,I=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(I^k))+P[10]+38016083&4294967295,U=I+(M<<9&4294967295|M>>>23),M=V+(I^k&(U^I))+P[15]+3634488961&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^I&(V^U))+P[4]+3889429448&4294967295,k=V+(M<<20&4294967295|M>>>12),M=I+(V^U&(k^V))+P[9]+568446438&4294967295,I=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(I^k))+P[14]+3275163606&4294967295,U=I+(M<<9&4294967295|M>>>23),M=V+(I^k&(U^I))+P[3]+4107603335&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^I&(V^U))+P[8]+1163531501&4294967295,k=V+(M<<20&4294967295|M>>>12),M=I+(V^U&(k^V))+P[13]+2850285829&4294967295,I=k+(M<<5&4294967295|M>>>27),M=U+(k^V&(I^k))+P[2]+4243563512&4294967295,U=I+(M<<9&4294967295|M>>>23),M=V+(I^k&(U^I))+P[7]+1735328473&4294967295,V=U+(M<<14&4294967295|M>>>18),M=k+(U^I&(V^U))+P[12]+2368359562&4294967295,k=V+(M<<20&4294967295|M>>>12),M=I+(k^V^U)+P[5]+4294588738&4294967295,I=k+(M<<4&4294967295|M>>>28),M=U+(I^k^V)+P[8]+2272392833&4294967295,U=I+(M<<11&4294967295|M>>>21),M=V+(U^I^k)+P[11]+1839030562&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^I)+P[14]+4259657740&4294967295,k=V+(M<<23&4294967295|M>>>9),M=I+(k^V^U)+P[1]+2763975236&4294967295,I=k+(M<<4&4294967295|M>>>28),M=U+(I^k^V)+P[4]+1272893353&4294967295,U=I+(M<<11&4294967295|M>>>21),M=V+(U^I^k)+P[7]+4139469664&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^I)+P[10]+3200236656&4294967295,k=V+(M<<23&4294967295|M>>>9),M=I+(k^V^U)+P[13]+681279174&4294967295,I=k+(M<<4&4294967295|M>>>28),M=U+(I^k^V)+P[0]+3936430074&4294967295,U=I+(M<<11&4294967295|M>>>21),M=V+(U^I^k)+P[3]+3572445317&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^I)+P[6]+76029189&4294967295,k=V+(M<<23&4294967295|M>>>9),M=I+(k^V^U)+P[9]+3654602809&4294967295,I=k+(M<<4&4294967295|M>>>28),M=U+(I^k^V)+P[12]+3873151461&4294967295,U=I+(M<<11&4294967295|M>>>21),M=V+(U^I^k)+P[15]+530742520&4294967295,V=U+(M<<16&4294967295|M>>>16),M=k+(V^U^I)+P[2]+3299628645&4294967295,k=V+(M<<23&4294967295|M>>>9),M=I+(V^(k|~U))+P[0]+4096336452&4294967295,I=k+(M<<6&4294967295|M>>>26),M=U+(k^(I|~V))+P[7]+1126891415&4294967295,U=I+(M<<10&4294967295|M>>>22),M=V+(I^(U|~k))+P[14]+2878612391&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~I))+P[5]+4237533241&4294967295,k=V+(M<<21&4294967295|M>>>11),M=I+(V^(k|~U))+P[12]+1700485571&4294967295,I=k+(M<<6&4294967295|M>>>26),M=U+(k^(I|~V))+P[3]+2399980690&4294967295,U=I+(M<<10&4294967295|M>>>22),M=V+(I^(U|~k))+P[10]+4293915773&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~I))+P[1]+2240044497&4294967295,k=V+(M<<21&4294967295|M>>>11),M=I+(V^(k|~U))+P[8]+1873313359&4294967295,I=k+(M<<6&4294967295|M>>>26),M=U+(k^(I|~V))+P[15]+4264355552&4294967295,U=I+(M<<10&4294967295|M>>>22),M=V+(I^(U|~k))+P[6]+2734768916&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~I))+P[13]+1309151649&4294967295,k=V+(M<<21&4294967295|M>>>11),M=I+(V^(k|~U))+P[4]+4149444226&4294967295,I=k+(M<<6&4294967295|M>>>26),M=U+(k^(I|~V))+P[11]+3174756917&4294967295,U=I+(M<<10&4294967295|M>>>22),M=V+(I^(U|~k))+P[2]+718787259&4294967295,V=U+(M<<15&4294967295|M>>>17),M=k+(U^(V|~I))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+U&4294967295}i.prototype.u=function(D,I){I===void 0&&(I=D.length);for(var k=I-this.blockSize,P=this.B,V=this.h,U=0;U<I;){if(V==0)for(;U<=k;)s(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<I;)if(P[V++]=D.charCodeAt(U++),V==this.blockSize){s(this,P),V=0;break}}else for(;U<I;)if(P[V++]=D[U++],V==this.blockSize){s(this,P),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;var k=8*this.o;for(I=D.length-8;I<D.length;++I)D[I]=k&255,k/=256;for(this.u(D),D=Array(16),I=k=0;4>I;++I)for(var P=0;32>P;P+=8)D[k++]=this.g[I]>>>P&255;return D};function a(D,I){var k=u;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=I(D)}function l(D,I){this.h=I;for(var k=[],P=!0,V=D.length-1;0<=V;V--){var U=D[V]|0;P&&U==I||(k[V]=U,P=!1)}this.g=k}var u={};function d(D){return-128<=D&&128>D?a(D,function(I){return new l([I|0],0>I?-1:0)}):new l([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return C(f(-D));for(var I=[],k=1,P=0;D>=k;P++)I[P]=D/k|0,k*=4294967296;return new l(I,0)}function p(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return C(p(D.substring(1),I));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(I,8)),P=y,V=0;V<D.length;V+=8){var U=Math.min(8,D.length-V),M=parseInt(D.substring(V,V+U),I);8>U?(U=f(Math.pow(I,U)),P=P.j(U).add(f(M))):(P=P.j(k),P=P.add(f(M)))}return P}var y=d(0),v=d(1),T=d(16777216);n=l.prototype,n.m=function(){if(N(this))return-C(this).m();for(var D=0,I=1,k=0;k<this.g.length;k++){var P=this.i(k);D+=(0<=P?P:4294967296+P)*I,I*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(N(this))return"-"+C(this).toString(D);for(var I=f(Math.pow(D,6)),k=this,P="";;){var V=Z(k,I).g;k=L(k,V.j(I));var U=((0<k.g.length?k.g[0]:k.h)>>>0).toString(D);if(k=V,S(k))return U+P;for(;6>U.length;)U="0"+U;P=U+P}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function N(D){return D.h==-1}n.l=function(D){return D=L(this,D),N(D)?-1:S(D)?0:1};function C(D){for(var I=D.g.length,k=[],P=0;P<I;P++)k[P]=~D.g[P];return new l(k,~D.h).add(v)}n.abs=function(){return N(this)?C(this):this},n.add=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],P=0,V=0;V<=I;V++){var U=P+(this.i(V)&65535)+(D.i(V)&65535),M=(U>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);P=M>>>16,U&=65535,M&=65535,k[V]=M<<16|U}return new l(k,k[k.length-1]&-2147483648?-1:0)};function L(D,I){return D.add(C(I))}n.j=function(D){if(S(this)||S(D))return y;if(N(this))return N(D)?C(this).j(C(D)):C(C(this).j(D));if(N(D))return C(this.j(C(D)));if(0>this.l(T)&&0>D.l(T))return f(this.m()*D.m());for(var I=this.g.length+D.g.length,k=[],P=0;P<2*I;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<D.g.length;V++){var U=this.i(P)>>>16,M=this.i(P)&65535,Gt=D.i(V)>>>16,Et=D.i(V)&65535;k[2*P+2*V]+=M*Et,W(k,2*P+2*V),k[2*P+2*V+1]+=U*Et,W(k,2*P+2*V+1),k[2*P+2*V+1]+=M*Gt,W(k,2*P+2*V+1),k[2*P+2*V+2]+=U*Gt,W(k,2*P+2*V+2)}for(P=0;P<I;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=I;P<2*I;P++)k[P]=0;return new l(k,0)};function W(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function $(D,I){this.g=D,this.h=I}function Z(D,I){if(S(I))throw Error("division by zero");if(S(D))return new $(y,y);if(N(D))return I=Z(C(D),I),new $(C(I.g),C(I.h));if(N(I))return I=Z(D,C(I)),new $(C(I.g),I.h);if(30<D.g.length){if(N(D)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var k=v,P=I;0>=P.l(D);)k=H(k),P=H(P);var V=lt(k,1),U=lt(P,1);for(P=lt(P,2),k=lt(k,2);!S(P);){var M=U.add(P);0>=M.l(D)&&(V=V.add(k),U=M),P=lt(P,1),k=lt(k,1)}return I=L(D,V.j(I)),new $(V,I)}for(V=y;0<=D.l(I);){for(k=Math.max(1,Math.floor(D.m()/I.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),U=f(k),M=U.j(I);N(M)||0<M.l(D);)k-=P,U=f(k),M=U.j(I);S(U)&&(U=v),V=V.add(U),D=L(D,M)}return new $(V,D)}n.A=function(D){return Z(this,D).h},n.and=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],P=0;P<I;P++)k[P]=this.i(P)&D.i(P);return new l(k,this.h&D.h)},n.or=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],P=0;P<I;P++)k[P]=this.i(P)|D.i(P);return new l(k,this.h|D.h)},n.xor=function(D){for(var I=Math.max(this.g.length,D.g.length),k=[],P=0;P<I;P++)k[P]=this.i(P)^D.i(P);return new l(k,this.h^D.h)};function H(D){for(var I=D.g.length+1,k=[],P=0;P<I;P++)k[P]=D.i(P)<<1|D.i(P-1)>>>31;return new l(k,D.h)}function lt(D,I){var k=I>>5;I%=32;for(var P=D.g.length-k,V=[],U=0;U<P;U++)V[U]=0<I?D.i(U+k)>>>I|D.i(U+k+1)<<32-I:D.i(U+k);return new l(V,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,PR=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,sa=l}).apply(typeof fS<"u"?fS:typeof self<"u"?self:typeof window<"u"?window:{});var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LR,sh,VR,wm,_0,jR,UR,FR;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,w){return m==Array.prototype||m==Object.prototype||(m[b]=w.value),m};function e(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof $f=="object"&&$f];for(var b=0;b<m.length;++b){var w=m[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=e(this);function s(m,b){if(b)t:{var w=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var G=m[R];if(!(G in w))break t;w=w[G]}m=m[m.length-1],R=w[m],b=b(R),b!=R&&b!=null&&t(w,m,{configurable:!0,writable:!0,value:b})}}function a(m,b){m instanceof String&&(m+="");var w=0,R=!1,G={next:function(){if(!R&&w<m.length){var J=w++;return{value:b(J,m[J]),done:!1}}return R=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(m){return m||function(){return a(this,function(b,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function f(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function p(m,b,w){return m.call.apply(m.bind,arguments)}function y(m,b,w){if(!m)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,R),m.apply(b,G)}}return function(){return m.apply(b,arguments)}}function v(m,b,w){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,v.apply(null,arguments)}function T(m,b){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function S(m,b){function w(){}w.prototype=b.prototype,m.aa=b.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(R,G,J){for(var ht=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)ht[Bt-2]=arguments[Bt];return b.prototype[G].apply(R,ht)}}function N(m){const b=m.length;if(0<b){const w=Array(b);for(let R=0;R<b;R++)w[R]=m[R];return w}return[]}function C(m,b){for(let w=1;w<arguments.length;w++){const R=arguments[w];if(d(R)){const G=m.length||0,J=R.length||0;m.length=G+J;for(let ht=0;ht<J;ht++)m[G+ht]=R[ht]}else m.push(R)}}class L{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function W(m){return/^[\s\xa0]*$/.test(m)}function $(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function Z(m){return Z[" "](m),m}Z[" "]=function(){};var H=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function lt(m,b,w){for(const R in m)b.call(w,m[R],R,m)}function D(m,b){for(const w in m)b.call(void 0,m[w],w,m)}function I(m){const b={};for(const w in m)b[w]=m[w];return b}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,b){let w,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(w in R)m[w]=R[w];for(let J=0;J<k.length;J++)w=k[J],Object.prototype.hasOwnProperty.call(R,w)&&(m[w]=R[w])}}function V(m){var b=1;m=m.split(":");const w=[];for(;0<b&&m.length;)w.push(m.shift()),b--;return m.length&&w.push(m.join(":")),w}function U(m){u.setTimeout(()=>{throw m},0)}function M(){var m=_t;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class Gt{constructor(){this.h=this.g=null}add(b,w){const R=Et.get();R.set(b,w),this.h?this.h.next=R:this.g=R,this.h=R}}var Et=new L(()=>new z,m=>m.reset());class z{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let it,dt=!1,_t=new Gt,j=()=>{const m=u.Promise.resolve(void 0);it=()=>{m.then(tt)}};var tt=()=>{for(var m;m=M();){try{m.h.call(m.g)}catch(w){U(w)}var b=Et;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}dt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,b),u.removeEventListener("test",w,b)}catch{}return m}();function wt(m,b){if(rt.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(H){t:{try{Z(b.nodeName);var G=!0;break t}catch{}G=!1}G||(b=null)}}else w=="mouseover"?b=m.fromElement:w=="mouseout"&&(b=m.toElement);this.relatedTarget=b,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:bt[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&wt.aa.h.call(this)}}S(wt,rt);var bt={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),me=0;function Ui(m,b,w,R,G){this.listener=m,this.proxy=null,this.src=b,this.type=w,this.capture=!!R,this.ha=G,this.key=++me,this.da=this.fa=!1}function gr(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function vs(m){this.src=m,this.g={},this.h=0}vs.prototype.add=function(m,b,w,R,G){var J=m.toString();m=this.g[J],m||(m=this.g[J]=[],this.h++);var ht=Na(m,b,R,G);return-1<ht?(b=m[ht],w||(b.fa=!1)):(b=new Ui(b,this.src,J,!!R,G),b.fa=w,m.push(b)),b};function Ia(m,b){var w=b.type;if(w in m.g){var R=m.g[w],G=Array.prototype.indexOf.call(R,b,void 0),J;(J=0<=G)&&Array.prototype.splice.call(R,G,1),J&&(gr(b),m.g[w].length==0&&(delete m.g[w],m.h--))}}function Na(m,b,w,R){for(var G=0;G<m.length;++G){var J=m[G];if(!J.da&&J.listener==b&&J.capture==!!w&&J.ha==R)return G}return-1}var ka="closure_lm_"+(1e6*Math.random()|0),Oc={};function Ed(m,b,w,R,G){if(Array.isArray(b)){for(var J=0;J<b.length;J++)Ed(m,b[J],w,R,G);return null}return w=wd(w),m&&m[en]?m.K(b,w,f(R)?!!R.capture:!1,G):ri(m,b,w,!1,R,G)}function ri(m,b,w,R,G,J){if(!b)throw Error("Invalid event type");var ht=f(G)?!!G.capture:!!G,Bt=$o(m);if(Bt||(m[ka]=Bt=new vs(m)),w=Bt.add(b,w,R,ht,J),w.proxy)return w;if(R=yp(),w.proxy=R,R.src=m,R.listener=w,m.addEventListener)ft||(G=ht),G===void 0&&(G=!1),m.addEventListener(b.toString(),R,G);else if(m.attachEvent)m.attachEvent(Da(b.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function yp(){function m(w){return b.call(m.src,m.listener,w)}const b=vp;return m}function Pc(m,b,w,R,G){if(Array.isArray(b))for(var J=0;J<b.length;J++)Pc(m,b[J],w,R,G);else R=f(R)?!!R.capture:!!R,w=wd(w),m&&m[en]?(m=m.i,b=String(b).toString(),b in m.g&&(J=m.g[b],w=Na(J,w,R,G),-1<w&&(gr(J[w]),Array.prototype.splice.call(J,w,1),J.length==0&&(delete m.g[b],m.h--)))):m&&(m=$o(m))&&(b=m.g[b.toString()],m=-1,b&&(m=Na(b,w,R,G)),(w=-1<m?b[m]:null)&&Yo(w))}function Yo(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[en])Ia(b.i,m);else{var w=m.type,R=m.proxy;b.removeEventListener?b.removeEventListener(w,R,m.capture):b.detachEvent?b.detachEvent(Da(w),R):b.addListener&&b.removeListener&&b.removeListener(R),(w=$o(b))?(Ia(w,m),w.h==0&&(w.src=null,b[ka]=null)):gr(m)}}}function Da(m){return m in Oc?Oc[m]:Oc[m]="on"+m}function vp(m,b){if(m.da)m=!0;else{b=new wt(b,this);var w=m.listener,R=m.ha||m.src;m.fa&&Yo(m),m=w.call(R,b)}return m}function $o(m){return m=m[ka],m instanceof vs?m:null}var Lc="__closure_events_fn_"+(1e9*Math.random()>>>0);function wd(m){return typeof m=="function"?m:(m[Lc]||(m[Lc]=function(b){return m.handleEvent(b)}),m[Lc])}function Ce(){ct.call(this),this.i=new vs(this),this.M=this,this.F=null}S(Ce,ct),Ce.prototype[en]=!0,Ce.prototype.removeEventListener=function(m,b,w,R){Pc(this,m,b,w,R)};function ee(m,b){var w,R=m.F;if(R)for(w=[];R;R=R.F)w.push(R);if(m=m.M,R=b.type||b,typeof b=="string")b=new rt(b,m);else if(b instanceof rt)b.target=b.target||m;else{var G=b;b=new rt(R,m),P(b,G)}if(G=!0,w)for(var J=w.length-1;0<=J;J--){var ht=b.g=w[J];G=$n(ht,R,!0,b)&&G}if(ht=b.g=m,G=$n(ht,R,!0,b)&&G,G=$n(ht,R,!1,b)&&G,w)for(J=0;J<w.length;J++)ht=b.g=w[J],G=$n(ht,R,!1,b)&&G}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var w=m.g[b],R=0;R<w.length;R++)gr(w[R]);delete m.g[b],m.h--}}this.F=null},Ce.prototype.K=function(m,b,w,R){return this.i.add(String(m),b,!1,w,R)},Ce.prototype.L=function(m,b,w,R){return this.i.add(String(m),b,!0,w,R)};function $n(m,b,w,R){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var G=!0,J=0;J<b.length;++J){var ht=b[J];if(ht&&!ht.da&&ht.capture==w){var Bt=ht.listener,$e=ht.ha||ht.src;ht.fa&&Ia(m.i,ht),G=Bt.call($e,R)!==!1&&G}}return G&&!R.defaultPrevented}function xn(m,b,w){if(typeof m=="function")w&&(m=v(m,w));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(m,b||0)}function xd(m){m.g=xn(()=>{m.g=null,m.i&&(m.i=!1,xd(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class bp extends ct{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:xd(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(m){ct.call(this),this.h=m,this.g={}}S(Ma,ct);var Oa=[];function Pa(m){lt(m.g,function(b,w){this.g.hasOwnProperty(w)&&Yo(b)},m),m.g={}}Ma.prototype.N=function(){Ma.aa.N.call(this),Pa(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ai=u.JSON.stringify,Qo=u.JSON.parse,La=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Vc(){}Vc.prototype.h=null;function jc(m){return m.h||(m.h=m.i())}function Uc(){}var bs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Es(){rt.call(this,"d")}S(Es,rt);function Fc(){rt.call(this,"c")}S(Fc,rt);var Fi={},zc=null;function pr(){return zc=zc||new Ce}Fi.La="serverreachability";function Ko(m){rt.call(this,Fi.La,m)}S(Ko,rt);function _r(m){const b=pr();ee(b,new Ko(b))}Fi.STAT_EVENT="statevent";function Td(m,b){rt.call(this,Fi.STAT_EVENT,m),this.stat=b}S(Td,rt);function Ee(m){const b=pr();ee(b,new Td(b,m))}Fi.Ma="timingevent";function Ye(m,b){rt.call(this,Fi.Ma,m),this.size=b}S(Ye,rt);function Ve(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},b)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function Bc(m,b,w,R,G,J){m.info(function(){if(m.g)if(J)for(var ht="",Bt=J.split("&"),$e=0;$e<Bt.length;$e++){var Ht=Bt[$e].split("=");if(1<Ht.length){var sn=Ht[0];Ht=Ht[1];var Qe=sn.split("_");ht=2<=Qe.length&&Qe[1]=="type"?ht+(sn+"="+Ht+"&"):ht+(sn+"=redacted&")}}else ht=null;else ht=J;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+b+`
`+w+`
`+ht})}function Ep(m,b,w,R,G,J,ht){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+b+`
`+w+`
`+J+" "+ht})}function yr(m,b,w,R){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Va(m,w)+(R?" "+R:"")})}function Sd(m,b){m.info(function(){return"TIMEOUT: "+b})}ai.prototype.info=function(){};function Va(m,b){if(!m.g)return b;if(!b)return null;try{var w=JSON.parse(b);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var R=w[m];if(!(2>R.length)){var G=R[1];if(Array.isArray(G)&&!(1>G.length)){var J=G[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ht=1;ht<G.length;ht++)G[ht]=""}}}}return Ai(w)}catch{return b}}var vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zi;function Bi(){}S(Bi,Vc),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},zi=new Bi;function Dn(m,b,w,R){this.j=m,this.i=b,this.l=w,this.R=R||1,this.U=new Ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}var Hc={},Xo={};function Ci(m,b,w){m.L=1,m.v=Ba(Qn(b)),m.m=w,m.P=!0,xs(m,null)}function xs(m,b){m.F=Date.now(),ja(m),m.A=Qn(m.v);var w=m.A,R=m.R;Array.isArray(R)||(R=[String(R)]),Qc(w.i,"t",R),m.C=0,w=m.j.J,m.h=new De,m.g=zd(m.j,w?b:null,!m.m),0<m.O&&(m.M=new bp(v(m.Y,m,m.g),m.O)),b=m.U,w=m.g,R=m.ca;var G="readystatechange";Array.isArray(G)||(G&&(Oa[0]=G.toString()),G=Oa);for(var J=0;J<G.length;J++){var ht=Ed(w,G[J],R||b.handleEvent,!1,b.h||b);if(!ht)break;b.g[ht.key]=ht}b=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),_r(),Bc(m.i,m.u,m.A,m.l,m.R,m.m)}Dn.prototype.ca=function(m){m=m.target;const b=this.M;b&&ui(m)==3?b.j():this.Y(m)},Dn.prototype.Y=function(m){try{if(m==this.g)t:{const Qe=ui(this.g);var b=this.g.Ba();const ks=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||Md(this.g)))){this.J||Qe!=4||b==7||(b==8||0>=ks?_r(3):_r(2)),br(this);var w=this.g.Z();this.X=w;e:if(Ad(this)){var R=Md(this.g);m="";var G=R.length,J=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Hi(this);var ht="";break e}this.h.i=new u.TextDecoder}for(b=0;b<G;b++)this.h.h=!0,m+=this.h.i.decode(R[b],{stream:!(J&&b==G-1)});R.length=0,this.h.g+=m,this.C=0,ht=this.h.g}else ht=this.g.oa();if(this.o=w==200,Ep(this.i,this.u,this.A,this.l,this.R,Qe,w),this.o){if(this.T&&!this.K){e:{if(this.g){var Bt,$e=this.g;if((Bt=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Bt)){var Ht=Bt;break e}}Ht=null}if(w=Ht)yr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ua(this,w);else{this.o=!1,this.s=3,Ee(12),fn(this),Hi(this);break t}}if(this.P){w=!0;let mn;for(;!this.J&&this.C<ht.length;)if(mn=Cd(this,ht),mn==Xo){Qe==4&&(this.s=4,Ee(14),w=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Hc){this.s=4,Ee(15),yr(this.i,this.l,ht,"[Invalid Chunk]"),w=!1;break}else yr(this.i,this.l,mn,null),Ua(this,mn);if(Ad(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||ht.length!=0||this.h.h||(this.s=1,Ee(16),w=!1),this.o=this.o&&w,!w)yr(this.i,this.l,ht,"[Invalid Chunked Response]"),fn(this),Hi(this);else if(0<ht.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+ht.length),Ka(sn),sn.M=!0,Ee(11))}}else yr(this.i,this.l,ht,null),Ua(this,ht);Qe==4&&fn(this),this.o&&!this.J&&(Qe==4?jd(this.j,this):(this.o=!1,ja(this)))}else Ap(this.g),w==400&&0<ht.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),fn(this),Hi(this)}}}catch{}finally{}};function Ad(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Cd(m,b){var w=m.C,R=b.indexOf(`
`,w);return R==-1?Xo:(w=Number(b.substring(w,R)),isNaN(w)?Hc:(R+=1,R+w>b.length?Xo:(b=b.slice(R,R+w),m.C=R+w,b)))}Dn.prototype.cancel=function(){this.J=!0,fn(this)};function ja(m){m.S=Date.now()+m.I,Rd(m,m.I)}function Rd(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ve(v(m.ba,m),b)}function br(m){m.B&&(u.clearTimeout(m.B),m.B=null)}Dn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Sd(this.i,this.A),this.L!=2&&(_r(),Ee(17)),fn(this),this.s=2,Hi(this)):Rd(this,this.S-m)};function Hi(m){m.j.G==0||m.J||jd(m.j,m)}function fn(m){br(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,Pa(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function Ua(m,b){try{var w=m.j;if(w.G!=0&&(w.g==m||qc(w.h,m))){if(!m.K&&qc(w.h,m)&&w.G==3){try{var R=w.Da.g.parse(b)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)cl(w),ol(w);else break t;tu(w),Ee(18)}}else w.za=G[1],0<w.za-w.T&&37500>G[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ve(v(w.Za,w),6e3));if(1>=Jo(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Ns(w,11)}else if((m.K||w.g==m)&&cl(w),!W(b))for(G=w.Da.g.parse(b),b=0;b<G.length;b++){let Ht=G[b];if(w.T=Ht[0],Ht=Ht[1],w.G==2)if(Ht[0]=="c"){w.K=Ht[1],w.ia=Ht[2];const sn=Ht[3];sn!=null&&(w.la=sn,w.j.info("VER="+w.la));const Qe=Ht[4];Qe!=null&&(w.Aa=Qe,w.j.info("SVER="+w.Aa));const ks=Ht[5];ks!=null&&typeof ks=="number"&&0<ks&&(R=1.5*ks,w.L=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const mn=m.g;if(mn){const Ki=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var J=R.h;J.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(tl(J,J.h),J.h=null))}if(R.D){const nu=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;nu&&(R.ya=nu,ae(R.I,R.D,nu))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),R=w;var ht=m;if(R.qa=Fd(R,R.J?R.ia:null,R.W),ht.K){Mn(R.h,ht);var Bt=ht,$e=R.L;$e&&(Bt.I=$e),Bt.B&&(br(Bt),ja(Bt)),R.g=ht}else Ld(R);0<w.i.length&&ll(w)}else Ht[0]!="stop"&&Ht[0]!="close"||Ns(w,7);else w.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Ns(w,7):Zc(w):Ht[0]!="noop"&&w.l&&w.l.ta(Ht),w.v=0)}}_r(4)}catch{}}var Id=class{constructor(m,b){this.g=m,this.map=b}};function Ts(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zo(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Jo(m){return m.h?1:m.g?m.g.size:0}function qc(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function tl(m,b){m.g?m.g.add(b):m.h=b}function Mn(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Ts.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Wc(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const w of m.g.values())b=b.concat(w.D);return b}return N(m.i)}function wp(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var b=[],w=m.length,R=0;R<w;R++)b.push(m[R]);return b}b=[],w=0;for(R in m)b[w++]=m[R];return b}function el(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var b=[];m=m.length;for(var w=0;w<m;w++)b.push(w);return b}b=[],w=0;for(const R in m)b[w++]=R;return b}}}function Gc(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var w=el(m),R=wp(m),G=R.length,J=0;J<G;J++)b.call(void 0,R[J],w&&w[J],m)}var Fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xp(m,b){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var R=m[w].indexOf("="),G=null;if(0<=R){var J=m[w].substring(0,R);G=m[w].substring(R+1)}else J=m[w];b(J,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function je(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof je){this.h=m.h,za(this,m.j),this.o=m.o,this.g=m.g,Er(this,m.s),this.l=m.l;var b=m.i,w=new As;w.i=b.i,b.g&&(w.g=new Map(b.g),w.h=b.h),Ss(this,w),this.m=m.m}else m&&(b=String(m).match(Fa))?(this.h=!1,za(this,b[1]||"",!0),this.o=oi(b[2]||""),this.g=oi(b[3]||"",!0),Er(this,b[4]),this.l=oi(b[5]||"",!0),Ss(this,b[6]||"",!0),this.m=oi(b[7]||"")):(this.h=!1,this.i=new As(null,this.h))}je.prototype.toString=function(){var m=[],b=this.j;b&&m.push(Ha(b,Yc,!0),":");var w=this.g;return(w||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Ha(b,Yc,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Ha(w,w.charAt(0)=="/"?Tp:$c,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Ha(w,nl)),m.join("")};function Qn(m){return new je(m)}function za(m,b,w){m.j=w?oi(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function Er(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function Ss(m,b,w){b instanceof As?(m.i=b,kd(m.i,m.h)):(w||(b=Ha(b,Sp)),m.i=new As(b,m.h))}function ae(m,b,w){m.i.set(b,w)}function Ba(m){return ae(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function oi(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ha(m,b,w){return typeof m=="string"?(m=encodeURI(m).replace(b,Nd),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Nd(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Yc=/[#\/\?@]/g,$c=/[#\?:]/g,Tp=/[#\?]/g,Sp=/[#\?@]/g,nl=/#/g;function As(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function li(m){m.g||(m.g=new Map,m.h=0,m.i&&xp(m.i,function(b,w){m.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=As.prototype,n.add=function(m,b){li(this),this.i=null,m=qi(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(b),this.h+=1,this};function Cs(m,b){li(m),b=qi(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Rs(m,b){return li(m),b=qi(m,b),m.g.has(b)}n.forEach=function(m,b){li(this),this.g.forEach(function(w,R){w.forEach(function(G){m.call(b,G,R,this)},this)},this)},n.na=function(){li(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),w=[];for(let R=0;R<b.length;R++){const G=m[R];for(let J=0;J<G.length;J++)w.push(b[R])}return w},n.V=function(m){li(this);let b=[];if(typeof m=="string")Rs(this,m)&&(b=b.concat(this.g.get(qi(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)b=b.concat(m[w])}return b},n.set=function(m,b){return li(this),this.i=null,m=qi(this,m),Rs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},n.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function Qc(m,b,w){Cs(m,b),0<w.length&&(m.i=null,m.g.set(qi(m,b),N(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var w=0;w<b.length;w++){var R=b[w];const J=encodeURIComponent(String(R)),ht=this.V(R);for(R=0;R<ht.length;R++){var G=J;ht[R]!==""&&(G+="="+encodeURIComponent(String(ht[R]))),m.push(G)}}return this.i=m.join("&")};function qi(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function kd(m,b){b&&!m.j&&(li(m),m.i=null,m.g.forEach(function(w,R){var G=R.toLowerCase();R!=G&&(Cs(this,R),Qc(this,G,w))},m)),m.j=b}function qa(m,b){const w=new ai;if(u.Image){const R=new Image;R.onload=T(ci,w,"TestLoadImage: loaded",!0,b,R),R.onerror=T(ci,w,"TestLoadImage: error",!1,b,R),R.onabort=T(ci,w,"TestLoadImage: abort",!1,b,R),R.ontimeout=T(ci,w,"TestLoadImage: timeout",!1,b,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else b(!1)}function Ri(m,b){const w=new ai,R=new AbortController,G=setTimeout(()=>{R.abort(),ci(w,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:R.signal}).then(J=>{clearTimeout(G),J.ok?ci(w,"TestPingServer: ok",!0,b):ci(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(G),ci(w,"TestPingServer: error",!1,b)})}function ci(m,b,w,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(w)}catch{}}function Wa(){this.g=new La}function Wi(m,b,w){const R=w||"";try{Gc(m,function(G,J){let ht=G;f(G)&&(ht=Ai(G)),b.push(R+J+"="+encodeURIComponent(ht))})}catch(G){throw b.push(R+"type="+encodeURIComponent("_badmap")),G}}function wr(m){this.l=m.Ub||null,this.j=m.eb||!1}S(wr,Vc),wr.prototype.g=function(){return new Is(this.l,this.j)},wr.prototype.i=function(m){return function(){return m}}({});function Is(m,b){Ce.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Is,Ce),n=Is.prototype,n.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,Yi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kc(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kc(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Gi(this):Yi(this),this.readyState==3&&Kc(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Gi(this))},n.Qa=function(m){this.g&&(this.response=m,Gi(this))},n.ga=function(){this.g&&Gi(this)};function Gi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Yi(m)}n.setRequestHeader=function(m,b){this.u.append(m,b)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=b.next();return m.join(`\r
`)};function Yi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Xc(m){let b="";return lt(m,function(w,R){b+=R,b+=":",b+=w,b+=`\r
`}),b}function nn(m,b,w){t:{for(R in w){var R=!1;break t}R=!0}R||(w=Xc(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):ae(m,b,w))}function Jt(m){Ce.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Jt,Ce);var il=/^https?$/i,Ga=["POST","PUT"];n=Jt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,b,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zi.g(),this.v=this.o?jc(this.o):jc(zi),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(J){Dd(this,J);return}if(m=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)w.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())w.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),G=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ga,b,void 0))||R||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ht]of w)this.g.setRequestHeader(J,ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ya(this),this.u=!0,this.g.send(m),this.u=!1}catch(J){Dd(this,J)}};function Dd(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,sl(m),$i(m)}function sl(m){m.A||(m.A=!0,ee(m,"complete"),ee(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,ee(this,"complete"),ee(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),Jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rl(this):this.bb())},n.bb=function(){rl(this)};function rl(m){if(m.h&&typeof l<"u"&&(!m.v[1]||ui(m)!=4||m.Z()!=2)){if(m.u&&ui(m)==4)xn(m.Ea,0,m);else if(ee(m,"readystatechange"),ui(m)==4){m.h=!1;try{const ht=m.Z();t:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var w;if(!(w=b)){var R;if(R=ht===0){var G=String(m.D).match(Fa)[1]||null;!G&&u.self&&u.self.location&&(G=u.self.location.protocol.slice(0,-1)),R=!il.test(G?G.toLowerCase():"")}w=R}if(w)ee(m,"complete"),ee(m,"success");else{m.m=6;try{var J=2<ui(m)?m.g.statusText:""}catch{J=""}m.l=J+" ["+m.Z()+"]",sl(m)}}finally{$i(m)}}}}function $i(m,b){if(m.g){Ya(m);const w=m.g,R=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||ee(m,"ready");try{w.onreadystatechange=R}catch{}}}function Ya(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function ui(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Qo(b)}};function Md(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ap(m){const b={};m=(m.g&&2<=ui(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(W(m[R]))continue;var w=V(m[R]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=b[G]||[];b[G]=J,J.push(w)}D(b,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(m,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||b}function al(m){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$a("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$a("baseRetryDelayMs",5e3,m),this.cb=$a("retryDelaySeedMs",1e4,m),this.Wa=$a("forwardChannelMaxRetries",2,m),this.wa=$a("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ts(m&&m.concurrentRequestLimit),this.Da=new Wa,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=al.prototype,n.la=8,n.G=1,n.connect=function(m,b,w,R){Ee(0),this.W=m,this.H=b||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.I=Fd(this,null,this.W),ll(this)};function Zc(m){if(Od(m),m.G==3){var b=m.U++,w=Qn(m.I);if(ae(w,"SID",m.K),ae(w,"RID",b),ae(w,"TYPE","terminate"),Qa(m,w),b=new Dn(m,m.j,b),b.L=2,b.v=Ba(Qn(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=b.v,w=!0),w||(b.g=zd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),ja(b)}Ud(m)}function ol(m){m.g&&(Ka(m),m.g.cancel(),m.g=null)}function Od(m){ol(m),m.u&&(u.clearTimeout(m.u),m.u=null),cl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function ll(m){if(!Zo(m.h)&&!m.s){m.s=!0;var b=m.Ga;it||j(),dt||(it(),dt=!0),_t.add(b,m),m.B=0}}function Cp(m,b){return Jo(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ve(v(m.Ga,m,b),eu(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const G=new Dn(this,this.j,m);let J=this.o;if(this.S&&(J?(J=I(J),P(J,this.S)):J=this.S),this.m!==null||this.O||(G.H=J,J=null),this.P)t:{for(var b=0,w=0;w<this.i.length;w++){e:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break e}R=void 0}if(R===void 0)break;if(b+=R,4096<b){b=w;break t}if(b===4096||w===this.i.length-1){b=w+1;break t}}b=1e3}else b=1e3;b=Pd(this,G,b),w=Qn(this.I),ae(w,"RID",m),ae(w,"CVER",22),this.D&&ae(w,"X-HTTP-Session-Id",this.D),Qa(this,w),J&&(this.O?b="headers="+encodeURIComponent(String(Xc(J)))+"&"+b:this.m&&nn(w,this.m,J)),tl(this.h,G),this.Ua&&ae(w,"TYPE","init"),this.P?(ae(w,"$req",b),ae(w,"SID","null"),G.T=!0,Ci(G,w,null)):Ci(G,w,b),this.G=2}}else this.G==3&&(m?Jc(this,m):this.i.length==0||Zo(this.h)||Jc(this))};function Jc(m,b){var w;b?w=b.l:w=m.U++;const R=Qn(m.I);ae(R,"SID",m.K),ae(R,"RID",w),ae(R,"AID",m.T),Qa(m,R),m.m&&m.o&&nn(R,m.m,m.o),w=new Dn(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),b&&(m.i=b.D.concat(m.i)),b=Pd(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),tl(m.h,w),Ci(w,R,b)}function Qa(m,b){m.H&&lt(m.H,function(w,R){ae(b,R,w)}),m.l&&Gc({},function(w,R){ae(b,R,w)})}function Pd(m,b,w){w=Math.min(m.i.length,w);var R=m.l?v(m.l.Na,m.l,m):null;t:{var G=m.i;let J=-1;for(;;){const ht=["count="+w];J==-1?0<w?(J=G[0].g,ht.push("ofs="+J)):J=0:ht.push("ofs="+J);let Bt=!0;for(let $e=0;$e<w;$e++){let Ht=G[$e].g;const sn=G[$e].map;if(Ht-=J,0>Ht)J=Math.max(0,G[$e].g-100),Bt=!1;else try{Wi(sn,ht,"req"+Ht+"_")}catch{R&&R(sn)}}if(Bt){R=ht.join("&");break t}}}return m=m.i.splice(0,w),b.D=m,R}function Ld(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;it||j(),dt||(it(),dt=!0),_t.add(b,m),m.v=0}}function tu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ve(v(m.Fa,m),eu(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Vd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ve(v(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),ol(this),Vd(this))};function Ka(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Vd(m){m.g=new Dn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=Qn(m.qa);ae(b,"RID","rpc"),ae(b,"SID",m.K),ae(b,"AID",m.T),ae(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&ae(b,"TO",m.ja),ae(b,"TYPE","xmlhttp"),Qa(m,b),m.m&&m.o&&nn(b,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Ba(Qn(b)),w.m=null,w.P=!0,xs(w,m)}n.Za=function(){this.C!=null&&(this.C=null,ol(this),tu(this),Ee(19))};function cl(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function jd(m,b){var w=null;if(m.g==b){cl(m),Ka(m),m.g=null;var R=2}else if(qc(m.h,b))w=b.D,Mn(m.h,b),R=1;else return;if(m.G!=0){if(b.o)if(R==1){w=b.m?b.m.length:0,b=Date.now()-b.F;var G=m.B;R=pr(),ee(R,new Ye(R,w)),ll(m)}else Ld(m);else if(G=b.s,G==3||G==0&&0<b.X||!(R==1&&Cp(m,b)||R==2&&tu(m)))switch(w&&0<w.length&&(b=m.h,b.i=b.i.concat(w)),G){case 1:Ns(m,5);break;case 4:Ns(m,10);break;case 3:Ns(m,6);break;default:Ns(m,2)}}}function eu(m,b){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*b}function Ns(m,b){if(m.j.info("Error code "+b),b==2){var w=v(m.fb,m),R=m.Xa;const G=!R;R=new je(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||za(R,"https"),Ba(R),G?qa(R.toString(),w):Ri(R.toString(),w)}else Ee(2);m.G=0,m.l&&m.l.sa(b),Ud(m),Od(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function Ud(m){if(m.G=0,m.ka=[],m.l){const b=Wc(m.h);(b.length!=0||m.i.length!=0)&&(C(m.ka,b),C(m.ka,m.i),m.h.i.length=0,N(m.i),m.i.length=0),m.l.ra()}}function Fd(m,b,w){var R=w instanceof je?Qn(w):new je(w);if(R.g!="")b&&(R.g=b+"."+R.g),Er(R,R.s);else{var G=u.location;R=G.protocol,b=b?b+"."+G.hostname:G.hostname,G=+G.port;var J=new je(null);R&&za(J,R),b&&(J.g=b),G&&Er(J,G),w&&(J.l=w),R=J}return w=m.D,b=m.ya,w&&b&&ae(R,w,b),ae(R,"VER",m.la),Qa(m,R),R}function zd(m,b,w){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new Jt(new wr({eb:w})):new Jt(m.pa),b.Ha(m.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bd(){}n=Bd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ul(){}ul.prototype.g=function(m,b){return new On(m,b)};function On(m,b){Ce.call(this),this.g=new al(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!W(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!W(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Qi(this)}S(On,Ce),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){Zc(this.g)},On.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=Ai(m),m=w);b.i.push(new Id(b.Ya++,m)),b.G==3&&ll(b)},On.prototype.N=function(){this.g.l=null,delete this.j,Zc(this.g),delete this.g,On.aa.N.call(this)};function Hd(m){Es.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){t:{for(const w in b){m=w;break t}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}S(Hd,Es);function qd(){Fc.call(this),this.status=1}S(qd,Fc);function Qi(m){this.g=m}S(Qi,Bd),Qi.prototype.ua=function(){ee(this.g,"a")},Qi.prototype.ta=function(m){ee(this.g,new Hd(m))},Qi.prototype.sa=function(m){ee(this.g,new qd)},Qi.prototype.ra=function(){ee(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,FR=function(){return new ul},UR=function(){return pr()},jR=Fi,_0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,wm=vr,ws.COMPLETE="complete",VR=ws,Uc.EventType=bs,bs.OPEN="a",bs.CLOSE="b",bs.ERROR="c",bs.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,sh=Uc,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,LR=Jt}).apply(typeof $f<"u"?$f:typeof self<"u"?self:typeof window<"u"?window:{});const mS="@firebase/firestore",gS="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Lg("@firebase/firestore");function Hl(){return Do.logLevel}function gt(n,...t){if(Do.logLevel<=Vt.DEBUG){const e=t.map(Sv);Do.debug(`Firestore (${Tc}): ${n}`,...e)}}function lr(n,...t){if(Do.logLevel<=Vt.ERROR){const e=t.map(Sv);Do.error(`Firestore (${Tc}): ${n}`,...e)}}function ac(n,...t){if(Do.logLevel<=Vt.WARN){const e=t.map(Sv);Do.warn(`Firestore (${Tc}): ${n}`,...e)}}function Sv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,zR(n,i,e)}function zR(n,t,e){let i=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw lr(i),new Error(i)}function Zt(n,t,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,n||zR(t,s,i)}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends dr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Rn.UNAUTHENTICATED))}shutdown(){}}class xV{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class TV{constructor(t){this.t=t,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Zt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let a=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ra,t.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=a;t.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},u=d=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ra)}},0),l()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Zt(typeof i.accessToken=="string",31837,{l:i}),new BR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new Rn(t)}}class SV{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AV{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new SV(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pS{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CV{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Zt(this.o===void 0,3512);const i=a=>{a.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,gt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>i(a))};const s=a=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pS(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Zt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new pS(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=RV(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<e&&(i+=t.charAt(s[a]%62))}return i}}function Ft(n,t){return n<t?-1:n>t?1:0}function y0(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const s=n.charAt(i),a=t.charAt(i);if(s!==a)return My(s)===My(a)?Ft(s,a):My(s)?1:-1}return Ft(n.length,t.length)}const IV=55296,NV=57343;function My(n){const t=n.charCodeAt(0);return t>=IV&&t<=NV}function oc(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="__name__";class rs{constructor(t,e,i){e===void 0?e=0:e>t.length&&At(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&At(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return rs.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof rs?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const a=rs.compareSegments(t.get(s),e.get(s));if(a!==0)return a}return Ft(t.length,e.length)}static compareSegments(t,e){const i=rs.isNumericId(t),s=rs.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?rs.extractNumericId(t).compare(rs.extractNumericId(e)):y0(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return sa.fromString(t.substring(4,t.length-2))}}class ye extends rs{construct(t,e,i){return new ye(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new mt(st.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new ye(e)}static emptyPath(){return new ye([])}}const kV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends rs{construct(t,e,i){return new bn(t,e,i)}static isValidIdentifier(t){return kV.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_S}static keyField(){return new bn([_S])}static fromServerFormat(t){const e=[];let i="",s=0;const a=()=>{if(i.length===0)throw new mt(st.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;s<t.length;){const u=t[s];if(u==="\\"){if(s+1===t.length)throw new mt(st.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new mt(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(a(),s++)}if(a(),l)throw new mt(st.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new bn(e)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.path=t}static fromPath(t){return new vt(ye.fromString(t))}static fromName(t){return new vt(ye.fromString(t).popFirst(5))}static empty(){return new vt(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ye.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ye.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vt(new ye(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n,t,e){if(!e)throw new mt(st.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function DV(n,t,e,i){if(t===!0&&i===!0)throw new mt(st.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function yS(n){if(!vt.isDocumentKey(n))throw new mt(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vS(n){if(vt.isDocumentKey(n))throw new mt(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":At(12329,{type:typeof n})}function aa(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new mt(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=zg(n);throw new mt(st.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function MV(n,t){if(t<=0)throw new mt(st.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(n,t){const e={typeString:n};return t&&(e.value=t),e}function cd(n,t){if(!qR(n))throw new mt(st.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const s=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){e=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){e=`Expected '${i}' field to equal '${a.value}'`;break}}if(e)throw new mt(st.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=-62135596800,ES=1e6;class be{static now(){return be.fromMillis(Date.now())}static fromDate(t){return be.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*ES);return new be(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<bS)throw new mt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ES}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(cd(t,be._jsonSchema))return new be(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-bS;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}be._jsonSchemaVersion="firestore/timestamp/1.0",be._jsonSchema={type:He("string",be._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{static fromTimestamp(t){return new Nt(t)}static min(){return new Nt(new be(0,0))}static max(){return new Nt(new be(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=-1;function OV(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Nt.fromTimestamp(i===1e9?new be(e+1,0):new be(e,i));return new fa(s,vt.empty(),t)}function PV(n){return new fa(n.readTime,n.key,Dh)}class fa{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new fa(Nt.min(),vt.empty(),Dh)}static max(){return new fa(Nt.max(),vt.empty(),Dh)}}function LV(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=vt.comparator(n.documentKey,t.documentKey),e!==0?e:Ft(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(n){if(n.code!==st.FAILED_PRECONDITION||n.message!==VV)throw n;gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&At(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ot((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(e,a).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ot?e:ot.resolve(e)}catch(e){return ot.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ot.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ot.reject(e)}static resolve(t){return new ot((e,i)=>{e(t)})}static reject(t){return new ot((e,i)=>{i(t)})}static waitFor(t){return new ot((e,i)=>{let s=0,a=0,l=!1;t.forEach(u=>{++s,u.next(()=>{++a,l&&a===s&&e()},d=>i(d))}),l=!0,a===s&&e()})}static or(t){let e=ot.resolve(!1);for(const i of t)e=e.next(s=>s?ot.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,a)=>{i.push(e.call(this,s,a))}),this.waitFor(i)}static mapArray(t,e){return new ot((i,s)=>{const a=t.length,l=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;e(t[f]).next(p=>{l[f]=p,++u,u===a&&i(l)},p=>s(p))}})}static doWhile(t,e){return new ot((i,s)=>{const a=()=>{t()===!0?e().next(()=>{a()},s):i()};a()})}}function UV(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ac(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Bg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=-1;function Hg(n){return n==null}function Gm(n){return n===0&&1/n==-1/0}function FV(n){return typeof n=="number"&&Number.isInteger(n)&&!Gm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="";function zV(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=wS(t)),t=BV(n.get(e),t);return wS(t)}function BV(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":e+="";break;case WR:e+="";break;default:e+=a}}return e}function wS(n){return n+WR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Sa(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function HV(n,t){const e=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.push(t(n[i],i,n));return e}function GR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ge=class v0{constructor(t,e){this.comparator=t,this.root=e||oa.EMPTY}insert(t,e){return new v0(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,oa.BLACK,null,null))}remove(t){return new v0(this.comparator,this.root.remove(t,this.comparator).copy(null,null,oa.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Qf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Qf(this.root,t,this.comparator,!1)}getReverseIterator(){return new Qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Qf(this.root,t,this.comparator,!0)}},Qf=class{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?i(t.key,e):1,e&&s&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},oa=class Gs{constructor(t,e,i,s,a){this.key=t,this.value=e,this.color=i??Gs.RED,this.left=s??Gs.EMPTY,this.right=a??Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,a){return new Gs(t??this.key,e??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const a=i(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,e,i),null):a===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Gs.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw At(43730,{key:this.key,value:this.value});if(this.right.isRed())throw At(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw At(27949);return t+(this.isRed()?0:1)}};oa.EMPTY=null,oa.RED=!0,oa.BLACK=!1;oa.EMPTY=new class{constructor(){this.size=0}get key(){throw At(57766)}get value(){throw At(16141)}get color(){throw At(16727)}get left(){throw At(29726)}get right(){throw At(36894)}copy(t,e,i,s,a){return this}insert(t,e,i){return new oa(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.comparator=t,this.data=new Ge(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new TS(this.data.getIterator())}getIteratorFrom(t){return new TS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof tn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new tn(this.comparator);return e.data=t,e}}class TS{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this.fields=t,t.sort(bn.comparator)}static empty(){return new si([])}unionWith(t){let e=new tn(bn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new si(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return oc(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new YR("Invalid base64 string: "+a):a}}(t);return new En(e)}static fromUint8Array(t){const e=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(t);return new En(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}En.EMPTY_BYTE_STRING=new En("");const qV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ma(n){if(Zt(!!n,39018),typeof n=="string"){let t=0;const e=qV.exec(n);if(Zt(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ga(n){return typeof n=="string"?En.fromBase64String(n):En.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="server_timestamp",QR="__type__",KR="__previous_value__",XR="__local_write_time__";function Rv(n){return(n?.mapValue?.fields||{})[QR]?.stringValue===$R}function qg(n){const t=n.mapValue.fields[KR];return Rv(t)?qg(t):t}function Mh(n){const t=ma(n.mapValue.fields[XR].timestampValue);return new be(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(t,e,i,s,a,l,u,d,f,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const Ym="(default)";class Oh{constructor(t,e){this.projectId=t,this.database=e||Ym}static empty(){return new Oh("","")}get isDefaultDatabase(){return this.database===Ym}isEqual(t){return t instanceof Oh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="__type__",GV="__max__",Kf={mapValue:{}},JR="__vector__",$m="value";function pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rv(n)?4:$V(n)?9007199254740991:YV(n)?10:11:At(28295,{value:n})}function gs(n,t){if(n===t)return!0;const e=pa(n);if(e!==pa(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Mh(n).isEqual(Mh(t));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ma(s.timestampValue),u=ma(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,a){return ga(s.bytesValue).isEqual(ga(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,a){return Pe(s.geoPointValue.latitude)===Pe(a.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(a.geoPointValue.longitude)}(n,t);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Pe(s.integerValue)===Pe(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Pe(s.doubleValue),u=Pe(a.doubleValue);return l===u?Gm(l)===Gm(u):isNaN(l)&&isNaN(u)}return!1}(n,t);case 9:return oc(n.arrayValue.values||[],t.arrayValue.values||[],gs);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(xS(l)!==xS(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!gs(l[d],u[d])))return!1;return!0}(n,t);default:return At(52216,{left:n})}}function Ph(n,t){return(n.values||[]).find(e=>gs(e,t))!==void 0}function lc(n,t){if(n===t)return 0;const e=pa(n),i=pa(t);if(e!==i)return Ft(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,t.booleanValue);case 2:return function(a,l){const u=Pe(a.integerValue||a.doubleValue),d=Pe(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,t);case 3:return SS(n.timestampValue,t.timestampValue);case 4:return SS(Mh(n),Mh(t));case 5:return y0(n.stringValue,t.stringValue);case 6:return function(a,l){const u=ga(a),d=ga(l);return u.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(a,l){const u=a.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const p=Ft(u[f],d[f]);if(p!==0)return p}return Ft(u.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,l){const u=Ft(Pe(a.latitude),Pe(l.latitude));return u!==0?u:Ft(Pe(a.longitude),Pe(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return AS(n.arrayValue,t.arrayValue);case 10:return function(a,l){const u=a.fields||{},d=l.fields||{},f=u[$m]?.arrayValue,p=d[$m]?.arrayValue,y=Ft(f?.values?.length||0,p?.values?.length||0);return y!==0?y:AS(f,p)}(n.mapValue,t.mapValue);case 11:return function(a,l){if(a===Kf.mapValue&&l===Kf.mapValue)return 0;if(a===Kf.mapValue)return 1;if(l===Kf.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let y=0;y<d.length&&y<p.length;++y){const v=y0(d[y],p[y]);if(v!==0)return v;const T=lc(u[d[y]],f[p[y]]);if(T!==0)return T}return Ft(d.length,p.length)}(n.mapValue,t.mapValue);default:throw At(23264,{he:e})}}function SS(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ft(n,t);const e=ma(n),i=ma(t),s=Ft(e.seconds,i.seconds);return s!==0?s:Ft(e.nanos,i.nanos)}function AS(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const a=lc(e[s],i[s]);if(a)return a}return Ft(e.length,i.length)}function cc(n){return b0(n)}function b0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=ma(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return ga(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return vt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const a of e.values||[])s?s=!1:i+=",",i+=b0(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${b0(e.fields[l])}`;return s+"}"}(n.mapValue):At(61005,{value:n})}function xm(n){switch(pa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=qg(n);return t?16+xm(t):16;case 5:return 2*n.stringValue.length;case 6:return ga(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+xm(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Sa(i.fields,(a,l)=>{s+=a.length+xm(l)}),s}(n.mapValue);default:throw At(13486,{value:n})}}function CS(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function E0(n){return!!n&&"integerValue"in n}function Iv(n){return!!n&&"arrayValue"in n}function RS(n){return!!n&&"nullValue"in n}function IS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tm(n){return!!n&&"mapValue"in n}function YV(n){return(n?.mapValue?.fields||{})[ZR]?.stringValue===JR}function mh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Sa(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=mh(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=mh(n.arrayValue.values[e]);return t}return{...n}}function $V(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===GV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.value=t}static empty(){return new Bn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Tm(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=mh(e)}setAll(t){let e=bn.emptyPath(),i={},s=[];t.forEach((l,u)=>{if(!e.isImmediateParentOf(u)){const d=this.getFieldsMap(e);this.applyChanges(d,i,s),i={},s=[],e=u.popLast()}l?i[u.lastSegment()]=mh(l):s.push(u.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,i,s)}delete(t){const e=this.field(t.popLast());Tm(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return gs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Tm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){Sa(e,(s,a)=>t[s]=a);for(const s of i)delete t[s]}clone(){return new Bn(mh(this.value))}}function tI(n){const t=[];return Sa(n.fields,(e,i)=>{const s=new bn([e]);if(Tm(i)){const a=tI(i.mapValue).fields;if(a.length===0)t.push(s);else for(const l of a)t.push(s.child(l))}else t.push(s)}),new si(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t,e,i,s,a,l,u){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(t){return new In(t,0,Nt.min(),Nt.min(),Nt.min(),Bn.empty(),0)}static newFoundDocument(t,e,i,s){return new In(t,1,e,Nt.min(),i,s,0)}static newNoDocument(t,e){return new In(t,2,e,Nt.min(),Nt.min(),Bn.empty(),0)}static newUnknownDocument(t,e){return new In(t,3,e,Nt.min(),Nt.min(),Bn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof In&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,e){this.position=t,this.inclusive=e}}function NS(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const a=t[s],l=n.position[s];if(a.field.isKeyField()?i=vt.comparator(vt.fromName(l.referenceValue),e.key):i=lc(l,e.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function kS(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!gs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t,e="asc"){this.field=t,this.dir=e}}function QV(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{}class Be extends eI{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new XV(t,e,i):e==="array-contains"?new t3(t,i):e==="in"?new e3(t,i):e==="not-in"?new n3(t,i):e==="array-contains-any"?new i3(t,i):new Be(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new ZV(t,i):new JV(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(lc(e,this.value)):e!==null&&pa(this.value)===pa(e)&&this.matchesComparison(lc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends eI{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Vi(t,e)}matches(t){return nI(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nI(n){return n.op==="and"}function iI(n){return KV(n)&&nI(n)}function KV(n){for(const t of n.filters)if(t instanceof Vi)return!1;return!0}function w0(n){if(n instanceof Be)return n.field.canonicalString()+n.op.toString()+cc(n.value);if(iI(n))return n.filters.map(t=>w0(t)).join(",");{const t=n.filters.map(e=>w0(e)).join(",");return`${n.op}(${t})`}}function sI(n,t){return n instanceof Be?function(i,s){return s instanceof Be&&i.op===s.op&&i.field.isEqual(s.field)&&gs(i.value,s.value)}(n,t):n instanceof Vi?function(i,s){return s instanceof Vi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,l,u)=>a&&sI(l,s.filters[u]),!0):!1}(n,t):void At(19439)}function rI(n){return n instanceof Be?function(e){return`${e.field.canonicalString()} ${e.op} ${cc(e.value)}`}(n):n instanceof Vi?function(e){return e.op.toString()+" {"+e.getFilters().map(rI).join(" ,")+"}"}(n):"Filter"}class XV extends Be{constructor(t,e,i){super(t,e,i),this.key=vt.fromName(i.referenceValue)}matches(t){const e=vt.comparator(t.key,this.key);return this.matchesComparison(e)}}class ZV extends Be{constructor(t,e){super(t,"in",e),this.keys=aI("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class JV extends Be{constructor(t,e){super(t,"not-in",e),this.keys=aI("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function aI(n,t){return(t.arrayValue?.values||[]).map(e=>vt.fromName(e.referenceValue))}class t3 extends Be{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Iv(e)&&Ph(e.arrayValue,this.value)}}class e3 extends Be{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ph(this.value.arrayValue,e)}}class n3 extends Be{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Ph(this.value.arrayValue,e)}}class i3 extends Be{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Iv(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Ph(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(t,e=null,i=[],s=[],a=null,l=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function DS(n,t=null,e=[],i=[],s=null,a=null,l=null){return new s3(n,t,e,i,s,a,l)}function Nv(n){const t=It(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>w0(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Hg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>cc(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>cc(i)).join(",")),t.Te=e}return t.Te}function kv(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!QV(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!sI(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!kS(n.startAt,t.startAt)&&kS(n.endAt,t.endAt)}function x0(n){return vt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t,e=null,i=[],s=[],a=null,l="F",u=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function r3(n,t,e,i,s,a,l,u){return new Cc(n,t,e,i,s,a,l,u)}function Dv(n){return new Cc(n)}function MS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oI(n){return n.collectionGroup!==null}function gh(n){const t=It(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),e.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new tn(bn.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new Lh(a,i))}),e.has(bn.keyField().canonicalString())||t.Ie.push(new Lh(bn.keyField(),i))}return t.Ie}function cs(n){const t=It(n);return t.Ee||(t.Ee=lI(t,gh(n))),t.Ee}function a3(n){const t=It(n);return t.de||(t.de=lI(t,n.explicitOrderBy)),t.de}function lI(n,t){if(n.limitType==="F")return DS(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Lh(s.field,a)});const e=n.endAt?new Qm(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Qm(n.startAt.position,n.startAt.inclusive):null;return DS(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function T0(n,t){const e=n.filters.concat([t]);return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Km(n,t,e){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Wg(n,t){return kv(cs(n),cs(t))&&n.limitType===t.limitType}function cI(n){return`${Nv(cs(n))}|lt:${n.limitType}`}function ql(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>rI(s)).join(", ")}]`),Hg(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>cc(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>cc(s)).join(",")),`Target(${i})`}(cs(n))}; limitType=${n.limitType})`}function Gg(n,t){return t.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):vt.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,t)&&function(i,s){for(const a of gh(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(l,u,d){const f=NS(l,u,d);return l.inclusive?f<=0:f<0}(i.startAt,gh(i),s)||i.endAt&&!function(l,u,d){const f=NS(l,u,d);return l.inclusive?f>=0:f>0}(i.endAt,gh(i),s))}(n,t)}function o3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uI(n){return(t,e)=>{let i=!1;for(const s of gh(n)){const a=l3(s,t,e);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function l3(n,t,e){const i=n.field.isKeyField()?vt.comparator(t.key,e.key):function(a,l,u){const d=l.data.field(a),f=u.data.field(a);return d!==null&&f!==null?lc(d,f):At(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return At(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return void(s[a]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Sa(this.inner,(e,i)=>{for(const[s,a]of i)t(s,a)})}isEmpty(){return GR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new Ge(vt.comparator);function cr(){return c3}const hI=new Ge(vt.comparator);function rh(...n){let t=hI;for(const e of n)t=t.insert(e.key,e);return t}function dI(n){let t=hI;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Eo(){return ph()}function fI(){return ph()}function ph(){return new Bo(n=>n.toString(),(n,t)=>n.isEqual(t))}const u3=new Ge(vt.comparator),h3=new tn(vt.comparator);function zt(...n){let t=h3;for(const e of n)t=t.add(e);return t}const d3=new tn(Ft);function f3(){return d3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gm(t)?"-0":t}}function mI(n){return{integerValue:""+n}}function gI(n,t){return FV(t)?mI(t):Mv(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this._=void 0}}function m3(n,t,e){return n instanceof Vh?function(s,a){const l={fields:{[QR]:{stringValue:$R},[XR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Rv(a)&&(a=qg(a)),a&&(l.fields[KR]=a),{mapValue:l}}(e,t):n instanceof jh?_I(n,t):n instanceof Uh?yI(n,t):function(s,a){const l=pI(s,a),u=OS(l)+OS(s.Ae);return E0(l)&&E0(s.Ae)?mI(u):Mv(s.serializer,u)}(n,t)}function g3(n,t,e){return n instanceof jh?_I(n,t):n instanceof Uh?yI(n,t):e}function pI(n,t){return n instanceof Fh?function(i){return E0(i)||function(a){return!!a&&"doubleValue"in a}(i)}(t)?t:{integerValue:0}:null}class Vh extends Yg{}class jh extends Yg{constructor(t){super(),this.elements=t}}function _I(n,t){const e=vI(t);for(const i of n.elements)e.some(s=>gs(s,i))||e.push(i);return{arrayValue:{values:e}}}class Uh extends Yg{constructor(t){super(),this.elements=t}}function yI(n,t){let e=vI(t);for(const i of n.elements)e=e.filter(s=>!gs(s,i));return{arrayValue:{values:e}}}class Fh extends Yg{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function OS(n){return Pe(n.integerValue||n.doubleValue)}function vI(n){return Iv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,e){this.field=t,this.transform=e}}function p3(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof jh&&s instanceof jh||i instanceof Uh&&s instanceof Uh?oc(i.elements,s.elements,gs):i instanceof Fh&&s instanceof Fh?gs(i.Ae,s.Ae):i instanceof Vh&&s instanceof Vh}(n.transform,t.transform)}class _3{constructor(t,e){this.version=t,this.transformResults=e}}class us{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new us}static exists(t){return new us(void 0,t)}static updateTime(t){return new us(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Sm(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class $g{}function EI(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new xI(n.key,us.none()):new ud(n.key,n.data,us.none());{const e=n.data,i=Bn.empty();let s=new tn(bn.comparator);for(let a of t.fields)if(!s.has(a)){let l=e.field(a);l===null&&a.length>1&&(a=a.popLast(),l=e.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Aa(n.key,i,new si(s.toArray()),us.none())}}function y3(n,t,e){n instanceof ud?function(s,a,l){const u=s.value.clone(),d=LS(s.fieldTransforms,a,l.transformResults);u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,t,e):n instanceof Aa?function(s,a,l){if(!Sm(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=LS(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(wI(s)),d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,e)}function _h(n,t,e,i){return n instanceof ud?function(a,l,u,d){if(!Sm(a.precondition,l))return u;const f=a.value.clone(),p=VS(a.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof Aa?function(a,l,u,d){if(!Sm(a.precondition,l))return u;const f=VS(a.fieldTransforms,d,l),p=l.data;return p.setAll(wI(a)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(n,t,e,i):function(a,l,u){return Sm(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,t,e)}function v3(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),a=pI(i.transform,s||null);a!=null&&(e===null&&(e=Bn.empty()),e.set(i.field,a))}return e||null}function PS(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&oc(i,s,(a,l)=>p3(a,l))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class ud extends $g{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Aa extends $g{constructor(t,e,i,s,a=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function wI(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function LS(n,t,e){const i=new Map;Zt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let s=0;s<e.length;s++){const a=n[s],l=a.transform,u=t.data.field(a.field);i.set(a.field,g3(l,u,e[s]))}return i}function VS(n,t,e){const i=new Map;for(const s of n){const a=s.transform,l=e.data.field(s.field);i.set(s.field,m3(a,l,t))}return i}class xI extends $g{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b3 extends $g{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(t.key)&&y3(a,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=_h(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=_h(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=fI();return this.mutations.forEach(s=>{const a=t.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=e.has(s.key)?null:u;const d=EI(l,u);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Nt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),zt())}isEqual(t){return this.batchId===t.batchId&&oc(this.mutations,t.mutations,(e,i)=>PS(e,i))&&oc(this.baseMutations,t.baseMutations,(e,i)=>PS(e,i))}}class Ov{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Zt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return u3}();const a=t.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Ov(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(t,e,i){this.alias=t,this.aggregateType=e,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Wt;function S3(n){switch(n){case st.OK:return At(64938);case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0;default:return At(15467,{code:n})}}function TI(n){if(n===void 0)return lr("GRPC error has no .code"),st.UNKNOWN;switch(n){case ze.OK:return st.OK;case ze.CANCELLED:return st.CANCELLED;case ze.UNKNOWN:return st.UNKNOWN;case ze.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case ze.INTERNAL:return st.INTERNAL;case ze.UNAVAILABLE:return st.UNAVAILABLE;case ze.UNAUTHENTICATED:return st.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case ze.NOT_FOUND:return st.NOT_FOUND;case ze.ALREADY_EXISTS:return st.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return st.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case ze.ABORTED:return st.ABORTED;case ze.OUT_OF_RANGE:return st.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return st.UNIMPLEMENTED;case ze.DATA_LOSS:return st.DATA_LOSS;default:return At(39323,{code:n})}}(Wt=ze||(ze={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=new sa([4294967295,4294967295],0);function jS(n){const t=A3().encode(n),e=new PR;return e.update(t),new Uint8Array(e.digest())}function US(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new sa([e,i],0),new sa([s,a],0)]}class Pv{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ah(`Invalid padding: ${e}`);if(i<0)throw new ah(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ah(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ah(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=sa.fromNumber(this.ge)}ye(t,e,i){let s=t.add(e.multiply(sa.fromNumber(i)));return s.compare(C3)===1&&(s=new sa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=jS(t),[i,s]=US(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new Pv(a,s,e);return i.forEach(u=>l.insert(u)),l}insert(t){if(this.ge===0)return;const e=jS(t),[i,s]=US(e);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.Se(l)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class ah extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(t,e,i,s,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,hd.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Qg(Nt.min(),s,new Ge(Ft),cr(),zt())}}class hd{constructor(t,e,i,s,a){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new hd(i,e,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t,e,i,s){this.be=t,this.removedTargetIds=e,this.key=i,this.De=s}}class SI{constructor(t,e){this.targetId=t,this.Ce=e}}class AI{constructor(t,e,i=En.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class FS{constructor(){this.ve=0,this.Fe=zS(),this.Me=En.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=zt(),e=zt(),i=zt();return this.Fe.forEach((s,a)=>{switch(a){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:At(38017,{changeType:a})}}),new hd(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=zS()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R3{constructor(t){this.Ge=t,this.ze=new Map,this.je=cr(),this.Je=Xf(),this.He=Xf(),this.Ye=new Ge(Ft)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:At(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((i,s)=>{this.rt(s)&&e(s)})}st(t){const e=t.targetId,i=t.Ce.count,s=this.ot(e);if(s){const a=s.target;if(x0(a))if(i===0){const l=new vt(a.path);this.et(e,l,In.newNoDocument(l,Nt.min()))}else Zt(i===1,20013,{expectedCount:i});else{const l=this._t(e);if(l!==i){const u=this.ut(t),d=u?this.ct(u,t,l):1;if(d!==0){this.it(e);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,f)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=e;let l,u;try{l=ga(i).toUint8Array()}catch(d){if(d instanceof YR)return ac("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Pv(l,s,a)}catch(d){return ac(d instanceof ah?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let s=0;return i.forEach(a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(u)||(this.et(e,a,null),s++)}),s}Tt(t){const e=new Map;this.ze.forEach((a,l)=>{const u=this.ot(l);if(u){if(a.current&&x0(u.target)){const d=new vt(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,In.newNoDocument(d,t))}a.Be&&(e.set(l,a.ke()),a.qe())}});let i=zt();this.He.forEach((a,l)=>{let u=!0;l.forEachWhile(d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(a))}),this.je.forEach((a,l)=>l.setReadTime(t));const s=new Qg(t,e,this.Ye,this.je,i);return this.je=cr(),this.Je=Xf(),this.He=Xf(),this.Ye=new Ge(Ft),s}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new FS,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new tn(Ft),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new tn(Ft),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||gt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new FS),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Xf(){return new Ge(vt.comparator)}function zS(){return new Ge(vt.comparator)}const I3={asc:"ASCENDING",desc:"DESCENDING"},N3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k3={and:"AND",or:"OR"};class D3{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function S0(n,t){return n.useProto3Json||Hg(t)?t:{value:t}}function Xm(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function CI(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function M3(n,t){return Xm(n,t.toTimestamp())}function hs(n){return Zt(!!n,49232),Nt.fromTimestamp(function(e){const i=ma(e);return new be(i.seconds,i.nanos)}(n))}function Lv(n,t){return A0(n,t).canonicalString()}function A0(n,t){const e=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function RI(n){const t=ye.fromString(n);return Zt(OI(t),10190,{key:t.toString()}),t}function C0(n,t){return Lv(n.databaseId,t.path)}function Oy(n,t){const e=RI(t);if(e.get(1)!==n.databaseId.projectId)throw new mt(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new mt(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new vt(NI(e))}function II(n,t){return Lv(n.databaseId,t)}function O3(n){const t=RI(n);return t.length===4?ye.emptyPath():NI(t)}function R0(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NI(n){return Zt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BS(n,t,e){return{name:C0(n,t),fields:e.value.mapValue.fields}}function P3(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:At(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(f,p){return f.useProto3Json?(Zt(p===void 0||typeof p=="string",58123),En.fromBase64String(p||"")):(Zt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),En.fromUint8Array(p||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,u=l&&function(f){const p=f.code===void 0?st.UNKNOWN:TI(f.code);return new mt(p,f.message||"")}(l);e=new AI(i,s,a,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Oy(n,i.document.name),a=hs(i.document.updateTime),l=i.document.createTime?hs(i.document.createTime):Nt.min(),u=new Bn({mapValue:{fields:i.document.fields}}),d=In.newFoundDocument(s,a,l,u),f=i.targetIds||[],p=i.removedTargetIds||[];e=new Am(f,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Oy(n,i.document),a=i.readTime?hs(i.readTime):Nt.min(),l=In.newNoDocument(s,a),u=i.removedTargetIds||[];e=new Am([],u,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Oy(n,i.document),a=i.removedTargetIds||[];e=new Am([],a,s,null)}else{if(!("filter"in t))return At(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new T3(s,a),u=i.targetId;e=new SI(u,l)}}return e}function L3(n,t){let e;if(t instanceof ud)e={update:BS(n,t.key,t.value)};else if(t instanceof xI)e={delete:C0(n,t.key)};else if(t instanceof Aa)e={update:BS(n,t.key,t.data),updateMask:W3(t.fieldMask)};else{if(!(t instanceof b3))return At(16599,{Vt:t.type});e={verify:C0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(a,l){const u=l.transform;if(u instanceof Vh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Uh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fh)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw At(20930,{transform:l.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:M3(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:At(27497)}(n,t.precondition)),e}function V3(n,t){return n&&n.length>0?(Zt(t!==void 0,14353),n.map(e=>function(s,a){let l=s.updateTime?hs(s.updateTime):hs(a);return l.isEqual(Nt.min())&&(l=hs(a)),new _3(l,s.transformResults||[])}(e,t))):[]}function j3(n,t){return{documents:[II(n,t.path)]}}function kI(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=II(n,s);const a=function(f){if(f.length!==0)return MI(Vi.create(f,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const l=function(f){if(f.length!==0)return f.map(p=>function(v){return{field:Kr(v.field),direction:B3(v.dir)}}(p))}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=S0(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ft:e,parent:s}}function U3(n,t,e,i){const{ft:s,parent:a}=kI(n,t),l={},u=[];let d=0;return e.forEach(f=>{const p="aggregate_"+d++;l[p]=f.alias,f.aggregateType==="count"?u.push({alias:p,count:{}}):f.aggregateType==="avg"?u.push({alias:p,avg:{field:Kr(f.fieldPath)}}):f.aggregateType==="sum"&&u.push({alias:p,sum:{field:Kr(f.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:s.structuredQuery},parent:s.parent},gt:l,parent:a}}function F3(n){let t=O3(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Zt(i===1,65062);const p=e.from[0];p.allDescendants?s=p.collectionId:t=t.child(p.collectionId)}let a=[];e.where&&(a=function(y){const v=DI(y);return v instanceof Vi&&iI(v)?v.getFilters():[v]}(e.where));let l=[];e.orderBy&&(l=function(y){return y.map(v=>function(S){return new Lh(Wl(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(e.orderBy));let u=null;e.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,Hg(v)?null:v}(e.limit));let d=null;e.startAt&&(d=function(y){const v=!!y.before,T=y.values||[];return new Qm(T,v)}(e.startAt));let f=null;return e.endAt&&(f=function(y){const v=!y.before,T=y.values||[];return new Qm(T,v)}(e.endAt)),r3(t,s,l,a,u,"F",d,f)}function z3(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function DI(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Wl(e.unaryFilter.field);return Be.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Wl(e.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Wl(e.unaryFilter.field);return Be.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Wl(e.unaryFilter.field);return Be.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return At(61313);default:return At(60726)}}(n):n.fieldFilter!==void 0?function(e){return Be.create(Wl(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return At(58110);default:return At(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Vi.create(e.compositeFilter.filters.map(i=>DI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return At(1026)}}(e.compositeFilter.op))}(n):At(30097,{filter:n})}function B3(n){return I3[n]}function H3(n){return N3[n]}function q3(n){return k3[n]}function Kr(n){return{fieldPath:n.canonicalString()}}function Wl(n){return bn.fromServerFormat(n.fieldPath)}function MI(n){return n instanceof Be?function(e){if(e.op==="=="){if(IS(e.value))return{unaryFilter:{field:Kr(e.field),op:"IS_NAN"}};if(RS(e.value))return{unaryFilter:{field:Kr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(IS(e.value))return{unaryFilter:{field:Kr(e.field),op:"IS_NOT_NAN"}};if(RS(e.value))return{unaryFilter:{field:Kr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kr(e.field),op:H3(e.op),value:e.value}}}(n):n instanceof Vi?function(e){const i=e.getFilters().map(s=>MI(s));return i.length===1?i[0]:{compositeFilter:{op:q3(e.op),filters:i}}}(n):At(54877,{filter:n})}function W3(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function OI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,e,i,s,a=Nt.min(),l=Nt.min(),u=En.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(t){return new Xr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(t){this.yt=t}}function Y3(n){const t=F3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Km(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.Cn=new Q3}addToCollectionParentIndex(t,e){return this.Cn.add(e),ot.resolve()}getCollectionParents(t,e){return ot.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return ot.resolve()}deleteFieldIndex(t,e){return ot.resolve()}deleteAllFieldIndexes(t){return ot.resolve()}createTargetIndexes(t,e){return ot.resolve()}getDocumentsMatchingTarget(t,e){return ot.resolve(null)}getIndexType(t,e){return ot.resolve(0)}getFieldIndexes(t,e){return ot.resolve([])}getNextCollectionGroupToUpdate(t){return ot.resolve(null)}getMinOffset(t,e){return ot.resolve(fa.min())}getMinOffsetFromCollectionGroup(t,e){return ot.resolve(fa.min())}updateCollectionGroup(t,e,i){return ot.resolve()}updateIndexEntries(t,e){return ot.resolve()}}class Q3{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new tn(ye.comparator),a=!s.has(i);return this.index[e]=s.add(i),a}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new tn(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PI=41943040;class Fn{static withCacheSize(t){return new Fn(t,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(PI,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new uc(0)}static cr(){return new uc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="LruGarbageCollector",K3=1048576;function WS([n,t],[e,i]){const s=Ft(n,e);return s===0?Ft(t,i):s}class X3{constructor(t){this.Ir=t,this.buffer=new tn(WS),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();WS(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Z3{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){gt(qS,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ac(e)?gt(qS,"Ignoring IndexedDB error during garbage collection: ",e):await Sc(e)}await this.Vr(3e5)})}}class J3{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return ot.resolve(Bg.ce);const i=new X3(e);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(HS)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HS):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,s,a,l,u,d,f;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(t,s))).next(y=>(i=y,u=Date.now(),this.removeTargets(t,i,e))).next(y=>(a=y,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(y=>(f=Date.now(),Hl()<=Vt.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function tj(n,t){return new J3(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.changes=new Bo(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,In.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?ot.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&_h(i.mutation,s,si.empty(),be.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,zt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=zt()){const s=Eo();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(a=>{let l=rh();return a.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=Eo();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,zt()))}populateOverlays(t,e,i){const s=[];return i.forEach(a=>{e.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(t,s).next(a=>{a.forEach((l,u)=>{e.set(l,u)})})}computeViews(t,e,i,s){let a=cr();const l=ph(),u=function(){return ph()}();return e.forEach((d,f)=>{const p=i.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Aa)?a=a.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),_h(p.mutation,f,p.mutation.getFieldMask(),be.now())):l.set(f.key,si.empty())}),this.recalculateAndSaveOverlays(t,a).next(d=>(d.forEach((f,p)=>l.set(f,p)),e.forEach((f,p)=>u.set(f,new nj(p,l.get(f)??null))),u))}recalculateAndSaveOverlays(t,e){const i=ph();let s=new Ge((l,u)=>l-u),a=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const u of l)u.keys().forEach(d=>{const f=e.get(d);if(f===null)return;let p=i.get(d)||si.empty();p=u.applyToLocalView(f,p),i.set(d,p);const y=(s.get(u.batchId)||zt()).add(d);s=s.insert(u.batchId,y)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,p=d.value,y=fI();p.forEach(v=>{if(!a.has(v)){const T=EI(e.get(v),i.get(v));T!==null&&y.set(v,T),a=a.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(t,f,y))}return ot.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(l){return vt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):oI(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-a.size):ot.resolve(Eo());let u=Dh,d=a;return l.next(f=>ot.forEach(f,(p,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(p)?ot.resolve():this.remoteDocumentCache.getEntry(t,p).next(v=>{d=d.insert(p,v)}))).next(()=>this.populateOverlays(t,f,a)).next(()=>this.computeViews(t,d,f,zt())).next(p=>({batchId:u,changes:dI(p)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new vt(e)).next(i=>{let s=rh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const a=e.collectionGroup;let l=rh();return this.indexManager.getCollectionParents(t,a).next(u=>ot.forEach(u,d=>{const f=function(y,v){return new Cc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(e,d.child(a));return this.getDocumentsMatchingCollectionQuery(t,f,i,s).next(p=>{p.forEach((y,v)=>{l=l.insert(y,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,e,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,a,s))).next(l=>{a.forEach((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,In.newInvalidDocument(p)))});let u=rh();return l.forEach((d,f)=>{const p=a.get(d);p!==void 0&&_h(p.mutation,f,si.empty(),be.now()),Gg(e,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return ot.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:hs(s.createTime)}}(e)),ot.resolve()}getNamedQuery(t,e){return ot.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(s){return{name:s.name,query:Y3(s.bundledQuery),readTime:hs(s.readTime)}}(e)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.overlays=new Ge(vt.comparator),this.qr=new Map}getOverlay(t,e){return ot.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Eo();return ot.forEach(e,s=>this.getOverlay(t,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,a)=>{this.St(t,e,a)}),ot.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(i)),ot.resolve()}getOverlaysForCollection(t,e,i){const s=Eo(),a=e.length+1,l=new vt(e.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return ot.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let a=new Ge((f,p)=>f-p);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>i){let p=a.get(f.largestBatchId);p===null&&(p=Eo(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=Eo(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=s)););return ot.resolve(u)}St(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new w3(e,i));let a=this.qr.get(e);a===void 0&&(a=zt(),this.qr.set(e,a)),this.qr.set(e,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(t){return ot.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.Qr=new tn(cn.$r),this.Ur=new tn(cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new cn(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Gr(new cn(t,e))}zr(t,e){t.forEach(i=>this.removeReference(i,e))}jr(t){const e=new vt(new ye([])),i=new cn(e,t),s=new cn(e,t+1),a=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),a.push(l.key)}),a}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new vt(new ye([])),i=new cn(e,t),s=new cn(e,t+1);let a=zt();return this.Ur.forEachInRange([i,s],l=>{a=a.add(l.key)}),a}containsKey(t){const e=new cn(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class cn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return vt.comparator(t.key,e.key)||Ft(t.Yr,e.Yr)}static Kr(t,e){return Ft(t.Yr,e.Yr)||vt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new tn(cn.$r)}checkEmpty(t){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new E3(a,e,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new cn(u.key,a)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return ot.resolve(l)}lookupMutationBatch(t,e){return ot.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.ei(i),a=s<0?0:s;return ot.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?Cv:this.tr-1)}getAllMutationBatches(t){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new cn(e,0),s=new cn(e,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],l=>{const u=this.Xr(l.Yr);a.push(u)}),ot.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new tn(Ft);return e.forEach(s=>{const a=new cn(s,0),l=new cn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],u=>{i=i.add(u.Yr)})}),ot.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let a=i;vt.isDocumentKey(a)||(a=a.child(""));const l=new cn(new vt(a),0);let u=new tn(Ft);return this.Zr.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)},l),ot.resolve(this.ti(u))}ti(t){const e=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){Zt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ot.forEach(e.mutations,s=>{const a=new cn(s.key,e.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,e){const i=new cn(e,0),s=this.Zr.firstAfterOrEqual(i);return ot.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,ot.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(t){this.ri=t,this.docs=function(){return new Ge(vt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),a=s?s.size:0,l=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ot.resolve(i?i.document.mutableCopy():In.newInvalidDocument(e))}getEntries(t,e){let i=cr();return e.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():In.newInvalidDocument(s))}),ot.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let a=cr();const l=e.path,u=new vt(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||LV(PV(p),i)<=0||(s.has(p.key)||Gg(e,p))&&(a=a.insert(p.key,p.mutableCopy()))}return ot.resolve(a)}getAllFromCollectionGroup(t,e,i,s){At(9500)}ii(t,e){return ot.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new cj(this)}getSize(t){return ot.resolve(this.size)}}class cj extends ej{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),ot.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(t){this.persistence=t,this.si=new Bo(e=>Nv(e),kv),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.oi=0,this._i=new Vv,this.targetCount=0,this.ai=uc.ur()}forEachTarget(t,e){return this.si.forEach((i,s)=>e(s)),ot.resolve()}getLastRemoteSnapshotVersion(t){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ot.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),ot.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new uc(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,ot.resolve()}updateTargetData(t,e){return this.Pr(e),ot.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,ot.resolve()}removeTargets(t,e,i){let s=0;const a=[];return this.si.forEach((l,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(t,u.targetId)),s++)}),ot.waitFor(a).next(()=>s)}getTargetCount(t){return ot.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return ot.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),ot.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const s=this.persistence.referenceDelegate,a=[];return s&&e.forEach(l=>{a.push(s.markPotentiallyOrphaned(t,l))}),ot.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),ot.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return ot.resolve(i)}containsKey(t,e){return ot.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,e){this.ui={},this.overlays={},this.ci=new Bg(0),this.li=!1,this.li=!0,this.hi=new aj,this.referenceDelegate=t(this),this.Pi=new uj(this),this.indexManager=new $3,this.remoteDocumentCache=function(s){return new lj(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new G3(e),this.Ii=new sj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new rj,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new oj(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){gt("MemoryPersistence","Starting transaction:",t);const s=new hj(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(t,e){return ot.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,e)))}}class hj extends jV{constructor(t){super(),this.currentSequenceNumber=t}}class jv{constructor(t){this.persistence=t,this.Ri=new Vv,this.Vi=null}static mi(t){return new jv(t)}get fi(){if(this.Vi)return this.Vi;throw At(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),ot.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),ot.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),ot.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>i.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.fi,i=>{const s=vt.fromPath(i);return this.gi(t,s).next(a=>{a||e.removeEntry(s,Nt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return ot.or([()=>ot.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Zm{constructor(t,e){this.persistence=t,this.pi=new Bo(i=>zV(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=tj(this,e)}static mi(t,e){return new Zm(t,e)}Ei(){}di(t){return ot.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}pr(t,e){return ot.forEach(this.pi,(i,s)=>this.br(t,i,s).next(a=>a?ot.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(t,l=>this.br(t,l,e).next(u=>{u||(i++,a.removeEntry(l,Nt.min()))})).next(()=>a.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),ot.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),ot.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),ot.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),ot.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=xm(t.data.value)),e}br(t,e,i){return ot.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return ot.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=s}static As(t,e){let i=zt(),s=zt();for(const a of e.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Uv(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return LO()?8:UV(kn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,s){const a={result:null};return this.ys(t,e).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ws(t,e,s,i).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new dj;return this.Ss(t,e,l).next(u=>{if(a.result=u,this.Vs)return this.bs(t,e,l,u.size)})}).next(()=>a.result)}bs(t,e,i,s){return i.documentReadCount<this.fs?(Hl()<=Vt.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",ql(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ot.resolve()):(Hl()<=Vt.DEBUG&&gt("QueryEngine","Query:",ql(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Hl()<=Vt.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",ql(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,cs(e))):ot.resolve())}ys(t,e){if(MS(e))return ot.resolve(null);let i=cs(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=Km(e,null,"F"),i=cs(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(a=>{const l=zt(...a);return this.ps.getDocuments(t,l).next(u=>this.indexManager.getMinOffset(t,i).next(d=>{const f=this.Ds(e,u);return this.Cs(e,f,l,d.readTime)?this.ys(t,Km(e,null,"F")):this.vs(t,f,e,d)}))})))}ws(t,e,i,s){return MS(e)||s.isEqual(Nt.min())?ot.resolve(null):this.ps.getDocuments(t,i).next(a=>{const l=this.Ds(e,a);return this.Cs(e,l,i,s)?ot.resolve(null):(Hl()<=Vt.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ql(e)),this.vs(t,l,e,OV(s,Dh)).next(u=>u))})}Ds(t,e){let i=new tn(uI(t));return e.forEach((s,a)=>{Gg(t,a)&&(i=i.add(a))}),i}Cs(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(t,e,i){return Hl()<=Vt.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",ql(e)),this.ps.getDocumentsMatchingQuery(t,e,fa.min(),i)}vs(t,e,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(a=>(e.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="LocalStore",mj=3e8;class gj{constructor(t,e,i,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new Ge(Ft),this.xs=new Bo(a=>Nv(a),kv),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ij(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function pj(n,t,e,i){return new gj(n,t,e,i)}async function VI(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(a=>{const l=[],u=[];let d=zt();for(const f of s){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return e.localDocuments.getDocuments(i,d).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:u}))})})}function _j(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),a=e.Ns.newChangeBuffer({trackRemovals:!0});return function(u,d,f,p){const y=f.batch,v=y.keys();let T=ot.resolve();return v.forEach(S=>{T=T.next(()=>p.getEntry(d,S)).next(N=>{const C=f.docVersions.get(S);Zt(C!==null,48541),N.version.compareTo(C)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),p.addEntry(N)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(e,i,t,a).next(()=>a.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=zt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function jI(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function yj(n,t){const e=It(n),i=t.snapshotVersion;let s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;const u=[];t.targetChanges.forEach((p,y)=>{const v=s.get(y);if(!v)return;u.push(e.Pi.removeMatchingKeys(a,p.removedDocuments,y).next(()=>e.Pi.addMatchingKeys(a,p.addedDocuments,y)));let T=v.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(y)!==null?T=T.withResumeToken(En.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,i)),s=s.insert(y,T),function(N,C,L){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=mj?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(v,T,p)&&u.push(e.Pi.updateTargetData(a,T))});let d=cr(),f=zt();if(t.documentUpdates.forEach(p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(vj(a,l,t.documentUpdates).next(p=>{d=p.ks,f=p.qs})),!i.isEqual(Nt.min())){const p=e.Pi.getLastRemoteSnapshotVersion(a).next(y=>e.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i));u.push(p)}return ot.waitFor(u).next(()=>l.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,d,f)).next(()=>d)}).then(a=>(e.Ms=s,a))}function vj(n,t,e){let i=zt(),s=zt();return e.forEach(a=>i=i.add(a)),t.getEntries(n,i).next(a=>{let l=cr();return e.forEach((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Nt.min())?(t.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(d),l=l.insert(u,d)):gt(Fv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{ks:l,qs:s}})}function bj(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Cv),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Ej(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.Pi.getTargetData(i,t).next(a=>a?(s=a,ot.resolve(s)):e.Pi.allocateTargetId(i).next(l=>(s=new Xr(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i})}async function I0(n,t,e){const i=It(n),s=i.Ms.get(t),a=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",a,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ac(l))throw l;gt(Fv,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function GS(n,t,e){const i=It(n);let s=Nt.min(),a=zt();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,p){const y=It(d),v=y.xs.get(p);return v!==void 0?ot.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,p)}(i,l,cs(t)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next(d=>{a=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,t,e?s:Nt.min(),e?a:zt())).next(u=>(wj(i,o3(t),u),{documents:u,Qs:a})))}function wj(n,t,e){let i=n.Os.get(t)||Nt.min();e.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Os.set(t,i)}class YS{constructor(){this.activeTargetIds=f3()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xj{constructor(){this.Mo=new YS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new YS,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="ConnectivityMonitor";class QS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){gt($S,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){gt($S,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf=null;function N0(){return Zf===null?Zf=function(){return 268435456+Math.round(2147483648*Math.random())}():Zf++,"0x"+Zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="RestConnection",Sj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Aj{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Ym?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,e,i,s,a){const l=N0(),u=this.zo(t,e.toUriEncodedString());gt(Py,`Sending RPC '${t}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,a);const{host:f}=new URL(u),p=xa(f);return this.Jo(t,u,d,i,p).then(y=>(gt(Py,`Received RPC '${t}' ${l}: `,y),y),y=>{throw ac(Py,`RPC '${t}' ${l} failed with error: `,y,"url: ",u,"request:",i),y})}Ho(t,e,i,s,a,l){return this.Go(t,e,i,s,a)}jo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}zo(t,e){const i=Sj[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class Rj extends Aj{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,s,a){const l=N0();return new Promise((u,d)=>{const f=new LR;f.setWithCredentials(!0),f.listenOnce(VR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case wm.NO_ERROR:const y=f.getResponseJson();gt(An,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(y)),u(y);break;case wm.TIMEOUT:gt(An,`RPC '${t}' ${l} timed out`),d(new mt(st.DEADLINE_EXCEEDED,"Request time out"));break;case wm.HTTP_ERROR:const v=f.getStatus();if(gt(An,`RPC '${t}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T?.error;if(S&&S.status&&S.message){const N=function(L){const W=L.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(W)>=0?W:st.UNKNOWN}(S.status);d(new mt(N,S.message))}else d(new mt(st.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new mt(st.UNAVAILABLE,"Connection failed."));break;default:At(9055,{l_:t,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{gt(An,`RPC '${t}' ${l} completed.`)}});const p=JSON.stringify(s);gt(An,`RPC '${t}' ${l} sending request:`,s),f.send(e,"POST",p,i,15)})}T_(t,e,i){const s=N0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=FR(),u=UR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const p=a.join("");gt(An,`Creating RPC '${t}' stream ${s}: ${p}`,d);const y=l.createWebChannel(p,d);this.I_(y);let v=!1,T=!1;const S=new Cj({Yo:C=>{T?gt(An,`Not sending because RPC '${t}' stream ${s} is closed:`,C):(v||(gt(An,`Opening RPC '${t}' stream ${s} transport.`),y.open(),v=!0),gt(An,`RPC '${t}' stream ${s} sending:`,C),y.send(C))},Zo:()=>y.close()}),N=(C,L,W)=>{C.listen(L,$=>{try{W($)}catch(Z){setTimeout(()=>{throw Z},0)}})};return N(y,sh.EventType.OPEN,()=>{T||(gt(An,`RPC '${t}' stream ${s} transport opened.`),S.o_())}),N(y,sh.EventType.CLOSE,()=>{T||(T=!0,gt(An,`RPC '${t}' stream ${s} transport closed`),S.a_(),this.E_(y))}),N(y,sh.EventType.ERROR,C=>{T||(T=!0,ac(An,`RPC '${t}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),S.a_(new mt(st.UNAVAILABLE,"The operation could not be completed")))}),N(y,sh.EventType.MESSAGE,C=>{if(!T){const L=C.data[0];Zt(!!L,16349);const W=L,$=W?.error||W[0]?.error;if($){gt(An,`RPC '${t}' stream ${s} received error:`,$);const Z=$.status;let H=function(I){const k=ze[I];if(k!==void 0)return TI(k)}(Z),lt=$.message;H===void 0&&(H=st.INTERNAL,lt="Unknown error status: "+Z+" with message "+$.message),T=!0,S.a_(new mt(H,lt)),y.close()}else gt(An,`RPC '${t}' stream ${s} received:`,L),S.u_(L)}}),N(u,jR.STAT_EVENT,C=>{C.stat===_0.PROXY?gt(An,`RPC '${t}' stream ${s} detected buffering proxy`):C.stat===_0.NOPROXY&&gt(An,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function Ly(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(n){return new D3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,e,i=1e3,s=1.5,a=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-i);s>0&&gt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="PersistentStream";class FI{constructor(t,e,i,s,a,l,u,d){this.Mi=t,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UI(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===st.RESOURCE_EXHAUSTED?(lr(e.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===e&&this.G_(i,s)},i=>{t(()=>{const s=new mt(st.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return gt(KS,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(gt(KS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ij extends FI{constructor(t,e,i,s,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,l),this.serializer=a}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=P3(this.serializer,t),i=function(a){if(!("targetChange"in a))return Nt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Nt.min():l.readTime?hs(l.readTime):Nt.min()}(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=R0(this.serializer),e.addTarget=function(a,l){let u;const d=l.target;if(u=x0(d)?{documents:j3(a,d)}:{query:kI(a,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=CI(a,l.resumeToken);const f=S0(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Nt.min())>0){u.readTime=Xm(a,l.snapshotVersion.toTimestamp());const f=S0(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,t);const i=z3(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=R0(this.serializer),e.removeTarget=t,this.q_(e)}}class Nj extends FI{constructor(t,e,i,s,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=V3(t.writeResults,t.commitTime),i=hs(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=R0(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>L3(this.serializer,i))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{}class Dj extends kj{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new mt(st.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Go(t,A0(e,i),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new mt(st.UNKNOWN,a.toString())})}Ho(t,e,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Ho(t,A0(e,i),s,l,u,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new mt(st.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Mj{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lr(e),this.aa=!1):gt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="RemoteStore";class Oj{constructor(t,e,i,s,a){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Ho(this)&&(gt(Mo,"Restarting streams for network reachability change."),await async function(d){const f=It(d);f.Ea.add(4),await dd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Xg(f)}(this))})}),this.Ra=new Mj(i,s)}}async function Xg(n){if(Ho(n))for(const t of n.da)await t(!0)}async function dd(n){for(const t of n.da)await t(!1)}function zI(n,t){const e=It(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),qv(e)?Hv(e):Rc(e).O_()&&Bv(e,t))}function zv(n,t){const e=It(n),i=Rc(e);e.Ia.delete(t),i.O_()&&BI(e,t),e.Ia.size===0&&(i.O_()?i.L_():Ho(e)&&e.Ra.set("Unknown"))}function Bv(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Rc(n).Y_(t)}function BI(n,t){n.Va.Ue(t),Rc(n).Z_(t)}function Hv(n){n.Va=new R3({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Rc(n).start(),n.Ra.ua()}function qv(n){return Ho(n)&&!Rc(n).x_()&&n.Ia.size>0}function Ho(n){return It(n).Ea.size===0}function HI(n){n.Va=void 0}async function Pj(n){n.Ra.set("Online")}async function Lj(n){n.Ia.forEach((t,e)=>{Bv(n,t)})}async function Vj(n,t){HI(n),qv(n)?(n.Ra.ha(t),Hv(n)):n.Ra.set("Unknown")}async function jj(n,t,e){if(n.Ra.set("Online"),t instanceof AI&&t.state===2&&t.cause)try{await async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))}(n,t)}catch(i){gt(Mo,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Jm(n,i)}else if(t instanceof Am?n.Va.Ze(t):t instanceof SI?n.Va.st(t):n.Va.tt(t),!e.isEqual(Nt.min()))try{const i=await jI(n.localStore);e.compareTo(i)>=0&&await function(a,l){const u=a.Va.Tt(l);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,f)=>{const p=a.Ia.get(d);if(!p)return;a.Ia.set(d,p.withResumeToken(En.EMPTY_BYTE_STRING,p.snapshotVersion)),BI(a,d);const y=new Xr(p.target,d,f,p.sequenceNumber);Bv(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(n,e)}catch(i){gt(Mo,"Failed to raise snapshot:",i),await Jm(n,i)}}async function Jm(n,t,e){if(!Ac(t))throw t;n.Ea.add(1),await dd(n),n.Ra.set("Offline"),e||(e=()=>jI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{gt(Mo,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Xg(n)})}function qI(n,t){return t().catch(e=>Jm(n,e,t))}async function Zg(n){const t=It(n),e=_a(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Cv;for(;Uj(t);)try{const s=await bj(t.localStore,i);if(s===null){t.Ta.length===0&&e.L_();break}i=s.batchId,Fj(t,s)}catch(s){await Jm(t,s)}WI(t)&&GI(t)}function Uj(n){return Ho(n)&&n.Ta.length<10}function Fj(n,t){n.Ta.push(t);const e=_a(n);e.O_()&&e.X_&&e.ea(t.mutations)}function WI(n){return Ho(n)&&!_a(n).x_()&&n.Ta.length>0}function GI(n){_a(n).start()}async function zj(n){_a(n).ra()}async function Bj(n){const t=_a(n);for(const e of n.Ta)t.ea(e.mutations)}async function Hj(n,t,e){const i=n.Ta.shift(),s=Ov.from(i,t,e);await qI(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Zg(n)}async function qj(n,t){t&&_a(n).X_&&await async function(i,s){if(function(l){return S3(l)&&l!==st.ABORTED}(s.code)){const a=i.Ta.shift();_a(i).B_(),await qI(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Zg(i)}}(n,t),WI(n)&&GI(n)}async function XS(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),gt(Mo,"RemoteStore received new credentials");const i=Ho(e);e.Ea.add(3),await dd(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Xg(e)}async function Wj(n,t){const e=It(n);t?(e.Ea.delete(2),await Xg(e)):t||(e.Ea.add(2),await dd(e),e.Ra.set("Unknown"))}function Rc(n){return n.ma||(n.ma=function(e,i,s){const a=It(e);return a.sa(),new Ij(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:Pj.bind(null,n),t_:Lj.bind(null,n),r_:Vj.bind(null,n),H_:jj.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),qv(n)?Hv(n):n.Ra.set("Unknown")):(await n.ma.stop(),HI(n))})),n.ma}function _a(n){return n.fa||(n.fa=function(e,i,s){const a=It(e);return a.sa(),new Nj(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:zj.bind(null,n),r_:qj.bind(null,n),ta:Bj.bind(null,n),na:Hj.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Zg(n)):(await n.fa.stop(),n.Ta.length>0&&(gt(Mo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t,e,i,s,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,a){const l=Date.now()+i,u=new Wv(t,e,l,s,a);return u.start(i),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(st.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gv(n,t){if(lr("AsyncQueue",`${t}: ${n}`),Ac(n))return new mt(st.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{static emptySet(t){return new Zl(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||vt.comparator(e.key,i.key):(e,i)=>vt.comparator(e.key,i.key),this.keyedMap=rh(),this.sortedSet=new Ge(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Zl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Zl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.ga=new Ge(vt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):At(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,i)=>{t.push(i)}),t}}class hc{constructor(t,e,i,s,a,l,u,d,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(t,e,i,s,a){const l=[];return e.forEach(u=>{l.push({type:0,doc:u})}),new hc(t,e,Zl.emptySet(e),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Wg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Yj{constructor(){this.queries=JS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const s=It(e),a=s.queries;s.queries=JS(),a.forEach((l,u)=>{for(const d of u.Sa)d.onError(i)})})(this,new mt(st.ABORTED,"Firestore shutting down"))}}function JS(){return new Bo(n=>cI(n),Wg)}async function $j(n,t){const e=It(n);let i=3;const s=t.query;let a=e.queries.get(s);a?!a.ba()&&t.Da()&&(i=2):(a=new Gj,i=t.Da()?0:1);try{switch(i){case 0:a.wa=await e.onListen(s,!0);break;case 1:a.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(l){const u=Gv(l,`Initialization of query '${ql(t.query)}' failed`);return void t.onError(u)}e.queries.set(s,a),a.Sa.push(t),t.va(e.onlineState),a.wa&&t.Fa(a.wa)&&Yv(e)}async function Qj(n,t){const e=It(n),i=t.query;let s=3;const a=e.queries.get(i);if(a){const l=a.Sa.indexOf(t);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=t.Da()?0:1:!a.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function Kj(n,t){const e=It(n);let i=!1;for(const s of t){const a=s.query,l=e.queries.get(a);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&Yv(e)}function Xj(n,t,e){const i=It(n),s=i.queries.get(t);if(s)for(const a of s.Sa)a.onError(e);i.queries.delete(t)}function Yv(n){n.Ca.forEach(t=>{t.next()})}var k0,t1;(t1=k0||(k0={})).Ma="default",t1.Cache="cache";class Zj{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new hc(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=hc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==k0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t){this.key=t}}class $I{constructor(t){this.key=t}}class Jj{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=zt(),this.mutatedKeys=zt(),this.eu=uI(t),this.tu=new Zl(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new ZS,s=e?e.tu:this.tu;let a=e?e.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((p,y)=>{const v=s.get(p),T=Gg(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;v&&T?v.data.isEqual(T.data)?S!==N&&(i.track({type:3,doc:T}),C=!0):this.su(v,T)||(i.track({type:2,doc:T}),C=!0,(d&&this.eu(T,d)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),C=!0):v&&!T&&(i.track({type:1,doc:v}),C=!0,(d||f)&&(u=!0)),C&&(T?(l=l.add(T),a=N?a.add(p):a.delete(p)):(l=l.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),a=a.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:u,mutatedKeys:a}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort((p,y)=>function(T,S){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At(20277,{Rt:C})}};return N(T)-N(S)}(p.type,y.type)||this.eu(p.doc,y.doc)),this.ou(i),s=s??!1;const u=e&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new hc(this.query,t.tu,a,l,t.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=zt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const e=[];return t.forEach(i=>{this.Xa.has(i)||e.push(new $I(i))}),this.Xa.forEach(i=>{t.has(i)||e.push(new YI(i))}),e}cu(t){this.Ya=t.Qs,this.Xa=zt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return hc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $v="SyncEngine";class t6{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class e6{constructor(t){this.key=t,this.hu=!1}}class n6{constructor(t,e,i,s,a,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Bo(u=>cI(u),Wg),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(vt.comparator),this.Au=new Map,this.Ru=new Vv,this.Vu={},this.mu=new Map,this.fu=uc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function i6(n,t,e=!0){const i=t2(n);let s;const a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await QI(i,t,e,!0),s}async function s6(n,t){const e=t2(n);await QI(e,t,!0,!1)}async function QI(n,t,e,i){const s=await Ej(n.localStore,cs(t)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,e);let u;return i&&(u=await r6(n,t,a,l==="current",s.resumeToken)),n.isPrimaryClient&&e&&zI(n.remoteStore,s),u}async function r6(n,t,e,i,s){n.pu=(y,v,T)=>async function(N,C,L,W){let $=C.view.ru(L);$.Cs&&($=await GS(N.localStore,C.query,!1).then(({documents:D})=>C.view.ru(D,$)));const Z=W&&W.targetChanges.get(C.targetId),H=W&&W.targetMismatches.get(C.targetId)!=null,lt=C.view.applyChanges($,N.isPrimaryClient,Z,H);return n1(N,C.targetId,lt.au),lt.snapshot}(n,y,v,T);const a=await GS(n.localStore,t,!0),l=new Jj(t,a.Qs),u=l.ru(a.documents),d=hd.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,d);n1(n,e,f.au);const p=new t6(t,e,l);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),f.snapshot}async function a6(n,t,e){const i=It(n),s=i.Tu.get(t),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter(l=>!Wg(l,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await I0(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&zv(i.remoteStore,s.targetId),D0(i,s.targetId)}).catch(Sc)):(D0(i,s.targetId),await I0(i.localStore,s.targetId,!0))}async function o6(n,t){const e=It(n),i=e.Tu.get(t),s=e.Iu.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),zv(e.remoteStore,i.targetId))}async function l6(n,t,e){const i=g6(n);try{const s=await function(l,u){const d=It(l),f=be.now(),p=u.reduce((T,S)=>T.add(S.key),zt());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=cr(),N=zt();return d.Ns.getEntries(T,p).next(C=>{S=C,S.forEach((L,W)=>{W.isValidDocument()||(N=N.add(L))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,S)).next(C=>{y=C;const L=[];for(const W of u){const $=v3(W,y.get(W.key).overlayedDocument);$!=null&&L.push(new Aa(W.key,$,tI($.value.mapValue),us.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,L,u)}).next(C=>{v=C;const L=C.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(T,C.batchId,L)})}).then(()=>({batchId:v.batchId,changes:dI(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new Ge(Ft)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f}(i,s.batchId,e),await fd(i,s.changes),await Zg(i.remoteStore)}catch(s){const a=Gv(s,"Failed to persist write");e.reject(a)}}async function KI(n,t){const e=It(n);try{const i=await yj(e.localStore,t);t.targetChanges.forEach((s,a)=>{const l=e.Au.get(a);l&&(Zt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Zt(l.hu,14607):s.removedDocuments.size>0&&(Zt(l.hu,42227),l.hu=!1))}),await fd(e,i,t)}catch(i){await Sc(i)}}function e1(n,t,e){const i=It(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.Tu.forEach((a,l)=>{const u=l.view.va(t);u.snapshot&&s.push(u.snapshot)}),function(l,u){const d=It(l);d.onlineState=u;let f=!1;d.queries.forEach((p,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)}),f&&Yv(d)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function c6(n,t,e){const i=It(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Au.get(t),a=s&&s.key;if(a){let l=new Ge(vt.comparator);l=l.insert(a,In.newNoDocument(a,Nt.min()));const u=zt().add(a),d=new Qg(Nt.min(),new Map,new Ge(Ft),l,u);await KI(i,d),i.du=i.du.remove(a),i.Au.delete(t),Qv(i)}else await I0(i.localStore,t,!1).then(()=>D0(i,t,e)).catch(Sc)}async function u6(n,t){const e=It(n),i=t.batch.batchId;try{const s=await _j(e.localStore,t);ZI(e,i,null),XI(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await fd(e,s)}catch(s){await Sc(s)}}async function h6(n,t,e){const i=It(n);try{const s=await function(l,u){const d=It(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Zt(y!==null,37113),p=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(i.localStore,t);ZI(i,t,e),XI(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await fd(i,s)}catch(s){await Sc(s)}}function XI(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function ZI(n,t,e){const i=It(n);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(t);a&&(e?a.reject(e):a.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function D0(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(i=>{n.Ru.containsKey(i)||JI(n,i)})}function JI(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(zv(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),Qv(n))}function n1(n,t,e){for(const i of e)i instanceof YI?(n.Ru.addReference(i.key,t),d6(n,i)):i instanceof $I?(gt($v,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||JI(n,i.key)):At(19791,{wu:i})}function d6(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(gt($v,"New document in limbo: "+e),n.Eu.add(i),Qv(n))}function Qv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new vt(ye.fromString(t)),i=n.fu.next();n.Au.set(i,new e6(e)),n.du=n.du.insert(e,i),zI(n.remoteStore,new Xr(cs(Dv(e.path)),i,"TargetPurposeLimboResolution",Bg.ce))}}async function fd(n,t,e){const i=It(n),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((u,d)=>{l.push(i.pu(d,t,e).then(f=>{if((f||e)&&i.isPrimaryClient){const p=f?!f.fromCache:e?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){s.push(f);const p=Uv.As(d.targetId,f);a.push(p)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(d,f){const p=It(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ot.forEach(f,v=>ot.forEach(v.Es,T=>p.persistence.referenceDelegate.addReference(y,v.targetId,T)).next(()=>ot.forEach(v.ds,T=>p.persistence.referenceDelegate.removeReference(y,v.targetId,T)))))}catch(y){if(!Ac(y))throw y;gt(Fv,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const T=p.Ms.get(v),S=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(S);p.Ms=p.Ms.insert(v,N)}}}(i.localStore,a))}async function f6(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){gt($v,"User change. New user:",t.toKey());const i=await VI(e.localStore,t);e.currentUser=t,function(a,l){a.mu.forEach(u=>{u.forEach(d=>{d.reject(new mt(st.CANCELLED,l))})}),a.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await fd(e,i.Ls)}}function m6(n,t){const e=It(n),i=e.Au.get(t);if(i&&i.hu)return zt().add(i.key);{let s=zt();const a=e.Iu.get(t);if(!a)return s;for(const l of a){const u=e.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function t2(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=KI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=m6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=c6.bind(null,t),t.Pu.H_=Kj.bind(null,t.eventManager),t.Pu.yu=Xj.bind(null,t.eventManager),t}function g6(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=u6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=h6.bind(null,t),t}class tg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kg(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return pj(this.persistence,new fj,t.initialUser,this.serializer)}Cu(t){return new LI(jv.mi,this.serializer)}Du(t){return new xj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tg.provider={build:()=>new tg};class p6 extends tg{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Zt(this.persistence.referenceDelegate instanceof Zm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Z3(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new LI(i=>Zm.mi(i,e),this.serializer)}}class M0{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>e1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=f6.bind(null,this.syncEngine),await Wj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Yj}()}createDatastore(t){const e=Kg(t.databaseInfo.databaseId),i=function(a){return new Rj(a)}(t.databaseInfo);return function(a,l,u,d){return new Dj(a,l,u,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,a,l,u){return new Oj(i,s,a,l,u)}(this.localStore,this.datastore,t.asyncQueue,e=>e1(this.syncEngine,e,0),function(){return QS.v()?new QS:new Tj}())}createSyncEngine(t,e){return function(s,a,l,u,d,f,p){const y=new n6(s,a,l,u,d,f);return p&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await async function(e){const i=It(e);gt(Mo,"RemoteStore shutting down."),i.Ea.add(5),await dd(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}M0.provider={build:()=>new M0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):lr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="FirestoreClient";class y6{constructor(t,e,i,s,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=Av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async l=>{gt(ya,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(gt(ya,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Gv(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Vy(n,t){n.asyncQueue.verifyOperationInProgress(),gt(ya,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await VI(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function i1(n,t){n.asyncQueue.verifyOperationInProgress();const e=await v6(n);gt(ya,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>XS(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>XS(t.remoteStore,s)),n._onlineComponents=t}async function v6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){gt(ya,"Using user provided OfflineComponentProvider");try{await Vy(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===st.FAILED_PRECONDITION||s.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;ac("Error using user provided cache. Falling back to memory cache: "+e),await Vy(n,new tg)}}else gt(ya,"Using default OfflineComponentProvider"),await Vy(n,new p6(void 0));return n._offlineComponents}async function Kv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(gt(ya,"Using user provided OnlineComponentProvider"),await i1(n,n._uninitializedComponentsProvider._online)):(gt(ya,"Using default OnlineComponentProvider"),await i1(n,new M0))),n._onlineComponents}function b6(n){return Kv(n).then(t=>t.syncEngine)}function E6(n){return Kv(n).then(t=>t.datastore)}async function s1(n){const t=await Kv(n),e=t.eventManager;return e.onListen=i6.bind(null,t.syncEngine),e.onUnlisten=a6.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=s6.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=o6.bind(null,t.syncEngine),e}function w6(n,t,e){const i=new ra;return n.asyncQueue.enqueueAndForget(async()=>{try{const s=await E6(n);i.resolve(async function(l,u,d){const f=It(l),{request:p,gt:y,parent:v}=U3(f.serializer,a3(u),d);f.connection.$o||delete p.parent;const T=(await f.Ho("RunAggregationQuery",f.serializer.databaseId,v,p,1)).filter(N=>!!N.result);Zt(T.length===1,64727);const S=T[0].result?.aggregateFields;return Object.keys(S).reduce((N,C)=>(N[y[C]]=S[C],N),{})}(s,t,e))}catch(s){i.reject(s)}}),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="firestore.googleapis.com",a1=!0;class o1{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new mt(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=n2,this.ssl=a1}else this.host=t.host,this.ssl=t.ssl??a1;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=PI;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<K3)throw new mt(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}DV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e2(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jg{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o1(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wV;switch(i.type){case"firstParty":return new AV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new mt(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=r1.get(e);i&&(gt("ComponentProvider","Removing Datastore"),r1.delete(e),i.terminate())}(this),Promise.resolve()}}function x6(n,t,e,i={}){n=aa(n,Jg);const s=xa(t),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},u=`${t}:${e}`;s&&(cv(`https://${u}`),uv("Firestore",!0)),a.host!==n2&&a.host!==u&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...a,host:u,ssl:s,emulatorOptions:i};if(!ha(d,l)&&(n._setSettings(d),i.mockUserToken)){let f,p;if(typeof i.mockUserToken=="string")f=i.mockUserToken,p=Rn.MOCK_USER;else{f=GC(i.mockUserToken,n._app?.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new mt(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Rn(y)}n._authCredentials=new xV(new BR(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ca(this.firestore,t,this._query)}}class qe{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qe(this.firestore,t,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(cd(e,qe._jsonSchema))return new qe(t,i||null,new vt(ye.fromString(e.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:He("string",qe._jsonSchemaVersion),referencePath:He("string")};class la extends Ca{constructor(t,e,i){super(t,e,Dv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qe(this.firestore,null,new vt(t))}withConverter(t){return new la(this.firestore,t,this._path)}}function ii(n,t,...e){if(n=xe(n),HR("collection","path",t),n instanceof Jg){const i=ye.fromString(t,...e);return vS(i),new la(n,null,i)}{if(!(n instanceof qe||n instanceof la))throw new mt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ye.fromString(t,...e));return vS(i),new la(n.firestore,null,i)}}function Cm(n,t,...e){if(n=xe(n),arguments.length===1&&(t=Av.newId()),HR("doc","path",t),n instanceof Jg){const i=ye.fromString(t,...e);return yS(i),new qe(n,null,new vt(i))}{if(!(n instanceof qe||n instanceof la))throw new mt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ye.fromString(t,...e));return yS(i),new qe(n.firestore,n instanceof la?n.converter:null,new vt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="AsyncQueue";class c1{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UI(this,"async_queue_retry"),this._c=()=>{const i=Ly();i&&gt(l1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Ly();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Ly();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new ra;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ac(t))throw t;gt(l1,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,lr("INTERNAL UNHANDLED ERROR: ",u1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=Wv.createAndSchedule(this,t,e,i,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&At(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function u1(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const s=e;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class dc extends Jg{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new c1,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new c1(t),this._firestoreClient=void 0,await t}}}function T6(n,t){const e=typeof n=="object"?n:mv(),i=typeof n=="string"?n:Ym,s=Vg(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=HC("firestore");a&&x6(s,...a)}return s}function Xv(n){if(n._terminated)throw new mt(st.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||S6(n),n._firestoreClient}function S6(n){const t=n._freezeSettings(),e=function(s,a,l,u){return new WV(s,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,e2(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new y6(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(t="count",e){this._internalFieldPath=e,this.type="AggregateField",this.aggregateType=t}}class C6{constructor(t,e,i){this._userDataWriter=e,this._data=i,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vi(En.fromBase64String(t))}catch(e){throw new mt(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new vi(En.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(cd(t,vi._jsonSchema))return vi.fromBase64String(t.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:He("string",vi._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new mt(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new mt(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mt(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(t){if(cd(t,ds._jsonSchema))return new ds(t.latitude,t.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:He("string",ds._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,t._values)}toJSON(){return{type:fs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(cd(t,fs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new fs(t.vectorValues);throw new mt(st.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fs._jsonSchemaVersion="firestore/vectorValue/1.0",fs._jsonSchema={type:He("string",fs._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=/^__.*__$/;class I6{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Aa(t,this.data,this.fieldMask,e,this.fieldTransforms):new ud(t,this.data,e,this.fieldTransforms)}}class i2{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Aa(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function s2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At(40011,{Ac:n})}}class Zv{constructor(t,e,i,s,a,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Zv({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return eg(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(s2(this.Ac)&&R6.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class N6{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Kg(t)}Cc(t,e,i,s=!1){return new Zv({Ac:t,methodName:e,Dc:i,path:bn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jv(n){const t=n._freezeSettings(),e=Kg(n._databaseId);return new N6(n._databaseId,!!t.ignoreUndefinedProperties,e)}function k6(n,t,e,i,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,t,e,s);nb("Data must be an object, but it was:",l,i);const u=r2(i,l);let d,f;if(a.merge)d=new si(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const p=[];for(const y of a.mergeFields){const v=O0(t,y,e);if(!l.contains(v))throw new mt(st.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);o2(p,v)||p.push(v)}d=new si(p),f=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=l.fieldTransforms;return new I6(new Bn(u),d,f)}class ep extends md{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ep}}class tb extends md{_toFieldTransform(t){return new bI(t.path,new Vh)}isEqual(t){return t instanceof tb}}class eb extends md{constructor(t,e){super(t),this.Fc=e}_toFieldTransform(t){const e=new Fh(t.serializer,gI(t.serializer,this.Fc));return new bI(t.path,e)}isEqual(t){return t instanceof eb&&this.Fc===t.Fc}}function D6(n,t,e,i){const s=n.Cc(1,t,e);nb("Data must be an object, but it was:",s,i);const a=[],l=Bn.empty();Sa(i,(d,f)=>{const p=ib(t,d,e);f=xe(f);const y=s.yc(p);if(f instanceof ep)a.push(p);else{const v=gd(f,y);v!=null&&(a.push(p),l.set(p,v))}});const u=new si(a);return new i2(l,u,s.fieldTransforms)}function M6(n,t,e,i,s,a){const l=n.Cc(1,t,e),u=[O0(t,i,e)],d=[s];if(a.length%2!=0)throw new mt(st.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(O0(t,a[v])),d.push(a[v+1]);const f=[],p=Bn.empty();for(let v=u.length-1;v>=0;--v)if(!o2(f,u[v])){const T=u[v];let S=d[v];S=xe(S);const N=l.yc(T);if(S instanceof ep)f.push(T);else{const C=gd(S,N);C!=null&&(f.push(T),p.set(T,C))}}const y=new si(f);return new i2(p,y,l.fieldTransforms)}function O6(n,t,e,i=!1){return gd(e,n.Cc(i?4:3,t))}function gd(n,t){if(a2(n=xe(n)))return nb("Unsupported field value:",t,n),r2(n,t);if(n instanceof md)return function(i,s){if(!s2(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const a=[];let l=0;for(const u of i){let d=gd(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}}(n,t)}return function(i,s){if((i=xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gI(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=be.fromDate(i);return{timestampValue:Xm(s.serializer,a)}}if(i instanceof be){const a=new be(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xm(s.serializer,a)}}if(i instanceof ds)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vi)return{bytesValue:CI(s.serializer,i._byteString)};if(i instanceof qe){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Lv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof fs)return function(l,u){return{mapValue:{fields:{[ZR]:{stringValue:JR},[$m]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Mv(u.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${zg(i)}`)}(n,t)}function r2(n,t){const e={};return GR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sa(n,(i,s)=>{const a=gd(s,t.mc(i));a!=null&&(e[i]=a)}),{mapValue:{fields:e}}}function a2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof be||n instanceof ds||n instanceof vi||n instanceof qe||n instanceof md||n instanceof fs)}function nb(n,t,e){if(!a2(e)||!qR(e)){const i=zg(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function O0(n,t,e){if((t=xe(t))instanceof tp)return t._internalPath;if(typeof t=="string")return ib(n,t);throw eg("Field path arguments must be of type string or ",n,!1,void 0,e)}const P6=new RegExp("[~\\*/\\[\\]]");function ib(n,t,e){if(t.search(P6)>=0)throw eg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new tp(...t.split("."))._internalPath}catch{throw eg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function eg(n,t,e,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new mt(st.INVALID_ARGUMENT,u+n+d)}function o2(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(t,e,i,s,a){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new L6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(np("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class L6 extends l2{data(){return super.data()}}function np(n,t){return typeof t=="string"?ib(n,t):t instanceof tp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new mt(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sb{}class rb extends sb{}function wo(n,t,...e){let i=[];t instanceof sb&&i.push(t),i=i.concat(e),function(a){const l=a.filter(d=>d instanceof ab).length,u=a.filter(d=>d instanceof ip).length;if(l>1||l>0&&u>0)throw new mt(st.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class ip extends rb{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new ip(t,e,i)}_apply(t){const e=this._parse(t);return c2(t._query,e),new Ca(t.firestore,t.converter,T0(t._query,e))}_parse(t){const e=Jv(t.firestore);return function(a,l,u,d,f,p,y){let v;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new mt(st.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){m1(y,p);const S=[];for(const N of y)S.push(f1(d,a,N));v={arrayValue:{values:S}}}else v=f1(d,a,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||m1(y,p),v=O6(u,l,y,p==="in"||p==="not-in");return Be.create(f,p,v)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function zh(n,t,e){const i=t,s=np("where",n);return ip._create(s,i,e)}class ab extends sb{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ab(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Vi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(s,a){let l=s;const u=a.getFlattenedFilters();for(const d of u)c2(l,d),l=T0(l,d)}(t._query,e),new Ca(t.firestore,t.converter,T0(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ob extends rb{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new ob(t,e)}_apply(t){const e=function(s,a,l){if(s.startAt!==null)throw new mt(st.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new mt(st.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lh(a,l)}(t._query,this._field,this._direction);return new Ca(t.firestore,t.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Cc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,e))}}function P0(n,t="asc"){const e=t,i=np("orderBy",n);return ob._create(i,e)}class lb extends rb{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new lb(t,e,i)}_apply(t){return new Ca(t.firestore,t.converter,Km(t._query,this._limit,this._limitType))}}function d1(n){return MV("limit",n),lb._create("limit",n,"F")}function f1(n,t,e){if(typeof(e=xe(e))=="string"){if(e==="")throw new mt(st.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oI(t)&&e.indexOf("/")!==-1)throw new mt(st.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ye.fromString(e));if(!vt.isDocumentKey(i))throw new mt(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return CS(n,new vt(i))}if(e instanceof qe)return CS(n,e._key);throw new mt(st.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zg(e)}.`)}function m1(n,t){if(!Array.isArray(n)||n.length===0)throw new mt(st.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function c2(n,t){const e=function(s,a){for(const l of s)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new mt(st.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new mt(st.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class j6{convertValue(t,e="none"){switch(pa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ga(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw At(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Sa(t,(s,a)=>{i[s]=this.convertValue(a,e)}),i}convertVectorValue(t){const e=t.fields?.[$m].arrayValue?.values?.map(i=>Pe(i.doubleValue));return new fs(e)}convertGeoPoint(t){return new ds(Pe(t.latitude),Pe(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=qg(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Mh(t));default:return null}}convertTimestamp(t){const e=ma(t);return new be(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ye.fromString(t);Zt(OI(i),9688,{name:t});const s=new Oh(i.get(1),i.get(3)),a=new vt(i.popFirst(5));return s.isEqual(e)||lr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(n,t,e){let i;return i=n?n.toFirestore(t):t,i}function F6(){return new A6("count")}class oh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Co extends l2{constructor(t,e,i,s,a,l){super(t,e,i,s,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(np("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(st.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Co._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Co._jsonSchemaVersion="firestore/documentSnapshot/1.0",Co._jsonSchema={type:He("string",Co._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class Rm extends Co{data(t={}){return super.data(t)}}class Jl{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new oh(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Rm(this._firestore,this._userDataWriter,i.key,i,new oh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mt(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const d=new Rm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new oh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const d=new Rm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new oh(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:z6(u.type),doc:d,oldIndex:f,newIndex:p}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(st.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Jl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Av.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(e.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function z6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At(61501,{type:n})}}Jl._jsonSchemaVersion="firestore/querySnapshot/1.0",Jl._jsonSchema={type:He("string",Jl._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class cb extends j6{constructor(t){super(),this.firestore=t}convertBytes(t){return new vi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new qe(this.firestore,null,e)}}function jy(n,t,e,...i){n=aa(n,qe);const s=aa(n.firestore,dc),a=Jv(s);let l;return l=typeof(t=xe(t))=="string"||t instanceof tp?M6(a,"updateDoc",n._key,t,e,i):D6(a,"updateDoc",n._key,t),u2(s,[l.toMutation(n._key,us.exists(!0))])}function Im(n,t){const e=aa(n.firestore,dc),i=Cm(n),s=U6(n.converter,t);return u2(e,[k6(Jv(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,us.exists(!1))]).then(()=>i)}function xo(n,...t){n=xe(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||h1(t[i])||(e=t[i++]);const s={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(h1(t[i])){const d=t[i];t[i]=d.next?.bind(d),t[i+1]=d.error?.bind(d),t[i+2]=d.complete?.bind(d)}let a,l,u;if(n instanceof qe)l=aa(n.firestore,dc),u=Dv(n._key.path),a={next:d=>{t[i]&&t[i](B6(l,n,d))},error:t[i+1],complete:t[i+2]};else{const d=aa(n,Ca);l=aa(d.firestore,dc),u=d._query;const f=new cb(l);a={next:p=>{t[i]&&t[i](new Jl(l,f,d,p))},error:t[i+1],complete:t[i+2]},V6(n._query)}return function(f,p,y,v){const T=new _6(v),S=new Zj(p,T,y);return f.asyncQueue.enqueueAndForget(async()=>$j(await s1(f),S)),()=>{T.Nu(),f.asyncQueue.enqueueAndForget(async()=>Qj(await s1(f),S))}}(Xv(l),u,s,a)}function u2(n,t){return function(i,s){const a=new ra;return i.asyncQueue.enqueueAndForget(async()=>l6(await b6(i),s,a)),a.promise}(Xv(n),t)}function B6(n,t,e){const i=e.docs.get(t._key),s=new cb(n);return new Co(n,s,t._key,i,new oh(e.hasPendingWrites,e.fromCache),t.converter)}function g1(n){return H6(n,{count:F6()})}function H6(n,t){const e=aa(n.firestore,dc),i=Xv(e),s=HV(t,(a,l)=>new x3(l,a.aggregateType,a._internalFieldPath));return w6(i,n._query,s).then(a=>function(u,d,f){const p=new cb(u);return new C6(d,p,f)}(e,n,a))}function Nm(){return new tb("serverTimestamp")}function Uy(n){return new eb("increment",n)}(function(t,e=!0){(function(s){Tc=s})(zo),Io(new da("firestore",(i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),u=new dc(new TV(i.getProvider("auth-internal")),new CV(l,i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new mt(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oh(f.options.projectId,p)}(l,s),l);return a={useFetchStreams:e,...a},u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),os(mS,gS,t),os(mS,gS,"esm2020")})();var p1={};const _1="@firebase/database",y1="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h2="";function q6(n){h2=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),hn(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:Rh(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return ys(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new W6(t)}}catch{}return new G6},To=d2("localStorage"),Y6=d2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Lg("@firebase/database"),$6=function(){let n=1;return function(){return n++}}(),f2=function(n){const t=$O(n),e=new qO;e.update(t);const i=e.digest();return lv.encodeByteArray(i)},pd=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=pd.apply(null,i):typeof i=="object"?t+=hn(i):t+=i,t+=" "}return t};let yh=null,v1=!0;const Q6=function(n,t){ut(!0,"Can't turn on custom loggers persistently."),tc.logLevel=Vt.VERBOSE,yh=tc.log.bind(tc)},yn=function(...n){if(v1===!0&&(v1=!1,yh===null&&Y6.get("logging_enabled")===!0&&Q6()),yh){const t=pd.apply(null,n);yh(t)}},_d=function(n){return function(...t){yn(n,...t)}},L0=function(...n){const t="FIREBASE INTERNAL ERROR: "+pd(...n);tc.error(t)},ur=function(...n){const t=`FIREBASE FATAL ERROR: ${pd(...n)}`;throw tc.error(t),new Error(t)},Yn=function(...n){const t="FIREBASE WARNING: "+pd(...n);tc.warn(t)},K6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Yn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ub=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},X6=function(n){if(document.readyState==="complete")n();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},fc="[MIN_NAME]",Oo="[MAX_NAME]",qo=function(n,t){if(n===t)return 0;if(n===fc||t===Oo)return-1;if(t===fc||n===Oo)return 1;{const e=b1(n),i=b1(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},Z6=function(n,t){return n===t?0:n<t?-1:1},Wu=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+hn(t))},hb=function(n){if(typeof n!="object"||n===null)return hn(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=hn(t[i]),e+=":",e+=hb(n[t[i]]);return e+="}",e},m2=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let s=0;s<e;s+=t)s+t>e?i.push(n.substring(s,e)):i.push(n.substring(s,s+t));return i};function wn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const g2=function(n){ut(!ub(n),"Invalid JSON number");const t=11,e=52,i=(1<<t-1)-1;let s,a,l,u,d;n===0?(a=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=u+i,l=Math.round(n*Math.pow(2,e-u)-Math.pow(2,e))):(a=0,l=Math.round(n/Math.pow(2,1-i-e))));const f=[];for(d=e;d;d-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(d=t;d;d-=1)f.push(a%2?1:0),a=Math.floor(a/2);f.push(s?1:0),f.reverse();const p=f.join("");let y="";for(d=0;d<64;d+=8){let v=parseInt(p.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},J6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},t5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function e5(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}const n5=new RegExp("^-?(0*)\\d{1,10}$"),i5=-2147483648,s5=2147483647,b1=function(n){if(n5.test(n)){const t=Number(n);if(t>=i5&&t<=s5)return t}return null},Ic=function(n){try{n()}catch(t){setTimeout(()=>{const e=t.stack||"";throw Yn("Exception was thrown by user callback.",e),t},Math.floor(0))}},r5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vh=function(n,t){const e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,zn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){Yn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yn(t)}}class km{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}km.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="5",p2="v",_2="s",y2="r",v2="f",b2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,E2="ls",w2="p",V0="ac",x2="websocket",T2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(t,e,i,s,a=!1,l="",u=!1,d=!1,f=null){this.secure=e,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this.emulatorOptions=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=To.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&To.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function l5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function A2(n,t,e){ut(typeof t=="string","typeof type must == string"),ut(typeof e=="object","typeof params must == object");let i;if(t===x2)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===T2)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);l5(n)&&(e.ns=n.namespace);const s=[];return wn(e,(a,l)=>{s.push(a+"="+l)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.counters_={}}incrementCounter(t,e=1){ys(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return xO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy={},zy={};function fb(n){const t=n.toString();return Fy[t]||(Fy[t]=new c5),Fy[t]}function u5(n,t){const e=n.toString();return zy[e]||(zy[e]=t()),zy[e]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Ic(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="start",d5="close",f5="pLPCommand",m5="pRTLPCB",C2="id",R2="pw",I2="ser",g5="cb",p5="seg",_5="ts",y5="d",v5="dframe",N2=1870,k2=30,b5=N2-k2,E5=25e3,w5=3e4;class Gl{constructor(t,e,i,s,a,l,u){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_d(t),this.stats_=fb(e),this.urlFn=d=>(this.appCheckToken&&(d[V0]=this.appCheckToken),A2(e,T2,d))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new h5(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(w5)),X6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mb((...a)=>{const[l,u,d,f,p]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===E1)this.id=u,this.password=d;else if(l===d5)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,u]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[E1]="t",i[I2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[g5]=this.scriptTagHolder.uniqueCallbackIdentifier),i[p2]=db,this.transportSessionId&&(i[_2]=this.transportSessionId),this.lastSessionId&&(i[E2]=this.lastSessionId),this.applicationId&&(i[w2]=this.applicationId),this.appCheckToken&&(i[V0]=this.appCheckToken),typeof location<"u"&&location.hostname&&b2.test(location.hostname)&&(i[y2]=v2);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gl.forceAllow_=!0}static forceDisallow(){Gl.forceDisallow_=!0}static isAvailable(){return Gl.forceAllow_?!0:!Gl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!J6()&&!t5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=hn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=FC(e),s=m2(i,b5);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const i={};i[v5]="t",i[C2]=t,i[R2]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=hn(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class mb{constructor(t,e,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=$6(),window[f5+this.uniqueCallbackIdentifier]=t,window[m5+this.uniqueCallbackIdentifier]=e,this.myIFrame=mb.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){yn("frame writing exception"),u.stack&&yn(u.stack),yn(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||yn("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[C2]=this.myID,t[R2]=this.myPW,t[I2]=this.currentSerial;let e=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+k2+i.length<=N2;){const l=this.pendingSegs.shift();i=i+"&"+p5+s+"="+l.seg+"&"+_5+s+"="+l.ts+"&"+y5+s+"="+l.d,s++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(i,Math.floor(E5)),a=()=>{clearTimeout(s),i()};this.addTag(t,a)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{yn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=16384,T5=45e3;let ng=null;typeof MozWebSocket<"u"?ng=MozWebSocket:typeof WebSocket<"u"&&(ng=WebSocket);class Di{constructor(t,e,i,s,a,l,u){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_d(this.connId),this.stats_=fb(e),this.connURL=Di.connectionURL_(e,l,u,s,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,i,s,a){const l={};return l[p2]=db,typeof location<"u"&&location.hostname&&b2.test(location.hostname)&&(l[y2]=v2),e&&(l[_2]=e),i&&(l[E2]=i),s&&(l[V0]=s),a&&(l[w2]=a),A2(t,x2,l)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,To.set("previous_websocket_failure",!0);try{let i;PO(),this.mySock=new ng(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Di.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(e);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&ng!==null&&!Di.forceDisallow_}static previouslyFailed(){return To.isInMemoryStorage||To.get("previous_websocket_failure")===!0}markConnectionHealthy(){To.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const i=Rh(e);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ut(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const i=this.extractFrameCount_(e);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const e=hn(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=m2(e,x5);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(T5))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Di.responsesRequiredToBeHealthy=2;Di.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{static get ALL_TRANSPORTS(){return[Gl,Di]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=Di&&Di.isAvailable();let i=e&&!Di.previouslyFailed();if(t.webSocketOnly&&(e||Yn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Di];else{const s=this.transports_=[];for(const a of Bh.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);Bh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Bh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=6e4,A5=5e3,C5=10*1024,R5=100*1024,By="t",w1="d",I5="s",x1="r",N5="e",T1="o",S1="a",A1="n",C1="p",k5="h";class D5{constructor(t,e,i,s,a,l,u,d,f,p){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=d,this.onKill_=f,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_d("c:"+this.id+":"),this.transportManager_=new Bh(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=vh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>R5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>C5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(By in t){const e=t[By];e===S1?this.upgradeIfSecondaryHealthy_():e===x1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===T1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Wu("t",t),i=Wu("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:C1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:S1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:A1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Wu("t",t),i=Wu("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Wu(By,t);if(w1 in t){const i=t[w1];if(e===k5){const s={...i};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(e===A1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===I5?this.onConnectionShutdown_(i):e===x1?this.onReset_(i):e===N5?L0("Server Error: "+i):e===T1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):L0("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),db!==i&&Yn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),vh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(S5))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(A5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:C1,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(To.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{put(t,e,i,s){}merge(t,e,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(t){this.allowedEvents_=t,this.listeners_={},ut(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const s=this.getInitialEvent(t);s&&e.apply(i,s)}off(t,e,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let a=0;a<s.length;a++)if(s[a].callback===e&&(!i||i===s[a].context)){s.splice(a,1);return}}validateEventType_(t){ut(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends M2{static getInstance(){return new ig}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!hv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return ut(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=32,I1=768;class he{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}}function Xt(){return new he("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function va(n){return n.pieces_.length-n.pieceNum_}function _e(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new he(n.pieces_,t)}function gb(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function M5(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function Hh(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function O2(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new he(t,0)}function Ne(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof he)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&e.push(i[s])}return new he(e,0)}function Ut(n){return n.pieceNum_>=n.pieces_.length}function qn(n,t){const e=jt(n),i=jt(t);if(e===null)return t;if(e===i)return qn(_e(n),_e(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function O5(n,t){const e=Hh(n,0),i=Hh(t,0);for(let s=0;s<e.length&&s<i.length;s++){const a=qo(e[s],i[s]);if(a!==0)return a}return e.length===i.length?0:e.length<i.length?-1:1}function pb(n,t){if(va(n)!==va(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function bi(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(va(n)>va(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class P5{constructor(t,e){this.errorPrefix_=e,this.parts_=Hh(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Pg(this.parts_[i]);P2(this)}}function L5(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=Pg(t),P2(n)}function V5(n){const t=n.parts_.pop();n.byteLength_-=Pg(t),n.parts_.length>0&&(n.byteLength_-=1)}function P2(n){if(n.byteLength_>I1)throw new Error(n.errorPrefix_+"has a key path longer than "+I1+" bytes ("+n.byteLength_+").");if(n.parts_.length>R1)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+R1+") or object contains a cycle "+_o(n))}function _o(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends M2{static getInstance(){return new _b}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return ut(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=1e3,j5=300*1e3,N1=30*1e3,U5=1.3,F5=3e4,z5="server_kill",k1=3;class sr extends D2{constructor(t,e,i,s,a,l,u,d){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=d,this.id=sr.nextPersistentConnectionId_++,this.log_=_d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gu,this.maxReconnectDelay_=j5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_b.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ig.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,i){const s=++this.requestNumber_,a={r:s,a:t,b:e};this.log_(hn(a)),ut(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const e=new Og,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?e.resolve(u):e.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),e.promise}listen(t,e,i,s){this.initConnection_();const a=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),ut(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ut(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:e,query:t,tag:i};this.listens.get(l).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(i)})}sendListen_(t){const e=t.query,i=e._path.toString(),s=e._queryIdentifier;this.log_("Listen on "+i+" for "+s);const a={p:i},l="q";t.tag&&(a.q=e._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(l,a,u=>{const d=u.d,f=u.s;sr.warnOnListenWarnings_(d,e),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(f,d))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&ys(t,"w")){const i=rc(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+e._queryParams.getIndex().toString()+'"',a=e._path.toString();Yn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||HO(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=N1)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=BO(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(e,i,s=>{const a=s.s,l=s.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,i=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,i)})}unlisten(t,e){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ut(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,e)}sendUnlisten_(t,e,i,s){this.log_("Unlisten on "+t+" for "+e);const a={p:t},l="n";s&&(a.q=i,a.t=s),this.sendRequest(l,a)}onDisconnectPut(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:i})}onDisconnectMerge(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:i})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,i,s){const a={p:e,d:i};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(t,e,i,s){this.putInternal("p",t,e,i,s)}merge(t,e,i,s){this.putInternal("m",t,e,i,s)}putInternal(t,e,i,s,a){this.initConnection_();const l={p:e,d:i};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:t,request:l,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,i,a=>{this.log_(e+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+hn(t));const e=t.r,i=this.requestCBHash_[e];i&&(delete this.requestCBHash_[e],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):L0("Unrecognized action received from server: "+hn(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ut(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Gu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>F5&&(this.reconnectDelay_=Gu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*U5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+sr.nextConnectionId_++,a=this.lastSessionId;let l=!1,u=null;const d=function(){u?u.close():(l=!0,i())},f=function(y){ut(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)};this.realtime_={close:d,sendRequest:f};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?yn("getToken() completed but was canceled"):(yn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,u=new D5(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,i,T=>{Yn(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(z5)},a))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&Yn(y),d())}}}interrupt(t){yn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){yn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],o0(this.interruptReasons_)&&(this.reconnectDelay_=Gu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let i;e?i=e.map(a=>hb(a)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,e){const i=new he(t).toString();let s;if(this.listens.has(i)){const a=this.listens.get(i);s=a.get(e),a.delete(e),a.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,e){yn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=k1&&(this.reconnectDelay_=N1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){yn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=k1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+h2.replace(/\./g,"-")]=1,hv()?t["framework.cordova"]=1:YC()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ig.getInstance().currentlyOnline();return o0(this.interruptReasons_)&&t}}sr.nextPersistentConnectionId_=0;sr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ot(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Ot(fc,t),s=new Ot(fc,e);return this.compare(i,s)!==0}minPost(){return Ot.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf;class L2 extends sp{static get __EMPTY_NODE(){return Jf}static set __EMPTY_NODE(t){Jf=t}compare(t,e){return qo(t.name,e.name)}isDefinedOn(t){throw Ec("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ot.MIN}maxPost(){return new Ot(Oo,Jf)}makePost(t,e){return ut(typeof t=="string","KeyIndex indexValue must always be a string."),new Ot(t,Jf)}toString(){return".key"}}const ec=new L2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(t,e,i,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(t=t,l=e?i(t.key,e):1,s&&(l*=-1),l<0)this.isReverse_?t=t.left:t=t.right;else if(l===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class un{constructor(t,e,i,s,a){this.key=t,this.value=e,this.color=i??un.RED,this.left=s??Wn.EMPTY_NODE,this.right=a??Wn.EMPTY_NODE}copy(t,e,i,s,a){return new un(t??this.key,e??this.value,i??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const a=i(t,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(t,e,i),null):a===0?s=s.copy(null,e,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let i,s;if(i=this,e(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),e(t,i.key)===0){if(i.right.isEmpty())return Wn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}un.RED=!0;un.BLACK=!1;class B5{copy(t,e,i,s,a){return this}insert(t,e,i){return new un(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Wn{constructor(t,e=Wn.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Wn(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,un.BLACK,null,null))}remove(t){return new Wn(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,un.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,s=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new tm(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new tm(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new tm(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new tm(this.root_,null,this.comparator_,!0,t)}}Wn.EMPTY_NODE=new B5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(n,t){return qo(n.name,t.name)}function yb(n,t){return qo(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j0;function q5(n){j0=n}const V2=function(n){return typeof n=="number"?"number:"+g2(n):"string:"+n},j2=function(n){if(n.isLeafNode()){const t=n.val();ut(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ys(t,".sv"),"Priority must be a string or number.")}else ut(n===j0||n.isEmpty(),"priority of unexpected type.");ut(n===j0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D1;class ln{static set __childrenNodeConstructor(t){D1=t}static get __childrenNodeConstructor(){return D1}constructor(t,e=ln.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ut(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),j2(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ln(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ln.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ut(t)?this:jt(t)===".priority"?this.priorityNode_:ln.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:ln.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const i=jt(t);return i===null?e:e.isEmpty()&&i!==".priority"?this:(ut(i!==".priority"||va(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ln.__childrenNodeConstructor.EMPTY_NODE.updateChild(_e(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+V2(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=g2(this.value_):t+=this.value_,this.lazyHash_=f2(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ln.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ln.__childrenNodeConstructor?-1:(ut(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,i=typeof this.value_,s=ln.VALUE_TYPE_ORDER.indexOf(e),a=ln.VALUE_TYPE_ORDER.indexOf(i);return ut(s>=0,"Unknown leaf type: "+e),ut(a>=0,"Unknown leaf type: "+i),s===a?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}ln.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U2,F2;function W5(n){U2=n}function G5(n){F2=n}class Y5 extends sp{compare(t,e){const i=t.node.getPriority(),s=e.node.getPriority(),a=i.compareTo(s);return a===0?qo(t.name,e.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ot.MIN}maxPost(){return new Ot(Oo,new ln("[PRIORITY-POST]",F2))}makePost(t,e){const i=U2(t);return new Ot(e,new ln("[PRIORITY-POST]",i))}toString(){return".priority"}}const ke=new Y5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=Math.log(2);class Q5{constructor(t){const e=a=>parseInt(Math.log(a)/$5,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const sg=function(n,t,e,i){n.sort(t);const s=function(d,f){const p=f-d;let y,v;if(p===0)return null;if(p===1)return y=n[d],v=e?e(y):y,new un(v,y.node,un.BLACK,null,null);{const T=parseInt(p/2,10)+d,S=s(d,T),N=s(T+1,f);return y=n[T],v=e?e(y):y,new un(v,y.node,un.BLACK,S,N)}},a=function(d){let f=null,p=null,y=n.length;const v=function(S,N){const C=y-S,L=y;y-=S;const W=s(C+1,L),$=n[C],Z=e?e($):$;T(new un(Z,$.node,N,null,W))},T=function(S){f?(f.left=S,f=S):(p=S,f=S)};for(let S=0;S<d.count;++S){const N=d.nextBitIsOne(),C=Math.pow(2,d.count-(S+1));N?v(C,un.BLACK):(v(C,un.BLACK),v(C,un.RED))}return p},l=new Q5(n.length),u=a(l);return new Wn(i||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hy;const Ul={};class Js{static get Default(){return ut(Ul&&ke,"ChildrenNode.ts has not been loaded"),Hy=Hy||new Js({".priority":Ul},{".priority":ke}),Hy}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=rc(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Wn?e:null}hasIndex(t){return ys(this.indexSet_,t.toString())}addIndex(t,e){ut(t!==ec,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const a=e.getIterator(Ot.Wrap);let l=a.getNext();for(;l;)s=s||t.isDefinedOn(l.node),i.push(l),l=a.getNext();let u;s?u=sg(i,t.getCompare()):u=Ul;const d=t.toString(),f={...this.indexSet_};f[d]=t;const p={...this.indexes_};return p[d]=u,new Js(p,f)}addToIndexes(t,e){const i=jm(this.indexes_,(s,a)=>{const l=rc(this.indexSet_,a);if(ut(l,"Missing index implementation for "+a),s===Ul)if(l.isDefinedOn(t.node)){const u=[],d=e.getIterator(Ot.Wrap);let f=d.getNext();for(;f;)f.name!==t.name&&u.push(f),f=d.getNext();return u.push(t),sg(u,l.getCompare())}else return Ul;else{const u=e.get(t.name);let d=s;return u&&(d=d.remove(new Ot(t.name,u))),d.insert(t,t.node)}});return new Js(i,this.indexSet_)}removeFromIndexes(t,e){const i=jm(this.indexes_,s=>{if(s===Ul)return s;{const a=e.get(t.name);return a?s.remove(new Ot(t.name,a)):s}});return new Js(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu;class Rt{static get EMPTY_NODE(){return Yu||(Yu=new Rt(new Wn(yb),null,Js.Default))}constructor(t,e,i){this.children_=t,this.priorityNode_=e,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&j2(this.priorityNode_),this.children_.isEmpty()&&ut(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yu}updatePriority(t){return this.children_.isEmpty()?this:new Rt(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?Yu:e}}getChild(t){const e=jt(t);return e===null?this:this.getImmediateChild(e).getChild(_e(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(ut(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const i=new Ot(t,e);let s,a;e.isEmpty()?(s=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,e),a=this.indexMap_.addToIndexes(i,this.children_));const l=s.isEmpty()?Yu:this.priorityNode_;return new Rt(s,l,a)}}updateChild(t,e){const i=jt(t);if(i===null)return e;{ut(jt(t)!==".priority"||va(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(_e(t),e);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let i=0,s=0,a=!0;if(this.forEachChild(ke,(l,u)=>{e[l]=u.val(t),i++,a&&Rt.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):a=!1}),!t&&a&&s<2*i){const l=[];for(const u in e)l[u]=e[u];return l}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+V2(this.getPriority().val())+":"),this.forEachChild(ke,(e,i)=>{const s=i.hash();s!==""&&(t+=":"+e+":"+s)}),this.lazyHash_=t===""?"":f2(t)}return this.lazyHash_}getPredecessorChildName(t,e,i){const s=this.resolveIndex_(i);if(s){const a=s.getPredecessorKey(new Ot(t,e));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ot(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ot(e,this.children_.get(e)):null}forEachChild(t,e){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>e(s.name,s.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Ot.Wrap);let a=s.peek();for(;a!=null&&e.compare(a,t)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Ot.Wrap);let a=s.peek();for(;a!=null&&e.compare(a,t)>0;)s.getNext(),a=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===yd?-1:0}withIndex(t){if(t===ec||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new Rt(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===ec||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const i=this.getIterator(ke),s=e.getIterator(ke);let a=i.getNext(),l=s.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=i.getNext(),l=s.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(t){return t===ec?null:this.indexMap_.get(t.toString())}}Rt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class K5 extends Rt{constructor(){super(new Wn(yb),Rt.EMPTY_NODE,Js.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Rt.EMPTY_NODE}isEmpty(){return!1}}const yd=new K5;Object.defineProperties(Ot,{MIN:{value:new Ot(fc,Rt.EMPTY_NODE)},MAX:{value:new Ot(Oo,yd)}});L2.__EMPTY_NODE=Rt.EMPTY_NODE;ln.__childrenNodeConstructor=Rt;q5(yd);G5(yd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=!0;function vn(n,t=null){if(n===null)return Rt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),ut(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const e=n;return new ln(e,vn(t))}if(!(n instanceof Array)&&X5){const e=[];let i=!1;if(wn(n,(l,u)=>{if(l.substring(0,1)!=="."){const d=vn(u);d.isEmpty()||(i=i||!d.getPriority().isEmpty(),e.push(new Ot(l,d)))}}),e.length===0)return Rt.EMPTY_NODE;const a=sg(e,H5,l=>l.name,yb);if(i){const l=sg(e,ke.getCompare());return new Rt(a,vn(t),new Js({".priority":l},{".priority":ke}))}else return new Rt(a,vn(t),Js.Default)}else{let e=Rt.EMPTY_NODE;return wn(n,(i,s)=>{if(ys(n,i)&&i.substring(0,1)!=="."){const a=vn(s);(a.isLeafNode()||!a.isEmpty())&&(e=e.updateImmediateChild(i,a))}}),e.updatePriority(vn(t))}}W5(vn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5 extends sp{constructor(t){super(),this.indexPath_=t,ut(!Ut(t)&&jt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),s=this.extractChild(e.node),a=i.compareTo(s);return a===0?qo(t.name,e.name):a}makePost(t,e){const i=vn(t),s=Rt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ot(e,s)}maxPost(){const t=Rt.EMPTY_NODE.updateChild(this.indexPath_,yd);return new Ot(Oo,t)}toString(){return Hh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5 extends sp{compare(t,e){const i=t.node.compareTo(e.node);return i===0?qo(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ot.MIN}maxPost(){return Ot.MAX}makePost(t,e){const i=vn(t);return new Ot(e,i)}toString(){return".value"}}const tU=new J5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n){return{type:"value",snapshotNode:n}}function mc(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function qh(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Wh(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function eU(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t){this.index_=t}updateChild(t,e,i,s,a,l){ut(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(e);return u.getChild(s).equals(i.getChild(s))&&u.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange(qh(e,u)):ut(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?l.trackChildChange(mc(e,i)):l.trackChildChange(Wh(e,i,u))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(ke,(s,a)=>{e.hasChild(s)||i.trackChildChange(qh(s,a))}),e.isLeafNode()||e.forEachChild(ke,(s,a)=>{if(t.hasChild(s)){const l=t.getImmediateChild(s);l.equals(a)||i.trackChildChange(Wh(s,a,l))}else i.trackChildChange(mc(s,a))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Rt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t){this.indexedFilter_=new vb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Gh.getStartPost_(t),this.endPost_=Gh.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,s,a,l){return this.matches(new Ot(e,i))||(i=Rt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,s,a,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Rt.EMPTY_NODE);let s=e.withIndex(this.index_);s=s.updatePriority(Rt.EMPTY_NODE);const a=this;return e.forEachChild(ke,(l,u)=>{a.matches(new Ot(l,u))||(s=s.updateImmediateChild(l,Rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Gh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,s,a,l){return this.rangedFilter_.matches(new Ot(e,i))||(i=Rt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,s,a,l):this.fullLimitUpdateChild_(t,e,i,a,l)}updateFullNode(t,e,i){let s;if(e.isLeafNode()||e.isEmpty())s=Rt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){s=Rt.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const u=a.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))s=s.updateImmediateChild(u.name,u.node),l++;else break;else continue}}else{s=e.withIndex(this.index_),s=s.updatePriority(Rt.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let l=0;for(;a.hasNext();){const u=a.getNext();l<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?l++:s=s.updateImmediateChild(u.name,Rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,s,a){let l;if(this.reverse_){const y=this.index_.getCompare();l=(v,T)=>y(T,v)}else l=this.index_.getCompare();const u=t;ut(u.numChildren()===this.limit_,"");const d=new Ot(e,i),f=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(d);if(u.hasChild(e)){const y=u.getImmediateChild(e);let v=s.getChildAfterChild(this.index_,f,this.reverse_);for(;v!=null&&(v.name===e||u.hasChild(v.name));)v=s.getChildAfterChild(this.index_,v,this.reverse_);const T=v==null?1:l(v,d);if(p&&!i.isEmpty()&&T>=0)return a?.trackChildChange(Wh(e,i,y)),u.updateImmediateChild(e,i);{a?.trackChildChange(qh(e,y));const N=u.updateImmediateChild(e,Rt.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a?.trackChildChange(mc(v.name,v.node)),N.updateImmediateChild(v.name,v.node)):N}}else return i.isEmpty()?t:p&&l(f,d)>=0?(a!=null&&(a.trackChildChange(qh(f.name,f.node)),a.trackChildChange(mc(e,i))),u.updateImmediateChild(e,i).updateImmediateChild(f.name,Rt.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ke}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ut(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ut(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fc}hasEnd(){return this.endSet_}getIndexEndValue(){return ut(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ut(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Oo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ut(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ke}copy(){const t=new bb;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function iU(n){return n.loadsAllData()?new vb(n.getIndex()):n.hasLimit()?new nU(n):new Gh(n)}function M1(n){const t={};if(n.isDefault())return t;let e;if(n.index_===ke?e="$priority":n.index_===tU?e="$value":n.index_===ec?e="$key":(ut(n.index_ instanceof Z5,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=hn(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=hn(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+hn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=hn(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+hn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function O1(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==ke&&(t.i=n.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends D2{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(ut(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=_d("p:rest:"),this.listens_={}}listen(t,e,i,s){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const l=rg.getListenId_(t,i),u={};this.listens_[l]=u;const d=M1(t._queryParams);this.restRequest_(a+".json",d,(f,p)=>{let y=p;if(f===404&&(y=null,f=null),f===null&&this.onDataUpdate_(a,y,!1,i),rc(this.listens_,l)===u){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",s(v,null)}})}unlisten(t,e){const i=rg.getListenId_(t,e);delete this.listens_[i]}get(t){const e=M1(t._queryParams),i=t._path.toString(),s=new Og;return this.restRequest_(i+".json",e,(a,l)=>{let u=l;a===404&&(u=null,a=null),a===null?(this.onDataUpdate_(i,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(e.auth=s.accessToken),a&&a.token&&(e.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+wc(e);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=Rh(u.responseText)}catch{Yn("Failed to parse JSON response for "+l+": "+u.responseText)}i(null,d)}else u.status!==401&&u.status!==404&&Yn("Got unsuccessful REST response for "+l+" Status: "+u.status),i(u.status);i=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.rootNode_=Rt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){return{value:null,children:new Map}}function B2(n,t,e){if(Ut(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{const i=jt(t);n.children.has(i)||n.children.set(i,ag());const s=n.children.get(i);t=_e(t),B2(s,t,e)}}function U0(n,t,e){n.value!==null?e(t,n.value):rU(n,(i,s)=>{const a=new he(t.toString()+"/"+i);U0(s,a,e)})}function rU(n,t){n.children.forEach((e,i)=>{t(i,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e={...t};return this.last_&&wn(this.last_,(i,s)=>{e[i]=e[i]-s}),this.last_=t,e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=10*1e3,oU=30*1e3,lU=300*1e3;class cU{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new aU(t);const i=P1+(oU-P1)*Math.random();vh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;wn(t,(s,a)=>{a>0&&ys(this.statsToReport_,s)&&(e[s]=a,i=!0)}),i&&this.server_.reportStats(e),vh(this.reportStats_.bind(this),Math.floor(Math.random()*2*lU))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Oi||(Oi={}));function Eb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xb(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Oi.ACK_USER_WRITE,this.source=Eb()}operationForChild(t){if(Ut(this.path)){if(this.affectedTree.value!=null)return ut(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new he(t));return new og(Xt(),e,this.revert)}}else return ut(jt(this.path)===t,"operationForChild called for unrelated child."),new og(_e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,e){this.source=t,this.path=e,this.type=Oi.LISTEN_COMPLETE}operationForChild(t){return Ut(this.path)?new Yh(this.source,Xt()):new Yh(this.source,_e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Oi.OVERWRITE}operationForChild(t){return Ut(this.path)?new Po(this.source,Xt(),this.snap.getImmediateChild(t)):new Po(this.source,_e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Oi.MERGE}operationForChild(t){if(Ut(this.path)){const e=this.children.subtree(new he(t));return e.isEmpty()?null:e.value?new Po(this.source,Xt(),e.value):new gc(this.source,Xt(),e)}else return ut(jt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new gc(this.source,_e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ut(t))return this.isFullyInitialized()&&!this.filtered_;const e=jt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function hU(n,t,e,i){const s=[],a=[];return t.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(eU(l.childName,l.snapshotNode))}),$u(n,s,"child_removed",t,i,e),$u(n,s,"child_added",t,i,e),$u(n,s,"child_moved",a,i,e),$u(n,s,"child_changed",t,i,e),$u(n,s,"value",t,i,e),s}function $u(n,t,e,i,s,a){const l=i.filter(u=>u.type===e);l.sort((u,d)=>fU(n,u,d)),l.forEach(u=>{const d=dU(n,u,a);s.forEach(f=>{f.respondsTo(u.type)&&t.push(f.createEvent(d,n.query_))})})}function dU(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function fU(n,t,e){if(t.childName==null||e.childName==null)throw Ec("Should only compare child_ events.");const i=new Ot(t.childName,t.snapshotNode),s=new Ot(e.childName,e.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n,t){return{eventCache:n,serverCache:t}}function bh(n,t,e,i){return rp(new Lo(t,e,i),n.serverCache)}function H2(n,t,e,i){return rp(n.eventCache,new Lo(t,e,i))}function F0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy;const mU=()=>(qy||(qy=new Wn(Z6)),qy);class pe{static fromObject(t){let e=new pe(null);return wn(t,(i,s)=>{e=e.set(new he(i),s)}),e}constructor(t,e=mU()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Xt(),value:this.value};if(Ut(t))return null;{const i=jt(t),s=this.children.get(i);if(s!==null){const a=s.findRootMostMatchingPathAndValue(_e(t),e);return a!=null?{path:Ne(new he(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ut(t))return this;{const e=jt(t),i=this.children.get(e);return i!==null?i.subtree(_e(t)):new pe(null)}}set(t,e){if(Ut(t))return new pe(e,this.children);{const i=jt(t),a=(this.children.get(i)||new pe(null)).set(_e(t),e),l=this.children.insert(i,a);return new pe(this.value,l)}}remove(t){if(Ut(t))return this.children.isEmpty()?new pe(null):new pe(null,this.children);{const e=jt(t),i=this.children.get(e);if(i){const s=i.remove(_e(t));let a;return s.isEmpty()?a=this.children.remove(e):a=this.children.insert(e,s),this.value===null&&a.isEmpty()?new pe(null):new pe(this.value,a)}else return this}}get(t){if(Ut(t))return this.value;{const e=jt(t),i=this.children.get(e);return i?i.get(_e(t)):null}}setTree(t,e){if(Ut(t))return e;{const i=jt(t),a=(this.children.get(i)||new pe(null)).setTree(_e(t),e);let l;return a.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,a),new pe(this.value,l)}}fold(t){return this.fold_(Xt(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((s,a)=>{i[s]=a.fold_(Ne(t,s),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Xt(),e)}findOnPath_(t,e,i){const s=this.value?i(e,this.value):!1;if(s)return s;if(Ut(t))return null;{const a=jt(t),l=this.children.get(a);return l?l.findOnPath_(_e(t),Ne(e,a),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Xt(),e)}foreachOnPath_(t,e,i){if(Ut(t))return this;{this.value&&i(e,this.value);const s=jt(t),a=this.children.get(s);return a?a.foreachOnPath_(_e(t),Ne(e,s),i):new pe(null)}}foreach(t){this.foreach_(Xt(),t)}foreach_(t,e){this.children.inorderTraversal((i,s)=>{s.foreach_(Ne(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this.writeTree_=t}static empty(){return new Li(new pe(null))}}function Eh(n,t,e){if(Ut(t))return new Li(new pe(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let a=i.value;const l=qn(s,t);return a=a.updateChild(l,e),new Li(n.writeTree_.set(s,a))}else{const s=new pe(e),a=n.writeTree_.setTree(t,s);return new Li(a)}}}function z0(n,t,e){let i=n;return wn(e,(s,a)=>{i=Eh(i,Ne(t,s),a)}),i}function L1(n,t){if(Ut(t))return Li.empty();{const e=n.writeTree_.setTree(t,new pe(null));return new Li(e)}}function B0(n,t){return Wo(n,t)!=null}function Wo(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(qn(e.path,t)):null}function V1(n){const t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(ke,(i,s)=>{t.push(new Ot(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new Ot(i,s.value))}),t}function ca(n,t){if(Ut(t))return n;{const e=Wo(n,t);return e!=null?new Li(new pe(e)):new Li(n.writeTree_.subtree(t))}}function H0(n){return n.writeTree_.isEmpty()}function pc(n,t){return q2(Xt(),n.writeTree_,t)}function q2(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((s,a)=>{s===".priority"?(ut(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):e=q2(Ne(n,s),a,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(Ne(n,".priority"),i)),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n,t){return $2(t,n)}function gU(n,t,e,i,s){ut(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:s}),s&&(n.visibleWrites=Eh(n.visibleWrites,t,e)),n.lastWriteId=i}function pU(n,t,e,i){ut(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=z0(n.visibleWrites,t,e),n.lastWriteId=i}function _U(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}function yU(n,t){const e=n.allWrites.findIndex(u=>u.writeId===t);ut(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let s=i.visible,a=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=e&&vU(u,i.path)?s=!1:bi(i.path,u.path)&&(a=!0)),l--}if(s){if(a)return bU(n),!0;if(i.snap)n.visibleWrites=L1(n.visibleWrites,i.path);else{const u=i.children;wn(u,d=>{n.visibleWrites=L1(n.visibleWrites,Ne(i.path,d))})}return!0}else return!1}function vU(n,t){if(n.snap)return bi(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&bi(Ne(n.path,e),t))return!0;return!1}function bU(n){n.visibleWrites=W2(n.allWrites,EU,Xt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function EU(n){return n.visible}function W2(n,t,e){let i=Li.empty();for(let s=0;s<n.length;++s){const a=n[s];if(t(a)){const l=a.path;let u;if(a.snap)bi(e,l)?(u=qn(e,l),i=Eh(i,u,a.snap)):bi(l,e)&&(u=qn(l,e),i=Eh(i,Xt(),a.snap.getChild(u)));else if(a.children){if(bi(e,l))u=qn(e,l),i=z0(i,u,a.children);else if(bi(l,e))if(u=qn(l,e),Ut(u))i=z0(i,Xt(),a.children);else{const d=rc(a.children,jt(u));if(d){const f=d.getChild(_e(u));i=Eh(i,Xt(),f)}}}else throw Ec("WriteRecord should have .snap or .children")}}return i}function G2(n,t,e,i,s){if(!i&&!s){const a=Wo(n.visibleWrites,t);if(a!=null)return a;{const l=ca(n.visibleWrites,t);if(H0(l))return e;if(e==null&&!B0(l,Xt()))return null;{const u=e||Rt.EMPTY_NODE;return pc(l,u)}}}else{const a=ca(n.visibleWrites,t);if(!s&&H0(a))return e;if(!s&&e==null&&!B0(a,Xt()))return null;{const l=function(f){return(f.visible||s)&&(!i||!~i.indexOf(f.writeId))&&(bi(f.path,t)||bi(t,f.path))},u=W2(n.allWrites,l,t),d=e||Rt.EMPTY_NODE;return pc(u,d)}}}function wU(n,t,e){let i=Rt.EMPTY_NODE;const s=Wo(n.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(ke,(a,l)=>{i=i.updateImmediateChild(a,l)}),i;if(e){const a=ca(n.visibleWrites,t);return e.forEachChild(ke,(l,u)=>{const d=pc(ca(a,new he(l)),u);i=i.updateImmediateChild(l,d)}),V1(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const a=ca(n.visibleWrites,t);return V1(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function xU(n,t,e,i,s){ut(i||s,"Either existingEventSnap or existingServerSnap must exist");const a=Ne(t,e);if(B0(n.visibleWrites,a))return null;{const l=ca(n.visibleWrites,a);return H0(l)?s.getChild(e):pc(l,s.getChild(e))}}function TU(n,t,e,i){const s=Ne(t,e),a=Wo(n.visibleWrites,s);if(a!=null)return a;if(i.isCompleteForChild(e)){const l=ca(n.visibleWrites,s);return pc(l,i.getNode().getImmediateChild(e))}else return null}function SU(n,t){return Wo(n.visibleWrites,t)}function AU(n,t,e,i,s,a,l){let u;const d=ca(n.visibleWrites,t),f=Wo(d,Xt());if(f!=null)u=f;else if(e!=null)u=pc(d,e);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const p=[],y=l.getCompare(),v=a?u.getReverseIteratorFrom(i,l):u.getIteratorFrom(i,l);let T=v.getNext();for(;T&&p.length<s;)y(T,i)!==0&&p.push(T),T=v.getNext();return p}else return[]}function CU(){return{visibleWrites:Li.empty(),allWrites:[],lastWriteId:-1}}function lg(n,t,e,i){return G2(n.writeTree,n.treePath,t,e,i)}function Sb(n,t){return wU(n.writeTree,n.treePath,t)}function j1(n,t,e,i){return xU(n.writeTree,n.treePath,t,e,i)}function cg(n,t){return SU(n.writeTree,Ne(n.treePath,t))}function RU(n,t,e,i,s,a){return AU(n.writeTree,n.treePath,t,e,i,s,a)}function Ab(n,t,e){return TU(n.writeTree,n.treePath,t,e)}function Y2(n,t){return $2(Ne(n.treePath,t),n.writeTree)}function $2(n,t){return{treePath:n,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;ut(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),ut(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const a=s.type;if(e==="child_added"&&a==="child_removed")this.changeMap.set(i,Wh(i,t.snapshotNode,s.snapshotNode));else if(e==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&a==="child_changed")this.changeMap.set(i,qh(i,s.oldSnap));else if(e==="child_changed"&&a==="child_added")this.changeMap.set(i,mc(i,t.snapshotNode));else if(e==="child_changed"&&a==="child_changed")this.changeMap.set(i,Wh(i,t.snapshotNode,s.oldSnap));else throw Ec("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}}const Q2=new NU;class Cb{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new Lo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ab(this.writes_,t,i)}}getChildAfterChild(t,e,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vo(this.viewCache_),a=RU(this.writes_,s,e,1,i,t);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(n){return{filter:n}}function DU(n,t){ut(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ut(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function MU(n,t,e,i,s){const a=new IU;let l,u;if(e.type===Oi.OVERWRITE){const f=e;f.source.fromUser?l=q0(n,t,f.path,f.snap,i,s,a):(ut(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered()&&!Ut(f.path),l=ug(n,t,f.path,f.snap,i,s,u,a))}else if(e.type===Oi.MERGE){const f=e;f.source.fromUser?l=PU(n,t,f.path,f.children,i,s,a):(ut(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered(),l=W0(n,t,f.path,f.children,i,s,u,a))}else if(e.type===Oi.ACK_USER_WRITE){const f=e;f.revert?l=jU(n,t,f.path,i,s,a):l=LU(n,t,f.path,f.affectedTree,i,s,a)}else if(e.type===Oi.LISTEN_COMPLETE)l=VU(n,t,e.path,i,a);else throw Ec("Unknown operation type: "+e.type);const d=a.getChanges();return OU(t,l,d),{viewCache:l,changes:d}}function OU(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=F0(n);(e.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&e.push(z2(F0(t)))}}function K2(n,t,e,i,s,a){const l=t.eventCache;if(cg(i,e)!=null)return t;{let u,d;if(Ut(e))if(ut(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const f=Vo(t),p=f instanceof Rt?f:Rt.EMPTY_NODE,y=Sb(i,p);u=n.filter.updateFullNode(t.eventCache.getNode(),y,a)}else{const f=lg(i,Vo(t));u=n.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{const f=jt(e);if(f===".priority"){ut(va(e)===1,"Can't have a priority with additional path components");const p=l.getNode();d=t.serverCache.getNode();const y=j1(i,e,p,d);y!=null?u=n.filter.updatePriority(p,y):u=l.getNode()}else{const p=_e(e);let y;if(l.isCompleteForChild(f)){d=t.serverCache.getNode();const v=j1(i,e,l.getNode(),d);v!=null?y=l.getNode().getImmediateChild(f).updateChild(p,v):y=l.getNode().getImmediateChild(f)}else y=Ab(i,f,t.serverCache);y!=null?u=n.filter.updateChild(l.getNode(),f,y,p,s,a):u=l.getNode()}}return bh(t,u,l.isFullyInitialized()||Ut(e),n.filter.filtersNodes())}}function ug(n,t,e,i,s,a,l,u){const d=t.serverCache;let f;const p=l?n.filter:n.filter.getIndexedFilter();if(Ut(e))f=p.updateFullNode(d.getNode(),i,null);else if(p.filtersNodes()&&!d.isFiltered()){const T=d.getNode().updateChild(e,i);f=p.updateFullNode(d.getNode(),T,null)}else{const T=jt(e);if(!d.isCompleteForPath(e)&&va(e)>1)return t;const S=_e(e),C=d.getNode().getImmediateChild(T).updateChild(S,i);T===".priority"?f=p.updatePriority(d.getNode(),C):f=p.updateChild(d.getNode(),T,C,S,Q2,null)}const y=H2(t,f,d.isFullyInitialized()||Ut(e),p.filtersNodes()),v=new Cb(s,y,a);return K2(n,y,e,s,v,u)}function q0(n,t,e,i,s,a,l){const u=t.eventCache;let d,f;const p=new Cb(s,t,a);if(Ut(e))f=n.filter.updateFullNode(t.eventCache.getNode(),i,l),d=bh(t,f,!0,n.filter.filtersNodes());else{const y=jt(e);if(y===".priority")f=n.filter.updatePriority(t.eventCache.getNode(),i),d=bh(t,f,u.isFullyInitialized(),u.isFiltered());else{const v=_e(e),T=u.getNode().getImmediateChild(y);let S;if(Ut(v))S=i;else{const N=p.getCompleteChild(y);N!=null?gb(v)===".priority"&&N.getChild(O2(v)).isEmpty()?S=N:S=N.updateChild(v,i):S=Rt.EMPTY_NODE}if(T.equals(S))d=t;else{const N=n.filter.updateChild(u.getNode(),y,S,v,p,l);d=bh(t,N,u.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function U1(n,t){return n.eventCache.isCompleteForChild(t)}function PU(n,t,e,i,s,a,l){let u=t;return i.foreach((d,f)=>{const p=Ne(e,d);U1(t,jt(p))&&(u=q0(n,u,p,f,s,a,l))}),i.foreach((d,f)=>{const p=Ne(e,d);U1(t,jt(p))||(u=q0(n,u,p,f,s,a,l))}),u}function F1(n,t,e){return e.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function W0(n,t,e,i,s,a,l,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d=t,f;Ut(e)?f=i:f=new pe(null).setTree(e,i);const p=t.serverCache.getNode();return f.children.inorderTraversal((y,v)=>{if(p.hasChild(y)){const T=t.serverCache.getNode().getImmediateChild(y),S=F1(n,T,v);d=ug(n,d,new he(y),S,s,a,l,u)}}),f.children.inorderTraversal((y,v)=>{const T=!t.serverCache.isCompleteForChild(y)&&v.value===null;if(!p.hasChild(y)&&!T){const S=t.serverCache.getNode().getImmediateChild(y),N=F1(n,S,v);d=ug(n,d,new he(y),N,s,a,l,u)}}),d}function LU(n,t,e,i,s,a,l){if(cg(s,e)!=null)return t;const u=t.serverCache.isFiltered(),d=t.serverCache;if(i.value!=null){if(Ut(e)&&d.isFullyInitialized()||d.isCompleteForPath(e))return ug(n,t,e,d.getNode().getChild(e),s,a,u,l);if(Ut(e)){let f=new pe(null);return d.getNode().forEachChild(ec,(p,y)=>{f=f.set(new he(p),y)}),W0(n,t,e,f,s,a,u,l)}else return t}else{let f=new pe(null);return i.foreach((p,y)=>{const v=Ne(e,p);d.isCompleteForPath(v)&&(f=f.set(p,d.getNode().getChild(v)))}),W0(n,t,e,f,s,a,u,l)}}function VU(n,t,e,i,s){const a=t.serverCache,l=H2(t,a.getNode(),a.isFullyInitialized()||Ut(e),a.isFiltered());return K2(n,l,e,i,Q2,s)}function jU(n,t,e,i,s,a){let l;if(cg(i,e)!=null)return t;{const u=new Cb(i,t,s),d=t.eventCache.getNode();let f;if(Ut(e)||jt(e)===".priority"){let p;if(t.serverCache.isFullyInitialized())p=lg(i,Vo(t));else{const y=t.serverCache.getNode();ut(y instanceof Rt,"serverChildren would be complete if leaf node"),p=Sb(i,y)}p=p,f=n.filter.updateFullNode(d,p,a)}else{const p=jt(e);let y=Ab(i,p,t.serverCache);y==null&&t.serverCache.isCompleteForChild(p)&&(y=d.getImmediateChild(p)),y!=null?f=n.filter.updateChild(d,p,y,_e(e),u,a):t.eventCache.getNode().hasChild(p)?f=n.filter.updateChild(d,p,Rt.EMPTY_NODE,_e(e),u,a):f=d,f.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=lg(i,Vo(t)),l.isLeafNode()&&(f=n.filter.updateFullNode(f,l,a)))}return l=t.serverCache.isFullyInitialized()||cg(i,Xt())!=null,bh(t,f,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new vb(i.getIndex()),a=iU(i);this.processor_=kU(a);const l=e.serverCache,u=e.eventCache,d=s.updateFullNode(Rt.EMPTY_NODE,l.getNode(),null),f=a.updateFullNode(Rt.EMPTY_NODE,u.getNode(),null),p=new Lo(d,l.isFullyInitialized(),s.filtersNodes()),y=new Lo(f,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=rp(y,p),this.eventGenerator_=new uU(this.query_)}get query(){return this.query_}}function FU(n){return n.viewCache_.serverCache.getNode()}function zU(n,t){const e=Vo(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Ut(t)&&!e.getImmediateChild(jt(t)).isEmpty())?e.getChild(t):null}function z1(n){return n.eventRegistrations_.length===0}function BU(n,t){n.eventRegistrations_.push(t)}function B1(n,t,e){const i=[];if(e){ut(t==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(e,s);l&&i.push(l)})}if(t){let s=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(!l.matches(t))s.push(l);else if(t.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function H1(n,t,e,i){t.type===Oi.MERGE&&t.source.queryId!==null&&(ut(Vo(n.viewCache_),"We should always have a full cache before handling merges"),ut(F0(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,a=MU(n.processor_,s,t,e,i);return DU(n.processor_,a.viewCache),ut(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,X2(n,a.changes,a.viewCache.eventCache.getNode(),null)}function HU(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ke,(a,l)=>{i.push(mc(a,l))}),e.isFullyInitialized()&&i.push(z2(e.getNode())),X2(n,i,e.getNode(),t)}function X2(n,t,e,i){const s=i?[i]:n.eventRegistrations_;return hU(n.eventGenerator_,t,e,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg;class qU{constructor(){this.views=new Map}}function WU(n){ut(!hg,"__referenceConstructor has already been defined"),hg=n}function GU(){return ut(hg,"Reference.ts has not been loaded"),hg}function YU(n){return n.views.size===0}function Rb(n,t,e,i){const s=t.source.queryId;if(s!==null){const a=n.views.get(s);return ut(a!=null,"SyncTree gave us an op for an invalid query."),H1(a,t,e,i)}else{let a=[];for(const l of n.views.values())a=a.concat(H1(l,t,e,i));return a}}function $U(n,t,e,i,s){const a=t._queryIdentifier,l=n.views.get(a);if(!l){let u=lg(e,s?i:null),d=!1;u?d=!0:i instanceof Rt?(u=Sb(e,i),d=!1):(u=Rt.EMPTY_NODE,d=!1);const f=rp(new Lo(u,d,!1),new Lo(i,s,!1));return new UU(t,f)}return l}function QU(n,t,e,i,s,a){const l=$U(n,t,i,s,a);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),BU(l,e),HU(l,e)}function KU(n,t,e,i){const s=t._queryIdentifier,a=[];let l=[];const u=ba(n);if(s==="default")for(const[d,f]of n.views.entries())l=l.concat(B1(f,e,i)),z1(f)&&(n.views.delete(d),f.query._queryParams.loadsAllData()||a.push(f.query));else{const d=n.views.get(s);d&&(l=l.concat(B1(d,e,i)),z1(d)&&(n.views.delete(s),d.query._queryParams.loadsAllData()||a.push(d.query)))}return u&&!ba(n)&&a.push(new(GU())(t._repo,t._path)),{removed:a,events:l}}function Z2(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function nc(n,t){let e=null;for(const i of n.views.values())e=e||zU(i,t);return e}function J2(n,t){if(t._queryParams.loadsAllData())return ap(n);{const i=t._queryIdentifier;return n.views.get(i)}}function tN(n,t){return J2(n,t)!=null}function ba(n){return ap(n)!=null}function ap(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg;function XU(n){ut(!dg,"__referenceConstructor has already been defined"),dg=n}function ZU(){return ut(dg,"Reference.ts has not been loaded"),dg}let JU=1;class q1{constructor(t){this.listenProvider_=t,this.syncPointTree_=new pe(null),this.pendingWriteTree_=CU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tF(n,t,e,i,s){return gU(n.pendingWriteTree_,t,e,i,s),s?Nc(n,new Po(Eb(),t,e)):[]}function eF(n,t,e,i){pU(n.pendingWriteTree_,t,e,i);const s=pe.fromObject(e);return Nc(n,new gc(Eb(),t,s))}function So(n,t,e=!1){const i=_U(n.pendingWriteTree_,t);if(yU(n.pendingWriteTree_,t)){let a=new pe(null);return i.snap!=null?a=a.set(Xt(),!0):wn(i.children,l=>{a=a.set(new he(l),!0)}),Nc(n,new og(i.path,a,e))}else return[]}function op(n,t,e){return Nc(n,new Po(wb(),t,e))}function nF(n,t,e){const i=pe.fromObject(e);return Nc(n,new gc(wb(),t,i))}function iF(n,t){return Nc(n,new Yh(wb(),t))}function sF(n,t,e){const i=Ib(n,e);if(i){const s=Nb(i),a=s.path,l=s.queryId,u=qn(a,t),d=new Yh(xb(l),u);return kb(n,a,d)}else return[]}function G0(n,t,e,i,s=!1){const a=t._path,l=n.syncPointTree_.get(a);let u=[];if(l&&(t._queryIdentifier==="default"||tN(l,t))){const d=KU(l,t,e,i);YU(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const f=d.removed;if(u=d.events,!s){const p=f.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=n.syncPointTree_.findOnPath(a,(v,T)=>ba(T));if(p&&!y){const v=n.syncPointTree_.subtree(a);if(!v.isEmpty()){const T=oF(v);for(let S=0;S<T.length;++S){const N=T[S],C=N.query,L=sN(n,N);n.listenProvider_.startListening(wh(C),fg(n,C),L.hashFn,L.onComplete)}}}!y&&f.length>0&&!i&&(p?n.listenProvider_.stopListening(wh(t),null):f.forEach(v=>{const T=n.queryToTagMap.get(lp(v));n.listenProvider_.stopListening(wh(v),T)}))}lF(n,f)}return u}function rF(n,t,e,i){const s=Ib(n,i);if(s!=null){const a=Nb(s),l=a.path,u=a.queryId,d=qn(l,t),f=new Po(xb(u),d,e);return kb(n,l,f)}else return[]}function aF(n,t,e,i){const s=Ib(n,i);if(s){const a=Nb(s),l=a.path,u=a.queryId,d=qn(l,t),f=pe.fromObject(e),p=new gc(xb(u),d,f);return kb(n,l,p)}else return[]}function W1(n,t,e,i=!1){const s=t._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(s,(v,T)=>{const S=qn(v,s);a=a||nc(T,S),l=l||ba(T)});let u=n.syncPointTree_.get(s);u?(l=l||ba(u),a=a||nc(u,Xt())):(u=new qU,n.syncPointTree_=n.syncPointTree_.set(s,u));let d;a!=null?d=!0:(d=!1,a=Rt.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((T,S)=>{const N=nc(S,Xt());N&&(a=a.updateImmediateChild(T,N))}));const f=tN(u,t);if(!f&&!t._queryParams.loadsAllData()){const v=lp(t);ut(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const T=cF();n.queryToTagMap.set(v,T),n.tagToQueryMap.set(T,v)}const p=Tb(n.pendingWriteTree_,s);let y=QU(u,t,e,p,a,d);if(!f&&!l&&!i){const v=J2(u,t);y=y.concat(uF(n,t,v))}return y}function eN(n,t,e){const s=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(t,(l,u)=>{const d=qn(l,t),f=nc(u,d);if(f)return f});return G2(s,t,a,e,!0)}function Nc(n,t){return nN(t,n.syncPointTree_,null,Tb(n.pendingWriteTree_,Xt()))}function nN(n,t,e,i){if(Ut(n.path))return iN(n,t,e,i);{const s=t.get(Xt());e==null&&s!=null&&(e=nc(s,Xt()));let a=[];const l=jt(n.path),u=n.operationForChild(l),d=t.children.get(l);if(d&&u){const f=e?e.getImmediateChild(l):null,p=Y2(i,l);a=a.concat(nN(u,d,f,p))}return s&&(a=a.concat(Rb(s,n,i,e))),a}}function iN(n,t,e,i){const s=t.get(Xt());e==null&&s!=null&&(e=nc(s,Xt()));let a=[];return t.children.inorderTraversal((l,u)=>{const d=e?e.getImmediateChild(l):null,f=Y2(i,l),p=n.operationForChild(l);p&&(a=a.concat(iN(p,u,d,f)))}),s&&(a=a.concat(Rb(s,n,i,e))),a}function sN(n,t){const e=t.query,i=fg(n,e);return{hashFn:()=>(FU(t)||Rt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?sF(n,e._path,i):iF(n,e._path);{const a=e5(s,e);return G0(n,e,null,a)}}}}function fg(n,t){const e=lp(t);return n.queryToTagMap.get(e)}function lp(n){return n._path.toString()+"$"+n._queryIdentifier}function Ib(n,t){return n.tagToQueryMap.get(t)}function Nb(n){const t=n.indexOf("$");return ut(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new he(n.substr(0,t))}}function kb(n,t,e){const i=n.syncPointTree_.get(t);ut(i,"Missing sync point for query tag that we're tracking");const s=Tb(n.pendingWriteTree_,t);return Rb(i,e,s,null)}function oF(n){return n.fold((t,e,i)=>{if(e&&ba(e))return[ap(e)];{let s=[];return e&&(s=Z2(e)),wn(i,(a,l)=>{s=s.concat(l)}),s}})}function wh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(ZU())(n._repo,n._path):n}function lF(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const s=lp(i),a=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(a)}}}function cF(){return JU++}function uF(n,t,e){const i=t._path,s=fg(n,t),a=sN(n,e),l=n.listenProvider_.startListening(wh(t),s,a.hashFn,a.onComplete),u=n.syncPointTree_.subtree(i);if(s)ut(!ba(u.value),"If we're adding a query, it shouldn't be shadowed");else{const d=u.fold((f,p,y)=>{if(!Ut(f)&&p&&ba(p))return[ap(p).query];{let v=[];return p&&(v=v.concat(Z2(p).map(T=>T.query))),wn(y,(T,S)=>{v=v.concat(S)}),v}});for(let f=0;f<d.length;++f){const p=d[f];n.listenProvider_.stopListening(wh(p),fg(n,p))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Db(e)}node(){return this.node_}}class Mb{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Ne(this.path_,t);return new Mb(this.syncTree_,e)}node(){return eN(this.syncTree_,this.path_)}}const hF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},G1=function(n,t,e){if(!n||typeof n!="object")return n;if(ut(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return dF(n[".sv"],t,e);if(typeof n[".sv"]=="object")return fF(n[".sv"],t);ut(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},dF=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:ut(!1,"Unexpected server value: "+n)}},fF=function(n,t,e){n.hasOwnProperty("increment")||ut(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ut(!1,"Unexpected increment value: "+i);const s=t.node();if(ut(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const l=s.getValue();return typeof l!="number"?i:l+i},rN=function(n,t,e,i){return Ob(t,new Mb(e,n),i)},mF=function(n,t,e){return Ob(n,new Db(t),e)};function Ob(n,t,e){const i=n.getPriority().val(),s=G1(i,t.getImmediateChild(".priority"),e);let a;if(n.isLeafNode()){const l=n,u=G1(l.getValue(),t,e);return u!==l.getValue()||s!==l.getPriority().val()?new ln(u,vn(s)):n}else{const l=n;return a=l,s!==l.getPriority().val()&&(a=a.updatePriority(new ln(s))),l.forEachChild(ke,(u,d)=>{const f=Ob(d,t.getImmediateChild(u),e);f!==d&&(a=a.updateImmediateChild(u,f))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Lb(n,t){let e=t instanceof he?t:new he(t),i=n,s=jt(e);for(;s!==null;){const a=rc(i.node.children,s)||{children:{},childCount:0};i=new Pb(s,i,a),e=_e(e),s=jt(e)}return i}function kc(n){return n.node.value}function aN(n,t){n.node.value=t,Y0(n)}function oN(n){return n.node.childCount>0}function gF(n){return kc(n)===void 0&&!oN(n)}function cp(n,t){wn(n.node.children,(e,i)=>{t(new Pb(e,n,i))})}function lN(n,t,e,i){e&&t(n),cp(n,s=>{lN(s,t,!0)})}function pF(n,t,e){let i=n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function vd(n){return new he(n.parent===null?n.name:vd(n.parent)+"/"+n.name)}function Y0(n){n.parent!==null&&_F(n.parent,n.name,n)}function _F(n,t,e){const i=gF(e),s=ys(n.node.children,t);i&&s?(delete n.node.children[t],n.node.childCount--,Y0(n)):!i&&!s&&(n.node.children[t]=e.node,n.node.childCount++,Y0(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=/[\[\].#$\/\u0000-\u001F\u007F]/,vF=/[\[\].#$\u0000-\u001F\u007F]/,Wy=10*1024*1024,Vb=function(n){return typeof n=="string"&&n.length!==0&&!yF.test(n)},cN=function(n){return typeof n=="string"&&n.length!==0&&!vF.test(n)},bF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cN(n)},EF=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!ub(n)||n&&typeof n=="object"&&ys(n,".sv")},jb=function(n,t,e){const i=e instanceof he?new P5(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+_o(i));if(typeof t=="function")throw new Error(n+"contains a function "+_o(i)+" with contents = "+t.toString());if(ub(t))throw new Error(n+"contains "+t.toString()+" "+_o(i));if(typeof t=="string"&&t.length>Wy/3&&Pg(t)>Wy)throw new Error(n+"contains a string greater than "+Wy+" utf8 bytes "+_o(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,a=!1;if(wn(t,(l,u)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!Vb(l)))throw new Error(n+" contains an invalid key ("+l+") "+_o(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);L5(i,l),jb(n,u,i),V5(i)}),s&&a)throw new Error(n+' contains ".value" child '+_o(i)+" in addition to actual children.")}},wF=function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const a=Hh(i);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!Vb(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(O5);let s=null;for(e=0;e<t.length;e++){if(i=t[e],s!==null&&bi(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},xF=function(n,t,e,i){const s=dv(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const a=[];wn(t,(l,u)=>{const d=new he(l);if(jb(s,u,Ne(e,d)),gb(d)===".priority"&&!EF(u))throw new Error(s+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(d)}),wF(s,a)},uN=function(n,t,e,i){if(!cN(e))throw new Error(dv(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},TF=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),uN(n,t,e)},SF=function(n,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Vb(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!bF(e))throw new Error(dv(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ub(n,t){let e=null;for(let i=0;i<t.length;i++){const s=t[i],a=s.getPath();e!==null&&!pb(a,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:a}),e.events.push(s)}e&&n.eventLists_.push(e)}function hN(n,t,e){Ub(n,e),dN(n,i=>pb(i,t))}function hr(n,t,e){Ub(n,e),dN(n,i=>bi(i,t)||bi(t,i))}function dN(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const a=s.path;t(a)?(CF(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function CF(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(e!==null){n.events[t]=null;const i=e.getEventRunner();yh&&yn("event: "+e.toString()),Ic(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="repo_interrupt",IF=25;class NF{constructor(t,e,i,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ag(),this.transactionQueueTree_=new Pb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kF(n,t,e){if(n.stats_=fb(n.repoInfo_),n.forceRestClient_||r5())n.server_=new rg(n.repoInfo_,(i,s,a,l)=>{Y1(n,i,s,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>$1(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hn(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new sr(n.repoInfo_,t,(i,s,a,l)=>{Y1(n,i,s,a,l)},i=>{$1(n,i)},i=>{MF(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=u5(n.repoInfo_,()=>new cU(n.stats_,n.server_)),n.infoData_=new sU,n.infoSyncTree_=new q1({startListening:(i,s,a,l)=>{let u=[];const d=n.infoData_.getNode(i._path);return d.isEmpty()||(u=op(n.infoSyncTree_,i._path,d),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),zb(n,"connected",!1),n.serverSyncTree_=new q1({startListening:(i,s,a,l)=>(n.server_.listen(i,a,s,(u,d)=>{const f=l(u,d);hr(n.eventQueue_,i._path,f)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function DF(n){const e=n.infoData_.getNode(new he(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function Fb(n){return hF({timestamp:DF(n)})}function Y1(n,t,e,i,s){n.dataUpdateCount++;const a=new he(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(s)if(i){const d=jm(e,f=>vn(f));l=aF(n.serverSyncTree_,a,d,s)}else{const d=vn(e);l=rF(n.serverSyncTree_,a,d,s)}else if(i){const d=jm(e,f=>vn(f));l=nF(n.serverSyncTree_,a,d)}else{const d=vn(e);l=op(n.serverSyncTree_,a,d)}let u=a;l.length>0&&(u=$h(n,a)),hr(n.eventQueue_,u,l)}function $1(n,t){zb(n,"connected",t),t===!1&&PF(n)}function MF(n,t){wn(t,(e,i)=>{zb(n,e,i)})}function zb(n,t,e){const i=new he("/.info/"+t),s=vn(e);n.infoData_.updateSnapshot(i,s);const a=op(n.infoSyncTree_,i,s);hr(n.eventQueue_,i,a)}function fN(n){return n.nextWriteId_++}function OF(n,t,e,i){Bb(n,"update",{path:t.toString(),value:e});let s=!0;const a=Fb(n),l={};if(wn(e,(u,d)=>{s=!1,l[u]=rN(Ne(t,u),vn(d),n.serverSyncTree_,a)}),s)yn("update() called with empty data.  Don't do anything."),Q1(n,i,"ok",void 0);else{const u=fN(n),d=eF(n.serverSyncTree_,t,l,u);Ub(n.eventQueue_,d),n.server_.merge(t.toString(),e,(f,p)=>{const y=f==="ok";y||Yn("update at "+t+" failed: "+f);const v=So(n.serverSyncTree_,u,!y),T=v.length>0?$h(n,t):t;hr(n.eventQueue_,T,v),Q1(n,i,f,p)}),wn(e,f=>{const p=yN(n,Ne(t,f));$h(n,p)}),hr(n.eventQueue_,t,[])}}function PF(n){Bb(n,"onDisconnectEvents");const t=Fb(n),e=ag();U0(n.onDisconnect_,Xt(),(s,a)=>{const l=rN(s,a,n.serverSyncTree_,t);B2(e,s,l)});let i=[];U0(e,Xt(),(s,a)=>{i=i.concat(op(n.serverSyncTree_,s,a));const l=yN(n,s);$h(n,l)}),n.onDisconnect_=ag(),hr(n.eventQueue_,Xt(),i)}function LF(n,t,e){let i;jt(t._path)===".info"?i=W1(n.infoSyncTree_,t,e):i=W1(n.serverSyncTree_,t,e),hN(n.eventQueue_,t._path,i)}function VF(n,t,e){let i;jt(t._path)===".info"?i=G0(n.infoSyncTree_,t,e):i=G0(n.serverSyncTree_,t,e),hN(n.eventQueue_,t._path,i)}function jF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(RF)}function Bb(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),yn(e,...t)}function Q1(n,t,e,i){t&&Ic(()=>{if(e==="ok")t(null);else{const s=(e||"error").toUpperCase();let a=s;i&&(a+=": "+i);const l=new Error(a);l.code=s,t(l)}})}function mN(n,t,e){return eN(n.serverSyncTree_,t,e)||Rt.EMPTY_NODE}function Hb(n,t=n.transactionQueueTree_){if(t||up(n,t),kc(t)){const e=pN(n,t);ut(e.length>0,"Sending zero length transaction queue"),e.every(s=>s.status===0)&&UF(n,vd(t),e)}else oN(t)&&cp(t,e=>{Hb(n,e)})}function UF(n,t,e){const i=e.map(f=>f.currentWriteId),s=mN(n,t,i);let a=s;const l=s.hash();for(let f=0;f<e.length;f++){const p=e[f];ut(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const y=qn(t,p.path);a=a.updateChild(y,p.currentOutputSnapshotRaw)}const u=a.val(!0),d=t;n.server_.put(d.toString(),u,f=>{Bb(n,"transaction put response",{path:d.toString(),status:f});let p=[];if(f==="ok"){const y=[];for(let v=0;v<e.length;v++)e[v].status=2,p=p.concat(So(n.serverSyncTree_,e[v].currentWriteId)),e[v].onComplete&&y.push(()=>e[v].onComplete(null,!0,e[v].currentOutputSnapshotResolved)),e[v].unwatcher();up(n,Lb(n.transactionQueueTree_,t)),Hb(n,n.transactionQueueTree_),hr(n.eventQueue_,t,p);for(let v=0;v<y.length;v++)Ic(y[v])}else{if(f==="datastale")for(let y=0;y<e.length;y++)e[y].status===3?e[y].status=4:e[y].status=0;else{Yn("transaction at "+d.toString()+" failed: "+f);for(let y=0;y<e.length;y++)e[y].status=4,e[y].abortReason=f}$h(n,t)}},l)}function $h(n,t){const e=gN(n,t),i=vd(e),s=pN(n,e);return FF(n,s,i),i}function FF(n,t,e){if(t.length===0)return;const i=[];let s=[];const l=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const d=t[u],f=qn(e,d.path);let p=!1,y;if(ut(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)p=!0,y=d.abortReason,s=s.concat(So(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=IF)p=!0,y="maxretry",s=s.concat(So(n.serverSyncTree_,d.currentWriteId,!0));else{const v=mN(n,d.path,l);d.currentInputSnapshot=v;const T=t[u].update(v.val());if(T!==void 0){jb("transaction failed: Data returned ",T,d.path);let S=vn(T);typeof T=="object"&&T!=null&&ys(T,".priority")||(S=S.updatePriority(v.getPriority()));const C=d.currentWriteId,L=Fb(n),W=mF(S,v,L);d.currentOutputSnapshotRaw=S,d.currentOutputSnapshotResolved=W,d.currentWriteId=fN(n),l.splice(l.indexOf(C),1),s=s.concat(tF(n.serverSyncTree_,d.path,W,d.currentWriteId,d.applyLocally)),s=s.concat(So(n.serverSyncTree_,C,!0))}else p=!0,y="nodata",s=s.concat(So(n.serverSyncTree_,d.currentWriteId,!0))}hr(n.eventQueue_,e,s),s=[],p&&(t[u].status=2,function(v){setTimeout(v,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(y==="nodata"?i.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):i.push(()=>t[u].onComplete(new Error(y),!1,null))))}up(n,n.transactionQueueTree_);for(let u=0;u<i.length;u++)Ic(i[u]);Hb(n,n.transactionQueueTree_)}function gN(n,t){let e,i=n.transactionQueueTree_;for(e=jt(t);e!==null&&kc(i)===void 0;)i=Lb(i,e),t=_e(t),e=jt(t);return i}function pN(n,t){const e=[];return _N(n,t,e),e.sort((i,s)=>i.order-s.order),e}function _N(n,t,e){const i=kc(t);if(i)for(let s=0;s<i.length;s++)e.push(i[s]);cp(t,s=>{_N(n,s,e)})}function up(n,t){const e=kc(t);if(e){let i=0;for(let s=0;s<e.length;s++)e[s].status!==2&&(e[i]=e[s],i++);e.length=i,aN(t,e.length>0?e:void 0)}cp(t,i=>{up(n,i)})}function yN(n,t){const e=vd(gN(n,t)),i=Lb(n.transactionQueueTree_,t);return pF(i,s=>{Gy(n,s)}),Gy(n,i),lN(i,s=>{Gy(n,s)}),e}function Gy(n,t){const e=kc(t);if(e){const i=[];let s=[],a=-1;for(let l=0;l<e.length;l++)e[l].status===3||(e[l].status===1?(ut(a===l-1,"All SENT items should be at beginning of queue."),a=l,e[l].status=3,e[l].abortReason="set"):(ut(e[l].status===0,"Unexpected transaction status in abort"),e[l].unwatcher(),s=s.concat(So(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?aN(t,void 0):e.length=a+1,hr(n.eventQueue_,vd(t),s);for(let l=0;l<i.length;l++)Ic(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let s=e[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function BF(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const e of n.split("&")){if(e.length===0)continue;const i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Yn(`Invalid query segment '${e}' in query '${n}'`)}return t}const K1=function(n,t){const e=HF(n),i=e.namespace;e.domain==="firebase.com"&&ur(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&ur("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||K6();const s=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new S2(e.host,e.secure,i,s,t,"",i!==e.subdomain),path:new he(e.pathString)}},HF=function(n){let t="",e="",i="",s="",a="",l=!0,u="https",d=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(u=n.substring(0,f-1),n=n.substring(f+2));let p=n.indexOf("/");p===-1&&(p=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),t=n.substring(0,Math.min(p,y)),p<y&&(s=zF(n.substring(p,y)));const v=BF(n.substring(Math.min(n.length,y)));f=t.indexOf(":"),f>=0?(l=u==="https"||u==="wss",d=parseInt(t.substring(f+1),10)):f=t.length;const T=t.slice(0,f);if(T.toLowerCase()==="localhost")e="localhost";else if(T.split(".").length<=2)e=T;else{const S=t.indexOf(".");i=t.substring(0,S).toLowerCase(),e=t.substring(S+1),a=i}"ns"in v&&(a=v.ns)}return{host:t,port:d,domain:e,subdomain:i,secure:l,scheme:u,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(t,e,i,s){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+hn(this.snapshot.exportVal())}}class WF{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return ut(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t,e,i,s){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=s}get key(){return Ut(this._path)?null:gb(this._path)}get ref(){return new Ra(this._repo,this._path)}get _queryIdentifier(){const t=O1(this._queryParams),e=hb(t);return e==="{}"?"default":e}get _queryObject(){return O1(this._queryParams)}isEqual(t){if(t=xe(t),!(t instanceof qb))return!1;const e=this._repo===t._repo,i=pb(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return e&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+M5(this._path)}}class Ra extends qb{constructor(t,e){super(t,e,new bb,!1)}get parent(){const t=O2(this._path);return t===null?null:new Ra(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class mg{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new he(t),i=$0(this.ref,t);return new mg(this._node.getChild(e),i,ke)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>t(new mg(s,$0(this.ref,i),ke)))}hasChild(t){const e=new he(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zr(n,t){return n=xe(n),n._checkNotDeleted("ref"),t!==void 0?$0(n._root,t):n._root}function $0(n,t){return n=xe(n),jt(n._path)===null?TF("child","path",t):uN("child","path",t),new Ra(n._repo,Ne(n._path,t))}function X1(n,t){xF("update",t,n._path);const e=new Og;return OF(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}class Wb{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const i=e._queryParams.getIndex();return new qF("value",this,new mg(t.snapshotNode,new Ra(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new WF(this,t,e):null}matches(t){return t instanceof Wb?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function YF(n,t,e,i,s){const a=new GF(e,void 0),l=new Wb(a);return LF(n._repo,n,l),()=>VF(n._repo,n,l)}function Yl(n,t,e,i){return YF(n,"value",t)}WU(Ra);XU(Ra);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="FIREBASE_DATABASE_EMULATOR_HOST",Q0={};let QF=!1;function KF(n,t,e,i){const s=t.lastIndexOf(":"),a=t.substring(0,s),l=xa(a);n.repoInfo_=new S2(t,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,e),i&&(n.authTokenProvider_=i)}function XF(n,t,e,i,s){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||ur("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=K1(a,s),u=l.repoInfo,d;typeof process<"u"&&p1&&(d=p1[$F]),d?(a=`http://${d}?ns=${u.namespace}`,l=K1(a,s),u=l.repoInfo):l.repoInfo.secure;const f=new o5(n.name,n.options,t);SF("Invalid Firebase Database URL",l),Ut(l.path)||ur("Database URL must point to the root of a Firebase Database (not including a child path).");const p=JF(u,n,f,new a5(n,e));return new t9(p,n)}function ZF(n,t){const e=Q0[t];(!e||e[n.key]!==n)&&ur(`Database ${t}(${n.repoInfo_}) has already been deleted.`),jF(n),delete e[n.key]}function JF(n,t,e,i){let s=Q0[t.name];s||(s={},Q0[t.name]=s);let a=s[n.toURLString()];return a&&ur("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new NF(n,QF,e,i),s[n.toURLString()]=a,a}class t9{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ra(this._repo,Xt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ZF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&ur("Cannot call "+t+" on a deleted database.")}}function e9(n=mv(),t){const e=Vg(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=HC("database");i&&n9(e,...i)}return e}function n9(n,t,e,i={}){n=xe(n),n._checkNotDeleted("useEmulator");const s=`${t}:${e}`,a=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ha(i,a.repoInfo_.emulatorOptions))return;ur("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&ur('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new km(km.OWNER);else if(i.mockUserToken){const u=typeof i.mockUserToken=="string"?i.mockUserToken:GC(i.mockUserToken,n.app.options.projectId);l=new km(u)}xa(t)&&(cv(t),uv("Database",!0)),KF(a,s,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(n){q6(zo),Io(new da("database",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return XF(i,s,a,e)},"PUBLIC").setMultipleInstances(!0)),os(_1,y1,n),os(_1,y1,"esm2020")}sr.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};sr.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};i9();const s9={apiKey:"AIzaSyArw4hta6dNfJRp48bY5Z2b47ag_R5G-mI",authDomain:"studi-2e08c.firebaseapp.com",projectId:"studi-2e08c",storageBucket:"studi-2e08c.firebasestorage.app",messagingSenderId:"414723164531",appId:"1:414723164531:web:9c553047baef7d1b681d06",measurementId:"G-FNRLSJDHG8",databaseURL:"https://studi-2e08c-default-rtdb.firebaseio.com"},Gb=XC(s9),xi=bV(Gb),vN=new Ks,Ze=T6(Gb),Jr=e9(Gb),r9=B.createContext();function a9({children:n}){const[t,e]=B.useState(null),[i,s]=B.useState(!0);B.useEffect(()=>wR(xi,u=>{e(u),s(!1)}),[]);const a={currentUser:t,loading:i};return E.jsx(r9.Provider,{value:a,children:!i&&n})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o9(n,t,e,i){function s(a){return a instanceof e?a:new e(function(l){l(a)})}return new(e||(e=Promise))(function(a,l){function u(p){try{f(i.next(p))}catch(y){l(y)}}function d(p){try{f(i.throw(p))}catch(y){l(y)}}function f(p){p.done?a(p.value):s(p.value).then(u,d)}f((i=i.apply(n,[])).next())})}function l9(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(p){return d([f,p])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(a=f[0]&2?s.return:f[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,f[1])).done)return a;switch(s=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,s=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){e.label=f[1];break}if(f[0]===6&&e.label<a[1]){e.label=a[1],a=f;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(f);break}a[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(n,e)}catch(p){f=[6,p],s=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $l=function(){return $l=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$l.apply(this,arguments)},bN=function(n){return{loading:n==null,value:n}},c9=function(){return function(n,t){switch(t.type){case"error":return $l($l({},n),{error:t.error,loading:!1,value:void 0});case"reset":return bN(t.defaultValue);case"value":return $l($l({},n),{error:void 0,loading:!1,value:t.value});default:return n}}},u9=function(n){var t=n?n():void 0,e=B.useReducer(c9(),bN(t)),i=e[0],s=e[1],a=B.useCallback(function(){var d=n?n():void 0;s({type:"reset",defaultValue:d})},[n]),l=B.useCallback(function(d){s({type:"error",error:d})},[]),u=B.useCallback(function(d){s({type:"value",value:d})},[]);return B.useMemo(function(){return{error:i.error,loading:i.loading,reset:a,setError:l,setValue:u,value:i.value}},[i.error,i.loading,a,l,u,i.value])},hp=function(n,t){var e=u9(function(){return n.currentUser}),i=e.error,s=e.loading,a=e.setError,l=e.setValue,u=e.value;return B.useEffect(function(){var d=wR(n,function(f){return o9(void 0,void 0,void 0,function(){var p;return l9(this,function(y){switch(y.label){case 0:return[3,4];case 1:return y.trys.push([1,3,,4]),[4,t.onUserChanged(f)];case 2:return y.sent(),[3,4];case 3:return p=y.sent(),a(p),[3,4];case 4:return l(f),[2]}})})},a);return function(){d()}},[n]),[u,s,i]};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function bd(n){return n+.5|0}const ta=(n,t,e)=>Math.max(Math.min(n,e),t);function lh(n){return ta(bd(n*2.55),0,255)}function ua(n){return ta(bd(n*255),0,255)}function Qs(n){return ta(bd(n/2.55)/100,0,1)}function Z1(n){return ta(bd(n*100),0,100)}const yi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},K0=[..."0123456789ABCDEF"],h9=n=>K0[n&15],d9=n=>K0[(n&240)>>4]+K0[n&15],em=n=>(n&240)>>4===(n&15),f9=n=>em(n.r)&&em(n.g)&&em(n.b)&&em(n.a);function m9(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&yi[n[1]]*17,g:255&yi[n[2]]*17,b:255&yi[n[3]]*17,a:t===5?yi[n[4]]*17:255}:(t===7||t===9)&&(e={r:yi[n[1]]<<4|yi[n[2]],g:yi[n[3]]<<4|yi[n[4]],b:yi[n[5]]<<4|yi[n[6]],a:t===9?yi[n[7]]<<4|yi[n[8]]:255})),e}const g9=(n,t)=>n<255?t(n):"";function p9(n){var t=f9(n)?h9:d9;return n?"#"+t(n.r)+t(n.g)+t(n.b)+g9(n.a,t):void 0}const _9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function EN(n,t,e){const i=t*Math.min(e,1-e),s=(a,l=(a+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function y9(n,t,e){const i=(s,a=(s+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function v9(n,t,e){const i=EN(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function b9(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Yb(n){const e=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(e,i,s),l=Math.min(e,i,s),u=(a+l)/2;let d,f,p;return a!==l&&(p=a-l,f=u>.5?p/(2-a-l):p/(a+l),d=b9(e,i,s,p,a),d=d*60+.5),[d|0,f||0,u]}function $b(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ua)}function Qb(n,t,e){return $b(EN,n,t,e)}function E9(n,t,e){return $b(v9,n,t,e)}function w9(n,t,e){return $b(y9,n,t,e)}function wN(n){return(n%360+360)%360}function x9(n){const t=_9.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?lh(+t[5]):ua(+t[5]));const s=wN(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=E9(s,a,l):t[1]==="hsv"?i=w9(s,a,l):i=Qb(s,a,l),{r:i[0],g:i[1],b:i[2],a:e}}function T9(n,t){var e=Yb(n);e[0]=wN(e[0]+t),e=Qb(e),n.r=e[0],n.g=e[1],n.b=e[2]}function S9(n){if(!n)return;const t=Yb(n),e=t[0],i=Z1(t[1]),s=Z1(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${Qs(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const J1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function A9(){const n={},t=Object.keys(tA),e=Object.keys(J1);let i,s,a,l,u;for(i=0;i<t.length;i++){for(l=u=t[i],s=0;s<e.length;s++)a=e[s],u=u.replace(a,J1[a]);a=parseInt(tA[l],16),n[u]=[a>>16&255,a>>8&255,a&255]}return n}let nm;function C9(n){nm||(nm=A9(),nm.transparent=[0,0,0,0]);const t=nm[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const R9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function I9(n){const t=R9.exec(n);let e=255,i,s,a;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?lh(l):ta(l*255,0,255)}return i=+t[1],s=+t[3],a=+t[5],i=255&(t[2]?lh(i):ta(i,0,255)),s=255&(t[4]?lh(s):ta(s,0,255)),a=255&(t[6]?lh(a):ta(a,0,255)),{r:i,g:s,b:a,a:e}}}function N9(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Qs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Yy=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Fl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function k9(n,t,e){const i=Fl(Qs(n.r)),s=Fl(Qs(n.g)),a=Fl(Qs(n.b));return{r:ua(Yy(i+e*(Fl(Qs(t.r))-i))),g:ua(Yy(s+e*(Fl(Qs(t.g))-s))),b:ua(Yy(a+e*(Fl(Qs(t.b))-a))),a:n.a+e*(t.a-n.a)}}function im(n,t,e){if(n){let i=Yb(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Qb(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function xN(n,t){return n&&Object.assign(t||{},n)}function eA(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ua(n[3]))):(t=xN(n,{r:0,g:0,b:0,a:1}),t.a=ua(t.a)),t}function D9(n){return n.charAt(0)==="r"?I9(n):x9(n)}class Qh{constructor(t){if(t instanceof Qh)return t;const e=typeof t;let i;e==="object"?i=eA(t):e==="string"&&(i=m9(t)||C9(t)||D9(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=xN(this._rgb);return t&&(t.a=Qs(t.a)),t}set rgb(t){this._rgb=eA(t)}rgbString(){return this._valid?N9(this._rgb):void 0}hexString(){return this._valid?p9(this._rgb):void 0}hslString(){return this._valid?S9(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let a;const l=e===a?.5:e,u=2*l-1,d=i.a-s.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;a=1-f,i.r=255&f*i.r+a*s.r+.5,i.g=255&f*i.g+a*s.g+.5,i.b=255&f*i.b+a*s.b+.5,i.a=l*i.a+(1-l)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=k9(this._rgb,t._rgb,e)),this}clone(){return new Qh(this.rgb)}alpha(t){return this._rgb.a=ua(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=bd(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return im(this._rgb,2,t),this}darken(t){return im(this._rgb,2,-t),this}saturate(t){return im(this._rgb,1,t),this}desaturate(t){return im(this._rgb,1,-t),this}rotate(t){return T9(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ws(){}const M9=(()=>{let n=0;return()=>n++})();function Se(n){return n==null}function dn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Yt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ti(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ns(n,t){return Ti(n)?n:t}function te(n,t){return typeof n>"u"?t:n}const O9=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,TN=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function ve(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function re(n,t,e,i){let s,a,l;if(dn(n))for(a=n.length,s=0;s<a;s++)t.call(e,n[s],s);else if(Yt(n))for(l=Object.keys(n),a=l.length,s=0;s<a;s++)t.call(e,n[l[s]],l[s])}function gg(n,t){let e,i,s,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],a=t[e],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function pg(n){if(dn(n))return n.map(pg);if(Yt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=pg(n[e[s]]);return t}return n}function SN(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function P9(n,t,e,i){if(!SN(n))return;const s=t[n],a=e[n];Yt(s)&&Yt(a)?Kh(s,a,i):t[n]=pg(a)}function Kh(n,t,e){const i=dn(t)?t:[t],s=i.length;if(!Yt(n))return n;e=e||{};const a=e.merger||P9;let l;for(let u=0;u<s;++u){if(l=i[u],!Yt(l))continue;const d=Object.keys(l);for(let f=0,p=d.length;f<p;++f)a(d[f],n,l,e)}return n}function xh(n,t){return Kh(n,t,{merger:L9})}function L9(n,t,e){if(!SN(n))return;const i=t[n],s=e[n];Yt(i)&&Yt(s)?xh(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=pg(s))}const nA={"":n=>n,x:n=>n.x,y:n=>n.y};function V9(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function j9(n){const t=V9(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Xh(n,t){return(nA[t]||(nA[t]=j9(t)))(n)}function Kb(n){return n.charAt(0).toUpperCase()+n.slice(1)}const _g=n=>typeof n<"u",Ea=n=>typeof n=="function",iA=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function U9(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const fe=Math.PI,We=2*fe,yg=Number.POSITIVE_INFINITY,F9=fe/180,Je=fe/2,fo=fe/4,sA=fe*2/3,AN=Math.log10,vg=Math.sign;function Dm(n,t,e){return Math.abs(n-t)<e}function rA(n){const t=Math.round(n);n=Dm(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(AN(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function z9(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,a)=>s-a).pop(),t}function B9(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function bg(n){return!B9(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function H9(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function q9(n,t,e){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][e],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function tr(n){return n*(fe/180)}function W9(n){return n*(180/fe)}function aA(n){if(!Ti(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function CN(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let a=Math.atan2(i,e);return a<-.5*fe&&(a+=We),{angle:a,distance:s}}function G9(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function as(n){return(n%We+We)%We}function Eg(n,t,e,i){const s=as(n),a=as(t),l=as(e),u=as(a-s),d=as(l-s),f=as(s-a),p=as(s-l);return s===a||s===l||i&&a===l||u>d&&f<p}function Gn(n,t,e){return Math.max(t,Math.min(e,n))}function Y9(n){return Gn(n,-32768,32767)}function Ao(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Xb(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,e(a)?s=a:i=a;return{lo:s,hi:i}}const X0=(n,t,e,i)=>Xb(n,e,i?s=>{const a=n[s][t];return a<e||a===e&&n[s+1][t]===e}:s=>n[s][t]<e),$9=(n,t,e)=>Xb(n,e,i=>n[i][t]>=e);function Q9(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const RN=["push","pop","shift","splice","unshift"];function K9(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),RN.forEach(e=>{const i="_onData"+Kb(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const l=s.apply(this,a);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...a)}),l}})})}function oA(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(RN.forEach(a=>{delete n[a]}),delete n._chartjs)}function X9(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const IN=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function NN(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,IN.call(window,()=>{i=!1,n.apply(t,e)}))}}function Z9(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Zb=n=>n==="start"?"left":n==="end"?"right":"center",Cn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,J9=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,sm=n=>n===0||n===1,lA=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*We/e)),cA=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*We/e)+1,Th={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Je)+1,easeOutSine:n=>Math.sin(n*Je),easeInOutSine:n=>-.5*(Math.cos(fe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>sm(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>sm(n)?n:lA(n,.075,.3),easeOutElastic:n=>sm(n)?n:cA(n,.075,.3),easeInOutElastic(n){return sm(n)?n:n<.5?.5*lA(n*2,.1125,.45):.5+.5*cA(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Th.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Th.easeInBounce(n*2)*.5:Th.easeOutBounce(n*2-1)*.5+.5};function kN(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function uA(n){return kN(n)?n:new Qh(n)}function $y(n){return kN(n)?n:new Qh(n).saturate(.5).darken(.1).hexString()}const tz=["x","y","borderWidth","radius","tension"],ez=["color","borderColor","backgroundColor"];function nz(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:ez},numbers:{type:"number",properties:tz}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function iz(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hA=new Map;function sz(n,t){t=t||{};const e=n+JSON.stringify(t);let i=hA.get(e);return i||(i=new Intl.NumberFormat(n,t),hA.set(e,i)),i}function Jb(n,t,e){return sz(t,e).format(n)}const rz={values(n){return dn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(e.length>1){const f=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),a=az(n,e)}const l=AN(Math.abs(a)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),Jb(n,i,d)}};function az(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var DN={formatters:rz};function oz(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:DN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const jo=Object.create(null),Z0=Object.create(null);function Sh(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function Qy(n,t,e){return typeof t=="string"?Kh(Sh(n,t),e):Kh(Sh(n,""),t)}class lz{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>$y(s.backgroundColor),this.hoverBorderColor=(i,s)=>$y(s.borderColor),this.hoverColor=(i,s)=>$y(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Qy(this,t,e)}get(t){return Sh(this,t)}describe(t,e){return Qy(Z0,t,e)}override(t,e){return Qy(jo,t,e)}route(t,e,i,s){const a=Sh(this,t),l=Sh(this,i),u="_"+e;Object.defineProperties(a,{[u]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[u],f=l[s];return Yt(d)?Object.assign({},f,d):te(d,f)},set(d){this[u]=d}}})}apply(t){t.forEach(e=>e(this))}}var Le=new lz({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nz,iz,oz]);function cz(n){return!n||Se(n.size)||Se(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function dA(n,t,e,i,s){let a=t[s];return a||(a=t[s]=n.measureText(s).width,e.push(s)),a>i&&(i=a),i}function mo(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function fA(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function mA(n,t,e,i){MN(n,t,e,i,null)}function MN(n,t,e,i,s){let a,l,u,d,f,p,y,v;const T=t.pointStyle,S=t.rotation,N=t.radius;let C=(S||0)*F9;if(T&&typeof T=="object"&&(a=T.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(C),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(N)||N<=0)){switch(n.beginPath(),T){default:s?n.ellipse(e,i,s/2,N,0,0,We):n.arc(e,i,N,0,We),n.closePath();break;case"triangle":p=s?s/2:N,n.moveTo(e+Math.sin(C)*p,i-Math.cos(C)*N),C+=sA,n.lineTo(e+Math.sin(C)*p,i-Math.cos(C)*N),C+=sA,n.lineTo(e+Math.sin(C)*p,i-Math.cos(C)*N),n.closePath();break;case"rectRounded":f=N*.516,d=N-f,l=Math.cos(C+fo)*d,y=Math.cos(C+fo)*(s?s/2-f:d),u=Math.sin(C+fo)*d,v=Math.sin(C+fo)*(s?s/2-f:d),n.arc(e-y,i-u,f,C-fe,C-Je),n.arc(e+v,i-l,f,C-Je,C),n.arc(e+y,i+u,f,C,C+Je),n.arc(e-v,i+l,f,C+Je,C+fe),n.closePath();break;case"rect":if(!S){d=Math.SQRT1_2*N,p=s?s/2:d,n.rect(e-p,i-d,2*p,2*d);break}C+=fo;case"rectRot":y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+v,i-l),n.lineTo(e+y,i+u),n.lineTo(e-v,i+l),n.closePath();break;case"crossRot":C+=fo;case"cross":y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l);break;case"star":y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l),C+=fo,y=Math.cos(C)*(s?s/2:N),l=Math.cos(C)*N,u=Math.sin(C)*N,v=Math.sin(C)*(s?s/2:N),n.moveTo(e-y,i-u),n.lineTo(e+y,i+u),n.moveTo(e+v,i-l),n.lineTo(e-v,i+l);break;case"line":l=s?s/2:Math.cos(C)*N,u=Math.sin(C)*N,n.moveTo(e-l,i-u),n.lineTo(e+l,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(C)*(s?s/2:N),i+Math.sin(C)*N);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ON(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function tE(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function eE(n){n.restore()}function uz(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Se(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function hz(n,t,e,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),l=t-a.actualBoundingBoxLeft,u=t+a.actualBoundingBoxRight,d=e-a.actualBoundingBoxAscent,f=e+a.actualBoundingBoxDescent,p=s.strikethrough?(d+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,p),n.lineTo(u,p),n.stroke()}}function dz(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Zh(n,t,e,i,s,a={}){const l=dn(t)?t:[t],u=a.strokeWidth>0&&a.strokeColor!=="";let d,f;for(n.save(),n.font=s.string,uz(n,a),d=0;d<l.length;++d)f=l[d],a.backdrop&&dz(n,a.backdrop),u&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),Se(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(f,e,i,a.maxWidth)),n.fillText(f,e,i,a.maxWidth),hz(n,e,i,f,a),i+=Number(s.lineHeight);n.restore()}function wg(n,t){const{x:e,y:i,w:s,h:a,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*fe,fe,!0),n.lineTo(e,i+a-l.bottomLeft),n.arc(e+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,fe,Je,!0),n.lineTo(e+s-l.bottomRight,i+a),n.arc(e+s-l.bottomRight,i+a-l.bottomRight,l.bottomRight,Je,0,!0),n.lineTo(e+s,i+l.topRight),n.arc(e+s-l.topRight,i+l.topRight,l.topRight,0,-Je,!0),n.lineTo(e+l.topLeft,i)}const fz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gz(n,t){const e=(""+n).match(fz);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const pz=n=>+n||0;function nE(n,t){const e={},i=Yt(t),s=i?Object.keys(t):t,a=Yt(n)?i?l=>te(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of s)e[l]=pz(a(l));return e}function PN(n){return nE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ic(n){return nE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Si(n){const t=PN(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Nn(n,t){n=n||{},t=t||Le.font;let e=te(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=te(n.style,t.style);i&&!(""+i).match(mz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:te(n.family,t.family),lineHeight:gz(te(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:te(n.weight,t.weight),string:""};return s.string=cz(s),s}function rm(n,t,e,i){let s,a,l;for(s=0,a=n.length;s<a;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function _z(n,t,e){const{min:i,max:s}=n,a=TN(t,(s-i)/2),l=(u,d)=>e&&u===0?0:u+d;return{min:l(i,-Math.abs(a)),max:l(s,a)}}function Dc(n,t){return Object.assign(Object.create(n),t)}function iE(n,t=[""],e,i,s=()=>n[0]){const a=e||n;typeof i>"u"&&(i=UN("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:u=>iE([u,...n],t,a,i)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete n[0][d],!0},get(u,d){return VN(u,d,()=>Sz(d,t,n,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,d){return pA(u).includes(d)},ownKeys(u){return pA(u)},set(u,d,f){const p=u._storage||(u._storage=s());return u[d]=p[d]=f,delete u._keys,!0}})}function _c(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:LN(n,i),setContext:a=>_c(n,a,e,i),override:a=>_c(n.override(a),t,e,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,u){return VN(a,l,()=>vz(a,l,u))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,u){return n[l]=u,delete a[l],!0}})}function LN(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Ea(e)?e:()=>e,isIndexable:Ea(i)?i:()=>i}}const yz=(n,t)=>n?n+Kb(t):t,sE=(n,t)=>Yt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function VN(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function vz(n,t,e){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;let u=i[t];return Ea(u)&&l.isScriptable(t)&&(u=bz(t,u,n,e)),dn(u)&&u.length&&(u=Ez(t,u,n,l.isIndexable)),sE(t,u)&&(u=_c(u,s,a&&a[t],l)),u}function bz(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let d=t(a,l||i);return u.delete(n),sE(n,d)&&(d=rE(s._scopes,s,n,d)),d}function Ez(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_descriptors:u}=e;if(typeof a.index<"u"&&i(n))return t[a.index%t.length];if(Yt(t[0])){const d=t,f=s._scopes.filter(p=>p!==d);t=[];for(const p of d){const y=rE(f,s,n,p);t.push(_c(y,a,l&&l[n],u))}}return t}function jN(n,t,e){return Ea(n)?n(t,e):n}const wz=(n,t)=>n===!0?t:typeof n=="string"?Xh(t,n):void 0;function xz(n,t,e,i,s){for(const a of t){const l=wz(e,a);if(l){n.add(l);const u=jN(l._fallback,e,s);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function rE(n,t,e,i){const s=t._rootScopes,a=jN(t._fallback,e,i),l=[...n,...s],u=new Set;u.add(i);let d=gA(u,l,e,a||e,i);return d===null||typeof a<"u"&&a!==e&&(d=gA(u,l,a,d,i),d===null)?!1:iE(Array.from(u),[""],s,a,()=>Tz(t,e,i))}function gA(n,t,e,i,s){for(;e;)e=xz(n,t,e,i,s);return e}function Tz(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return dn(s)&&Yt(e)?e:s||{}}function Sz(n,t,e,i){let s;for(const a of t)if(s=UN(yz(a,n),e),typeof s<"u")return sE(n,s)?rE(e,i,n,s):s}function UN(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function pA(n){let t=n._keys;return t||(t=n._keys=Az(n._scopes)),t}function Az(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function aE(){return typeof window<"u"&&typeof document<"u"}function oE(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function xg(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const dp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Cz(n,t){return dp(n).getPropertyValue(t)}const Rz=["top","right","bottom","left"];function Ro(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const a=Rz[s];i[a]=parseFloat(n[t+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Iz=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Nz(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:a}=i;let l=!1,u,d;if(Iz(s,a,n.target))u=s,d=a;else{const f=t.getBoundingClientRect();u=i.clientX-f.left,d=i.clientY-f.top,l=!0}return{x:u,y:d,box:l}}function yo(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=dp(e),a=s.boxSizing==="border-box",l=Ro(s,"padding"),u=Ro(s,"border","width"),{x:d,y:f,box:p}=Nz(n,e),y=l.left+(p&&u.left),v=l.top+(p&&u.top);let{width:T,height:S}=t;return a&&(T-=l.width+u.width,S-=l.height+u.height),{x:Math.round((d-y)/T*e.width/i),y:Math.round((f-v)/S*e.height/i)}}function kz(n,t,e){let i,s;if(t===void 0||e===void 0){const a=n&&oE(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{const l=a.getBoundingClientRect(),u=dp(a),d=Ro(u,"border","width"),f=Ro(u,"padding");t=l.width-f.width-d.width,e=l.height-f.height-d.height,i=xg(u.maxWidth,a,"clientWidth"),s=xg(u.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:i||yg,maxHeight:s||yg}}const am=n=>Math.round(n*10)/10;function Dz(n,t,e,i){const s=dp(n),a=Ro(s,"margin"),l=xg(s.maxWidth,n,"clientWidth")||yg,u=xg(s.maxHeight,n,"clientHeight")||yg,d=kz(n,t,e);let{width:f,height:p}=d;if(s.boxSizing==="content-box"){const v=Ro(s,"border","width"),T=Ro(s,"padding");f-=T.width+v.width,p-=T.height+v.height}return f=Math.max(0,f-a.width),p=Math.max(0,i?f/i:p-a.height),f=am(Math.min(f,l,d.maxWidth)),p=am(Math.min(p,u,d.maxHeight)),f&&!p&&(p=am(f/2)),(t!==void 0||e!==void 0)&&i&&d.height&&p>d.height&&(p=d.height,f=am(Math.floor(p*i))),{width:f,height:p}}function _A(n,t,e){const i=t||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==s||l.width!==a?(n.currentDevicePixelRatio=i,l.height=s,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Mz=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};aE()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function yA(n,t){const e=Cz(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const Oz=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Pz=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function sc(n,t,e){return n?Oz(t,e):Pz()}function FN(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function zN(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function om(n,t,e){return n.options.clip?n[e]:t[e]}function Lz(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:om(e,t,"left"),right:om(e,t,"right"),top:om(i,t,"top"),bottom:om(i,t,"bottom")}:t}function Vz(n,t){const e=t._clip;if(e.disabled)return!1;const i=Lz(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class jz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const a=e.listeners[s],l=e.duration;a.forEach(u=>u({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=IN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,u=!1,d;for(;l>=0;--l)d=a[l],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),u=!0):(a[l]=a[a.length-1],a.pop());u&&(s.draw(),this._notify(s,i,t,"progress")),a.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ys=new jz;const vA="transparent",Uz={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=uA(n||vA),s=i.valid&&uA(t||vA);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Fz{constructor(t,e,i,s){const a=e[i];s=rm([t.to,s,a,t.from]);const l=rm([t.from,a,s]);this._active=!0,this._fn=t.fn||Uz[t.type||typeof l],this._easing=Th[t.easing]||Th.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=rm([t.to,e,s,t.from]),this._from=rm([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,a=this._from,l=this._loop,u=this._to;let d;if(this._active=a!==u&&(l||e<i),!this._active){this._target[s]=u,this._notify(!0);return}if(e<0){this._target[s]=a;return}d=e/i%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[s]=this._fn(a,u,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class BN{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Yt(t))return;const e=Object.keys(Le.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const a=t[s];if(!Yt(a))return;const l={};for(const u of e)l[u]=a[u];(dn(a.properties)&&a.properties||[s]).forEach(u=>{(u===s||!i.has(u))&&i.set(u,l)})})}_animateOptions(t,e){const i=e.options,s=Bz(t,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&zz(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,e){const i=this._properties,s=[],a=t.$animations||(t.$animations={}),l=Object.keys(e),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(t,e));continue}const p=e[f];let y=a[f];const v=i.get(f);if(y)if(v&&y.active()){y.update(v,p,u);continue}else y.cancel();if(!v||!v.duration){t[f]=p;continue}a[f]=y=new Fz(v,t,f,p),s.push(y)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Ys.add(this._chart,i),!0}}function zz(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function Bz(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function bA(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:i?a:s,end:i?s:a}}function Hz(n,t,e){if(e===!1)return!1;const i=bA(n,e),s=bA(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function qz(n){let t,e,i,s;return Yt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function HN(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,a;for(s=0,a=i.length;s<a;++s)e.push(i[s].index);return e}function EA(n,t,e,i={}){const s=n.keys,a=i.mode==="single";let l,u,d,f;if(t===null)return;let p=!1;for(l=0,u=s.length;l<u;++l){if(d=+s[l],d===e){if(p=!0,i.all)continue;break}f=n.values[d],Ti(f)&&(a||t===0||vg(t)===vg(f))&&(t+=f)}return!p&&!i.all?0:t}function Wz(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let d,f,p;for(d=0,f=l.length;d<f;++d)p=l[d],u[d]={[s]:p,[a]:n[p]};return u}function Ky(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Gz(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Yz(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function $z(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function wA(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(e&&a>0||!e&&a<0)return s.index}return null}function xA(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:a,vScale:l,index:u}=i,d=a.axis,f=l.axis,p=Gz(a,l,i),y=t.length;let v;for(let T=0;T<y;++T){const S=t[T],{[d]:N,[f]:C}=S,L=S._stacks||(S._stacks={});v=L[f]=$z(s,p,N),v[u]=C,v._top=wA(v,l,!0,i.type),v._bottom=wA(v,l,!1,i.type);const W=v._visualValues||(v._visualValues={});W[u]=C}}function Xy(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Qz(n,t){return Dc(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Kz(n,t,e){return Dc(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Qu(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const a=s._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}const Zy=n=>n==="reset"||n==="none",TA=(n,t)=>t?n:Object.assign({},n),Xz=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:HN(e,!0),values:null};class qN{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ky(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Qu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(y,v,T,S)=>y==="x"?v:y==="r"?S:T,a=e.xAxisID=te(i.xAxisID,Xy(t,"x")),l=e.yAxisID=te(i.yAxisID,Xy(t,"y")),u=e.rAxisID=te(i.rAxisID,Xy(t,"r")),d=e.indexAxis,f=e.iAxisID=s(d,a,l,u),p=e.vAxisID=s(d,l,a,u);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(f),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&oA(this._data,this),t._stacked&&Qu(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Yt(e)){const s=this._cachedMeta;this._data=Wz(e,s)}else if(i!==e){if(i){oA(i,this);const s=this._cachedMeta;Qu(s),s._parsed=[]}e&&Object.isExtensible(e)&&K9(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=e._stacked;e._stacked=Ky(e.vScale,e),e.stack!==i.stack&&(s=!0,Qu(e),e.stack=i.stack),this._resyncElements(t),(s||a!==e._stacked)&&(xA(this,e._parsed),e._stacked=Ky(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,u=a.axis;let d=t===0&&e===s.length?!0:i._sorted,f=t>0&&i._parsed[t-1],p,y,v;if(this._parsing===!1)i._parsed=s,i._sorted=!0,v=s;else{dn(s[t])?v=this.parseArrayData(i,s,t,e):Yt(s[t])?v=this.parseObjectData(i,s,t,e):v=this.parsePrimitiveData(i,s,t,e);const T=()=>y[u]===null||f&&y[u]<f[u];for(p=0;p<e;++p)i._parsed[p+t]=y=v[p],d&&(T()&&(d=!1),f=y);i._sorted=d}l&&xA(this,v)}parsePrimitiveData(t,e,i,s){const{iScale:a,vScale:l}=t,u=a.axis,d=l.axis,f=a.getLabels(),p=a===l,y=new Array(s);let v,T,S;for(v=0,T=s;v<T;++v)S=v+i,y[v]={[u]:p||a.parse(f[S],S),[d]:l.parse(e[S],S)};return y}parseArrayData(t,e,i,s){const{xScale:a,yScale:l}=t,u=new Array(s);let d,f,p,y;for(d=0,f=s;d<f;++d)p=d+i,y=e[p],u[d]={x:a.parse(y[0],p),y:l.parse(y[1],p)};return u}parseObjectData(t,e,i,s){const{xScale:a,yScale:l}=t,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(s);let p,y,v,T;for(p=0,y=s;p<y;++p)v=p+i,T=e[v],f[p]={x:a.parse(Xh(T,u),v),y:l.parse(Xh(T,d),v)};return f}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,a=this._cachedMeta,l=e[t.axis],u={keys:HN(s,!0),values:e._stacks[t.axis]._visualValues};return EA(u,l,a.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const a=i[e.axis];let l=a===null?NaN:a;const u=s&&i._stacks[e.axis];s&&u&&(s.values=u,l=EA(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&t===i.iScale,l=s.length,u=this._getOtherScale(t),d=Xz(e,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:y}=Yz(u);let v,T;function S(){T=s[v];const N=T[u.axis];return!Ti(T[t.axis])||p>N||y<N}for(v=0;v<l&&!(!S()&&(this.updateRangeFromParsed(f,t,T,d),a));++v);if(a){for(v=l-1;v>=0;--v)if(!S()){this.updateRangeFromParsed(f,t,T,d);break}}return f}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=e.length;s<a;++s)l=e[s][t.axis],Ti(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=qz(te(this.options.clip,Hz(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],a=e.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||s.length-u,f=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,a,u,d),p=u;p<u+d;++p){const y=s[p];y.hidden||(y.active&&f?l.push(y):y.draw(t,a))}for(p=0;p<l.length;++p)l[p].draw(t,a)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=Kz(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=Qz(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",a=this._cachedDataOpts,l=t+"-"+e,u=a[l],d=this.enableOptionSharing&&_g(i);if(u)return TA(u,d);const f=this.chart.config,p=f.datasetElementScopeKeys(this._type,t),y=s?[`${t}Hover`,"hover",t,""]:[t,""],v=f.getOptionScopes(this.getDataset(),p),T=Object.keys(Le.elements[t]),S=()=>this.getContext(i,s,e),N=f.resolveNamedOptions(v,T,S,y);return N.$shared&&(N.$shared=d,a[l]=Object.freeze(TA(N,d))),N}_resolveAnimations(t,e,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${e}`,u=a[l];if(u)return u;let d;if(s.options.animation!==!1){const p=this.chart.config,y=p.datasetAnimationScopeKeys(this._type,e),v=p.getOptionScopes(this.getDataset(),y);d=p.createResolver(v,this.getContext(t,i,e))}const f=new BN(s,d&&d.animations);return d&&d._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Zy(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(e,a)||a!==s;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:l}}updateElement(t,e,i,s){Zy(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Zy(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const a=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const s=i.length,a=e.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,e,i=!0){const s=this._cachedMeta,a=s.data,l=t+e;let u;const d=f=>{for(f.length+=e,u=f.length-1;u>=l;u--)f[u]=f[u-e]};for(d(a),u=t;u<l;++u)a[u]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Qu(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Zz(n,t,e){let i=1,s=1,a=0,l=0;if(t<We){const u=n,d=u+t,f=Math.cos(u),p=Math.sin(u),y=Math.cos(d),v=Math.sin(d),T=($,Z,H)=>Eg($,u,d,!0)?1:Math.max(Z,Z*e,H,H*e),S=($,Z,H)=>Eg($,u,d,!0)?-1:Math.min(Z,Z*e,H,H*e),N=T(0,f,y),C=T(Je,p,v),L=S(fe,f,y),W=S(fe+Je,p,v);i=(N-L)/2,s=(C-W)/2,a=-(N+L)/2,l=-(C+W)/2}return{ratioX:i,ratioY:s,offsetX:a,offsetY:l}}class Jz extends qN{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((a,l)=>{const d=t.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:s,lineWidth:d.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let a=d=>+i[d];if(Yt(i[t])){const{key:d="value"}=this._parsing;a=f=>+Xh(i[f],d)}let l,u;for(l=t,u=t+e;l<u;++l)s._parsed[l]=a(l)}}_getRotation(){return tr(this.options.rotation-90)}_getCircumference(){return tr(this.options.circumference)}_getRotationExtents(){let t=We,e=-We;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),l=s._getCircumference();t=Math.min(t,a),e=Math.max(e,a+l)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,a=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),d=Math.min(O9(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:p,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:T,offsetX:S,offsetY:N}=Zz(y,p,d),C=(i.width-l)/v,L=(i.height-l)/T,W=Math.max(Math.min(C,L)/2,0),$=TN(this.options.radius,W),Z=Math.max($*d,0),H=($-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=S*$,this.offsetY=N*$,s.total=this.calculateTotal(),this.outerRadius=$-H*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-H*f,0),this.updateElements(a,0,a.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*a/We)}updateElements(t,e,i,s){const a=s==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,p=(u.left+u.right)/2,y=(u.top+u.bottom)/2,v=a&&f.animateScale,T=v?0:this.innerRadius,S=v?0:this.outerRadius,{sharedOptions:N,includeOptions:C}=this._getSharedOptions(e,s);let L=this._getRotation(),W;for(W=0;W<e;++W)L+=this._circumference(W,a);for(W=e;W<e+i;++W){const $=this._circumference(W,a),Z=t[W],H={x:p+this.offsetX,y:y+this.offsetY,startAngle:L,endAngle:L+$,circumference:$,outerRadius:S,innerRadius:T};C&&(H.options=N||this.resolveDataElementOptions(W,Z.active?"active":s)),L+=$,this.updateElement(Z,W,H,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const a=t._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?We*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=Jb(e._parsed[t],i.options.locale);return{label:s[t]||"",value:a}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,a,l,u,d;if(!t){for(s=0,a=i.data.datasets.length;s<a;++s)if(i.isDatasetVisible(s)){l=i.getDatasetMeta(s),t=l.data,u=l.controller;break}}if(!t)return 0;for(s=0,a=t.length;s<a;++s)d=u.resolveDataElementOptions(s),d.borderAlign!=="inner"&&(e=Math.max(e,d.borderWidth||0,d.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const a=this.resolveDataElementOptions(i);e=Math.max(e,a.offset||0,a.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(te(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class tB extends Jz{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function go(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class lE{static override(t){Object.assign(lE.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return go()}parse(){return go()}format(){return go()}add(){return go()}diff(){return go()}startOf(){return go()}endOf(){return go()}}var eB={_date:lE};function nB(n,t,e,i){const{controller:s,data:a,_sorted:l}=n,u=s._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&l&&a.length){const f=u._reversePixels?$9:X0;if(i){if(s._sharedOptions){const p=a[0],y=typeof p.getRange=="function"&&p.getRange(t);if(y){const v=f(a,t,e-y),T=f(a,t,e+y);return{lo:v.lo,hi:T.hi}}}}else{const p=f(a,t,e);if(d){const{vScale:y}=s._cachedMeta,{_parsed:v}=n,T=v.slice(0,p.lo+1).reverse().findIndex(N=>!Se(N[y.axis]));p.lo-=Math.max(0,T);const S=v.slice(p.hi).findIndex(N=>!Se(N[y.axis]));p.hi+=Math.max(0,S)}return p}}return{lo:0,hi:a.length-1}}function fp(n,t,e,i,s){const a=n.getSortedVisibleDatasetMetas(),l=e[t];for(let u=0,d=a.length;u<d;++u){const{index:f,data:p}=a[u],{lo:y,hi:v}=nB(a[u],t,l,s);for(let T=y;T<=v;++T){const S=p[T];S.skip||i(S,f,T)}}}function iB(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const a=t?Math.abs(i.x-s.x):0,l=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function Jy(n,t,e,i,s){const a=[];return!s&&!n.isPointInArea(t)||fp(n,e,t,function(u,d,f){!s&&!ON(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&a.push({element:u,datasetIndex:d,index:f})},!0),a}function sB(n,t,e,i){let s=[];function a(l,u,d){const{startAngle:f,endAngle:p}=l.getProps(["startAngle","endAngle"],i),{angle:y}=CN(l,{x:t.x,y:t.y});Eg(y,f,p)&&s.push({element:l,datasetIndex:u,index:d})}return fp(n,e,t,a),s}function rB(n,t,e,i,s,a){let l=[];const u=iB(e);let d=Number.POSITIVE_INFINITY;function f(p,y,v){const T=p.inRange(t.x,t.y,s);if(i&&!T)return;const S=p.getCenterPoint(s);if(!(!!a||n.isPointInArea(S))&&!T)return;const C=u(t,S);C<d?(l=[{element:p,datasetIndex:y,index:v}],d=C):C===d&&l.push({element:p,datasetIndex:y,index:v})}return fp(n,e,t,f),l}function t0(n,t,e,i,s,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!i?sB(n,t,e,s):rB(n,t,e,i,s,a)}function SA(n,t,e,i,s){const a=[],l=e==="x"?"inXRange":"inYRange";let u=!1;return fp(n,e,t,(d,f,p)=>{d[l]&&d[l](t[e],s)&&(a.push({element:d,datasetIndex:f,index:p}),u=u||d.inRange(t.x,t.y,s))}),i&&!u?[]:a}var aB={modes:{index(n,t,e,i){const s=yo(t,n),a=e.axis||"x",l=e.includeInvisible||!1,u=e.intersect?Jy(n,s,a,i,l):t0(n,s,a,!1,i,l),d=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const p=u[0].index,y=f.data[p];y&&!y.skip&&d.push({element:y,datasetIndex:f.index,index:p})}),d):[]},dataset(n,t,e,i){const s=yo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;let u=e.intersect?Jy(n,s,a,i,l):t0(n,s,a,!1,i,l);if(u.length>0){const d=u[0].datasetIndex,f=n.getDatasetMeta(d).data;u=[];for(let p=0;p<f.length;++p)u.push({element:f[p],datasetIndex:d,index:p})}return u},point(n,t,e,i){const s=yo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return Jy(n,s,a,i,l)},nearest(n,t,e,i){const s=yo(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return t0(n,s,a,e.intersect,i,l)},x(n,t,e,i){const s=yo(t,n);return SA(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=yo(t,n);return SA(n,s,"y",e.intersect,i)}}};const WN=["left","top","right","bottom"];function Ku(n,t){return n.filter(e=>e.pos===t)}function AA(n,t){return n.filter(e=>WN.indexOf(e.pos)===-1&&e.box.axis===t)}function Xu(n,t){return n.sort((e,i)=>{const s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function oB(n){const t=[];let e,i,s,a,l,u;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:a,options:{stack:l,stackWeight:u=1}}=s,t.push({index:e,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&a+l,stackWeight:u});return t}function lB(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:a}=e;if(!i||!WN.includes(s))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function cB(n,t){const e=lB(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let a,l,u;for(a=0,l=n.length;a<l;++a){u=n[a];const{fullSize:d}=u.box,f=e[u.stack],p=f&&u.stackWeight/f.weight;u.horizontal?(u.width=p?p*i:d&&t.availableWidth,u.height=s):(u.width=i,u.height=p?p*s:d&&t.availableHeight)}return e}function uB(n){const t=oB(n),e=Xu(t.filter(f=>f.box.fullSize),!0),i=Xu(Ku(t,"left"),!0),s=Xu(Ku(t,"right")),a=Xu(Ku(t,"top"),!0),l=Xu(Ku(t,"bottom")),u=AA(t,"x"),d=AA(t,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:s.concat(d).concat(l).concat(u),chartArea:Ku(t,"chartArea"),vertical:i.concat(s).concat(d),horizontal:a.concat(l).concat(u)}}function CA(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function GN(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function hB(n,t,e,i){const{pos:s,box:a}=e,l=n.maxPadding;if(!Yt(s)){e.size&&(n[s]-=e.size);const y=i[e.stack]||{size:0,count:1};y.size=Math.max(y.size,e.horizontal?a.height:a.width),e.size=y.size/y.count,n[s]+=e.size}a.getPadding&&GN(l,a.getPadding());const u=Math.max(0,t.outerWidth-CA(l,n,"left","right")),d=Math.max(0,t.outerHeight-CA(l,n,"top","bottom")),f=u!==n.w,p=d!==n.h;return n.w=u,n.h=d,e.horizontal?{same:f,other:p}:{same:p,other:f}}function dB(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function fB(n,t){const e=t.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{a[l]=Math.max(t[l],e[l])}),a}return i(n?["left","right"]:["top","bottom"])}function ch(n,t,e,i){const s=[];let a,l,u,d,f,p;for(a=0,l=n.length,f=0;a<l;++a){u=n[a],d=u.box,d.update(u.width||t.w,u.height||t.h,fB(u.horizontal,t));const{same:y,other:v}=hB(t,e,u,i);f|=y&&s.length,p=p||v,d.fullSize||s.push(u)}return f&&ch(s,t,e,i)||p}function lm(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function RA(n,t,e,i){const s=e.padding;let{x:a,y:l}=t;for(const u of n){const d=u.box,f=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/f.weight||1;if(u.horizontal){const y=t.w*p,v=f.size||d.height;_g(f.start)&&(l=f.start),d.fullSize?lm(d,s.left,l,e.outerWidth-s.right-s.left,v):lm(d,t.left+f.placed,l,y,v),f.start=l,f.placed+=y,l=d.bottom}else{const y=t.h*p,v=f.size||d.width;_g(f.start)&&(a=f.start),d.fullSize?lm(d,a,s.top,v,e.outerHeight-s.bottom-s.top):lm(d,a,t.top+f.placed,v,y),f.start=a,f.placed+=y,a=d.right}}t.x=a,t.y=l}var Ei={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Si(n.options.layout.padding),a=Math.max(t-s.width,0),l=Math.max(e-s.height,0),u=uB(n.boxes),d=u.vertical,f=u.horizontal;re(n.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const p=d.reduce((N,C)=>C.box.options&&C.box.options.display===!1?N:N+1,0)||1,y=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/p,hBoxMaxHeight:l/2}),v=Object.assign({},s);GN(v,Si(i));const T=Object.assign({maxPadding:v,w:a,h:l,x:s.left,y:s.top},s),S=cB(d.concat(f),y);ch(u.fullSize,T,y,S),ch(d,T,y,S),ch(f,T,y,S)&&ch(d,T,y,S),dB(T),RA(u.leftAndTop,T,y,S),T.x+=T.w,T.y+=T.h,RA(u.rightAndBottom,T,y,S),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},re(u.chartArea,N=>{const C=N.box;Object.assign(C,n.chartArea),C.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class YN{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class mB extends YN{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Mm="$chartjs",gB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IA=n=>n===null||n==="";function pB(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Mm]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",IA(s)){const a=yA(n,"width");a!==void 0&&(n.width=a)}if(IA(i))if(n.style.height==="")n.height=n.width/(t||2);else{const a=yA(n,"height");a!==void 0&&(n.height=a)}return n}const $N=Mz?{passive:!0}:!1;function _B(n,t,e){n&&n.addEventListener(t,e,$N)}function yB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,$N)}function vB(n,t){const e=gB[n.type]||n.type,{x:i,y:s}=yo(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Tg(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function bB(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||Tg(u.addedNodes,i),l=l&&!Tg(u.removedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function EB(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||Tg(u.removedNodes,i),l=l&&!Tg(u.addedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Jh=new Map;let NA=0;function QN(){const n=window.devicePixelRatio;n!==NA&&(NA=n,Jh.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function wB(n,t){Jh.size||window.addEventListener("resize",QN),Jh.set(n,t)}function xB(n){Jh.delete(n),Jh.size||window.removeEventListener("resize",QN)}function TB(n,t,e){const i=n.canvas,s=i&&oE(i);if(!s)return;const a=NN((u,d)=>{const f=s.clientWidth;e(u,d),f<s.clientWidth&&e()},window),l=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,p=d.contentRect.height;f===0&&p===0||a(f,p)});return l.observe(s),wB(n,a),l}function e0(n,t,e){e&&e.disconnect(),t==="resize"&&xB(n)}function SB(n,t,e){const i=n.canvas,s=NN(a=>{n.ctx!==null&&e(vB(a,n))},n);return _B(i,t,s),s}class AB extends YN{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(pB(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Mm])return!1;const i=e[Mm].initial;["height","width"].forEach(a=>{const l=i[a];Se(l)?e.removeAttribute(a):e.setAttribute(a,l)});const s=i.style||{};return Object.keys(s).forEach(a=>{e.style[a]=s[a]}),e.width=e.width,delete e[Mm],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),l={attach:bB,detach:EB,resize:TB}[e]||SB;s[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:e0,detach:e0,resize:e0}[e]||yB)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return Dz(t,e,i,s)}isAttached(t){const e=t&&oE(t);return!!(e&&e.isConnected)}}function CB(n){return!aE()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?mB:AB}class Go{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return bg(this.x)&&bg(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}}function RB(n,t){const e=n.options.ticks,i=IB(n),s=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?kB(t):[],l=a.length,u=a[0],d=a[l-1],f=[];if(l>s)return DB(t,f,a,l/s),f;const p=NB(a,t,s);if(l>0){let y,v;const T=l>1?Math.round((d-u)/(l-1)):null;for(cm(t,f,p,Se(T)?0:u-T,u),y=0,v=l-1;y<v;y++)cm(t,f,p,a[y],a[y+1]);return cm(t,f,p,d,Se(T)?t.length:d+T),f}return cm(t,f,p),f}function IB(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function NB(n,t,e){const i=MB(n),s=t.length/e;if(!i)return Math.max(s,1);const a=z9(i);for(let l=0,u=a.length-1;l<u;l++){const d=a[l];if(d>s)return d}return Math.max(s,1)}function kB(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function DB(n,t,e,i){let s=0,a=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(t.push(n[l]),s++,a=e[s*i])}function cm(n,t,e,i,s){const a=te(i,0),l=Math.min(te(s,n.length),n.length);let u=0,d,f,p;for(e=Math.ceil(e),s&&(d=s-i,e=d/Math.floor(d/e)),p=a;p<0;)u++,p=Math.round(a+u*e);for(f=Math.max(a,0);f<l;f++)f===p&&(t.push(n[f]),u++,p=Math.round(a+u*e))}function MB(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const OB=n=>n==="left"?"right":n==="right"?"left":n,kA=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,DA=(n,t)=>Math.min(t||n,n);function MA(n,t){const e=[],i=n.length/t,s=n.length;let a=0;for(;a<s;a+=i)e.push(n[Math.floor(a)]);return e}function PB(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),a=n._startPixel,l=n._endPixel,u=1e-6;let d=n.getPixelForTick(s),f;if(!(e&&(i===1?f=Math.max(d-a,l-d):t===0?f=(n.getPixelForTick(1)-d)/2:f=(d-n.getPixelForTick(s-1))/2,d+=s<t?f:-f,d<a-u||d>l+u)))return d}function LB(n,t){re(n,e=>{const i=e.gc,s=i.length/2;let a;if(s>t){for(a=0;a<s;++a)delete e.data[i[a]];i.splice(0,s)}})}function Zu(n){return n.drawTicks?n.tickLength:0}function OA(n,t){if(!n.display)return 0;const e=Nn(n.font,t),i=Si(n.padding);return(dn(n.text)?n.text.length:1)*e.lineHeight+i.height}function VB(n,t){return Dc(n,{scale:t,type:"scale"})}function jB(n,t,e){return Dc(n,{tick:e,index:t,type:"tick"})}function UB(n,t,e){let i=Zb(n);return(e&&t!=="right"||!e&&t==="right")&&(i=OB(i)),i}function FB(n,t,e,i){const{top:s,left:a,bottom:l,right:u,chart:d}=n,{chartArea:f,scales:p}=d;let y=0,v,T,S;const N=l-s,C=u-a;if(n.isHorizontal()){if(T=Cn(i,a,u),Yt(e)){const L=Object.keys(e)[0],W=e[L];S=p[L].getPixelForValue(W)+N-t}else e==="center"?S=(f.bottom+f.top)/2+N-t:S=kA(n,e,t);v=u-a}else{if(Yt(e)){const L=Object.keys(e)[0],W=e[L];T=p[L].getPixelForValue(W)-C+t}else e==="center"?T=(f.left+f.right)/2-C+t:T=kA(n,e,t);S=Cn(i,l,s),y=e==="left"?-Je:Je}return{titleX:T,titleY:S,maxWidth:v,rotation:y}}class Mc extends Go{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=ns(t,Number.POSITIVE_INFINITY),e=ns(e,Number.NEGATIVE_INFINITY),i=ns(i,Number.POSITIVE_INFINITY),s=ns(s,Number.NEGATIVE_INFINITY),{min:ns(t,i),max:ns(e,s),minDefined:Ti(t),maxDefined:Ti(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),l;if(s&&a)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)l=u[d].controller.getMinMax(this,t),s||(e=Math.min(e,l.min)),a||(i=Math.max(i,l.max));return e=a&&e>i?i:e,i=s&&e>i?e:i,{min:ns(e,ns(i,e)),max:ns(i,ns(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ve(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:a,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_z(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?MA(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=RB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ve(this.options.afterUpdate,[this])}beforeSetDimensions(){ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ve(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ve(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,a;for(i=0,s=t.length;i<s;i++)a=t[i],a.label=ve(e.callback,[a.value,i,t],this)}afterTickToLabelConversion(){ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=DA(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,a=e.maxRotation;let l=s,u,d,f;if(!this._isVisible()||!e.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const p=this._getLabelSizes(),y=p.widest.width,v=p.highest.height,T=Gn(this.chart.width-y,0,this.maxWidth);u=t.offset?this.maxWidth/i:T/(i-1),y+6>u&&(u=T/(i-(t.offset?.5:1)),d=this.maxHeight-Zu(t.grid)-e.padding-OA(t.title,this.chart.options.font),f=Math.sqrt(y*y+v*v),l=W9(Math.min(Math.asin(Gn((p.highest.height+6)/u,-1,1)),Math.asin(Gn(d/f,-1,1))-Math.asin(Gn(v/f,-1,1)))),l=Math.max(s,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ve(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:a}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=OA(s,e.options.font);if(u?(t.width=this.maxWidth,t.height=Zu(a)+d):(t.height=this.maxHeight,t.width=Zu(a)+d),i.display&&this.ticks.length){const{first:f,last:p,widest:y,highest:v}=this._getLabelSizes(),T=i.padding*2,S=tr(this.labelRotation),N=Math.cos(S),C=Math.sin(S);if(u){const L=i.mirror?0:C*y.width+N*v.height;t.height=Math.min(this.maxHeight,t.height+L+T)}else{const L=i.mirror?0:N*y.width+C*v.height;t.width=Math.min(this.maxWidth,t.width+L+T)}this._calculatePadding(f,p,C,N)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:a,padding:l},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,T=0;d?f?(v=s*t.width,T=i*e.height):(v=i*t.height,T=s*e.width):a==="start"?T=e.width:a==="end"?v=t.width:a!=="inner"&&(v=t.width/2,T=e.width/2),this.paddingLeft=Math.max((v-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((T-y+l)*this.width/(this.width-y),0)}else{let p=e.height/2,y=t.height/2;a==="start"?(p=0,y=t.height):a==="end"&&(p=e.height,y=0),this.paddingTop=p+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ve(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Se(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=MA(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:a}=this,l=[],u=[],d=Math.floor(e/DA(e,i));let f=0,p=0,y,v,T,S,N,C,L,W,$,Z,H;for(y=0;y<e;y+=d){if(S=t[y].label,N=this._resolveTickFontOptions(y),s.font=C=N.string,L=a[C]=a[C]||{data:{},gc:[]},W=N.lineHeight,$=Z=0,!Se(S)&&!dn(S))$=dA(s,L.data,L.gc,$,S),Z=W;else if(dn(S))for(v=0,T=S.length;v<T;++v)H=S[v],!Se(H)&&!dn(H)&&($=dA(s,L.data,L.gc,$,H),Z+=W);l.push($),u.push(Z),f=Math.max($,f),p=Math.max(Z,p)}LB(a,e);const lt=l.indexOf(f),D=u.indexOf(p),I=k=>({width:l[k]||0,height:u[k]||0});return{first:I(0),last:I(e-1),widest:I(lt),highest:I(D),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Y9(this._alignToPixels?mo(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=jB(this.getContext(),t,i))}return this.$context||(this.$context=VB(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=tr(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,u=a?a.widest.width+l:0,d=a?a.highest.height+l:0;return this.isHorizontal()?d*i>u*s?u/i:d/s:d*s<u*i?d/i:u/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:a,position:l,border:u}=s,d=a.offset,f=this.isHorizontal(),y=this.ticks.length+(d?1:0),v=Zu(a),T=[],S=u.setContext(this.getContext()),N=S.display?S.width:0,C=N/2,L=function(z){return mo(i,z,N)};let W,$,Z,H,lt,D,I,k,P,V,U,M;if(l==="top")W=L(this.bottom),D=this.bottom-v,k=W-C,V=L(t.top)+C,M=t.bottom;else if(l==="bottom")W=L(this.top),V=t.top,M=L(t.bottom)-C,D=W+C,k=this.top+v;else if(l==="left")W=L(this.right),lt=this.right-v,I=W-C,P=L(t.left)+C,U=t.right;else if(l==="right")W=L(this.left),P=t.left,U=L(t.right)-C,lt=W+C,I=this.left+v;else if(e==="x"){if(l==="center")W=L((t.top+t.bottom)/2+.5);else if(Yt(l)){const z=Object.keys(l)[0],it=l[z];W=L(this.chart.scales[z].getPixelForValue(it))}V=t.top,M=t.bottom,D=W+C,k=D+v}else if(e==="y"){if(l==="center")W=L((t.left+t.right)/2);else if(Yt(l)){const z=Object.keys(l)[0],it=l[z];W=L(this.chart.scales[z].getPixelForValue(it))}lt=W-C,I=lt-v,P=t.left,U=t.right}const Gt=te(s.ticks.maxTicksLimit,y),Et=Math.max(1,Math.ceil(y/Gt));for($=0;$<y;$+=Et){const z=this.getContext($),it=a.setContext(z),dt=u.setContext(z),_t=it.lineWidth,j=it.color,tt=dt.dash||[],ct=dt.dashOffset,rt=it.tickWidth,ft=it.tickColor,wt=it.tickBorderDash||[],bt=it.tickBorderDashOffset;Z=PB(this,$,d),Z!==void 0&&(H=mo(i,Z,_t),f?lt=I=P=U=H:D=k=V=M=H,T.push({tx1:lt,ty1:D,tx2:I,ty2:k,x1:P,y1:V,x2:U,y2:M,width:_t,color:j,borderDash:tt,borderDashOffset:ct,tickWidth:rt,tickColor:ft,tickBorderDash:wt,tickBorderDashOffset:bt}))}return this._ticksLength=y,this._borderValue=W,T}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:a}=i,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:p,mirror:y}=a,v=Zu(i.grid),T=v+p,S=y?-p:T,N=-tr(this.labelRotation),C=[];let L,W,$,Z,H,lt,D,I,k,P,V,U,M="middle";if(s==="top")lt=this.bottom-S,D=this._getXAxisLabelAlignment();else if(s==="bottom")lt=this.top+S,D=this._getXAxisLabelAlignment();else if(s==="left"){const Et=this._getYAxisLabelAlignment(v);D=Et.textAlign,H=Et.x}else if(s==="right"){const Et=this._getYAxisLabelAlignment(v);D=Et.textAlign,H=Et.x}else if(e==="x"){if(s==="center")lt=(t.top+t.bottom)/2+T;else if(Yt(s)){const Et=Object.keys(s)[0],z=s[Et];lt=this.chart.scales[Et].getPixelForValue(z)+T}D=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")H=(t.left+t.right)/2-T;else if(Yt(s)){const Et=Object.keys(s)[0],z=s[Et];H=this.chart.scales[Et].getPixelForValue(z)}D=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(d==="start"?M="top":d==="end"&&(M="bottom"));const Gt=this._getLabelSizes();for(L=0,W=u.length;L<W;++L){$=u[L],Z=$.label;const Et=a.setContext(this.getContext(L));I=this.getPixelForTick(L)+a.labelOffset,k=this._resolveTickFontOptions(L),P=k.lineHeight,V=dn(Z)?Z.length:1;const z=V/2,it=Et.color,dt=Et.textStrokeColor,_t=Et.textStrokeWidth;let j=D;l?(H=I,D==="inner"&&(L===W-1?j=this.options.reverse?"left":"right":L===0?j=this.options.reverse?"right":"left":j="center"),s==="top"?f==="near"||N!==0?U=-V*P+P/2:f==="center"?U=-Gt.highest.height/2-z*P+P:U=-Gt.highest.height+P/2:f==="near"||N!==0?U=P/2:f==="center"?U=Gt.highest.height/2-z*P:U=Gt.highest.height-V*P,y&&(U*=-1),N!==0&&!Et.showLabelBackdrop&&(H+=P/2*Math.sin(N))):(lt=I,U=(1-V)*P/2);let tt;if(Et.showLabelBackdrop){const ct=Si(Et.backdropPadding),rt=Gt.heights[L],ft=Gt.widths[L];let wt=U-ct.top,bt=0-ct.left;switch(M){case"middle":wt-=rt/2;break;case"bottom":wt-=rt;break}switch(D){case"center":bt-=ft/2;break;case"right":bt-=ft;break;case"inner":L===W-1?bt-=ft:L>0&&(bt-=ft/2);break}tt={left:bt,top:wt,width:ft+ct.width,height:rt+ct.height,color:Et.backdropColor}}C.push({label:Z,font:k,textOffset:U,options:{rotation:N,color:it,strokeColor:dt,strokeWidth:_t,textAlign:j,textBaseline:M,translation:[H,lt],backdrop:tt}})}return C}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-tr(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,l=this._getLabelSizes(),u=t+a,d=l.widest.width;let f,p;return e==="left"?s?(p=this.right+a,i==="near"?f="left":i==="center"?(f="center",p+=d/2):(f="right",p+=d)):(p=this.right-u,i==="near"?f="right":i==="center"?(f="center",p-=d/2):(f="left",p=this.left)):e==="right"?s?(p=this.left+a,i==="near"?f="right":i==="center"?(f="center",p-=d/2):(f="left",p-=d)):(p=this.left+u,i==="near"?f="left":i==="center"?(f="center",p+=d/2):(f="right",p=this.right)):f="right",{textAlign:f,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:a,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,a,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(a=>a.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const u=(d,f,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(e.display)for(a=0,l=s.length;a<l;++a){const d=s[a];e.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const u=s.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,p,y,v;this.isHorizontal()?(f=mo(t,this.left,l)-l/2,p=mo(t,this.right,u)+u/2,y=v=d):(y=mo(t,this.top,l)-l/2,v=mo(t,this.bottom,u)+u/2,f=p=d),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(f,y),e.lineTo(p,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&tE(i,s);const a=this.getLabelItems(t);for(const l of a){const u=l.options,d=l.font,f=l.label,p=l.textOffset;Zh(i,f,0,p,d,u)}s&&eE(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const a=Nn(i.font),l=Si(i.padding),u=i.align;let d=a.lineHeight/2;e==="bottom"||e==="center"||Yt(e)?(d+=l.bottom,dn(i.text)&&(d+=a.lineHeight*(i.text.length-1))):d+=l.top;const{titleX:f,titleY:p,maxWidth:y,rotation:v}=FB(this,d,e,u);Zh(t,i.text,0,0,a,{color:i.color,maxWidth:y,rotation:v,textAlign:UB(u,e,s),textBaseline:"middle",translation:[f,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=te(t.grid&&t.grid.z,-1),s=te(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Mc.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,l;for(a=0,l=e.length;a<l;++a){const u=e[a];u[i]===this.id&&(!t||u.type===t)&&s.push(u)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Nn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class um{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;HB(e)&&(i=this.register(e));const s=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in s||(s[a]=t,zB(t,l,i),this.override&&Le.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Le[s]&&(delete Le[s][i],this.override&&delete jo[i])}}function zB(n,t,e){const i=Kh(Object.create(null),[e?Le.get(e):{},Le.get(t),n.defaults]);Le.set(t,i),n.defaultRoutes&&BB(t,n.defaultRoutes),n.descriptors&&Le.describe(t,n.descriptors)}function BB(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),a=[n].concat(i).join("."),l=t[e].split("."),u=l.pop(),d=l.join(".");Le.route(a,s,d,u)})}function HB(n){return"id"in n&&"defaults"in n}class qB{constructor(){this.controllers=new um(qN,"datasets",!0),this.elements=new um(Go,"elements"),this.plugins=new um(Object,"plugins"),this.scales=new um(Mc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(t,a,s):re(s,l=>{const u=i||this._getRegistryForType(l);this._exec(t,u,l)})})}_exec(t,e,i){const s=Kb(t);ve(i["before"+s],[],i),e[t](i),ve(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var ss=new qB;class WB{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=s?this._descriptors(t).filter(s):this._descriptors(t),l=this._notify(a,t,e,i);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),l}_notify(t,e,i,s){s=s||{};for(const a of t){const l=a.plugin,u=l[i],d=[e,s,a.options];if(ve(u,d,l)===!1&&s.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=te(i.options&&i.options.plugins,{}),a=GB(i);return s===!1&&!e?[]:$B(t,a,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(a,l)=>a.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function GB(n){const t={},e=[],i=Object.keys(ss.plugins.items);for(let a=0;a<i.length;a++)e.push(ss.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const l=s[a];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function YB(n,t){return!t&&n===!1?null:n===!0?{}:n}function $B(n,{plugins:t,localIds:e},i,s){const a=[],l=n.getContext();for(const u of t){const d=u.id,f=YB(i[d],s);f!==null&&a.push({plugin:u,options:QB(n.config,{plugin:u,local:e[d]},f,l)})}return a}function QB(n,{plugin:t,local:e},i,s){const a=n.pluginScopeKeys(t),l=n.getOptionScopes(i,a);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function J0(n,t){const e=Le.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function KB(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function XB(n,t){return n===t?"_index_":"_value_"}function PA(n){if(n==="x"||n==="y"||n==="r")return n}function ZB(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function tv(n,...t){if(PA(n))return n;for(const e of t){const i=e.axis||ZB(e.position)||n.length>1&&PA(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function LA(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function JB(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return LA(n,"x",e[0])||LA(n,"y",e[0])}return{}}function t8(n,t){const e=jo[n.type]||{scales:{}},i=t.scales||{},s=J0(n.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Yt(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=tv(l,u,JB(l,n),Le.scales[u.type]),f=XB(d,s),p=e.scales||{};a[l]=xh(Object.create(null),[{axis:d},u,p[d],p[f]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,d=l.indexAxis||J0(u,t),p=(jo[u]||{}).scales||{};Object.keys(p).forEach(y=>{const v=KB(y,d),T=l[v+"AxisID"]||v;a[T]=a[T]||Object.create(null),xh(a[T],[{axis:v},i[T],p[y]])})}),Object.keys(a).forEach(l=>{const u=a[l];xh(u,[Le.scales[u.type],Le.scale])}),a}function KN(n){const t=n.options||(n.options={});t.plugins=te(t.plugins,{}),t.scales=t8(n,t)}function XN(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function e8(n){return n=n||{},n.data=XN(n.data),KN(n),n}const VA=new Map,ZN=new Set;function hm(n,t){let e=VA.get(n);return e||(e=t(),VA.set(n,e),ZN.add(e)),e}const Ju=(n,t,e)=>{const i=Xh(t,e);i!==void 0&&n.add(i)};class n8{constructor(t){this._config=e8(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=XN(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),KN(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return hm(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return hm(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return hm(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return hm(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:a}=this,l=this._cachedScopes(t,i),u=l.get(e);if(u)return u;const d=new Set;e.forEach(p=>{t&&(d.add(t),p.forEach(y=>Ju(d,t,y))),p.forEach(y=>Ju(d,s,y)),p.forEach(y=>Ju(d,jo[a]||{},y)),p.forEach(y=>Ju(d,Le,y)),p.forEach(y=>Ju(d,Z0,y))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),ZN.has(e)&&l.set(e,f),f}chartOptionScopes(){const{options:t,type:e}=this;return[t,jo[e]||{},Le.datasets[e]||{},{type:e},Le,Z0]}resolveNamedOptions(t,e,i,s=[""]){const a={$shared:!0},{resolver:l,subPrefixes:u}=jA(this._resolverCache,t,s);let d=l;if(s8(l,e)){a.$shared=!1,i=Ea(i)?i():i;const f=this.createResolver(t,i,u);d=_c(l,i,f)}for(const f of e)a[f]=d[f];return a}createResolver(t,e,i=[""],s){const{resolver:a}=jA(this._resolverCache,t,i);return Yt(e)?_c(a,e,void 0,s):a}}function jA(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let a=i.get(s);return a||(a={resolver:iE(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(s,a)),a}const i8=n=>Yt(n)&&Object.getOwnPropertyNames(n).some(t=>Ea(n[t]));function s8(n,t){const{isScriptable:e,isIndexable:i}=LN(n);for(const s of t){const a=e(s),l=i(s),u=(l||a)&&n[s];if(a&&(Ea(u)||i8(u))||l&&dn(u))return!0}return!1}var r8="4.5.0";const a8=["top","bottom","left","right","chartArea"];function UA(n,t){return n==="top"||n==="bottom"||a8.indexOf(n)===-1&&t==="x"}function FA(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function zA(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ve(e&&e.onComplete,[n],t)}function o8(n){const t=n.chart,e=t.options.animation;ve(e&&e.onProgress,[n],t)}function JN(n){return aE()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Om={},BA=n=>{const t=JN(n);return Object.values(Om).filter(e=>e.canvas===t).pop()};function l8(n,t,e){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=t){const l=n[s];delete n[s],(e>0||a>t)&&(n[a+e]=l)}}}function c8(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let mp=class{static defaults=Le;static instances=Om;static overrides=jo;static registry=ss;static version=r8;static getChart=BA;static register(...t){ss.add(...t),HA()}static unregister(...t){ss.remove(...t),HA()}constructor(t,e){const i=this.config=new n8(e),s=JN(t),a=BA(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||CB(s)),this.platform.updateConfig(i);const u=this.platform.acquireContext(s,l.aspectRatio),d=u&&u.canvas,f=d&&d.height,p=d&&d.width;if(this.id=M9(),this.ctx=u,this.canvas=d,this.width=p,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new WB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Z9(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],Om[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}Ys.listen(this,"complete",zA),Ys.listen(this,"progress",o8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:a}=this;return Se(t)?e&&a?a:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_A(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return fA(this.canvas,this.ctx),this}stop(){return Ys.stop(this),this}resize(t,e){Ys.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,t,e,a),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,_A(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),ve(i.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};re(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let a=[];e&&(a=a.concat(Object.keys(e).map(l=>{const u=e[l],d=tv(l,u),f=d==="r",p=d==="x";return{options:u,dposition:f?"chartArea":p?"bottom":"left",dtype:f?"radialLinear":p?"category":"linear"}}))),re(a,l=>{const u=l.options,d=u.id,f=tv(d,u),p=te(u.type,l.dtype);(u.position===void 0||UA(u.position,f)!==UA(l.dposition))&&(u.position=l.dposition),s[d]=!0;let y=null;if(d in i&&i[d].type===p)y=i[d];else{const v=ss.getScale(p);y=new v({id:d,type:p,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(u,t)}),re(s,(l,u)=>{l||delete i[u]}),re(i,l=>{Ei.configure(this,l,l.options),Ei.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,a)=>s.index-a.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(FA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const a=e[i];let l=this.getDatasetMeta(i);const u=a.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=a.indexAxis||J0(u,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const d=ss.getController(u),{datasetElementType:f,dataElementType:p}=Le.datasets[u];Object.assign(d,{dataElementType:ss.getElement(p),datasetElementType:f&&ss.getElement(f)}),l.controller=new d(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){re(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,p=this.data.datasets.length;f<p;f++){const{controller:y}=this.getDatasetMeta(f),v=!s&&a.indexOf(y)===-1;y.buildOrUpdateElements(v),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||re(a,f=>{f.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(FA("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){re(this.scales,t=>{Ei.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!iA(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of e){const l=i==="_removeElements"?-a:a;l8(t,s,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,u)=>u+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<e;a++)if(!iA(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ei.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],re(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Ea(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ys.has(this)?this.attached&&!Ys.running(this)&&Ys.start(this):(this.draw(),zA({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,a;for(s=0,a=e.length;s<a;++s){const l=e[s];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=Vz(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&tE(e,s),t.controller.draw(),s&&eE(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ON(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const a=aB.modes[e];return typeof a=="function"?a(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(a=>a&&a._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Dc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,s);_g(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(u=>u.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ys.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),fA(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Om[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(a,l)=>{e.addEventListener(this,a,l),t[a]=l},s=(a,l,u)=>{a.offsetX=l,a.offsetY=u,this._eventHandler(a)};re(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,f)=>{e.addEventListener(this,d,f),t[d]=f},s=(d,f)=>{t[d]&&(e.removeEventListener(this,d,f),delete t[d])},a=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const u=()=>{s("attach",u),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():l()}unbindEvents(){re(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},re(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let a,l,u,d;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),u=0,d=t.length;u<d;++u){l=t[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const u=this.getDatasetMeta(a);if(!u)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:u.data[l],index:l}});!gg(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,a=(d,f)=>d.filter(p=>!f.some(y=>p.datasetIndex===y.datasetIndex&&p.index===y.index)),l=a(e,t),u=i?t:a(t,e);l.length&&this.updateHoverStyle(l,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:a}=this,l=e,u=this._getActiveElements(t,s,i,l),d=U9(t),f=c8(t,this._lastEvent,i,d);i&&(this._lastEvent=null,ve(a.onHover,[t,u,this],this),d&&ve(a.onClick,[t,u,this],this));const p=!gg(u,s);return(p||e)&&(this._active=u,this._updateHoverStyles(u,s,e)),this._lastEvent=f,p}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}};function HA(){return re(mp.instances,n=>n._plugins.invalidate())}function u8(n,t,e){const{startAngle:i,x:s,y:a,outerRadius:l,innerRadius:u,options:d}=t,{borderWidth:f,borderJoinStyle:p}=d,y=Math.min(f/l,as(i-e));if(n.beginPath(),n.arc(s,a,l-f/2,i+y/2,e-y/2),u>0){const v=Math.min(f/u,as(i-e));n.arc(s,a,u+f/2,e-v/2,i+v/2,!0)}else{const v=Math.min(f/2,l*as(i-e));if(p==="round")n.arc(s,a,v,e-fe/2,i+fe/2,!0);else if(p==="bevel"){const T=2*v*v,S=-T*Math.cos(e+fe/2)+s,N=-T*Math.sin(e+fe/2)+a,C=T*Math.cos(i+fe/2)+s,L=T*Math.sin(i+fe/2)+a;n.lineTo(S,N),n.lineTo(C,L)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function h8(n,t,e){const{startAngle:i,pixelMargin:s,x:a,y:l,outerRadius:u,innerRadius:d}=t;let f=s/u;n.beginPath(),n.arc(a,l,u,i-f,e+f),d>s?(f=s/d,n.arc(a,l,d,e+f,i-f,!0)):n.arc(a,l,s,e+Je,i-Je),n.closePath(),n.clip()}function d8(n){return nE(n,["outerStart","outerEnd","innerStart","innerEnd"])}function f8(n,t,e,i){const s=d8(n.options.borderRadius),a=(e-t)/2,l=Math.min(a,i*t/2),u=d=>{const f=(e-Math.min(a,d))*i/2;return Gn(d,0,Math.min(a,f))};return{outerStart:u(s.outerStart),outerEnd:u(s.outerEnd),innerStart:Gn(s.innerStart,0,l),innerEnd:Gn(s.innerEnd,0,l)}}function zl(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Sg(n,t,e,i,s,a){const{x:l,y:u,startAngle:d,pixelMargin:f,innerRadius:p}=t,y=Math.max(t.outerRadius+i+e-f,0),v=p>0?p+i+e+f:0;let T=0;const S=s-d;if(i){const Et=p>0?p-i:0,z=y>0?y-i:0,it=(Et+z)/2,dt=it!==0?S*it/(it+i):S;T=(S-dt)/2}const N=Math.max(.001,S*y-e/fe)/y,C=(S-N)/2,L=d+C+T,W=s-C-T,{outerStart:$,outerEnd:Z,innerStart:H,innerEnd:lt}=f8(t,v,y,W-L),D=y-$,I=y-Z,k=L+$/D,P=W-Z/I,V=v+H,U=v+lt,M=L+H/V,Gt=W-lt/U;if(n.beginPath(),a){const Et=(k+P)/2;if(n.arc(l,u,y,k,Et),n.arc(l,u,y,Et,P),Z>0){const _t=zl(I,P,l,u);n.arc(_t.x,_t.y,Z,P,W+Je)}const z=zl(U,W,l,u);if(n.lineTo(z.x,z.y),lt>0){const _t=zl(U,Gt,l,u);n.arc(_t.x,_t.y,lt,W+Je,Gt+Math.PI)}const it=(W-lt/v+(L+H/v))/2;if(n.arc(l,u,v,W-lt/v,it,!0),n.arc(l,u,v,it,L+H/v,!0),H>0){const _t=zl(V,M,l,u);n.arc(_t.x,_t.y,H,M+Math.PI,L-Je)}const dt=zl(D,L,l,u);if(n.lineTo(dt.x,dt.y),$>0){const _t=zl(D,k,l,u);n.arc(_t.x,_t.y,$,L-Je,k)}}else{n.moveTo(l,u);const Et=Math.cos(k)*y+l,z=Math.sin(k)*y+u;n.lineTo(Et,z);const it=Math.cos(P)*y+l,dt=Math.sin(P)*y+u;n.lineTo(it,dt)}n.closePath()}function m8(n,t,e,i,s){const{fullCircles:a,startAngle:l,circumference:u}=t;let d=t.endAngle;if(a){Sg(n,t,e,i,d,s);for(let f=0;f<a;++f)n.fill();isNaN(u)||(d=l+(u%We||We))}return Sg(n,t,e,i,d,s),n.fill(),d}function g8(n,t,e,i,s){const{fullCircles:a,startAngle:l,circumference:u,options:d}=t,{borderWidth:f,borderJoinStyle:p,borderDash:y,borderDashOffset:v,borderRadius:T}=d,S=d.borderAlign==="inner";if(!f)return;n.setLineDash(y||[]),n.lineDashOffset=v,S?(n.lineWidth=f*2,n.lineJoin=p||"round"):(n.lineWidth=f,n.lineJoin=p||"bevel");let N=t.endAngle;if(a){Sg(n,t,e,i,N,s);for(let C=0;C<a;++C)n.stroke();isNaN(u)||(N=l+(u%We||We))}S&&h8(n,t,N),d.selfJoin&&N-l>=fe&&T===0&&p!=="miter"&&u8(n,t,N),a||(Sg(n,t,e,i,N,s),n.stroke())}class p8 extends Go{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:a,distance:l}=CN(s,{x:t,y:e}),{startAngle:u,endAngle:d,innerRadius:f,outerRadius:p,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,T=te(y,d-u),S=Eg(a,u,d)&&u!==d,N=T>=We||S,C=Ao(l,f+v,p+v);return N&&C}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:a,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:d,spacing:f}=this.options,p=(s+a)/2,y=(l+u+f+d)/2;return{x:e+Math.cos(p)*y,y:i+Math.sin(p)*y}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/4,a=(e.spacing||0)/2,l=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>We?Math.floor(i/We):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const u=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(u)*s,Math.sin(u)*s);const d=1-Math.sin(Math.min(fe,i||0)),f=s*d;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,m8(t,this,f,a,l),g8(t,this,f,a,l),t.restore()}}function tk(n,t){const{x:e,y:i,base:s,width:a,height:l}=n.getProps(["x","y","base","width","height"],t);let u,d,f,p,y;return n.horizontal?(y=l/2,u=Math.min(e,s),d=Math.max(e,s),f=i-y,p=i+y):(y=a/2,u=e-y,d=e+y,f=Math.min(i,s),p=Math.max(i,s)),{left:u,top:f,right:d,bottom:p}}function ea(n,t,e,i){return n?0:Gn(t,e,i)}function _8(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,a=PN(i);return{t:ea(s.top,a.top,0,e),r:ea(s.right,a.right,0,t),b:ea(s.bottom,a.bottom,0,e),l:ea(s.left,a.left,0,t)}}function y8(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,a=ic(s),l=Math.min(t,e),u=n.borderSkipped,d=i||Yt(s);return{topLeft:ea(!d||u.top||u.left,a.topLeft,0,l),topRight:ea(!d||u.top||u.right,a.topRight,0,l),bottomLeft:ea(!d||u.bottom||u.left,a.bottomLeft,0,l),bottomRight:ea(!d||u.bottom||u.right,a.bottomRight,0,l)}}function v8(n){const t=tk(n),e=t.right-t.left,i=t.bottom-t.top,s=_8(n,e/2,i/2),a=y8(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:a},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function n0(n,t,e,i){const s=t===null,a=e===null,u=n&&!(s&&a)&&tk(n,i);return u&&(s||Ao(t,u.left,u.right))&&(a||Ao(e,u.top,u.bottom))}function b8(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function E8(n,t){n.rect(t.x,t.y,t.w,t.h)}function i0(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,a=(n.x+n.w!==e.x+e.w?t:0)-i,l=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+a,h:n.h+l,radius:n.radius}}class w8 extends Go{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:a,outer:l}=v8(this),u=b8(l.radius)?wg:E8;t.save(),(l.w!==a.w||l.h!==a.h)&&(t.beginPath(),u(t,i0(l,e,a)),t.clip(),u(t,i0(a,-e,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,i0(a,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return n0(this,t,e,i)}inXRange(t,e){return n0(this,t,null,e)}inYRange(t,e){return n0(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(e+s)/2:e,y:a?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const qA=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},x8=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class WA extends Go{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ve(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Nn(i.font),a=s.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=qA(i,a);let f,p;e.font=s.string,this.isHorizontal()?(f=this.maxWidth,p=this._fitRows(l,a,u,d)+10):(p=this.maxHeight,f=this._fitCols(l,s,u,d)+10),this.width=Math.min(f,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:a,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],p=s+u;let y=t;a.textAlign="left",a.textBaseline="middle";let v=-1,T=-p;return this.legendItems.forEach((S,N)=>{const C=i+e/2+a.measureText(S.text).width;(N===0||f[f.length-1]+C+2*u>l)&&(y+=p,f[f.length-(N>0?0:1)]=0,T+=p,v++),d[N]={left:0,top:T,row:v,width:C,height:s},f[f.length-1]+=C+u}),y}_fitCols(t,e,i,s){const{ctx:a,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],p=l-t;let y=u,v=0,T=0,S=0,N=0;return this.legendItems.forEach((C,L)=>{const{itemWidth:W,itemHeight:$}=T8(i,e,a,C,s);L>0&&T+$+2*u>p&&(y+=v+u,f.push({width:v,height:T}),S+=v+u,N++,v=T=0),d[L]={left:S,top:T,col:N,width:W,height:$},v=Math.max(v,W),T+=$+u}),y+=v,f.push({width:v,height:T}),y}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:a}}=this,l=sc(a,this.left,this.width);if(this.isHorizontal()){let u=0,d=Cn(i,this.left+s,this.right-this.lineWidths[u]);for(const f of e)u!==f.row&&(u=f.row,d=Cn(i,this.left+s,this.right-this.lineWidths[u])),f.top+=this.top+t+s,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+s}else{let u=0,d=Cn(i,this.top+t+s,this.bottom-this.columnSizes[u].height);for(const f of e)f.col!==u&&(u=f.col,d=Cn(i,this.top+t+s,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+s,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;tE(t,this),this._draw(),eE(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:a,labels:l}=t,u=Le.color,d=sc(t.rtl,this.left,this.width),f=Nn(l.font),{padding:p}=l,y=f.size,v=y/2;let T;this.drawTitle(),s.textAlign=d.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:S,boxHeight:N,itemHeight:C}=qA(l,y),L=function(lt,D,I){if(isNaN(S)||S<=0||isNaN(N)||N<0)return;s.save();const k=te(I.lineWidth,1);if(s.fillStyle=te(I.fillStyle,u),s.lineCap=te(I.lineCap,"butt"),s.lineDashOffset=te(I.lineDashOffset,0),s.lineJoin=te(I.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=te(I.strokeStyle,u),s.setLineDash(te(I.lineDash,[])),l.usePointStyle){const P={radius:N*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:k},V=d.xPlus(lt,S/2),U=D+v;MN(s,P,V,U,l.pointStyleWidth&&S)}else{const P=D+Math.max((y-N)/2,0),V=d.leftForLtr(lt,S),U=ic(I.borderRadius);s.beginPath(),Object.values(U).some(M=>M!==0)?wg(s,{x:V,y:P,w:S,h:N,radius:U}):s.rect(V,P,S,N),s.fill(),k!==0&&s.stroke()}s.restore()},W=function(lt,D,I){Zh(s,I.text,lt,D+C/2,f,{strikethrough:I.hidden,textAlign:d.textAlign(I.textAlign)})},$=this.isHorizontal(),Z=this._computeTitleHeight();$?T={x:Cn(a,this.left+p,this.right-i[0]),y:this.top+p+Z,line:0}:T={x:this.left+p,y:Cn(a,this.top+Z+p,this.bottom-e[0].height),line:0},FN(this.ctx,t.textDirection);const H=C+p;this.legendItems.forEach((lt,D)=>{s.strokeStyle=lt.fontColor,s.fillStyle=lt.fontColor;const I=s.measureText(lt.text).width,k=d.textAlign(lt.textAlign||(lt.textAlign=l.textAlign)),P=S+v+I;let V=T.x,U=T.y;d.setWidth(this.width),$?D>0&&V+P+p>this.right&&(U=T.y+=H,T.line++,V=T.x=Cn(a,this.left+p,this.right-i[T.line])):D>0&&U+H>this.bottom&&(V=T.x=V+e[T.line].width+p,T.line++,U=T.y=Cn(a,this.top+Z+p,this.bottom-e[T.line].height));const M=d.x(V);if(L(M,U,lt),V=J9(k,V+S+v,$?V+P:this.right,t.rtl),W(d.x(V),U,lt),$)T.x+=P+p;else if(typeof lt.text!="string"){const Gt=f.lineHeight;T.y+=ek(lt,Gt)+p}else T.y+=H}),zN(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Nn(e.font),s=Si(e.padding);if(!e.display)return;const a=sc(t.rtl,this.left,this.width),l=this.ctx,u=e.position,d=i.size/2,f=s.top+d;let p,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),p=this.top+f,y=Cn(t.align,y,this.right-v);else{const S=this.columnSizes.reduce((N,C)=>Math.max(N,C.height),0);p=f+Cn(t.align,this.top,this.bottom-S-t.labels.padding-this._computeTitleHeight())}const T=Cn(u,y,y+v);l.textAlign=a.textAlign(Zb(u)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,Zh(l,e.text,T,p,i)}_computeTitleHeight(){const t=this.options.title,e=Nn(t.font),i=Si(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,a;if(Ao(t,this.left,this.right)&&Ao(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],Ao(t,s.left,s.left+s.width)&&Ao(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!C8(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,a=x8(s,i);s&&!a&&ve(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!a&&ve(e.onHover,[t,i,this],this)}else i&&ve(e.onClick,[t,i,this],this)}}function T8(n,t,e,i,s){const a=S8(i,n,t,e),l=A8(s,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function S8(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,l)=>a.length>l.length?a:l)),t+e.size/2+i.measureText(s).width}function A8(n,t,e){let i=n;return typeof t.text!="string"&&(i=ek(t,e)),i}function ek(n,t){const e=n.text?n.text.length:0;return t*e}function C8(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var R8={id:"legend",_element:WA,start(n,t,e){const i=n.legend=new WA({ctx:n.ctx,options:e,chart:n});Ei.configure(n,i,e),Ei.addBox(n,i)},stop(n){Ei.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Ei.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:a,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(e?0:void 0),p=Si(f.borderWidth);return{text:t[d.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class nk extends Go{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=dn(i.text)?i.text.length:1;this._padding=Si(i.padding);const a=s*Nn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:a,options:l}=this,u=l.align;let d=0,f,p,y;return this.isHorizontal()?(p=Cn(u,i,a),y=e+t,f=a-i):(l.position==="left"?(p=i+t,y=Cn(u,s,e),d=fe*-.5):(p=a-t,y=Cn(u,e,s),d=fe*.5),f=s-e),{titleX:p,titleY:y,maxWidth:f,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Nn(e.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:d,rotation:f}=this._drawArgs(a);Zh(t,e.text,0,0,i,{color:e.color,maxWidth:d,rotation:f,textAlign:Zb(e.align),textBaseline:"middle",translation:[l,u]})}}function I8(n,t){const e=new nk({ctx:n.ctx,options:t,chart:n});Ei.configure(n,e,t),Ei.addBox(n,e),n.titleBlock=e}var N8={id:"title",_element:nk,start(n,t,e){I8(n,e)},stop(n){const t=n.titleBlock;Ei.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Ei.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const uh={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,a=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const d=u.tooltipPosition();i.add(d.x),s+=d.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((u,d)=>u+d)/i.size,y:s/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,a,l,u;for(a=0,l=n.length;a<l;++a){const d=n[a].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),p=G9(t,f);p<s&&(s=p,u=d)}}if(u){const d=u.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function is(n,t){return t&&(dn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function $s(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function k8(n,t){const{element:e,datasetIndex:i,index:s}=t,a=n.getDatasetMeta(i).controller,{label:l,value:u}=a.getLabelAndValue(s);return{chart:n,label:l,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:u,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function GA(n,t){const e=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:l,boxHeight:u}=t,d=Nn(t.bodyFont),f=Nn(t.titleFont),p=Nn(t.footerFont),y=a.length,v=s.length,T=i.length,S=Si(t.padding);let N=S.height,C=0,L=i.reduce((Z,H)=>Z+H.before.length+H.lines.length+H.after.length,0);if(L+=n.beforeBody.length+n.afterBody.length,y&&(N+=y*f.lineHeight+(y-1)*t.titleSpacing+t.titleMarginBottom),L){const Z=t.displayColors?Math.max(u,d.lineHeight):d.lineHeight;N+=T*Z+(L-T)*d.lineHeight+(L-1)*t.bodySpacing}v&&(N+=t.footerMarginTop+v*p.lineHeight+(v-1)*t.footerSpacing);let W=0;const $=function(Z){C=Math.max(C,e.measureText(Z).width+W)};return e.save(),e.font=f.string,re(n.title,$),e.font=d.string,re(n.beforeBody.concat(n.afterBody),$),W=t.displayColors?l+2+t.boxPadding:0,re(i,Z=>{re(Z.before,$),re(Z.lines,$),re(Z.after,$)}),W=0,e.font=p.string,re(n.footer,$),e.restore(),C+=S.width,{width:C,height:N}}function D8(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function M8(n,t,e,i){const{x:s,width:a}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&s+a+l>t.width||n==="right"&&s-a-l<0)return!0}function O8(n,t,e,i){const{x:s,width:a}=e,{width:l,chartArea:{left:u,right:d}}=n;let f="center";return i==="center"?f=s<=(u+d)/2?"left":"right":s<=a/2?f="left":s>=l-a/2&&(f="right"),M8(f,n,t,e)&&(f="center"),f}function YA(n,t,e){const i=e.yAlign||t.yAlign||D8(n,e);return{xAlign:e.xAlign||t.xAlign||O8(n,t,e,i),yAlign:i}}function P8(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function L8(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function $A(n,t,e,i){const{caretSize:s,caretPadding:a,cornerRadius:l}=n,{xAlign:u,yAlign:d}=e,f=s+a,{topLeft:p,topRight:y,bottomLeft:v,bottomRight:T}=ic(l);let S=P8(t,u);const N=L8(t,d,f);return d==="center"?u==="left"?S+=f:u==="right"&&(S-=f):u==="left"?S-=Math.max(p,v)+s:u==="right"&&(S+=Math.max(y,T)+s),{x:Gn(S,0,i.width-t.width),y:Gn(N,0,i.height-t.height)}}function dm(n,t,e){const i=Si(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function QA(n){return is([],$s(n))}function V8(n,t,e){return Dc(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function KA(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const ik={beforeTitle:Ws,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Ws,beforeBody:Ws,beforeLabel:Ws,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Se(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ws,afterBody:Ws,beforeFooter:Ws,footer:Ws,afterFooter:Ws};function Un(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?ik[t].call(e,i):s}class XA extends Go{static positioners=uh;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,a=new BN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=V8(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Un(i,"beforeTitle",this,t),a=Un(i,"title",this,t),l=Un(i,"afterTitle",this,t);let u=[];return u=is(u,$s(s)),u=is(u,$s(a)),u=is(u,$s(l)),u}getBeforeBody(t,e){return QA(Un(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return re(t,a=>{const l={before:[],lines:[],after:[]},u=KA(i,a);is(l.before,$s(Un(u,"beforeLabel",this,a))),is(l.lines,Un(u,"label",this,a)),is(l.after,$s(Un(u,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(t,e){return QA(Un(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Un(i,"beforeFooter",this,t),a=Un(i,"footer",this,t),l=Un(i,"afterFooter",this,t);let u=[];return u=is(u,$s(s)),u=is(u,$s(a)),u=is(u,$s(l)),u}_createItems(t){const e=this._active,i=this.chart.data,s=[],a=[],l=[];let u=[],d,f;for(d=0,f=e.length;d<f;++d)u.push(k8(this.chart,e[d]));return t.filter&&(u=u.filter((p,y,v)=>t.filter(p,y,v,i))),t.itemSort&&(u=u.sort((p,y)=>t.itemSort(p,y,i))),re(u,p=>{const y=KA(t.callbacks,p);s.push(Un(y,"labelColor",this,p)),a.push(Un(y,"labelPointStyle",this,p)),l.push(Un(y,"labelTextColor",this,p))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const u=uh[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const d=this._size=GA(this,i),f=Object.assign({},u,d),p=YA(this.chart,i,f),y=$A(i,f,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,a={opacity:1,x:y.x,y:y.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const a=this.getCaretPosition(t,i,s);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:y}=ic(u),{x:v,y:T}=t,{width:S,height:N}=e;let C,L,W,$,Z,H;return a==="center"?(Z=T+N/2,s==="left"?(C=v,L=C-l,$=Z+l,H=Z-l):(C=v+S,L=C+l,$=Z-l,H=Z+l),W=C):(s==="left"?L=v+Math.max(d,p)+l:s==="right"?L=v+S-Math.max(f,y)-l:L=this.caretX,a==="top"?($=T,Z=$-l,C=L-l,W=L+l):($=T+N,Z=$+l,C=L+l,W=L-l),H=$),{x1:C,x2:L,x3:W,y1:$,y2:Z,y3:H}}drawTitle(t,e,i){const s=this.title,a=s.length;let l,u,d;if(a){const f=sc(i.rtl,this.x,this.width);for(t.x=dm(this,i.titleAlign,i),e.textAlign=f.textAlign(i.titleAlign),e.textBaseline="middle",l=Nn(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,d=0;d<a;++d)e.fillText(s[d],f.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,d+1===a&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,s,a){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:d,boxWidth:f}=a,p=Nn(a.bodyFont),y=dm(this,"left",a),v=s.x(y),T=d<p.lineHeight?(p.lineHeight-d)/2:0,S=e.y+T;if(a.usePointStyle){const N={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},C=s.leftForLtr(v,f)+f/2,L=S+d/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,mA(t,N,C,L),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,mA(t,N,C,L)}else{t.lineWidth=Yt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const N=s.leftForLtr(v,f),C=s.leftForLtr(s.xPlus(v,1),f-2),L=ic(l.borderRadius);Object.values(L).some(W=>W!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,wg(t,{x:N,y:S,w:f,h:d,radius:L}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),wg(t,{x:C,y:S+1,w:f-2,h:d-2,radius:L}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(N,S,f,d),t.strokeRect(N,S,f,d),t.fillStyle=l.backgroundColor,t.fillRect(C,S+1,f-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:p}=i,y=Nn(i.bodyFont);let v=y.lineHeight,T=0;const S=sc(i.rtl,this.x,this.width),N=function(I){e.fillText(I,S.x(t.x+T),t.y+v/2),t.y+=v+a},C=S.textAlign(l);let L,W,$,Z,H,lt,D;for(e.textAlign=l,e.textBaseline="middle",e.font=y.string,t.x=dm(this,C,i),e.fillStyle=i.bodyColor,re(this.beforeBody,N),T=u&&C!=="right"?l==="center"?f/2+p:f+2+p:0,Z=0,lt=s.length;Z<lt;++Z){for(L=s[Z],W=this.labelTextColors[Z],e.fillStyle=W,re(L.before,N),$=L.lines,u&&$.length&&(this._drawColorBox(e,t,Z,S,i),v=Math.max(y.lineHeight,d)),H=0,D=$.length;H<D;++H)N($[H]),v=y.lineHeight;re(L.after,N)}T=0,v=y.lineHeight,re(this.afterBody,N),t.y-=a}drawFooter(t,e,i){const s=this.footer,a=s.length;let l,u;if(a){const d=sc(i.rtl,this.x,this.width);for(t.x=dm(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",l=Nn(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,u=0;u<a;++u)e.fillText(s[u],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:a,yAlign:l}=this,{x:u,y:d}=t,{width:f,height:p}=i,{topLeft:y,topRight:v,bottomLeft:T,bottomRight:S}=ic(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(u+y,d),l==="top"&&this.drawCaret(t,e,i,s),e.lineTo(u+f-v,d),e.quadraticCurveTo(u+f,d,u+f,d+v),l==="center"&&a==="right"&&this.drawCaret(t,e,i,s),e.lineTo(u+f,d+p-S),e.quadraticCurveTo(u+f,d+p,u+f-S,d+p),l==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(u+T,d+p),e.quadraticCurveTo(u,d+p,u,d+p-T),l==="center"&&a==="left"&&this.drawCaret(t,e,i,s),e.lineTo(u,d+y),e.quadraticCurveTo(u,d,u+y,d),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=uh[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=GA(this,t),d=Object.assign({},l,this._size),f=YA(e,t,d),p=$A(t,d,f,e);(s._to!==p.x||a._to!==p.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Si(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,s,e),FN(t,e.textDirection),a.y+=l.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),zN(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),a=!gg(i,s),l=this._positionChanged(s,e);(a||l)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(t,a,e,i),u=this._positionChanged(l,t),d=e||!gg(l,a)||u;return d&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,s){const a=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:s,options:a}=this,l=uh[a.position].call(this,t,e);return l!==!1&&(i!==l.x||s!==l.y)}}var j8={id:"tooltip",_element:XA,positioners:uh,afterInit(n,t,e){e&&(n.tooltip=new XA({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ik},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const U8=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function F8(n,t,e,i){const s=n.indexOf(t);if(s===-1)return U8(n,t,e,i);const a=n.lastIndexOf(t);return s!==a?e:s}const z8=(n,t)=>n===null?null:Gn(Math.round(n),0,t);function ZA(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class B8 extends Mc{static id="category";static defaults={ticks:{callback:ZA}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:a}of e)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Se(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:F8(i,t,te(e,t),this._addedLabels),z8(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=e;l++)s.push({value:l});return s}getLabelForValue(t){return ZA.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function H8(n,t){const e=[],{bounds:s,step:a,min:l,max:u,precision:d,count:f,maxTicks:p,maxDigits:y,includeBounds:v}=n,T=a||1,S=p-1,{min:N,max:C}=t,L=!Se(l),W=!Se(u),$=!Se(f),Z=(C-N)/(y+1);let H=rA((C-N)/S/T)*T,lt,D,I,k;if(H<1e-14&&!L&&!W)return[{value:N},{value:C}];k=Math.ceil(C/H)-Math.floor(N/H),k>S&&(H=rA(k*H/S/T)*T),Se(d)||(lt=Math.pow(10,d),H=Math.ceil(H*lt)/lt),s==="ticks"?(D=Math.floor(N/H)*H,I=Math.ceil(C/H)*H):(D=N,I=C),L&&W&&a&&H9((u-l)/a,H/1e3)?(k=Math.round(Math.min((u-l)/H,p)),H=(u-l)/k,D=l,I=u):$?(D=L?l:D,I=W?u:I,k=f-1,H=(I-D)/k):(k=(I-D)/H,Dm(k,Math.round(k),H/1e3)?k=Math.round(k):k=Math.ceil(k));const P=Math.max(aA(H),aA(D));lt=Math.pow(10,Se(d)?P:d),D=Math.round(D*lt)/lt,I=Math.round(I*lt)/lt;let V=0;for(L&&(v&&D!==l?(e.push({value:l}),D<l&&V++,Dm(Math.round((D+V*H)*lt)/lt,l,JA(l,Z,n))&&V++):D<l&&V++);V<k;++V){const U=Math.round((D+V*H)*lt)/lt;if(W&&U>u)break;e.push({value:U})}return W&&v&&I!==u?e.length&&Dm(e[e.length-1].value,u,JA(u,Z,n))?e[e.length-1].value=u:e.push({value:u}):(!W||I===u)&&e.push({value:I}),e}function JA(n,t,{horizontal:e,minRotation:i}){const s=tr(i),a=(e?Math.sin(s):Math.cos(s))||.001,l=.75*t*(""+n).length;return Math.min(t/a,l)}class q8 extends Mc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Se(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const l=d=>s=e?s:d,u=d=>a=i?a:d;if(t){const d=vg(s),f=vg(a);d<0&&f<0?u(0):d>0&&f>0&&l(0)}if(s===a){let d=a===0?1:Math.abs(a*.05);u(a+d),t||l(s-d)}this.min=s,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,l=H8(s,a);return t.bounds==="ticks"&&q9(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Jb(t,this.chart.options.locale,this.options.ticks.format)}}class W8 extends q8{static id="linear";static defaults={ticks:{callback:DN.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ti(t)?t:0,this.max=Ti(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=tr(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const gp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hn=Object.keys(gp);function tC(n,t){return n-t}function eC(n,t){if(Se(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Ti(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(s&&(l=s==="week"&&(bg(a)||a===!0)?e.startOf(l,"isoWeek",a):e.startOf(l,s)),+l)}function nC(n,t,e,i){const s=Hn.length;for(let a=Hn.indexOf(n);a<s-1;++a){const l=gp[Hn[a]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(u*l.size))<=i)return Hn[a]}return Hn[s-1]}function G8(n,t,e,i,s){for(let a=Hn.length-1;a>=Hn.indexOf(e);a--){const l=Hn[a];if(gp[l].common&&n._adapter.diff(s,i,l)>=t-1)return l}return Hn[e?Hn.indexOf(e):0]}function Y8(n){for(let t=Hn.indexOf(n)+1,e=Hn.length;t<e;++t)if(gp[Hn[t]].common)return Hn[t]}function iC(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=Xb(e,t),a=e[i]>=t?e[i]:e[s];n[a]=!0}}function $8(n,t,e,i){const s=n._adapter,a=+s.startOf(t[0].value,i),l=t[t.length-1].value;let u,d;for(u=a;u<=l;u=+s.add(u,1,i))d=e[u],d>=0&&(t[d].major=!0);return t}function sC(n,t,e){const i=[],s={},a=t.length;let l,u;for(l=0;l<a;++l)u=t[l],s[u]=l,i.push({value:u,major:!1});return a===0||!e?i:$8(n,i,s,e)}class rC extends Mc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new eB._date(t.adapters.date);s.init(e),xh(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:eC(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:u}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!u&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!u)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=Ti(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),a=Ti(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,l=this.max,u=Q9(s,a,l);return this._unit=e.unit||(i.autoSkip?nC(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):G8(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Y8(this._unit),this.initOffsets(s),t.reverse&&u.reverse(),sC(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,a;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=Gn(e,0,l),i=Gn(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||nC(a.minUnit,e,i,this._getLabelCapacity(e)),u=te(s.ticks.stepSize,1),d=l==="week"?a.isoWeekday:!1,f=bg(d)||d===!0,p={};let y=e,v,T;if(f&&(y=+t.startOf(y,"isoWeek",d)),y=+t.startOf(y,f?"day":l),t.diff(i,e,l)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+l);const S=s.ticks.source==="data"&&this.getDataTimestamps();for(v=y,T=0;v<i;v=+t.add(v,u,l),T++)iC(p,v,S);return(v===i||s.bounds==="ticks"||T===1)&&iC(p,v,S),Object.keys(p).sort(tC).map(N=>+N)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,a=this._unit,l=e||s[a];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,s){const a=this.options,l=a.ticks.callback;if(l)return ve(l,[t,e,i],this);const u=a.time.displayFormats,d=this._unit,f=this._majorUnit,p=d&&u[d],y=f&&u[f],v=i[e],T=f&&y&&v&&v.major;return this._adapter.format(t,s||(T?y:p))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=tr(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:i*a+u*l,h:i*l+u*a}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,a=this._tickFormatFunction(t,0,sC(this,[t],this._majorUnit),s),l=this._getLabelSize(a),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(eC(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return X9(t.sort(tC))}}function fm(n,t,e){let i=0,s=n.length-1,a,l,u,d;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=X0(n,"pos",t)),{pos:a,time:u}=n[i],{pos:l,time:d}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=X0(n,"time",t)),{time:a,pos:u}=n[i],{time:l,pos:d}=n[s]);const f=l-a;return f?u+(d-u)*(t-a)/f:u}class BH extends rC{static id="timeseries";static defaults=rC.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=fm(e,this.min),this._tableRange=fm(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],a=[];let l,u,d,f,p;for(l=0,u=t.length;l<u;++l)f=t[l],f>=e&&f<=i&&s.push(f);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,u=s.length;l<u;++l)p=s[l+1],d=s[l-1],f=s[l],Math.round((p+d)/2)!==f&&a.push({time:f,pos:l/(u-1)});return a}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(fm(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return fm(this._table,i*this._tableRange+this._minPos,!0)}}const sk="label";function aC(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function Q8(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function rk(n,t){n.labels=t}function ak(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sk;const i=[];n.datasets=t.map(s=>{const a=n.datasets.find(l=>l[e]===s[e]);return!a||!s.data||i.includes(a)?{...s}:(i.push(a),Object.assign(a,s),a)})}function K8(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sk;const e={labels:[],datasets:[]};return rk(e,n.labels),ak(e,n.datasets,t),e}function X8(n,t){const{height:e=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:l,data:u,options:d,plugins:f=[],fallbackContent:p,updateMode:y,...v}=n,T=B.useRef(null),S=B.useRef(null),N=()=>{T.current&&(S.current=new mp(T.current,{type:l,data:K8(u,a),options:d&&{...d},plugins:f}),aC(t,S.current))},C=()=>{aC(t,null),S.current&&(S.current.destroy(),S.current=null)};return B.useEffect(()=>{!s&&S.current&&d&&Q8(S.current,d)},[s,d]),B.useEffect(()=>{!s&&S.current&&rk(S.current.config.data,u.labels)},[s,u.labels]),B.useEffect(()=>{!s&&S.current&&u.datasets&&ak(S.current.config.data,u.datasets,a)},[s,u.datasets]),B.useEffect(()=>{S.current&&(s?(C(),setTimeout(N)):S.current.update(y))},[s,d,u.labels,u.datasets,y]),B.useEffect(()=>{S.current&&(C(),setTimeout(N))},[l]),B.useEffect(()=>(N(),()=>C()),[]),er.createElement("canvas",{ref:T,role:"img",height:e,width:i,...v},p)}const Z8=B.forwardRef(X8);function J8(n,t){return mp.register(t),B.forwardRef((e,i)=>er.createElement(Z8,{...e,ref:i,type:n}))}const t7=J8("pie",tB);var ok={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oC=er.createContext&&er.createContext(ok),e7=["attr","size","title"];function n7(n,t){if(n==null)return{};var e=i7(n,t),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function i7(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function Ag(){return Ag=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ag.apply(this,arguments)}function lC(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function Cg(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(e),!0).forEach(function(i){s7(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):lC(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function s7(n,t,e){return t=r7(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function r7(n){var t=a7(n,"string");return typeof t=="symbol"?t:t+""}function a7(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function lk(n){return n&&n.map((t,e)=>er.createElement(t.tag,Cg({key:e},t.attr),lk(t.child)))}function Qt(n){return t=>er.createElement(o7,Ag({attr:Cg({},n.attr)},t),lk(n.child))}function o7(n){var t=e=>{var{attr:i,size:s,title:a}=n,l=n7(n,e7),u=s||e.size||"1em",d;return e.className&&(d=e.className),n.className&&(d=(d?d+" ":"")+n.className),er.createElement("svg",Ag({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,l,{className:d,style:Cg(Cg({color:n.color||e.color},e.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&er.createElement("title",null,a),n.children)};return oC!==void 0?er.createElement(oC.Consumer,null,e=>t(e)):t(ok)}function l7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(n)}function pp(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(n)}function cC(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(n)}function c7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(n)}function u7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(n)}function uC(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(n)}function Rg(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(n)}function hh(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(n)}function h7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function d7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(n)}function Ig(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(n)}function f7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(n)}function m7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(n)}function g7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(n)}function ck(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(n)}function hC(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(n)}function cE(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(n)}function p7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},child:[]},{tag:"polyline",attr:{points:"10 17 15 12 10 7"},child:[]},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"},child:[]}]})(n)}function uE(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(n)}function hE(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(n)}function Ah(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(n)}function _7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(n)}function y7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(n)}function v7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(n)}function uk(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(n)}function b7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(n)}function E7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(n)}function w7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},child:[]}]})(n)}function x7(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(n)}function yc(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}function hk(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(n)}function mm(n){return Qt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const dC=({question:n,currentUser:t})=>{const[e,i]=B.useState(!1),[s,a]=B.useState(!1),[l,u]=B.useState(""),[d,f]=B.useState(!1),[p,y]=B.useState([]),[v,T]=B.useState(!1),[S,N]=B.useState(n.views||0);B.useEffect(()=>{(async()=>{try{await jy(Cm(Ze,"questions",n.id),{views:Uy(1)}),N(H=>H+1)}catch(H){console.error("Error updating views:",H)}})()},[n.id]),B.useEffect(()=>{let Z;return s&&n.answers>0&&(async()=>{T(!0);try{const lt=wo(ii(Ze,"answers"),zh("questionId","==",n.id),P0("createdAt","desc"));Z=xo(lt,D=>{y(D.docs.map(I=>({id:I.id,...I.data()}))),T(!1)})}catch(lt){console.error("Error loading answers:",lt),T(!1)}})(),()=>{Z&&Z()}},[s,n.id,n.answers]);const C=Z=>{if(!Z?.toDate)return"Just now";const H=Z.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(H)},L=async Z=>{if(Z.preventDefault(),!(!l.trim()||!t))try{await Im(ii(Ze,"answers"),{questionId:n.id,content:l,userId:t.uid,userDisplayName:t.displayName||"Anonymous",createdAt:Nm(),upvotes:0}),await jy(Cm(Ze,"questions",n.id),{answers:Uy(1),answered:!0}),u(""),i(!1)}catch(H){console.error("Error submitting answer:",H)}},W=()=>{f(!d)},$=async Z=>{try{await jy(Cm(Ze,"answers",Z),{upvotes:Uy(1)})}catch(H){console.error("Error upvoting answer:",H)}};return E.jsxs("div",{className:`question-card ${n.answered?"answered":""}`,children:[E.jsxs("div",{className:"question-header",children:[E.jsxs("div",{className:"question-meta",children:[E.jsx("span",{className:`subject-badge ${n.subject}`,children:n.subject}),E.jsxs("span",{className:"asked-by",children:[E.jsx(yc,{className:"icon"}),n.userDisplayName||"Anonymous"]}),E.jsxs("span",{className:"timestamp",children:[E.jsx(Ig,{className:"icon"}),C(n.createdAt)]})]}),n.answered&&E.jsxs("div",{className:"answered-badge",children:[E.jsx(hh,{className:"icon"}),"Answered"]})]}),E.jsx("h3",{className:"question-title",children:E.jsx(ue,{to:`/question/${n.id}`,children:n.title})}),n.answers>0&&E.jsxs("div",{className:"answers-section",children:[E.jsx("button",{className:"toggle-answers-btn",onClick:()=>a(!s),disabled:v,children:s?E.jsxs(E.Fragment,{children:[E.jsx(d7,{className:"icon"}),"Hide answers"]}):E.jsxs(E.Fragment,{children:[E.jsx(h7,{className:"icon"}),v?"Loading...":`Show answers (${n.answers})`]})}),s&&E.jsx("div",{className:"answers-list",children:v?E.jsx("div",{className:"loading-answers",children:"Loading answers..."}):p.length>0?p.map(Z=>E.jsxs("div",{className:"answer-card",children:[E.jsxs("div",{className:"answer-header",children:[E.jsxs("span",{className:"answer-author",children:[E.jsx(yc,{className:"icon"}),Z.userDisplayName||"Anonymous"]}),E.jsxs("span",{className:"answer-date",children:[E.jsx(Ig,{className:"icon"}),C(Z.createdAt)]})]}),E.jsx("div",{className:"answer-content",children:Z.content}),E.jsx("div",{className:"answer-actions",children:E.jsxs("button",{className:"upvote-btn",onClick:()=>$(Z.id),children:[E.jsx(w7,{className:"icon"}),Z.upvotes||0," upvotes"]})})]},Z.id)):E.jsx("div",{className:"no-answers",children:"No answers yet"})})]}),t&&E.jsx("div",{className:"answer-action-section",children:e?E.jsxs("form",{onSubmit:L,className:"answer-form",children:[E.jsx("textarea",{value:l,onChange:Z=>u(Z.target.value),placeholder:"Write your answer...",className:"answer-input",required:!0,rows:4}),E.jsxs("div",{className:"answer-form-actions",children:[E.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>i(!1),children:"Cancel"}),E.jsx("button",{type:"submit",className:"btn-primary",children:"Post Answer"})]})]}):E.jsxs("button",{className:"btn-text",onClick:()=>i(!0),children:[E.jsx(f7,{className:"icon"}),"Add Answer"]})}),E.jsxs("div",{className:"question-footer",children:[E.jsxs("div",{className:"stats",children:[E.jsxs("span",{className:"stat",children:[E.jsx(Ah,{className:"icon"}),n.answers||0," answers"]}),E.jsxs("span",{className:"stat",children:[E.jsx(m7,{className:"icon"}),S," views"]})]}),E.jsx("button",{className:`bookmark-btn ${d?"active":""}`,onClick:W,"aria-label":d?"Remove bookmark":"Add bookmark",children:E.jsx(Rg,{className:"icon"})})]})]})};mp.register(B8,W8,w8,N8,j8,R8,p8);function T7(){const[n]=hp(xi),t=Fo(),{darkMode:e}=ov(),[i,s]=B.useState([]),[a,l]=B.useState([]),[u,d]=B.useState([]),[f,p]=B.useState([]),[y,v]=B.useState(null),[T,S]=B.useState([]),[N,C]=B.useState(""),[L,W]=B.useState(""),[$,Z]=B.useState("all"),[H,lt]=B.useState(!1),[D,I]=B.useState({totalQuestions:0,totalAnswers:0,answerRate:0,subjectDistribution:{}});B.useEffect(()=>{const z=wo(ii(Ze,"questions"),P0("createdAt","desc"),d1(50)),it=xo(z,async dt=>{const _t=dt.docs.map(rt=>({id:rt.id,...rt.data()}));s(_t);const j=_t.reduce((rt,ft)=>(rt[ft.subject]=(rt[ft.subject]||0)+1,rt),{}),tt=await g1(ii(Ze,"questions")),ct=await g1(ii(Ze,"answers"));I(rt=>({...rt,totalQuestions:tt.data().count,totalAnswers:ct.data().count,answerRate:_t.length>0?Math.round(_t.filter(ft=>ft.answered).length/_t.length*100):0,subjectDistribution:j}))});return()=>it()},[]),B.useEffect(()=>{const z=wo(ii(Ze,"questions"),P0("engagementScore","desc"),d1(5)),it=xo(z,dt=>{l(dt.docs.map(_t=>({id:_t.id,..._t.data()})))});return()=>it()},[]),B.useEffect(()=>{if(n){const z=Zr(Jr,`users/${n.uid}/analytics`);Yl(z,j=>{v(j.val())});const it=Zr(Jr,`users/${n.uid}/recentlyViewed`);Yl(it,j=>{const tt=j.val();if(tt){const ct=Object.keys(tt),rt=wo(ii(Ze,"questions"),zh("id","in",ct));xo(rt,ft=>{d(ft.docs.map(wt=>({id:wt.id,...wt.data(),viewedAt:tt[wt.id]?.timestamp||null})))})}});const dt=Zr(Jr,`users/${n.uid}/bookmarks`);Yl(dt,j=>{const tt=j.val();if(tt){const ct=Object.keys(tt),rt=wo(ii(Ze,"questions"),zh("id","in",ct));xo(rt,ft=>{p(ft.docs.map(wt=>({id:wt.id,...wt.data(),bookmarkedAt:tt[wt.id]?.timestamp||null})))})}});const _t=Zr(Jr,"users");Yl(_t,j=>{const tt=j.val();if(tt){const ct=Object.entries(tt).filter(([rt,ft])=>ft.points>0).map(([rt,ft])=>({id:rt,...ft})).sort((rt,ft)=>(ft.points||0)-(rt.points||0)).slice(0,5);S(ct)}})}},[n]);const k={labels:Object.keys(D.subjectDistribution),datasets:[{data:Object.values(D.subjectDistribution),backgroundColor:["#06b6d4","#3b82f6","#8b5cf6","#ec4899","#f97316"],borderWidth:1}]},P=async z=>{if(z.preventDefault(),!L.trim())return;const it={title:L,subject:$,userId:n?.uid,userDisplayName:n?.displayName||"Anonymous",createdAt:Nm(),answered:!1,engagementScore:0};await Im(ii(Ze,"questions"),it),W("")},V=async()=>{try{await u4(xi),t("/login")}catch(z){console.error("Logout error:",z)}},U=i.filter(z=>($==="all"||z.subject===$)&&z.title.toLowerCase().includes(N.toLowerCase())),M=()=>E.jsxs("div",{className:"card",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[E.jsx(c7,{className:"mr-2 text-primary"}),E.jsx("span",{children:"Community Stats"})]}),E.jsxs("div",{className:"stats-grid",children:[E.jsxs("div",{className:"stats-item",children:[E.jsx("div",{className:"text-sm font-medium mb-1",children:"Total Questions"}),E.jsx("div",{className:"text-2xl font-bold",children:D.totalQuestions})]}),E.jsxs("div",{className:"stats-item",children:[E.jsx("div",{className:"text-sm font-medium mb-1",children:"Total Answers"}),E.jsx("div",{className:"text-2xl font-bold",children:D.totalAnswers})]}),E.jsxs("div",{className:"stats-item",children:[E.jsx("div",{className:"text-sm font-medium mb-1",children:"Answer Rate"}),E.jsxs("div",{className:"text-2xl font-bold",children:[D.answerRate,"%"]})]})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-medium mb-2",children:"Subject Distribution"}),E.jsx("div",{className:"chart-container",children:E.jsx(t7,{data:k,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"var(--color-text)"}}}}})})]})]}),Gt=()=>E.jsxs("div",{className:"card",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[E.jsx(hk,{className:"mr-2 text-primary"}),E.jsx("span",{children:"Top Contributors"})]}),E.jsx("div",{className:"space-y-3",children:T.map((z,it)=>E.jsx(ue,{to:`/profile/${z.id}`,className:"block hover:opacity-80 transition-opacity",children:E.jsxs("div",{className:"expert-item",children:[E.jsxs("span",{className:"w-6 text-center mr-2 font-medium",children:[it+1,"."]}),E.jsx("div",{className:"expert-avatar",children:z.displayName?.charAt(0)||"E"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"font-medium",children:z.displayName||"Expert"}),E.jsxs("div",{className:"text-sm text-secondary",children:[z.points||0," points"]})]})]})},z.id))})]}),Et=()=>E.jsxs("div",{className:"card",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[E.jsx(l7,{className:"mr-2 text-primary"}),E.jsx("span",{children:"Your Stats"})]}),E.jsxs("div",{className:"stats-grid",children:[E.jsxs("div",{className:"stats-item",children:[E.jsx("div",{className:"text-sm font-medium mb-1",children:"Points"}),E.jsx("div",{className:"text-2xl font-bold text-primary",children:y?.points||0})]}),E.jsxs("div",{className:"stats-item",children:[E.jsx("div",{className:"text-sm font-medium mb-1",children:"Questions"}),E.jsx("div",{className:"text-2xl font-bold",children:y?.questions||0})]}),E.jsxs("div",{className:"stats-item",children:[E.jsx("div",{className:"text-sm font-medium mb-1",children:"Answers"}),E.jsx("div",{className:"text-2xl font-bold",children:y?.answers||0})]}),E.jsxs("div",{className:"stats-item",children:[E.jsx("div",{className:"text-sm font-medium mb-1",children:"Best Answers"}),E.jsx("div",{className:"text-2xl font-bold",children:y?.bestAnswers||0})]})]})]});return E.jsxs("div",{className:"home-container",children:[E.jsx("header",{className:"header",children:E.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[E.jsx(ue,{to:"/",className:"logo",children:"StudiQ"}),E.jsxs("div",{className:"search-container",children:[E.jsx("div",{className:"search-icon",children:E.jsx(v7,{})}),E.jsx("input",{type:"text",placeholder:"Search for questions...",className:"input search-input",value:N,onChange:z=>C(z.target.value)})]}),E.jsx("nav",{className:"flex items-center space-x-4",children:n?E.jsxs("div",{className:"relative",children:[E.jsx("button",{onClick:()=>lt(!H),className:"flex items-center space-x-2 focus:outline-none",children:E.jsx("div",{className:"user-avatar",children:n.displayName?.charAt(0)||"U"})}),H&&E.jsxs("div",{className:"dropdown",children:[E.jsxs(ue,{to:`/profile/${n.uid}`,className:"dropdown-item flex items-center",children:[E.jsx(yc,{className:"mr-2"})," Profile"]}),E.jsxs(ue,{to:"/settings",className:"dropdown-item flex items-center",children:[E.jsx(uk,{className:"mr-2"})," Settings"]}),E.jsxs("button",{onClick:V,className:"dropdown-item flex items-center w-full text-left",children:[E.jsx(uE,{className:"mr-2"})," Sign out"]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(ue,{to:"/login",className:"text-secondary hover:text-primary",children:"Log in"}),E.jsx(ue,{to:"/signup",className:"btn-primary",children:"Sign up"})]})})]})}),E.jsx("main",{className:"container mx-auto px-4 py-8",children:E.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[E.jsxs("div",{className:"w-full md:w-1/4 space-y-6",children:[E.jsxs("div",{className:"card",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[E.jsx(u7,{className:"mr-2 text-primary"}),E.jsx("span",{children:"Subjects"})]}),E.jsxs("ul",{className:"space-y-2",children:[E.jsx("li",{children:E.jsx("button",{onClick:()=>Z("all"),className:`subject-item ${$==="all"?"active":""}`,children:"All Subjects"})}),["math","science","history","english","coding"].map(z=>E.jsx("li",{children:E.jsx("button",{onClick:()=>Z(z),className:`subject-item ${$===z?"active":""}`,children:z.charAt(0).toUpperCase()+z.slice(1)})},z))]})]}),n&&E.jsxs(E.Fragment,{children:[Et(),u.length>0&&E.jsxs("div",{className:"card",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[E.jsx(Ig,{className:"mr-2 text-primary"}),E.jsx("span",{children:"Recently Viewed"})]}),E.jsx("div",{className:"space-y-3",children:u.slice(0,3).map(z=>E.jsx(ue,{to:`/question/${z.id}`,className:"question-link text-sm",children:z.title},z.id))})]}),f.length>0&&E.jsxs("div",{className:"card",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[E.jsx(Rg,{className:"mr-2 text-primary"}),E.jsx("span",{children:"Your Bookmarks"})]}),E.jsx("div",{className:"space-y-3",children:f.slice(0,3).map(z=>E.jsx(ue,{to:`/question/${z.id}`,className:"question-link text-sm",children:z.title},z.id))})]})]})]}),E.jsxs("div",{className:"w-full md:w-2/4 space-y-6",children:[n&&E.jsxs("div",{className:"card",children:[E.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ask your question"}),E.jsxs("form",{onSubmit:P,children:[E.jsx("textarea",{placeholder:"What do you need help with? Be specific...",className:"input question-form",rows:4,value:L,onChange:z=>W(z.target.value),required:!0}),E.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[E.jsxs("select",{value:$,onChange:z=>Z(z.target.value),className:"input py-1 px-3 text-sm",children:[E.jsx("option",{value:"math",children:"Math"}),E.jsx("option",{value:"science",children:"Science"}),E.jsx("option",{value:"history",children:"History"}),E.jsx("option",{value:"english",children:"English"}),E.jsx("option",{value:"coding",children:"Coding"})]}),E.jsx("button",{type:"submit",className:"btn-primary px-4 py-2",children:"Post Question"})]})]})]}),E.jsxs("div",{className:"card",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[E.jsx(x7,{className:"mr-2 text-primary"}),"Trending Questions"]}),E.jsx(ue,{to:"/trending",className:"text-sm text-primary hover:underline",children:"View all"})]}),E.jsx("div",{className:"space-y-4",children:a.map(z=>E.jsx(dC,{question:z,darkMode:e,currentUser:n,onAnswerSubmit:async(it,dt)=>{try{await Im(ii(Ze,"answers"),{questionId:it,content:dt,userId:n.uid,userDisplayName:n.displayName||"Anonymous",createdAt:Nm()}),await updateDoc(doc(Ze,"questions",it),{answers:increment(1),answered:!0})}catch(_t){console.error("Error submitting answer:",_t)}}},z.id))})]}),E.jsxs("div",{className:"card",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsx("h2",{className:"text-xl font-semibold",children:"Recent Questions"}),E.jsx(ue,{to:"/questions",className:"text-sm text-primary hover:underline",children:"View all"})]}),E.jsx("div",{className:"space-y-4",children:U.slice(0,5).map(z=>E.jsx(dC,{question:z,darkMode:e,currentUser:n,onAnswerSubmit:async(it,dt)=>{try{await Im(ii(Ze,"answers"),{questionId:it,content:dt,userId:n.uid,userDisplayName:n.displayName||"Anonymous",createdAt:Nm()}),await updateDoc(doc(Ze,"questions",it),{answers:increment(1),answered:!0})}catch(_t){console.error("Error submitting answer:",_t)}}},z.id))})]})]}),E.jsxs("div",{className:"w-full md:w-1/4 space-y-6",children:[Gt(),M(),E.jsxs("div",{className:"card",children:[E.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[E.jsx(b7,{className:"mr-2 text-primary"}),E.jsx("span",{children:"Featured Questions"})]}),E.jsx("div",{className:"space-y-3",children:i.filter(z=>z.featured).slice(0,3).map(z=>E.jsx(ue,{to:`/question/${z.id}`,className:"question-link text-sm",children:z.title},z.id))})]})]})]})})]})}function S7(){const[n,t]=B.useState(""),[e,i]=B.useState(""),[s,a]=B.useState(""),[l,u]=B.useState(!1),d=Fo(),f=async y=>{y.preventDefault(),u(!0),a("");try{await a4(xi,n,e),d("/")}catch(v){a(v.message)}finally{u(!1)}},p=async()=>{try{u(!0),await MR(xi,vN),d("/")}catch(y){a(y.message)}finally{u(!1)}};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:E.jsxs("div",{className:"max-w-md w-full p-8 rounded-xl bg-white shadow-lg",children:[E.jsxs("div",{className:"flex items-center mb-8",children:[E.jsx(ue,{to:"/",className:"mr-4 text-gray-500 hover:text-teal-500",children:E.jsx(pp,{className:"w-5 h-5"})}),E.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-teal-400 to-blue-500 bg-clip-text text-transparent",children:"Welcome Back"})]}),s&&E.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:s}),E.jsxs("form",{onSubmit:f,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(hE,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:y=>t(y.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"your@email.com"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(cE,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:e,onChange:y=>i(y.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"••••••••"})]})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),E.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),E.jsx("div",{className:"text-sm",children:E.jsx(ue,{to:"/forgot-password",className:"font-medium text-teal-600 hover:text-teal-500",children:"Forgot password?"})})]}),E.jsx("div",{children:E.jsx("button",{type:"submit",disabled:l,className:`w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ${l?"opacity-70 cursor-not-allowed":""}`,children:l?E.jsxs(E.Fragment,{children:[E.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):E.jsxs(E.Fragment,{children:[E.jsx(p7,{className:"w-5 h-5 mr-2"}),"Sign In"]})})})]}),E.jsxs("div",{className:"mt-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),E.jsx("div",{className:"mt-6",children:E.jsxs("button",{onClick:p,disabled:l,className:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:[E.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"Google logo",className:"h-5 w-5 mr-2"}),"Google"]})})]}),E.jsxs("div",{className:"mt-6 text-center text-sm",children:[E.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),E.jsx(ue,{to:"/signup",className:"font-medium text-teal-600 hover:text-teal-500",children:"Sign up"})]})]})})}function A7(){const[n,t]=B.useState(""),[e,i]=B.useState(""),[s,a]=B.useState(""),[l,u]=B.useState(""),[d,f]=B.useState(!1),p=Fo(),y=async T=>{T.preventDefault(),f(!0),u("");try{const S=await r4(xi,e,s);await o4(S.user),p("/verify-email")}catch(S){u(S.message)}finally{f(!1)}},v=async()=>{try{f(!0),await MR(xi,vN),p("/")}catch(T){u(T.message)}finally{f(!1)}};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:E.jsxs("div",{className:"max-w-md w-full p-8 rounded-xl bg-white shadow-lg",children:[E.jsxs("div",{className:"flex items-center mb-8",children:[E.jsx(ue,{to:"/",className:"mr-4 text-gray-500 hover:text-teal-500",children:E.jsx(pp,{className:"w-5 h-5"})}),E.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-teal-400 to-blue-500 bg-clip-text text-transparent",children:"Create Account"})]}),l&&E.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:l}),E.jsxs("form",{onSubmit:y,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(yc,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n,onChange:T=>t(T.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"Your Name"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(hE,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:T=>i(T.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"your@email.com"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(cE,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:6,value:s,onChange:T=>a(T.target.value),className:"bg-white border border-gray-300 focus:ring-teal-500 focus:border-teal-500 block w-full pl-10 pr-3 py-2 rounded-lg",placeholder:"••••••••"})]}),E.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum 6 characters"})]}),E.jsx("div",{children:E.jsx("button",{type:"submit",disabled:d,className:`w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 ${d?"opacity-70 cursor-not-allowed":""}`,children:d?E.jsxs(E.Fragment,{children:[E.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Sign Up"})})]}),E.jsxs("div",{className:"mt-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-300"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or sign up with"})})]}),E.jsx("div",{className:"mt-6",children:E.jsxs("button",{onClick:v,disabled:d,className:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:[E.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"Google logo",className:"h-5 w-5 mr-2"}),"Google"]})})]}),E.jsxs("div",{className:"mt-6 text-center text-sm",children:[E.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),E.jsx(ue,{to:"/login",className:"font-medium text-teal-600 hover:text-teal-500",children:"Log in"})]})]})})}function C7(){const[n]=hp(xi),t=Fo(),{darkMode:e,setDarkMode:i}=ov(),[s,a]=B.useState(null),[l,u]=B.useState({displayName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",language:"en",notifications:!0}),[d,f]=B.useState({}),[p,y]=B.useState(""),[v,T]=B.useState(!1),[S,N]=B.useState({length:!1,uppercase:!1,number:!1,specialChar:!1});B.useEffect(()=>{if(n){const Z=Zr(Jr,`users/${n.uid}`);Yl(Z,H=>{const lt=H.val();a(lt),u(D=>({...D,displayName:n.displayName||"",email:n.email||"",language:lt?.language||"en",notifications:lt?.notifications??!0}))})}},[n]),B.useEffect(()=>{l.newPassword&&N({length:l.newPassword.length>=8,uppercase:/[A-Z]/.test(l.newPassword),number:/\d/.test(l.newPassword),specialChar:/[!@#$%^&*(),.?":{}|<>]/.test(l.newPassword)})},[l.newPassword]);const C=Z=>{const{name:H,value:lt,type:D,checked:I}=Z.target;u(k=>({...k,[H]:D==="checkbox"?I:lt}))},L=async Z=>{Z.preventDefault(),T(!0),f({}),y("");try{if(l.newPassword&&l.newPassword!==l.confirmPassword)throw new Error("New passwords do not match");const H={};l.displayName!==n.displayName&&(H.displayName=l.displayName),H.language=l.language,H.notifications=l.notifications,H.darkMode=e,await X1(Zr(Jr,`users/${n.uid}`),H),y("Settings updated successfully!")}catch(H){console.error("Update error:",H),f({general:H.message||"Failed to update settings"})}finally{T(!1)}},W=()=>{const Z=!e;i(Z),n&&X1(Zr(Jr,`users/${n.uid}`),{darkMode:Z})},$=async()=>{try{await xi.signOut(),t("/login")}catch(Z){console.error("Logout error:",Z)}};return n?E.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${e?"dark bg-gray-900":"bg-gray-50"}`,children:[E.jsx("header",{className:`sticky top-0 z-10 backdrop-blur-md ${e?"bg-black/80":"bg-white/80"} shadow-sm`,children:E.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[E.jsxs(ue,{to:`/profile/${n.uid}`,className:"flex items-center text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300",children:[E.jsx(pp,{className:"mr-1"})," Back to Profile"]}),E.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-teal-400 to-teal-600 bg-clip-text text-transparent",children:"Account Settings"}),E.jsx("div",{})," "]})}),E.jsx("main",{className:"container mx-auto px-4 py-8",children:E.jsx("div",{className:"max-w-2xl mx-auto",children:E.jsx("div",{className:`p-6 rounded-xl shadow-lg mb-8 backdrop-blur-sm ${e?"bg-gray-800/70 border border-gray-700":"bg-white/80 border border-gray-200"}`,children:E.jsxs("form",{onSubmit:L,children:[d.general&&E.jsx("div",{className:`mb-4 p-3 rounded-lg ${e?"bg-red-900/50 text-red-200":"bg-red-100 text-red-800"}`,children:d.general}),p&&E.jsx("div",{className:`mb-4 p-3 rounded-lg ${e?"bg-teal-900/50 text-teal-200":"bg-teal-100 text-teal-800"}`,children:p}),E.jsxs("div",{className:"space-y-8",children:[E.jsxs("div",{children:[E.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${e?"text-gray-200":"text-gray-800"}`,children:[E.jsx(yc,{className:"mr-2 text-teal-500"}),"Profile Information"]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"displayName",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Display Name"}),E.jsx("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Email Address"}),E.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:C,disabled:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700/50 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`}),E.jsx("p",{className:`mt-1 text-xs ${e?"text-gray-400":"text-gray-500"}`,children:"Contact support to change your email address"})]})]})]}),E.jsxs("div",{children:[E.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${e?"text-gray-200":"text-gray-800"}`,children:[E.jsx(cE,{className:"mr-2 text-teal-500"}),"Security"]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"currentPassword",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Current Password"}),E.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:l.currentPassword,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,placeholder:"Required for password changes"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"newPassword",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"New Password"}),E.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:l.newPassword,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,placeholder:"Leave blank to keep current password"})]}),l.newPassword&&E.jsxs("div",{className:`p-3 rounded-lg ${e?"bg-gray-700/50":"bg-gray-100"}`,children:[E.jsx("h4",{className:`text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Password Requirements:"}),E.jsxs("ul",{className:"space-y-1 text-sm",children:[E.jsxs("li",{className:`flex items-center ${S.length?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.length?E.jsx(hh,{className:"mr-1"}):E.jsx(mm,{className:"mr-1"}),"At least 8 characters"]}),E.jsxs("li",{className:`flex items-center ${S.uppercase?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.uppercase?E.jsx(hh,{className:"mr-1"}):E.jsx(mm,{className:"mr-1"}),"At least one uppercase letter"]}),E.jsxs("li",{className:`flex items-center ${S.number?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.number?E.jsx(hh,{className:"mr-1"}):E.jsx(mm,{className:"mr-1"}),"At least one number"]}),E.jsxs("li",{className:`flex items-center ${S.specialChar?"text-green-500":e?"text-gray-400":"text-gray-600"}`,children:[S.specialChar?E.jsx(hh,{className:"mr-1"}):E.jsx(mm,{className:"mr-1"}),"At least one special character"]})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Confirm New Password"}),E.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:l.confirmPassword,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,placeholder:"Confirm your new password"})]})]})]}),E.jsxs("div",{children:[E.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${e?"text-gray-200":"text-gray-800"}`,children:[E.jsx(ck,{className:"mr-2 text-teal-500"}),"Preferences"]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h3",{className:`font-medium ${e?"text-gray-200":"text-gray-800"}`,children:"Theme"}),E.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"}`,children:e?"Dark mode":"Light mode"})]}),E.jsx("button",{type:"button",onClick:W,className:`p-2 rounded-full ${e?"bg-gray-700 text-teal-400":"bg-gray-200 text-gray-700"}`,"aria-label":"Toggle dark mode",children:e?E.jsx(E7,{className:"w-5 h-5"}):E.jsx(_7,{className:"w-5 h-5"})})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"language",className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Language"}),E.jsxs("select",{id:"language",name:"language",value:l.language,onChange:C,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,children:[E.jsx("option",{value:"en",children:"English"}),E.jsx("option",{value:"hi",children:"हिंदी (Hindi)"}),E.jsx("option",{value:"ta",children:"தமிழ் (Tamil)"}),E.jsx("option",{value:"te",children:"తెలుగు (Telugu)"}),E.jsx("option",{value:"bn",children:"বাংলা (Bengali)"}),E.jsx("option",{value:"mr",children:"मराठी (Marathi)"})]})]}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:"notifications",name:"notifications",checked:l.notifications,onChange:C,className:`h-4 w-4 rounded focus:ring-teal-500 ${e?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`}),E.jsx("label",{htmlFor:"notifications",className:`ml-2 block text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"Email Notifications"})]})]})]}),E.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row justify-between gap-4",children:[E.jsxs("button",{type:"submit",disabled:v,className:`flex-1 py-3 px-4 rounded-lg font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 flex items-center justify-center ${e?"focus:ring-offset-gray-800":"focus:ring-offset-white"}`,children:[E.jsx(y7,{className:"mr-2"}),v?"Saving...":"Save Changes"]}),E.jsxs("button",{type:"button",onClick:$,className:`flex-1 py-3 px-4 rounded-lg font-medium flex items-center justify-center ${e?"bg-red-600/90 text-white hover:bg-red-700 border border-red-700":"bg-red-500 text-white hover:bg-red-600 border border-red-600"}`,children:[E.jsx(uE,{className:"mr-2"}),"Sign Out"]})]})]})]})})})})]}):E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:E.jsxs("div",{className:"text-center p-8 rounded-xl bg-white/80 dark:bg-gray-800/70 backdrop-blur-sm shadow-lg border border-gray-200 dark:border-gray-700",children:[E.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-gray-200",children:"Please sign in to access settings"}),E.jsx(ue,{to:"/login",className:"text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300 font-medium",children:"Go to login page"})]})})}function R7(){return E.jsxs("div",{className:"text-center p-10",children:[E.jsx("h1",{className:"text-4xl font-bold text-red-600",children:"404 - Page Not Found"}),E.jsx("p",{className:"text-gray-600 mt-4",children:"Oops! The page you're looking for doesn't exist."})]})}const dk=6048e5,I7=864e5,fC=Symbol.for("constructDateFrom");function wa(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&fC in n?n[fC](t):n instanceof Date?new n.constructor(t):new Date(t)}function ji(n,t){return wa(t||n,n)}let N7={};function _p(){return N7}function td(n,t){const e=_p(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,s=ji(n,t?.in),a=s.getDay(),l=(a<i?7:0)+a-i;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function Ng(n,t){return td(n,{...t,weekStartsOn:1})}function fk(n,t){const e=ji(n,t?.in),i=e.getFullYear(),s=wa(e,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const a=Ng(s),l=wa(e,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const u=Ng(l);return e.getTime()>=a.getTime()?i+1:e.getTime()>=u.getTime()?i:i-1}function mC(n){const t=ji(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function k7(n,...t){const e=wa.bind(null,t.find(i=>typeof i=="object"));return t.map(e)}function gC(n,t){const e=ji(n,t?.in);return e.setHours(0,0,0,0),e}function D7(n,t,e){const[i,s]=k7(e?.in,n,t),a=gC(i),l=gC(s),u=+a-mC(a),d=+l-mC(l);return Math.round((u-d)/I7)}function M7(n,t){const e=fk(n,t),i=wa(n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),Ng(i)}function O7(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function P7(n){return!(!O7(n)&&typeof n!="number"||isNaN(+ji(n)))}function L7(n,t){const e=ji(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const V7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},j7=(n,t,e)=>{let i;const s=V7[n];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function s0(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const U7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},F7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},z7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B7={date:s0({formats:U7,defaultWidth:"full"}),time:s0({formats:F7,defaultWidth:"full"}),dateTime:s0({formats:z7,defaultWidth:"full"})},H7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},q7=(n,t,e,i)=>H7[n];function th(n){return(t,e)=>{const i=e?.context?String(e.context):"standalone";let s;if(i==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,u=e?.width?String(e.width):l;s=n.formattingValues[u]||n.formattingValues[l]}else{const l=n.defaultWidth,u=e?.width?String(e.width):n.defaultWidth;s=n.values[u]||n.values[l]}const a=n.argumentCallback?n.argumentCallback(t):t;return s[a]}}const W7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},G7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Y7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Q7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},K7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},X7=(n,t)=>{const e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Z7={ordinalNumber:X7,era:th({values:W7,defaultWidth:"wide"}),quarter:th({values:G7,defaultWidth:"wide",argumentCallback:n=>n-1}),month:th({values:Y7,defaultWidth:"wide"}),day:th({values:$7,defaultWidth:"wide"}),dayPeriod:th({values:Q7,defaultWidth:"wide",formattingValues:K7,defaultFormattingWidth:"wide"})};function eh(n){return(t,e={})=>{const i=e.width,s=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],a=t.match(s);if(!a)return null;const l=a[0],u=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?tH(u,y=>y.test(l)):J7(u,y=>y.test(l));let f;f=n.valueCallback?n.valueCallback(d):d,f=e.valueCallback?e.valueCallback(f):f;const p=t.slice(l.length);return{value:f,rest:p}}}function J7(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function tH(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function eH(n){return(t,e={})=>{const i=t.match(n.matchPattern);if(!i)return null;const s=i[0],a=t.match(n.parsePattern);if(!a)return null;let l=n.valueCallback?n.valueCallback(a[0]):a[0];l=e.valueCallback?e.valueCallback(l):l;const u=t.slice(s.length);return{value:l,rest:u}}}const nH=/^(\d+)(th|st|nd|rd)?/i,iH=/\d+/i,sH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rH={any:[/^b/i,/^(a|c)/i]},aH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oH={any:[/1/i,/2/i,/3/i,/4/i]},lH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mH={ordinalNumber:eH({matchPattern:nH,parsePattern:iH,valueCallback:n=>parseInt(n,10)}),era:eh({matchPatterns:sH,defaultMatchWidth:"wide",parsePatterns:rH,defaultParseWidth:"any"}),quarter:eh({matchPatterns:aH,defaultMatchWidth:"wide",parsePatterns:oH,defaultParseWidth:"any",valueCallback:n=>n+1}),month:eh({matchPatterns:lH,defaultMatchWidth:"wide",parsePatterns:cH,defaultParseWidth:"any"}),day:eh({matchPatterns:uH,defaultMatchWidth:"wide",parsePatterns:hH,defaultParseWidth:"any"}),dayPeriod:eh({matchPatterns:dH,defaultMatchWidth:"any",parsePatterns:fH,defaultParseWidth:"any"})},gH={code:"en-US",formatDistance:j7,formatLong:B7,formatRelative:q7,localize:Z7,match:mH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pH(n,t){const e=ji(n,t?.in);return D7(e,L7(e))+1}function _H(n,t){const e=ji(n,t?.in),i=+Ng(e)-+M7(e);return Math.round(i/dk)+1}function mk(n,t){const e=ji(n,t?.in),i=e.getFullYear(),s=_p(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=wa(t?.in||n,0);l.setFullYear(i+1,0,a),l.setHours(0,0,0,0);const u=td(l,t),d=wa(t?.in||n,0);d.setFullYear(i,0,a),d.setHours(0,0,0,0);const f=td(d,t);return+e>=+u?i+1:+e>=+f?i:i-1}function yH(n,t){const e=_p(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,s=mk(n,t),a=wa(t?.in||n,0);return a.setFullYear(s,0,i),a.setHours(0,0,0,0),td(a,t)}function vH(n,t){const e=ji(n,t?.in),i=+td(e,t)-+yH(e,t);return Math.round(i/dk)+1}function se(n,t){const e=n<0?"-":"",i=Math.abs(n).toString().padStart(t,"0");return e+i}const Wr={y(n,t){const e=n.getFullYear(),i=e>0?e:1-e;return se(t==="yy"?i%100:i,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):se(e+1,2)},d(n,t){return se(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return se(n.getHours()%12||12,t.length)},H(n,t){return se(n.getHours(),t.length)},m(n,t){return se(n.getMinutes(),t.length)},s(n,t){return se(n.getSeconds(),t.length)},S(n,t){const e=t.length,i=n.getMilliseconds(),s=Math.trunc(i*Math.pow(10,e-3));return se(s,t.length)}},Bl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pC={G:function(n,t,e){const i=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});case"GGGG":default:return e.era(i,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const i=n.getFullYear(),s=i>0?i:1-i;return e.ordinalNumber(s,{unit:"year"})}return Wr.y(n,t)},Y:function(n,t,e,i){const s=mk(n,i),a=s>0?s:1-s;if(t==="YY"){const l=a%100;return se(l,2)}return t==="Yo"?e.ordinalNumber(a,{unit:"year"}):se(a,t.length)},R:function(n,t){const e=fk(n);return se(e,t.length)},u:function(n,t){const e=n.getFullYear();return se(e,t.length)},Q:function(n,t,e){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return se(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,e){const i=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return se(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,e){const i=n.getMonth();switch(t){case"M":case"MM":return Wr.M(n,t);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,e){const i=n.getMonth();switch(t){case"L":return String(i+1);case"LL":return se(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,e,i){const s=vH(n,i);return t==="wo"?e.ordinalNumber(s,{unit:"week"}):se(s,t.length)},I:function(n,t,e){const i=_H(n);return t==="Io"?e.ordinalNumber(i,{unit:"week"}):se(i,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Wr.d(n,t)},D:function(n,t,e){const i=pH(n);return t==="Do"?e.ordinalNumber(i,{unit:"dayOfYear"}):se(i,t.length)},E:function(n,t,e){const i=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});case"EEEE":default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,e,i){const s=n.getDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return se(a,2);case"eo":return e.ordinalNumber(a,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});case"eeee":default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(n,t,e,i){const s=n.getDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return se(a,t.length);case"co":return e.ordinalNumber(a,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});case"cccc":default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(n,t,e){const i=n.getDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return se(s,t.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});case"iiii":default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,e){const s=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,t,e){const i=n.getHours();let s;switch(i===12?s=Bl.noon:i===0?s=Bl.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,t,e){const i=n.getHours();let s;switch(i>=17?s=Bl.evening:i>=12?s=Bl.afternoon:i>=4?s=Bl.morning:s=Bl.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let i=n.getHours()%12;return i===0&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return Wr.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Wr.H(n,t)},K:function(n,t,e){const i=n.getHours()%12;return t==="Ko"?e.ordinalNumber(i,{unit:"hour"}):se(i,t.length)},k:function(n,t,e){let i=n.getHours();return i===0&&(i=24),t==="ko"?e.ordinalNumber(i,{unit:"hour"}):se(i,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Wr.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Wr.s(n,t)},S:function(n,t){return Wr.S(n,t)},X:function(n,t,e){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return yC(i);case"XXXX":case"XX":return vo(i);case"XXXXX":case"XXX":default:return vo(i,":")}},x:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"x":return yC(i);case"xxxx":case"xx":return vo(i);case"xxxxx":case"xxx":default:return vo(i,":")}},O:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_C(i,":");case"OOOO":default:return"GMT"+vo(i,":")}},z:function(n,t,e){const i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_C(i,":");case"zzzz":default:return"GMT"+vo(i,":")}},t:function(n,t,e){const i=Math.trunc(+n/1e3);return se(i,t.length)},T:function(n,t,e){return se(+n,t.length)}};function _C(n,t=""){const e=n>0?"-":"+",i=Math.abs(n),s=Math.trunc(i/60),a=i%60;return a===0?e+String(s):e+String(s)+t+se(a,2)}function yC(n,t){return n%60===0?(n>0?"-":"+")+se(Math.abs(n)/60,2):vo(n,t)}function vo(n,t=""){const e=n>0?"-":"+",i=Math.abs(n),s=se(Math.trunc(i/60),2),a=se(i%60,2);return e+s+t+a}const vC=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},gk=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},bH=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],i=e[1],s=e[2];if(!s)return vC(n,t);let a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",vC(i,t)).replace("{{time}}",gk(s,t))},EH={p:gk,P:bH},wH=/^D+$/,xH=/^Y+$/,TH=["D","DD","YY","YYYY"];function SH(n){return wH.test(n)}function AH(n){return xH.test(n)}function CH(n,t,e){const i=RH(n,t,e);if(console.warn(i),TH.includes(n))throw new RangeError(i)}function RH(n,t,e){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const IH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kH=/^'([^]*?)'?$/,DH=/''/g,MH=/[a-zA-Z]/;function gm(n,t,e){const i=_p(),s=i.locale??gH,a=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,u=ji(n,e?.in);if(!P7(u))throw new RangeError("Invalid time value");let d=t.match(NH).map(p=>{const y=p[0];if(y==="p"||y==="P"){const v=EH[y];return v(p,s.formatLong)}return p}).join("").match(IH).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const y=p[0];if(y==="'")return{isToken:!1,value:OH(p)};if(pC[y])return{isToken:!0,value:p};if(y.match(MH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:p}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));const f={firstWeekContainsDate:a,weekStartsOn:l,locale:s};return d.map(p=>{if(!p.isToken)return p.value;const y=p.value;(AH(y)||SH(y))&&CH(y,t,String(n));const v=pC[y[0]];return v(u,y,s.localize,f)}).join("")}function OH(n){const t=n.match(kH);return t?t[1].replace(DH,"'"):n}function PH(){const[n]=hp(xi),{userId:t}=AM(),e=Fo(),{darkMode:i}=ov(),[s,a]=B.useState(null),[l,u]=B.useState(null),[d,f]=B.useState([]),[p,y]=B.useState([]),[v,T]=B.useState("questions"),[S,N]=B.useState(!0),C=n&&t===n.uid;B.useEffect(()=>{if(!t){e(n?`/profile/${n.uid}`:"/login");return}const H=Zr(Jr,`users/${t}`),lt=Yl(H,U=>{const M=U.val();a(M),N(!1)});(async()=>{try{const U=await getDoc(doc(Ze,"users",t));U.exists()&&u(U.data())}catch(U){console.error("Error fetching user:",U)}})();const I=wo(ii(Ze,"questions"),zh("userId","==",t)),k=xo(I,U=>{f(U.docs.map(M=>({id:M.id,...M.data()})))}),P=wo(ii(Ze,"answers"),zh("userId","==",t)),V=xo(P,U=>{y(U.docs.map(M=>({id:M.id,...M.data()})))});return()=>{lt(),k(),V()}},[t,n,e]);const L=async()=>{try{await xi.signOut(),e("/login")}catch(H){console.error("Logout error:",H)}};if(S)return E.jsx("div",{className:`min-h-screen flex items-center justify-center ${i?"dark bg-gray-900":"bg-gray-50"}`,children:E.jsx("div",{className:"animate-pulse",children:"Loading profile..."})});if(!s)return E.jsx("div",{className:`min-h-screen flex items-center justify-center ${i?"dark bg-gray-900":"bg-gray-50"}`,children:E.jsxs("div",{className:`p-8 rounded-xl shadow-lg ${i?"bg-gray-800":"bg-white"}`,children:[E.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User not found"}),E.jsx(ue,{to:"/",className:"text-teal-600 hover:underline",children:"Return home"})]})});const W=l?.displayName||s?.displayName||"User",$=C?n.email:null,Z=n?.metadata?.creationTime?gm(new Date(n.metadata.creationTime),"MMM yyyy"):"Recently";return E.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${i?"dark bg-gray-900":"bg-gray-50"}`,children:[E.jsx("header",{className:`sticky top-0 z-10 backdrop-blur-md ${i?"bg-black/80":"bg-white/80"} shadow-sm`,children:E.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[E.jsx(ue,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-teal-400 to-teal-600 bg-clip-text text-transparent",children:"StudiQ"}),C&&E.jsxs("nav",{className:"flex items-center space-x-4",children:[E.jsxs(ue,{to:"/settings",className:`flex items-center ${i?"text-gray-300 hover:text-teal-400":"text-gray-700 hover:text-teal-600"}`,children:[E.jsx(uk,{className:"mr-1"})," Settings"]}),E.jsxs("button",{onClick:L,className:`flex items-center ${i?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-800"}`,children:[E.jsx(uE,{className:"mr-1"})," Sign Out"]})]})]})}),E.jsx("main",{className:"container mx-auto px-4 py-8",children:E.jsxs("div",{className:"max-w-6xl mx-auto",children:[E.jsx("div",{className:`p-6 rounded-xl shadow-lg mb-6 ${i?"bg-gray-800/70":"bg-white/80"} backdrop-blur-sm`,children:E.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[E.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center text-5xl ${i?"bg-teal-900 text-teal-300":"bg-teal-100 text-teal-800"}`,children:W.charAt(0)}),E.jsxs("div",{className:"flex-1 text-center md:text-left",children:[E.jsxs("h1",{className:`text-3xl font-bold mb-2 ${i?"text-gray-100":"text-gray-800"}`,children:[W,C&&E.jsx("span",{className:"ml-2 text-sm font-normal px-2 py-1 rounded-full bg-teal-500/10 text-teal-500",children:"You"})]}),$&&E.jsx("p",{className:`mb-4 ${i?"text-gray-400":"text-gray-600"}`,children:$}),E.jsxs("div",{className:`flex flex-wrap justify-center md:justify-start gap-4 ${i?"text-gray-300":"text-gray-700"}`,children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx(cC,{className:"mr-2 text-teal-500"}),E.jsxs("span",{children:[s?.points||0," Points"]})]}),E.jsxs("div",{className:"flex items-center",children:[E.jsx(uC,{className:"mr-2 text-teal-500"}),E.jsxs("span",{children:[d.length," Questions"]})]}),E.jsxs("div",{className:"flex items-center",children:[E.jsx(Ah,{className:"mr-2 text-teal-500"}),E.jsxs("span",{children:[p.length," Answers"]})]}),C&&s?.bookmarks&&E.jsxs("div",{className:"flex items-center",children:[E.jsx(Rg,{className:"mr-2 text-teal-500"}),E.jsxs("span",{children:[Object.keys(s.bookmarks).length," Bookmarks"]})]})]})]})]})}),E.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-${C?"4":"3"} gap-4 mb-6 ${i?"text-gray-200":"text-gray-800"}`,children:[E.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[E.jsxs("h3",{className:"font-semibold flex items-center",children:[E.jsx(cC,{className:"mr-2 text-yellow-500"})," Best Answers"]}),E.jsx("p",{className:"text-2xl font-bold",children:s?.bestAnswers||0})]}),E.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[E.jsxs("h3",{className:"font-semibold flex items-center",children:[E.jsx(Ig,{className:"mr-2 text-blue-500"})," Active Days"]}),E.jsx("p",{className:"text-2xl font-bold",children:s?.activeDays||1})]}),C&&E.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[E.jsxs("h3",{className:"font-semibold flex items-center",children:[E.jsx(yc,{className:"mr-2 text-green-500"})," Member Since"]}),E.jsx("p",{className:"text-xl",children:Z})]}),C&&E.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-800":"bg-gray-100"}`,children:[E.jsxs("h3",{className:"font-semibold flex items-center",children:[E.jsx(Ah,{className:"mr-2 text-purple-500"})," Answer Rate"]}),E.jsx("p",{className:"text-2xl font-bold",children:d.length>0?`${Math.round(d.filter(H=>H.answered).length/d.length*100)}%`:"0%"})]})]}),E.jsx("div",{className:`mb-4 border-b ${i?"border-gray-700":"border-gray-200"}`,children:E.jsxs("nav",{className:"flex space-x-4",children:[E.jsxs("button",{onClick:()=>T("questions"),className:`py-2 px-4 font-medium ${v==="questions"?i?"text-teal-400 border-b-2 border-teal-400":"text-teal-600 border-b-2 border-teal-600":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:["Questions (",d.length,")"]}),E.jsxs("button",{onClick:()=>T("answers"),className:`py-2 px-4 font-medium ${v==="answers"?i?"text-teal-400 border-b-2 border-teal-400":"text-teal-600 border-b-2 border-teal-600":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:["Answers (",p.length,")"]}),C&&E.jsxs("button",{onClick:()=>T("bookmarks"),className:`py-2 px-4 font-medium ${v==="bookmarks"?i?"text-teal-400 border-b-2 border-teal-400":"text-teal-600 border-b-2 border-teal-600":i?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:["Bookmarks (",s?.bookmarks?Object.keys(s.bookmarks).length:0,")"]})]})}),E.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${i?"bg-gray-800/70":"bg-white/80"} backdrop-blur-sm`,children:[v==="questions"&&E.jsxs("div",{className:"space-y-4",children:[E.jsxs("h2",{className:`text-xl font-semibold mb-4 ${i?"text-gray-200":"text-gray-800"}`,children:[E.jsx(uC,{className:"inline mr-2"})," ",C?"My":`${W}'s`," Questions"]}),d.length>0?d.map(H=>E.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700/50 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[E.jsx(ue,{to:`/question/${H.id}`,className:`font-medium block mb-1 ${i?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:H.title}),E.jsxs("div",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:[E.jsx("span",{className:"capitalize",children:H.subject})," •",H.createdAt?.toDate?gm(H.createdAt.toDate(),"MMM d, yyyy"):"Recent"," •",H.answered?E.jsx("span",{className:"text-green-500 ml-1",children:"Answered"}):E.jsx("span",{className:"text-yellow-500 ml-1",children:"Pending"})]})]},H.id)):E.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:C?"You haven't asked any questions yet":"This user hasn't asked any questions yet"})]}),v==="answers"&&E.jsxs("div",{className:"space-y-4",children:[E.jsxs("h2",{className:`text-xl font-semibold mb-4 ${i?"text-gray-200":"text-gray-800"}`,children:[E.jsx(Ah,{className:"inline mr-2"})," ",C?"My":`${W}'s`," Answers"]}),p.length>0?p.map(H=>E.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700/50 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[E.jsxs(ue,{to:`/question/${H.questionId}`,className:`font-medium block mb-1 ${i?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:[H.content.substring(0,100),"..."]}),E.jsxs("div",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:[H.createdAt?.toDate?gm(H.createdAt.toDate(),"MMM d, yyyy"):"Recent"," •",H.isBestAnswer?E.jsx("span",{className:"text-green-500 ml-1",children:"Marked as Best"}):E.jsx("span",{className:"text-gray-500 ml-1",children:"Regular answer"})]})]},H.id)):E.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:C?"You haven't answered any questions yet":"This user hasn't answered any questions yet"})]}),v==="bookmarks"&&C&&E.jsxs("div",{className:"space-y-4",children:[E.jsxs("h2",{className:`text-xl font-semibold mb-4 ${i?"text-gray-200":"text-gray-800"}`,children:[E.jsx(Rg,{className:"inline mr-2"})," My Bookmarks"]}),s?.bookmarks&&Object.keys(s.bookmarks).length>0?E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(s.bookmarks).map(H=>E.jsxs("div",{className:`p-4 rounded-lg ${i?"bg-gray-700/50 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[E.jsx(ue,{to:`/question/${H}`,className:`font-medium block ${i?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:s.bookmarks[H].title||"Bookmarked Question"}),E.jsxs("div",{className:`text-sm mt-1 ${i?"text-gray-400":"text-gray-600"}`,children:["Bookmarked on ",gm(new Date(s.bookmarks[H].timestamp),"MMM d, yyyy")]})]},H))}):E.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:"No bookmarks yet"})]})]})]})})]})}function LH(){const[n]=hp(xi);Fo();const[t,e]=B.useState(!1),[i,s]=B.useState("faq"),[a,l]=B.useState({name:"",email:"",subject:"",message:""}),[u,d]=B.useState(!1);B.useEffect(()=>{const T=localStorage.getItem("darkMode")==="true";e(T),document.documentElement.classList.toggle("dark",T)},[]);const f=T=>{const{name:S,value:N}=T.target;l(C=>({...C,[S]:N}))},p=T=>{T.preventDefault(),console.log("Contact form submitted:",a),d(!0),l({name:"",email:"",subject:"",message:""}),setTimeout(()=>d(!1),5e3)},y=[{question:"How do I post a question?",answer:"Navigate to the home page and click on the 'Ask your question' box. Type your question, select a subject, and click 'Post Question'."},{question:"How do I earn points?",answer:"You earn points by asking questions, providing helpful answers, and receiving upvotes on your contributions."},{question:"Can I change my display name?",answer:"Yes, you can change your display name in the Account Settings page under Profile Information."},{question:"How do I report inappropriate content?",answer:"Click on the three dots next to any question or answer and select 'Report'. Our moderation team will review it."},{question:"Is there a mobile app available?",answer:"Currently we're web-only, but our site is fully responsive and works great on mobile browsers."}],v=[{title:"Getting Started",content:"Learn how to create an account, set up your profile, and make your first post."},{title:"Community Guidelines",content:"Understand our rules and expectations for participation in the StudiQ community."},{title:"Answering Questions",content:"Tips for providing helpful, high-quality answers that earn you points and reputation."},{title:"Privacy & Security",content:"How we protect your data and what you can do to keep your account secure."}];return E.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${t?"dark bg-gray-900":"bg-gray-50"}`,children:[E.jsx("header",{className:`sticky top-0 z-10 backdrop-blur-md ${t?"bg-black/80":"bg-white/80"} shadow-sm`,children:E.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[E.jsxs(ue,{to:n?"/":"/login",className:"flex items-center text-teal-600 hover:text-teal-700",children:[E.jsx(pp,{className:"mr-1"})," ",n?"Back to Home":"Back to Login"]}),E.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-teal-400 to-teal-600 bg-clip-text text-transparent",children:"Help Center"}),E.jsx("div",{})," "]})}),E.jsx("main",{className:"container mx-auto px-4 py-8",children:E.jsx("div",{className:"max-w-4xl mx-auto",children:E.jsx("div",{className:`p-6 rounded-xl shadow-lg mb-8 backdrop-blur-sm ${t?"bg-gray-800/70 border border-gray-700":"bg-white/80 border border-gray-200"}`,children:E.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[E.jsx("div",{className:"md:w-1/3",children:E.jsxs("div",{className:`p-4 rounded-lg sticky top-4 ${t?"bg-gray-700/50":"bg-gray-100"}`,children:[E.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[E.jsx(hC,{className:"mr-2 text-teal-500"}),"Help Topics"]}),E.jsxs("nav",{className:"space-y-2",children:[E.jsx("button",{onClick:()=>s("faq"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="faq"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"FAQs"}),E.jsx("button",{onClick:()=>s("guides"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="guides"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"Guides"}),E.jsx("button",{onClick:()=>s("contact"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="contact"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"Contact Us"}),E.jsx("button",{onClick:()=>s("community"),className:`w-full text-left px-3 py-2 rounded transition-all ${i==="community"?"bg-teal-500/10 text-teal-500 border border-teal-500/30":t?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-200 text-gray-700"}`,children:"Community"})]})]})}),E.jsxs("div",{className:"md:w-2/3",children:[i==="faq"&&E.jsxs("div",{children:[E.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[E.jsx(hC,{className:"mr-2 text-teal-500"}),"Frequently Asked Questions"]}),E.jsx("div",{className:"space-y-4",children:y.map((T,S)=>E.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700/50 border border-gray-600":"bg-white border border-gray-200"}`,children:[E.jsx("h3",{className:`font-medium mb-2 ${t?"text-teal-400":"text-teal-600"}`,children:T.question}),E.jsx("p",{className:t?"text-gray-300":"text-gray-700",children:T.answer})]},S))})]}),i==="guides"&&E.jsxs("div",{children:[E.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[E.jsx(g7,{className:"mr-2 text-teal-500"}),"Helpful Guides"]}),E.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:v.map((T,S)=>E.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700/50 border border-gray-600":"bg-white border border-gray-200"}`,children:[E.jsx("h3",{className:`font-medium mb-2 ${t?"text-teal-400":"text-teal-600"}`,children:T.title}),E.jsx("p",{className:t?"text-gray-300":"text-gray-700",children:T.content}),E.jsx("button",{className:`mt-3 text-sm ${t?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:"Read more →"})]},S))})]}),i==="contact"&&E.jsxs("div",{children:[E.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[E.jsx(hE,{className:"mr-2 text-teal-500"}),"Contact Support"]}),u?E.jsx("div",{className:`p-4 rounded-lg ${t?"bg-teal-900/30 text-teal-200":"bg-teal-100 text-teal-800"}`,children:"Thank you for contacting us! We'll get back to you within 24 hours."}):E.jsxs("form",{onSubmit:p,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Your Name"}),E.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Email Address"}),E.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"subject",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Subject"}),E.jsxs("select",{id:"subject",name:"subject",value:a.subject,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`,children:[E.jsx("option",{value:"",children:"Select a topic"}),E.jsx("option",{value:"account",children:"Account Issues"}),E.jsx("option",{value:"technical",children:"Technical Problems"}),E.jsx("option",{value:"billing",children:"Billing Questions"}),E.jsx("option",{value:"feedback",children:"Feedback"}),E.jsx("option",{value:"other",children:"Other"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Message"}),E.jsx("textarea",{id:"message",name:"message",rows:"5",value:a.message,onChange:f,required:!0,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"}`})]}),E.jsx("button",{type:"submit",className:`w-full py-3 px-4 rounded-lg font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 ${t?"focus:ring-offset-gray-800":"focus:ring-offset-white"}`,children:"Send Message"})]})]}),i==="community"&&E.jsxs("div",{children:[E.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${t?"text-gray-200":"text-gray-800"}`,children:[E.jsx(hk,{className:"mr-2 text-teal-500"}),"Community Resources"]}),E.jsxs("div",{className:`p-6 rounded-lg mb-6 ${t?"bg-gray-700/50 border border-gray-600":"bg-white border border-gray-200"}`,children:[E.jsx("h3",{className:`text-lg font-medium mb-3 ${t?"text-teal-400":"text-teal-600"}`,children:"Join Our Community"}),E.jsx("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-700"}`,children:"Connect with other learners, ask questions, and share knowledge in our active community forums."}),E.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[E.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-600/30":"bg-gray-100"}`,children:[E.jsxs("h4",{className:`font-medium mb-2 ${t?"text-gray-200":"text-gray-800"}`,children:[E.jsx(Ah,{className:"inline mr-2 text-teal-500"}),"Discussion Forums"]}),E.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Participate in topic-specific discussions with students and educators."}),E.jsx("button",{className:`mt-3 text-sm ${t?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:"Visit Forums →"})]}),E.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-600/30":"bg-gray-100"}`,children:[E.jsxs("h4",{className:`font-medium mb-2 ${t?"text-gray-200":"text-gray-800"}`,children:[E.jsx(ck,{className:"inline mr-2 text-teal-500"}),"Local Study Groups"]}),E.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Find or create study groups in your area or language."}),E.jsx("button",{className:`mt-3 text-sm ${t?"text-teal-400 hover:text-teal-300":"text-teal-600 hover:text-teal-800"}`,children:"Find Groups →"})]})]})]})]})]})]})})})})]})}function VH(){return E.jsx(VC,{children:E.jsxs(zM,{children:[E.jsx(Gr,{path:"/",element:E.jsx(T7,{})}),E.jsx(Gr,{path:"/login",element:E.jsx(S7,{})}),E.jsx(Gr,{path:"/signup",element:E.jsx(A7,{})}),E.jsx(Gr,{path:"/profile/:userId",element:E.jsx(PH,{})}),E.jsx(Gr,{path:"/help",element:E.jsx(LH,{})}),E.jsx(Gr,{path:"/settings",element:E.jsx(C7,{})}),E.jsx(Gr,{path:"*",element:E.jsx(R7,{})})]})})}function jH(){return E.jsx(VC,{children:E.jsx(a9,{children:E.jsx(uO,{basename:"/StudiQ",children:E.jsx(VH,{})})})})}KD.createRoot(document.getElementById("root")).render(E.jsx(B.StrictMode,{children:E.jsx(jH,{})}));
